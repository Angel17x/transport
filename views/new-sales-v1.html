<nav-bar></nav-bar>
<main style="margin:4%;padding:2%;margin-top:0px;overflow-y:auto;">
	<div class="container-fluid" style="width:100%;">
		<loading-service></loading-service>  
		<msg-component [mensaje]="mensaje" (valueChanged)="getValueMsg($event)"></msg-component> 
		<div  class="row" style="margin-top:15px;">
    		<div class="col-lg-12 col-md-12 col-sm-12 col-12" style="text-align:center;">
				<h3 class="font-regular d-none d-sm-inline-block" style="margin-bottom:0px;padding-bottom:0px;margin-top:0px;">{{title}}</h3>
				<h5 class="font-regular d-sm-none" style="margin-bottom:0px;padding-bottom:0px;margin-top:0px;">{{title}}</h5>
			</div>
		</div>
		<section class="content-home" style="margin-top:10px;">
			<div class="searchbox-container noPrint">
				<div class="container">
					<div class="ibenew" style="position:relative;">
						<div class="tabbable" id="searchBoxContainer">
							<div id="ibeTab" class="tab-pane active" role="tabpanel">
								<div class="home-tpl">
									<div class="section-home">
										<div class="cont-search cont-search-ibe">
											<div class="cont-checks cont-ext-1">
												<div class="form-check form-check-inline">
													<input type="radio" class="form-check-input" id="btnIda" name="btnIda" value="IDA" [(ngModel)]="typeViaje">
													<label class="form-check-label font-regular label-radio-busqueda" for="btnIda">&nbsp;Ida</label>
												</div>
											</div>
											<div class="cont-inputs">
												<div class="all-inputs">
													<div class="inputs-row">
														<div class="input input-promoCode cont-ext-4">
															<div class="icon location"></div>
															<div class="select-drop">
																<div class="info-airport info-airport-destino">
																	<span class="from-lb">Destino</span>
																	<div class="select" (click)="openModalDestinos()">
																		<span class="font-regular">{{destinoSelectedMostrar}}</span>
																		<div class="icon-chev"></div>
																	</div>	
																</div>
															</div>
														</div>
														<div class="input input-promoCode cont-ext-4">
															<div class="icon calendar"></div>
															<div class="select-drop">
																<div class="info-airport">
																	<span class="from-lb">Fecha de salida</span>
																	<input type="date" class="input-promocode font-regular" style="text-transform: lowercase;" [(ngModel)]="fecha_ida">
																</div>
															</div>
														</div>
														<div class="input">
															<div class="btn-search bt-search font-thin" style="width: 100%;" (click)="buscar()">Buscar viaje</div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="ng-star-inserted" style="margin-top:10px;" *ngIf="listViajes!=null && listViajes.length!=0">
											<div class="content-card-header">
												<div class="content-card-title" style='display:flex;'>
													<div class="icon icon-departure" style="margin-right:10px;">
														<img src="assets/images/bus_lateral_morado.svg" height="40px">
													</div>
													<div style="margin-left:10px;">
														<h1 class="font-thin" style="font-size:30px;" *ngIf="destinoSelectedMostrar!=null">{{destinoSelectedMostrar}}</h1>
													</div>
												</div>
											</div>
											<div class="content-card-list bundle ng-star-inserted" style="margin-top:15px;">
												<div class="ng-star-inserted container-selected">
													<div>
														<div  style="border:1px solid #bebebe;padding:15px;margin:5px;"class="row" *ngFor="let item of listViajes let i = index;">
															<div class="col-lg-3 col-md-3 col-sm-6 col-12" style="text-align:left;margin-top:10px;">
																<div class="form-check form-check-inline">
																	<input type="radio" class="form-check-input" id="viaje{{i}}" name="viaje{{i}}" [value]="item.id" [(ngModel)]="viajeSeleccionado">
																	<label class="form-check-label font-regular" [attr.for]="'viaje' + i" style="font-size:16px;color:black">Nro.&nbsp;{{item.sequence}}</label>
																</div>
															</div>
															<div class="col-lg-3 col-md-3 col-sm-6 col-12" style="text-align:center;margin-top:10px;">
																<label class="font-regular" style="color:#757575;font-size:16px;" *ngIf="item.formatted_departure_date!=null">Salida:&nbsp;<b class="font-bold">{{item.formatted_departure_date}}</b></label><br>
															</div>
															<div class="col-lg-3 col-md-3 col-sm-6 col-12" style="text-align:center;margin-top:10px;">
																<label class="font-regular" style="color:#757575;font-size:15px;"><b>{{item.vehicle_type_name}}</b></label><br>
																<label class="font-regular" style="color:#757575;font-size:15px;margin-top:5px;"><b class="font-bold">Disponibilidad:&nbsp;</b><b style="color:#4caf50;">{{item.seats_available}}</b></label>
															</div>
															<div class="col-lg-3 col-md-3 col-sm-6 col-12" style="text-align:right;margin-top:10px;">
																<label class="font-regular" style="font-size:16px;">{{item.bs_cambio}}&nbsp;</label><br>
																<label class="font-regular" style="font-size:18px;margin-top:10px;">{{item.tarifa}}&nbsp;</label>
															</div>
														</div>
														<div *ngIf="listViajes!=null && listViajes.length!=0">
															<custom-table 
																[size]="paginActualViaje.count" 
																[labelSize]="'Total'"
																[alignSize]="'alignRight'" 
																[totalPage]="detallePorPaginaViaje"
																[totalPageRecords]="totalPageViaje" 
																[pageSelected]="pageSelectedViaje"
																(cantidadTransaccionesTabla)="getCantidadSelectedViajes($event)"
																[ocultarCantidad]="'true'"
																(valueFirst)="getValueFirstViajes($event)" (valuePrevious)="getValuePreviousViajes($event)"
																(valueNext)="getValueNextViajes($event)" (valueLast)="getValueLastViajes($event)"
																(valueChangeRecords)="getValueChangeRecordsViajes($event)">
																</custom-table>
														</div>
													</div>		
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row" >
						<div class="content-card-header col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="listViajes!=null && listViajes.length!=0 && listPassenger!=null && listPassenger.length!=0">
							<div class="content-card-title" style='display:flex;'>
								<div class="icon icon-departure" style="margin-right:10px;">
									<img src="assets/images/man.svg" height="40px">
								</div>
								<div style="margin-left:10px;">
									<h1 class="font-thin" style="font-size:30px;">PASAJEROS</h1>
								</div>
							</div>
						</div>
				<div class="col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="listViajes!=null && listViajes.length!=0 && listPassenger!=null && listPassenger.length!=0">
					<div class="table-responsive-vertical shadow-z-1 " style="width:100%;margin-top:15px;">
						<table id="table-add-feature" class="table table-hover table-mc-light-blue" *ngIf="listPassenger!=null && listPassenger.length!=0">
							<thead>
								<tr>
									<th class="font-bold" style="text-align:left;">RIF/CI</th>
									<th class="font-bold" style="text-align:left;">Nombres y Apellidos</th>
									<th class="font-bold" style="text-align:left;">Tipo</th>
									<th class="font-bold" style="text-align:right;"></th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let item of listPassenger let i = index;">
									<td  class="font-regular"  style="text-align:left;padding:5px;">
										<div style="display:flex;">
											<div>
												<div class="form-floating" style="margin-right:5px;margin-top:5px;">
													<select class="form-select font-regular" id="id_doc{{i}}" name="id_doc{{i}}" aria-label="Seleccione el tipo" [(ngModel)]="item.id_doc" style="width:100px;">
														<option *ngFor="let item of listDocs let i = index;" [value]="item">{{item}}</option>
													</select>
													<label [attr.for]="'id_doc' + i+' font-regular'">Tipo</label>
												</div>
											</div>
											<div style="width:100%;">
												<div  class="form-floating" style="margin-top:5px;">
													<input autocomplete="off" type="text" class="form-control font-regular" id="doc{{i}}" name="doc{{i}}" [(ngModel)]="item.doc" maxlength="9" (keypress)="keyPressNumber($event)">
													 <label [attr.for]="'doc' + i" class="font-regular">RIF/CI</label>
												</div>
											</div>
										</div>
									</td>
									<td  class="font-regular"  style="text-align:left;padding:5px;">
										 <div class="form-floating" style="margin-top:5px;">
											<input type="text" autocomplete="off" class="form-control font-regular" id="name{{i}}" name="name{{i}}" [(ngModel)]="item.name" style="text-transform:uppercase;" maxlength="40">
											<label [attr.for]="'name' + i" class="font-regular">Nombres Apellidos</label>
										</div>
									</td>
									<td  class="font-regular"  style="text-align:left;padding:5px;">
										<div class="form-floating" style="margin-right:5px;margin-top:5px;">
											<select class="form-select font-regular" id="type{{i}}" name="type{{i}}" aria-label="Seleccione el tipo" [(ngModel)]="item.type">
												<option *ngFor="let item of listTypes let i = index;" [value]="item.value">{{item.name}}</option>
											</select>
											<label [attr.for]="'type' + i+' font-regular'">Tipo Pasaje</label>
										</div>
									</td>
									<td data-title="Acciones" class="font-regular" style="text-align:right;padding:5px;vertical-align:middle;">
										<a (click)="deletePassenger(i)" style="cursor:pointer;"><img src="assets/images/cancelar.svg" width="24px" height="24px"></a>
									</td>
								</tr>
							</tbody>
						</table>
						<a class="font-bold" (click)="addPassenger()" *ngIf="listPassenger!=null && listPassenger.length!=0" style="float:right;text-decoration:underline;margin-top:0px;cursor:pointer;">
							<img src="assets/images/add_black.svg" width="24px" height="24px">Nuevo pasajero
						</a>
						<br>
						
					</div>
					<div style="text-align:right;margin-top:15px;">
							<button type="button" class="btn btn-light btn-lg" style="border:1px solid #e0e0e0;margin:10px;font-size:14px;" (click)="back()">Regresar</button>
							<button type="button" class="btn btn-dark btn-lg" style="margin:10px;font-size:14px;" (click)="clean()">Limpiar</button>
							<button class="btn btn-lg button-done" style="margin:10px;font-size:14px;" (click)="done()">Crear reservación</button>
						</div>
				</div>
				<div class="col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="(listViajes!=null && listViajes.length!=0)&& (listPassenger==null || listPassenger.length==0)" style="text-align:center;padding:20px;">
					<a class="btn btn-dark" (click)="addPassenger()"><img src="assets/images/add.svg" width="24px" height="24px">Nuevo pasajero</a>
				</div>
			</div>
				</div>
			</div>
		</section>
		
	</div>
</main>
<div class="modal" tabindex="-1" id="modalSearchViajes">
	<div class="modal-dialog">
		<div class="modal-content" style="padding:15px;">
			<div class="modal-header">
				<h5 class="modal-title font-bold">Buscar</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body"  style="margin:2px;border:1px solid #bebebe;background:#eeeeee;">
				<div class="row" style="margin-top:0px;">
					<div class="col-lg-12 col-md-12 col-sm-12 col-12">
						<label class="font-regular" style="font-size:12px;margin-bottom:0px;">Destino</label>
						<div style="display:flex;">
							<input type="text" class="font-regular" style="font-size:12px;text-transform:uppercase;border-radius:5px;margin-right:5px;" name="destino_buscar" id="destino_buscar" class="form-control font-regular" [(ngModel)]="destino_buscar" maxlength="50" autocomplete="off" (keyup)="keyupsearch($event)">
							<img src="assets/images/search_black.svg" style="cursor:pointer;" (click)="buscarDestinos()">
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="listDestinos==null || listDestinos.length==0">
						<div  *ngIf="mostrarCargando==false"  style="text-align:center;padding-top:45px;vertical-align:middle;" >
							<h6 class="font-bold" style="color:#9e9e9e;" *ngIf="mensajeServicio==null">No hay registros</h6>
							<h6 class="font-bold" style="color:#9e9e9e;" *ngIf="mensajeServicio!=null">{{mensajeServicio}}</h6>
						</div>
						<div style="text-align:center;padding-top:45px;vertical-align:middle;" *ngIf="mostrarCargando==true">
							<div style="text-align:center;padding-top:20px;padding-bottom:20px;text-align:center">
								 <img [src]="imagenCargando" style="width:70px;heigth:70px;box-shadow:none;text-align:center;">
							</div>
						</div>
					</div>
					<div class="col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="listDestinos!=null && listDestinos.length!=0">
						<div class="table-responsive-vertical shadow-z-1 " style="width:100%;margin-top:15px;">
							<table id="table" class="table table-hover table-mc-light-blue">
								<thead>
									<tr>
										<th class="font-bold" style="padding-top:10px;padding-bottom:10px;word-wrap: break-word;font-size:14px;">Destinos disponibles</th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor="let item of listDestinos let i = index;" style="cursor:pointer;" (click)="selectedDestino(item)">
										<td *ngIf="item.code!=null" data-title="Nombre" class="font-regular" style="padding-top:10px;padding-bottom:10px;word-wrap: break-word;font-size:14px;margin-bottom:0px;margin-top:0px;" scope="row">
											&nbsp;<label class="font-bold" style="font-size:14px;">{{item.code}}</label>&nbsp;-&nbsp;<label class="font-regular" style="font-size:14px;">{{item.name}}</label><br>
										<td data-title="Nombre" *ngIf="item.code==null" class="font-regular" style="padding-top:10px;padding-bottom:10px;word-wrap: break-word;font-size:14px;margin-bottom:0px;margin-top:0px;" scope="row">
											
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<custom-table 
							[size]="pagingActual.count" 
							[labelSize]="'Total'"
							[alignSize]="'alignRight'" 
							[totalPage]="detallePorPagina"
							[totalPageRecords]="totalPage" 
							[pageSelected]="pageSelected"
							(cantidadTransaccionesTabla)="getCantidadSelected($event)"
							[ocultarCantidad]="'true'"
							(valueFirst)="getValueFirst($event)" (valuePrevious)="getValuePrevious($event)"
							(valueNext)="getValueNext($event)" (valueLast)="getValueLast($event)"
							(valueChangeRecords)="getValueChangeRecords($event)">
						</custom-table>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary font-regular" data-bs-dismiss="modal">Cerrar</button>
			</div>
		</div>
	</div>
</div>
