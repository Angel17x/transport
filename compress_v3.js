function _(e){return null!=e&&(e=e.toLowerCase(),"undefined"!=typeof i18n&&i18n[e])?i18n[e]:e}var i18n={message_dflt_1:"Error al guardar la linea de transporte",message_dflt_2:"Error al actualizar datos de la linea de transporte",message_dflt_3:"Error al obtener datos de la linea de transporte",message_dflt_4:"Error al consultar registros",message_dflt_5:"Error al obtener propietarios asociados a la linea de conductores",message_dflt_6:"Error al obtener unidades afiliadas a la linea de transporte",message_dflt_7:"Error al desbloquear conductor",message_dflt_8:"Error al eliminar pasajero",message_dflt_9:"Error al eliminar linea de transporte",message_dflt_10:"Error al eliminar automovil",message_dflt_11:"Error al borrar ruta",message_dflt_12:"Error al deshabilitar ruta",message_dflt_13:"Error al reactivar ruta",message_dflt_14:"Error al guardar datos de la ruta",message_dflt_15:"Error al actualizar datos de la ruta",message_dflt_16:"Error al obtener detalles de la ruta",message_dflt_17:"Error al borrar viaje",message_dflt_18:"Error al suspender viaje",message_dflt_19:"Error al activar viaje",message_dflt_20:"Error al cancelar el viaje",message_dflt_21:"Error al completar el viaje",message_dflt_22:"No hay registros",message_dflt_23:"Error al cargar detalles de la linea",message_dflt_24:"No tiene oficinas registradas",message_dflt_25:"No hay conductores asociados a esta linea",message_dflt_26:"adicionar parada",message_dflt_27:"No hay paradas",message_dflt_28:"Error al guardar datos de la ruta",message_dflt_29:"Error al guardar parada",message_dflt_30:"Error al borrar parada",message_dflt_31:"Error al activar parada",message_dflt_32:"Error al deshabilitar parada",message_dflt_33:"Error al borrar transporte",message_dflt_34:"Error al activar transporte",message_dflt_35:"Error al deshabilitar transporte",message_dflt_36:"Error al cargar detalles transporte",message_dflt_37:"Error al guardar detalles transporte",message_dflt_38:"Error al actualizar detalles transporte",message_dflt_39:"Error al borrar propietario",message_dflt_40:"Error al activar propietario",message_dflt_41:"Error al suspender propietario",message_dflt_42:"Error al obtener detalles del propietario",message_dflt_43:"Error al guardar datos del propietario",message_dflt_44:"Error al actualizar datos del propietario",message_dflt_45:"Error al activar linea de transporte",message_dflt_46:"Error al suspender linea de transporte",message_dflt_47:"Error al borrar horario",message_dflt_48:"Error al activar horario",message_dflt_49:"Error al deshabilitar horario",message_dflt_50:"Error al guardar horario",message_dflt_51:"Error al actualizar horario",message_dflt_52:"Error al obtener detalles del horario",message_dflt_53:"Error al obtener detalles del viaje",message_dflt_54:"Error al obtener datos del usuario",message_dflt_55:"Cargando servicios de inicio",message_dflt_56:"Error obteniendo opciones de la aplicaci\xF3n",message_dflt_57:"Error al guardar tipo de veh\xEDculo",message_dflt_58:"Error al actualizar tipo de veh\xEDculo",message_dflt_59:"Error al borrar el tipo de veh\xEDculo",message_dflt_60:"Error al obtener detalles del tipo de veh\xEDculo",message_dflt_61:"Error al crear nueva tarifa",message_dflt_62:"Error al actualizar tarifa",message_dflt_63:"Error al eliminar tarifa",message_dflt_64:"Error al consultar datos de la tarifa",message_dflt_65:"Error al crear conductor",message_dflt_66:"Error al actualizar conductor",message_dflt_67:"Error al borrar conductor",message_dflt_68:"Error al activar conductor",message_dflt_69:"Error al suspender conductor",message_dflt_70:"Error al obtener detalles del conductor",message_dflt_71:"Error al guardar viaje",message_dflt_72:"Error al actualizar viaje",message_dflt_73:"Error al validar reserva",message_dflt_74:"Error al adicionar pago",message_dflt_75:"Error al borrar reservaci\xF3n",message_dflt_76:"Error al cambiar status del pasajero",warning1:"Debe seleccionar el conductor",warning2:"Debe seleccionar el pasajero",warning3:"Debe seleccionar la linea de transporte",warning4:"Debe adicionar al menos una oficia a la linea de conductores",warning5:"Debe seleccionar el automovil",warning6:"Debe ingresar la marca del automovil",warning7:"Debe ingresar el a\xF1o del automovil",warning8:"Debe ingresar la placa del automovil",warning9:"Debe seleccionar la ruta",warning10:"Debe ingresar la tarifa",warning11:"Debe ingresar la menos una parada de la ruta",warning12:"Debe seleccionar el viaje",warning13:"Debe ingresar la fecha de salida del viaje",warning14:"Debe ingresar la hora de salida del viaje",warning15:"Debe ingresar la fecha de vencimiento para la compra de pasajes",warning16:"Debe ingresar la hora de vencimiento para la compra de pasajes",warning17:"Debe ingresar la capacidad m\xE1xima de pasajeros",warning18:"Debe seleccionar al menos una de las monedas aceptadas",warning19:"Debe ingresar el valor de la tarifa de cambio",warning20:"La moneda de cambio debe ser diferente",warning21:"la linea",warning22:"esta incompleta falta el nombre",warning23:"esta incompleta falta la direcci\xF3n",warning24:"esta incompleta falta el tel\xE9fono",warning25:"esta incompleta falta el horario de apertura",warning26:"esta incompleta falta el horario de cierre",warning27:"esta incompleta falta el estatus",warning28:"esta incompleta: el tel\xE9fono esta incompleto",warning29:"Debe ingresar el valor de la tarifa",warning30:"Debe seleccionar la parada",warning31:"Debe ingresar el nombre de la parada",warning32:"Debe ingresar el c\xF3digo de 3 d\xEDgitos de la parada",warning33:"Debe ingresar la carrocer\xEDa del transporte",warning34:"Debe ingresar el color del transporte",warning35:"Debe ingresar la capacidad del transporte",warning36:"Debe ingresar el tipo de transporte",warning37:"Debe seleccionar el horario",warning38:"Debe ingresar el nombre del tipo de veh\xEDculo",warning39:"Debe ingresar la capacidad del veh\xEDculo",warning40:"Debe ingresar al menos una caracter\xEDtica",warning41:"Debe seleccionar el tipo de veh\xEDculo",warning42:"Debe seleccionar el propietario",warning43:"Debe seleccionar el punto de partida",warning44:"Debe seleccionar el punto de llegada",warning45:"Debe ingresar un nombre representativo",warning46:"Debe ingresar el costo",warning47:"Debe seleccionar la tarifa a borrar",warning48:"Debe seleccionar el conductor",warning49:"Debe seleccionar la reservaci\xF3n",warning50:"Debe seleccionar el pasajero",success1:"Viaje borrado con \xE9xito",success2:"Conductor bloqueado con \xE9xito",success3:"Conductor desbloqueado con \xE9xito",success4:"Pasajero eliminado con \xE9xito",success5:"Linea de transporte eliminada con \xE9xito",success6:"Automovil eliminado con \xE9xito",success7:"Ruta eliminada con \xE9xito",success8:"Ruta deshabilitada con \xE9xito",success9:"Ruta activada con \xE9xito",success10:"Viaje eliminado con \xE9xito",success11:"Viaje suspendido con \xE9xito",success12:"Viaje reactivado con \xE9xito",success13:"Viaje cerrado con \xE9xito",success14:"Viaje completado con \xE9xito",success15:"Viaje cancelado con \xE9xito",success16:"Linea de transporte guardada con \xE9xito",success17:"Linea de transporte actualizada con \xE9xito",success18:"Ruta guardada con \xE9xito",success19:"Ruta actualizada con \xE9xito",success20:"Parada borrada con \xE9xito",success21:"Parada activada con \xE9xito",success22:"Parada desactivada con \xE9xito",success23:"Parada creada con \xE9xito",success24:"Autom\xF3vil borrado con \xE9xito",success25:"Autom\xF3vil activado con \xE9xito",success26:"Autom\xF3vil deshabilitado con \xE9xito",success27:"Autom\xF3vil guardado con \xE9xito",success28:"Autom\xF3vil actualizado con \xE9xito",success29:"Propietario borrado con \xE9xito",success30:"Propietario activado con \xE9xito",success31:"Propietario suspendido con \xE9xito",success32:"Propietario creado con \xE9xito",success33:"Propietario actualizado con \xE9xito",success34:"Linea de transporte activada con \xE9xito",success35:"Linea de transporte suspendida con \xE9xito",success36:"Horario borrado con \xE9xito",success37:"Horario activado con \xE9xito",success38:"Horario deshabilitado con \xE9xito",success39:"Horario guardado con \xE9xito",success40:"Horario actualizado con \xE9xito",success41:"Tipo de veh\xEDculo creado con \xE9xito",success42:"Tipo de veh\xEDculo actualizado con exito",success43:"Tipo de veh\xEDculo borrado con exito",success44:"Tarifa creada con \xE9xito",success45:"Tarifa actualizada con \xE9xito",success46:"Tarifa borrada con \xE9xito",success47:"Conductor creado con \xE9xito",success48:"Conductor actualizado con \xE9xito",success49:"Conductor borrado con \xE9xito",success50:"Conductor activado con \xE9xito",success51:"Conductor suspendido con \xE9xito",success52:"Viaje guardado con \xE9xito",success53:"Viaje actualizado con \xE9xito",success54:"Viaje publicado con \xE9xito",success55:"Reservaci\xF3n borrada con \xE9xito",success56:"Estatus cambiado con \xE9xito",title1:"Nueva parada",title2:"Nuevo autom\xF3vil",title3:"Detalles del automovil",title4:"Actualizar datos del autom\xF3vil",title5:"Detalles del propietario",title6:"Transportes disponibles",title7:"Nuevo propietario",title8:"Actualizar datos del propietario",title9:"Nueva linea de transporte",title10:"Actualizar datos de linea de transporte",title11:"Detalles de la linea de transporte",title12:"Propietarios asociados",title13:"Unidades afiliadas",title14:"Nueva ruta",title15:"Actualizaci\xF3n de ruta",title16:"Detalles de la ruta",title17:"Nuevo horario",title18:"Actualizar horario",title19:"Nueva venta",title20:"Actualizar",title21:"Nueva linea de conductores",title22:"Actualizar linea de conductores",title23:"nombre",title24:"direcci\xF3n",title25:"tel\xE9fono",title26:"correo electr\xF3nico",title27:"horario",title28:"estatus",title29:"apertura",title30:"cierre",title31:"ver m\xE1s",title32:"actualizar linea",title33:"eliminar linea",title34:"lineas de conductores",title35:"nuevo",title36:"oficinas",title37:"direcciones",title38:"estado",title39:"ciudad",title40:"buscar",title41:"\xBFDesea borrar la linea de conductores",title42:"cancelar",title43:"eliminar",title44:"detalles del linea de conductores",title45:"conductores asociados",title46:"R.I.F/C.I",title47:"automovil",title48:"imprimir",title49:"adicionar oficina",title50:"linea",title51:"paradas",title52:"punto salida",title53:"punto llegada",title54:"buscar lineas",title55:"Nuevo tipo de vehiculo",title56:"Actualizar tipo de vehiculo",title57:"Detalles del tipo de vehiculo",title58:"Nueva tarifa",title59:"Actualizar tarifa",title60:"Nuevo conductor",title61:"Actualizar conductor",title62:"Nuevo viaje",title63:"Actualizar viaje",title64:"Detalles de una reservaci\xF3n",title65:"Nuevo viaje de l\xEDnea de transporte",title66:"Chequear pasajero",active:"activo",inactive:"inactivo",closed:"cerrado",completed:"completado",bs:"Bol\xEDvares",usd:"Dolares",stops:"paradas",stop_already_created:"Parada creada anteriormente",failed_request:"Error al procesar solicitud",fares_stops_do_not_have_the_same_size_as_the_itinerary_stops:"La cantidad de tarifas ingresadas no corresponde a la cantidad de paradas realizadas",stop_not_found:"Parada no encotrada",usd:"$",ves:"bs",pending_payment:"pendiente por pago",pending_validation:"por validaci\xF3n de pago",mobile:"pago m\xF3vil",transference:"transferencia",paid:"pagado",cash:"efectivo",reservation_is_pending_payment:"reservaci\xF3n esta pendiente por pago",adult:"adulto",elderly:"adulto mayor",infant:"infante",child:"ni\xF1o",pre_boarding:"pre-abordaje",boarding:"a bordo",out_inside:"retiro en instalaciones",out_outside:"retiro fuera de instalaciones"};(function(e){'use strict';e.LoadingServiceComponent=ng.core.Component({selector:"loading-service",template:"<div class=\"modal\" style=\"text-align:center;margin-top:180px;\" scroll=\"no\" id=\"pleaseWaitDialog\" data-backdrop=\"static\" data-keyboard=\"false\"><div><img style=\"width:70px;height:70px;\"src=\"assets/images/loading.gif\"></div></div>"}).Class({constructor:[function(){}]}),e.LoadingServiceComponent.prototype.showPleaseWait=function(){$("#pleaseWaitDialog").modal()},e.LoadingServiceComponent.prototype.hidePleaseWait=function(){$("#pleaseWaitDialog").modal("hide")}})(window.app||(window.app={}));(function(e){e.AppCallService=ng.core.Injectable().Class({constructor:[ng.http.Http,e.LoadingServiceComponent,function(e,t){this._url=getApi(),this.http=e,this.loading=t,this.timeout="30000",this.enlace_api=getEnlaceApi(),this.enlace_api_deegle=getEnlaceApiDeegle(),this.enlace_auth=getEnlaceAuth()}]}),e.AppCallService.prototype.callServices=function(e,t,a,n,i,r,s,o,d){let l=this._url,p=new Headers;null==n||n==null||""==n||(p=n);var u="";e==null||""==e||null==e?l="":l+=e,null==s||s==null||""==s||(p["Content-Type"]=s.trim().toLowerCase()),i&&(p.Authorization="bearer "+this.getAccessToken()),null!=s||i||(p=null),"multipart/form-data"==s?(delete p["Content-Type"],u=a):a!=null&&null!=a&&""!=a&&(jQuery.isEmptyObject(a)?u=a:"application/json"==s?u=JSON.stringify(a):u=a),o&&this.loading.showPleaseWait();let c=null;switch(t){case"GET":c=null==p?this.http.get(l):this.http.get(l,{headers:p});break;case"POST":c=null==p?this.http.post(l,u,null):this.http.post(l,u,{headers:p});break;case"PUT":c=this.http.put(l,u,{headers:p});break;case"DELETE":c=null==p?this.http.delete(l):this.http.delete(l,{headers:p});break;default:return null;}null==d&&(d=this.timeout);let g=c.timeout(d,new Error("TIMEOUT")).map(e=>(this.loading.hidePleaseWait(),this.processResponse(r,e)));return g},e.AppCallService.prototype.fakeData=function(e){var t=_fakeData(e);return t},e.AppCallService.prototype.processResponse=function(e,t){var a=null;if(t.hasOwnProperty("status"))if(a=t.status,202==a||"202"==a||"403"==a||403==a){var n=t.json();n.hasOwnProperty("message")&&null!=n.message&&null!=n.message&&""!=n.message&&("UNAUTHORIZED_SESSION"==n.message||"SESSION_CLOSED"==n.message||"SESSION_EXPIRED"==n.message||"SESSION_NOT_FOUND"==n.message||"INVALID_AUTHORIZATION"==n.message)&&(doLogout(),alert(_(n.message.toLowerCase())),window.location.href=redirectUri())}else(401==a||403==a)&&(window.location.href=getLoginUri());if("JSON"==e)try{var a=null;t.hasOwnProperty("status")&&(a=t.status),t=t.json();try{var i=Array.isArray(t);if(i){var n=t;t={body:n,status_http:a}}else t.status_http=a}catch(e){console.log("Error al procesar",e)}return t.status_http=a,t}catch(e){return t={status_http:500,message:"ERROR",typeSys:"ERROR",value:"NOT_JSON"},t}else if("CSV"==e)try{return t=t._body,t.toString()}catch(e){return t="Error",t}else return console.log("res",t),t=t._body.blob(),t},e.AppCallService.prototype.callServicesHttp=function(e,t,a){let n=null;switch(e){case"init-auth":return n=this.callServices("deegle_auth/init/"+getClient()+t,"GET",null,null,!0,"JSON",null,!0,null),n;break;case"logout":return n=this.callServices(this.enlace_auth+"/session/close","DELETE",null,null,!0,"JSON",null,!0,null),n;break;case"parada-post":return n=this.callServices(this.enlace_api+"/stop?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"parada-report":return n=this.callServices(this.enlace_api+"/stop/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"parada-delete":return n=this.callServices(this.enlace_api+"/stop?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"parada-put":return n=this.callServices(this.enlace_api+"/stop?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"car-type-post":return n=this.callServices(this.enlace_api+"/vehicle_type?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"car-type-put":return n=this.callServices(this.enlace_api+"/vehicle_type?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"car-type-report":return n=this.callServices(this.enlace_api+"/vehicle_type/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"car-type-delete":return n=this.callServices(this.enlace_api+"/vehicle_type?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"car-type-get":return n=this.callServices(this.enlace_api+"/vehicle_type?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!1,"JSON",null,!0,null),n;break;case"line-post":return n=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"line-report":return n=this.callServices(this.enlace_api+"/line/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"line-delete":return n=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"line-get":return n=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!1,"JSON",null,!0,null),n;break;case"line-put":return n=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"propietario-post":return n=this.callServices(this.enlace_api+"/vehicle_owner?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"propietario-put":return n=this.callServices(this.enlace_api+"/vehicle_owner?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"propietario-report":return n=this.callServices(this.enlace_api+"/vehicle_owner/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"propietario-delete":return n=this.callServices(this.enlace_api+"/vehicle_owner?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"propietario-get":return n=this.callServices(this.enlace_api+"/vehicle_owner?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!1,"JSON",null,!0,null),n;break;case"car-post":return n=this.callServices(this.enlace_api+"/vehicle?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"car-put":return n=this.callServices(this.enlace_api+"/vehicle?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"car-report":return n=this.callServices(this.enlace_api+"/vehicle/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"car-delete":return n=this.callServices(this.enlace_api+"/vehicle?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"car-get":return n=this.callServices(this.enlace_api+"/vehicle?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!1,"JSON",null,!0,null),n;break;case"car-report-line":return n=this.callServices(this.enlace_api+"/vehicle/line/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"fare-post":return n=this.callServices(this.enlace_api+"/fare?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"fare-report":return n=this.callServices(this.enlace_api+"/fare/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"fare-delete":return n=this.callServices(this.enlace_api+"/fare?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"fare-get":return n=this.callServices(this.enlace_api+"/fare?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!1,"JSON",null,!0,null),n;break;case"fare-put":return n=this.callServices(this.enlace_api+"/fare?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"route-post":return n=this.callServices(this.enlace_api+"/itinerary?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"route-put":return n=this.callServices(this.enlace_api+"/itinerary?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"route-delete":return n=this.callServices(this.enlace_api+"/itinerary?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"route-get":return n=this.callServices(this.enlace_api+"/itinerary?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!1,"JSON",null,!0,null),n;break;case"route-report":return n=this.callServices(this.enlace_api+"/itinerary/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"route-line-report":return n=this.callServices(this.enlace_api+"/itinerary/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"driver-post":return n=this.callServices(this.enlace_api+"/driver?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"driver-put":return n=this.callServices(this.enlace_api+"/driver?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"driver-report":return n=this.callServices(this.enlace_api+"/driver/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"driver-delete":return n=this.callServices(this.enlace_api+"/driver?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"driver-get":return n=this.callServices(this.enlace_api+"/driver?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!1,"JSON",null,!0,null),n;break;case"travel-post":return n=this.callServices(this.enlace_api+"/trip?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"travel-put":return n=this.callServices(this.enlace_api+"/trip?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"travel-report":return n=this.callServices(this.enlace_api+"/trip/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"travel-delete":return n=this.callServices(this.enlace_api+"/trip?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",a,null,!1,"JSON",null,!0,null),n;break;case"travel-report-line":return n=this.callServices(this.enlace_api+"/trip/line/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"profile-report":return n=this.callServices(this.enlace_api_deegle+"/profile/search"+t,"POST",a,null,!0,"JSON","application/json"),n;break;case"reservation-report-line":return n=this.callServices(this.enlace_api+"/reservation/line/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"reservation-get-line":return n=this.callServices(this.enlace_api+"/reservation?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"GET",null,null,!1,"JSON",null,!0,null),n;break;case"reservation-delete":return n=this.callServices(this.enlace_api+"/reservation?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"DELETE",null,null,!1,"JSON",null,!0,null),n;break;case"reservation-validate":return n=this.callServices(this.enlace_api+"/reservation/validate_payments?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"line-get-reservation":return n=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+"&id="+this.getBusinessId(),"GET",null,null,!1,"JSON",null,!0,null),n;break;case"add-payment-reservation":return n=this.callServices(this.enlace_api+"/reservation/ticket/add_payments?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+"&business_id="+this.getBusinessId()+t,"PUT",a,null,!1,"JSON","application/json",!0,null),n;break;case"travel-passenger":return n=this.callServices(this.enlace_api+"/passenger/trip/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"passenger-report":return n=this.callServices(this.enlace_api+"/passenger/report?realm="+this.getRealm()+t,"POST",a,null,!1,"JSON","application/json",!0,null),n;break;case"passenger-change-status":return n=this.callServices(this.enlace_api+"/passenger/status?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"PUT",null,null,!1,"JSON",null,!0,null),n;break;default:}},e.AppCallService.prototype.callServicesCountry=function(e){var t=null;if(null!=e&&e!=null&&""!=e){switch(e){case"VE":t="https://static.paguetodo.com/resources/countries/venezuela.json";break;default:}this.loading.showPleaseWait();let a=this.http.get(t).map(e=>(e=e.json(),e));return a}},e.AppCallService.prototype.removeKey=function(e){try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(e){}},e.AppCallService.prototype.setInit=function(e){e=JSON.stringify(e),localStorage.setItem("init",e)},e.AppCallService.prototype.getInit=function(){var e=localStorage.getItem("init");if(null==e)return null;try{return JSON.parse(e)}catch(t){return null}},e.AppCallService.prototype.getAccessToken=function(){return localStorage.getItem("access_token")},e.AppCallService.prototype.getRealm=function(){return null==this.getRole()?null:this.getRole().hasOwnProperty("realm")?this.getRole().realm:null},e.AppCallService.prototype.getCurrency=function(){var e=localStorage.getItem("init");if(null!=e){try{e=JSON.parse(e),e=e.country.currency}catch(t){console.log("er",t),e=null}return e}return e},e.AppCallService.prototype.getCountry=function(){var e=localStorage.getItem("init");if(null!=e){try{e=JSON.parse(e),e=e.country.alpha2}catch(t){console.log("er",t),e=null}return e}return e},e.AppCallService.prototype.getUserId=function(){return null==this.getRole()?null:this.getRole().hasOwnProperty("user_id")?this.getRole().user_id:null},e.AppCallService.prototype.getUserName=function(){return null==this.getRole()?null:this.getRole().hasOwnProperty("user_name")?this.getRole().user_name:null},e.AppCallService.prototype.setRole=function(e){e=JSON.stringify(e),localStorage.setItem("role",e)},e.AppCallService.prototype.getRole=function(){var e=localStorage.getItem("role");if(null==e)return null;try{return JSON.parse(e)}catch(e){return null}},e.AppCallService.prototype.getBusinessId=function(){if(aux=this.getRole(),null==aux)return null;try{return aux=aux.business_id,aux}catch(e){return null}},e.AppCallService.prototype.getBusinessName=function(){if(aux=this.getRole(),null==aux)return null;try{return aux=aux.owner_name,aux}catch(e){return console.log("er",e),null}},e.AppCallService.prototype.getEmail=function(){if(aux=this.getRole(),null==aux)return null;try{return aux=aux.user_email,aux}catch(e){return null}},e.AppCallService.prototype.getBusinessEmail=function(){if(aux=this.getRole(),null==aux)return null;try{return aux=aux.owner_email,aux}catch(e){return null}},e.AppCallService.prototype.processError=function(e,t){let a=t;this.loading.hidePleaseWait();try{var n="";if(e.hasOwnProperty("status")){this;if(n=e.status+", ",401==e.status)a="Sesi?n cerrada",setTimeout(function(){doLogout(),window.location.href=getLoginUri()},2e3);else if(403==e.status)a="Sesion expirada",setTimeout(function(){doLogout(),window.location.href=getLoginUri()},2e3);else if(e.hasOwnProperty("_body")){var i=JSON.parse(e._body);a=i.hasOwnProperty("message")?null==i.message||null==i.message||""==i.message?t:"FAILED_REQUEST"==i.message.toUpperCase()?t:n+translate(i.message,"ES").toUpperCase():e.hasOwnProperty("statusText")?n+e.statusText:t}else a=t}else a=t}catch(e){a=t}return a},e.AppCallService.prototype.processMessageError=function(e,t){if(e.hasOwnProperty("message")){var a="",n="";if(null==e.message||null==e.message||""==e.message?n=t:(e.message=e.message.toLowerCase(),n=_(e.message)),e.hasOwnProperty("cause")&&null!=e.cause&&null!=e.cause&&""!=e.cause&&0!=e.cause.length){for(var r=0;r<e.cause.length;r++)null!=e.cause[r]&&(e.cause[r]=e.cause[r].toLowerCase(),a=a+" "+_(e.cause[r]));""!=a&&(n=n+": "+a)}return t=n,t}return t}})(window.app||(window.app={}));function formattingIntegerPart(e){var t="",a=!1;t=e.charAt(0);"-"==t&&(e=e.substring(1,e.length),a=!0,a=!0);var n="",r=0;if(3<e.length)for(var s=0;s<e.length;s++){if(0==s&&(r=e.length),3>=r)return n=e.substring(0,r)+n,a&&(n="-"+n),n;n="."+e.substring(r-3,r)+n,r-=3}else n=e;return a&&(n="-"+n),n}function returnBancos(){return[{value:"BDV",name:"Banco de Venezuela"},{value:"SOFITASA",name:"Banco sofitasa"},{value:"BNC",name:"Banco nacional de cr\xE9dito"},{value:"BANESCO",name:"Banesco banco universal"},{value:"CARONI",name:"Banco caron\xED"},{value:"BANCO_PLAZA",name:"Banco plaza"},{value:"BANGENTE",name:"Banco de la gente emprendedora"},{value:"BANCO100",name:"100% banco"},{value:"DELSUR",name:"Delsur banco universal"},{value:"BAV",name:"Banco agr\xEDcola de venezuela"},{value:"BANCRECER",name:"Bancrecer"},{value:"ACTIVO",name:"Banco activo"},{value:"BANCAMIGA",name:"Bancamiga"},{value:"BANPLUS",name:"Banplus"},{value:"BVC",name:"Venezolano de cr\xE9dito"},{value:"MERCANTIL",name:"Banco mercantil"},{value:"BBVA",name:"Banco provincial"},{value:"EXTERIOR",name:"Banco exterior c.a."},{value:"BICENTENARIO",name:"Banco bicentenario"},{value:"BANFANB",name:" Banco de la fuerza armada nacional bolivariana"},{value:"MIBANCO",name:"Mi banco"},{value:"BOD",name:"Banco occidental de descuento"},{value:"TESORO",name:"Banco del tesoro"},{value:"BANCARIBE",name:"Bancaribe c.a"}]}function returnBankSelected(e){if(null==e||e==null||""==e)return null;var t=returnBancos();if(null!=t&&0!=t.length)for(var a=0;a<t.length;a++)if(null!=t[a]&&t[a].hasOwnProperty("value")&&t[a].value==e)return t[a].name}function amountFormattingObject(e){var t={integerPart:"",decimalPart:""},a=e/100,n="",i="";if(0<a.toString().indexOf(".")){var r=a.toString().split(".");i=r[0],n=2>r[1].length?r[1]+"0":r[1]}else i=a.toString(),n="00";return t.integerPart=formattingIntegerPart(i),t.decimalPart=n,t}function validarEmail(e){return!(0<=e.indexOf("&"))&&!(0<=e.indexOf("/"))&&!!/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/.test(e)}function formattingDate(e){e=replaceAll(e,"T"," ");var t=new Date(e),a="00",n="00";a=10>t.getHours()?"0"+t.getHours():t.getHours(),n=10>t.getMinutes()?"0"+t.getMinutes():t.getMinutes();var i=t.getDate();10>i&&(i="0"+t.getDate());var r=t.getMonth()+1;10>r&&(r="0"+r);var s=i+"-"+r+"-"+t.getFullYear()+" "+a+":"+n;return s}function formattingDate1(e){e=replaceAll(e,"T"," ");var t=new Date(e),a="00",n="00";a=10>t.getHours()?"0"+t.getHours():t.getHours(),n=10>t.getMinutes()?"0"+t.getMinutes():t.getMinutes();var i=t.getDate();10>i&&(i="0"+t.getDate());var r=t.getMonth()+1;10>r&&(r="0"+r);var s=i+"-"+r+"-"+t.getFullYear();return s}function formattingDate2(e){e=replaceAll(e,"T"," ");try{return e=e.split(" "),e[0]}catch(e){return null}}function replaceAll(e,t,a){if(null==e||e==null)return e;for(;-1!=e.toString().indexOf(t);)e=e.toString().replace(t,a);return e}function capitalizeOnly(e){if(null==e||e==null)return"";var t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();return t}function orderList(e){if(null==e||e==null||0==e.length)return null;var t=e.length,t,a,r,s;for(r=1;r<t;r++)for(a=0;a<t-r;a++)e[a].sort>e[a+1].sort&&(s=e[a],e[a]=e[a+1],e[a+1]=s);return e}function getTimeZone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function keyPressValidarLetrasNumerosSimplesGuionesPisos(e){var t=e.keyCode||e.which,a=String.fromCharCode(t).toLowerCase(),n=[8,45,95],r=!1;for(var s in n)if(t==n[s]){r=!0;break}if(-1=="abcdefghijklmnopqrstuvwxyz0123456789".indexOf(a)&&!r)return!1}function validarLetrasNumerosSimplesGuionesPiso(e){return!!/^([a-zA-Z-Z]|[0-9]|-|_)*$/.test(e)}function keypressvalidarEmail(e,t){var a=e.keyCode||e.which,n=String.fromCharCode(a).toLowerCase(),r=[8,38,45,46,64,95],s=!1;for(var o in r)if(a==r[o]){if(64==a&&-1<t.indexOf(n)){s=!1;break}if(46==a&&null!=t&&t.charAt(t.length-1)==n){s=!1;break}s=!0;break}if(-1=="abcdefghijklmnopqrstuvwxyz0123456789".indexOf(n)&&!s)return!1}function keyPressValidarLetrasyOtrosCaracteres(e){var t=e.keyCode||e.which,a=String.fromCharCode(t).toLowerCase(),n=[8,32,35,36,37,38,64,45,46,95],r=!1;for(var s in n)if(t==n[s]){r=!0;break}if(-1=="abcdefghijklmnopqrstuvwxyz0123456789\xD1\xF1\xC1\xE1\xC9\xE9\xCD\xED\xD3\xF3\xDA\xFA".indexOf(a)&&!r)return!1}function formatearTelefono(e){var t;if(e!=null){if(5<=e.length){var a=e;t="("+a.substring(0,4)+")-"+a.substring(4,7)+" "+a.substring(7,a.length)}else t=e;return t}}(function(e){e.MsgComponent=ng.core.Component({selector:"msg-component",templateUrl:"views/msg.html",inputs:["mensaje"],outputs:["valueChanged","valueChangedError"]}).Class({constructor:[function(){this.valueChanged=new ng.core.EventEmitter,this.valueChangedError=new ng.core.EventEmitter}]}),e.MsgComponent.prototype.info=function(){$("#msgInfo").modal("show")},e.MsgComponent.prototype.error=function(){$("#msgError").modal("show")},e.MsgComponent.prototype.error2=function(){$("#msgErrorRedirect").modal("show")},e.MsgComponent.prototype.warning=function(){$("#msgWarning").modal("show")},e.MsgComponent.prototype.sendMsg=function(){this.valueChanged.emit()},e.MsgComponent.prototype.sendMsg2=function(){this.valueChangedError.emit()}})(window.app||(window.app={}));(function(e){'use strict';e.CustomTableComponent=ng.core.Component({selector:"custom-table",templateUrl:"views/custom-table.html",inputs:["size","labelSize","alignSize","totalPage","totalPageRecords","pageSelected","listOffice","ocultarCantidad"],outputs:["cantidadTransaccionesTabla","valueFirst","valuePrevious","valueNext","valueLast","valueChangeRecords"]}).Class({constructor:[function(){this.cantidadTransaccionesTabla=new ng.core.EventEmitter,this.valueFirst=new ng.core.EventEmitter,this.valuePrevious=new ng.core.EventEmitter,this.valueNext=new ng.core.EventEmitter,this.valueLast=new ng.core.EventEmitter,this.valueChangeRecords=new ng.core.EventEmitter}]}),e.CustomTableComponent.prototype.acciones=function(){this.mostrarAcciones=!(this.size<=this.totalPage)},e.CustomTableComponent.prototype.ngOnInit=function(){1==this.pageSelected?(this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled"):this.pageSelected==this.totalPageRecords?(this.lastPage="last-page-disabled",this.nextPage="next-page-disabled",this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled"):(this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled"),this.mostrarHeader=!1,this.mostrarAcciones=!1,this.mostrarHeader=null!=this.header&&null!=this.header&&""!=this.header,this.listPageRecord=[10,20,25,50,100],this.acciones()},e.CustomTableComponent.prototype.ngOnChanges=function(){1==this.pageSelected?(this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled"):this.pageSelected==this.totalPageRecords?(this.lastPage="last-page-disabled",this.nextPage="next-page-disabled",this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled"):(this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled"),this.acciones()},e.CustomTableComponent.prototype.selectedPageShow=function(e){this.totalPage=e,this.pageSelected=1;var t=Math.floor(this.size/this.totalPage),a=this.size%this.totalPage;this.totalPageRecords=0==a?t:t+1,this.lastPage="last-page-enabled",this.nextPage="next-page-enabled",this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled";var n={detalles:this.totalPage,pagina:this.totalPageRecords};this.valueChangeRecords.emit(this.pageSelected),this.acciones(),this.cantidadTransaccionesTabla.emit(n)},e.CustomTableComponent.prototype.firstPageFunction=function(){"first-page-enabled"==this.firstPage&&(this.pageSelected=1,this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled",this.valueFirst.emit(this.pageSelected))},e.CustomTableComponent.prototype.previousPageFunction=function(){"previous-page-enabled"==this.previousPage&&(--this.pageSelected,this.lastPage="last-page-enabled",this.nextPage="next-page-enabled",1==this.pageSelected?(this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled"):(this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled"),this.valuePrevious.emit(this.pageSelected))},e.CustomTableComponent.prototype.nextPageFunction=function(){"next-page-enabled"==this.nextPage&&(++this.pageSelected,this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled",this.pageSelected==this.totalPageRecords&&(this.lastPage="last-page-disabled",this.nextPage="next-page-disabled"),this.valueNext.emit(this.pageSelected))},e.CustomTableComponent.prototype.lastPageFunction=function(){"last-page-enabled"==this.lastPage&&(this.pageSelected=this.totalPageRecords,this.lastPage="last-page-disabled",this.nextPage="next-page-disabled",this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled",this.valueLast.emit(this.pageSelected))}})(window.app||(window.app={}));(function(e){'use strict';e.NavBarComponent=ng.core.Component({selector:"nav-bar",templateUrl:"views/navbar.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,e.AppCallService,function(e,t,a){this.msg=e,this.router=t,this.ser=a}]}),e.NavBarComponent.prototype.ngOnInit=function(){},e.NavBarComponent.prototype.doLogout=function(){let e="Error al cerrar sesion",t=this.ser.callServicesHttp("logout",null,null);t.subscribe(t=>{null==t||t==null||""==t||200==t.status_http||(this.mensaje=this.ser.processMessageError(t,e)),doLogout(),window.location.href="/bandera"},t=>{this.mensaje=this.ser.processError(t,e),doLogout(),window.location.href="/bandera"})}})(window.app||(window.app={}));(function(e){e.ScheduleReportComponent=ng.core.Component({selector:"schedule-report",templateUrl:"views/schedule-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.ScheduleReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.status=null,this.linea=null,this.parada=null,this.horario=null,this.checkRol()},e.ScheduleReportComponent.prototype.checkRol=function(){},e.ScheduleReportComponent.prototype.search=function(){this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.ScheduleReportComponent.prototype.clean=function(){this.status=null,this.codigo=null,this.linea=null,this.parada=null,this.horario=null},e.ScheduleReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ScheduleReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ScheduleReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ScheduleReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ScheduleReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ScheduleReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ScheduleReportComponent.prototype.callServices=function(){let e=this.service.callServicesHttp("schedule-report",null,null);this.procesarRespuesta(e)},e.ScheduleReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ScheduleReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase()),e.actions=[],e.actions.push({name:"SCHEDULE-DELETE",functionality_detail:"Eliminar"}),e.actions.push({name:"SCHEDULE-UPDATE",functionality_detail:"Actualizar horario"}),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase(),"ACTIVE"==e.status?e.actions.push({name:"SCHEDULE-INACTIVE",functionality_detail:"Deshabilitar horario"}):e.actions.push({name:"SCHEDULE-ACTIVE",functionality_detail:"Habilitar horario"})),e)},e.ScheduleReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.ScheduleReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"SCHEDULE-DELETE":$("#modalDeleteSchedule").modal("show");break;case"SCHEDULE-ACTIVE":$("#modalActivateSchedule").modal("show");break;case"SCHEDULE-INACTIVE":$("#modalInactivateSchedule").modal("show");break;case"SCHEDULE-UPDATE":this.router.navigate(["/schedule-update"],{queryParams:{id:e.id}});break;default:}},e.ScheduleReportComponent.prototype.deleteData=function(){if($("#modalDeleteSchedule").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning37")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("schedule-delete",e,null);this.procesarRespuestaDelete(t)}},e.ScheduleReportComponent.prototype.activeData=function(){if($("#modalActivateSchedule").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning37")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("schedule-active",e,null);this.procesarRespuestaActivar(t)}},e.ScheduleReportComponent.prototype.inactiveData=function(){if($("#modalInactivateSchedule").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning37")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("schedule-inactive",e,null);this.procesarRespuestaDesactivar(t)}},e.ScheduleReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_47");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success36")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ScheduleReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_48");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success37"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.ScheduleReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_49");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success38"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.ScheduleReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.SettingsComponent=ng.core.Component({selector:"settings-component",templateUrl:"views/settings.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.ser=n}]}),e.SettingsComponent.prototype.devolverEvent=function(e){null==e||e==null||""==e||8!=e.keyCode||(null==this.unidad2?this.unidad2="0,00":""==this.unidad2?this.unidad2="0,00":3==this.unidad2.length&&(this.unidad2="0,"+this.unidad2.charAt(0)+this.unidad2.charAt(2)))},e.SettingsComponent.prototype.keyDown=function(e){if(null!=e&&e!=null&&""!=e&&(37==e.keyCode||38==e.keyCode))return!1},e.SettingsComponent.prototype.getEventMonto=function(e){if(null!=e&&e!=null&&""!=e){if(!this.regex.test(e.key))return!1;if(null!=this.unidad2&&4==this.unidad2.length){if("0,00"==this.unidad2)return 0!=e.key&&"0"!=e.key&&(this.unidad2="0,0"+e.key,!1);if("0,0"==this.unidad2.substring(0,3))return this.unidad2="0,"+this.unidad2.charAt(this.unidad2.length-1)+e.key,!1;if("0"==this.unidad2.charAt(0)||0==this.unidad2.charAt(0))return this.unidad2=this.unidad2.charAt(2)+","+this.unidad2.charAt(3)+e.key,!1}}},e.SettingsComponent.prototype.moveCursorToEnd=function(){var e=document.getElementById("unidad2");if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if("undefined"!=typeof e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}},e.SettingsComponent.prototype.changeAmount=function(){null==this.unidad2||this.unidad2==null||""==this.unidad2||(1==this.unidad2.length?this.unidad2="0,0"+this.unidad2:2==this.unidad2.length&&(this.unidad2="0,"+this.unidad2))},e.SettingsComponent.prototype.inputEvent=function(e){if(null!=e&&e!=null&&""!=e)if(null!=e.data&&null!=e.data&&""!=e.data){if(!this.regex.test(e.data))return!1;if(null!=this.unidad2&&4==this.unidad2.length){if("0,00"==this.unidad2)return 0==e.data||"0"==e.data?(document.getElementById("unidad2").value="0,00",!1):(document.getElementById("unidad2").value="0,0"+e.data,!1);if("0,0"==this.unidad2.substring(0,3))return document.getElementById("unidad2").value="0,"+this.unidad2.charAt(this.unidad2.length-1)+e.data,!1;if("0"==this.unidad2.charAt(0)||0==this.unidad2.charAt(0))return document.getElementById("unidad2").value=this.unidad2.charAt(2)+","+this.unidad2.charAt(3)+e.data,!1}}else"deleteContentBackward"==e.inputType&&(null==this.unidad2?document.getElementById("unidad2").value="0,00":""==this.unidad2?document.getElementById("unidad2").value="0,00":3==this.unidad2.length&&(document.getElementById("unidad2").value="0,"+this.unidad2.charAt(0)+this.unidad2.charAt(2)))},e.SettingsComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title12")),this.title1=capitalizeOnly(_("title14")),this.title2=capitalizeOnly(_("title15")),this.title3=capitalizeOnly(_("title16")),this.title_back=_("title17"),this.title_clean=_("title18"),this.title_done=_("title19"),this.listaMonedas=[{value:"VES",label:"Bs",name:capitalizeOnly(_("bs")),check:!1},{value:"USD",label:"$",name:capitalizeOnly(_("usd")),check:!1}],this.unidad1="1,00",this.moneda1="VES",this.moneda2="VES",this.unidad2="0,00",this.regex=/^\d+$/,$("#unidad2").mask("#.##0,00",{reverse:!0}),this.getServices()},e.SettingsComponent.prototype.getServices=function(){let e=capitalizeOnly(_("message_dflt_20")),t=this.ser.callServicesHttp("config-general-get",null,null);t.subscribe(t=>{null==t||t==null||""==t?(this.mensaje=e,this.msg.error()):200==t.status_http?null!=t&&t!=null&&""!=t&&0!=t.length&&this.formattedData(t):(this.mensaje=this.ser.processMessageError(t,e),this.msg.error())},t=>{this.mensaje=this.ser.processError(t,e),this.msg.error()})},e.SettingsComponent.prototype.formattedData=function(e){if(null!=e&&null!=e&&""!=e){if(e.hasOwnProperty("currencys")&&null!=e.currencys&&null!=e.currencys&&""!=e.currencys&&0!=e.currencys.length)for(var t=0;t<e.currencys.length;t++)for(var a=0;a<this.listaMonedas.length;a++)null!=e.currencys[t]&&e.currencys[t]==this.listaMonedas[a].value&&(this.listaMonedas[a].check=!0);if(e.hasOwnProperty("currency_init")&&null!=e.currency_init&&null!=e.currency_init&&""!=e.currency_init&&(this.moneda1=e.currency_init),e.hasOwnProperty("unity_init")&&null!=e.unity_init&&null!=e.unity_init&&""!=e.unity_init&&0!=e.unity_init)try{this.unidad1=amountFormattingObject(e.unity_init),this.unidad1=this.unidad1.integerPart+","+this.unidad1.decimalPart}catch(e){}if(e.hasOwnProperty("currency_end")&&null!=e.currency_end&&null!=e.currency_end&&""!=e.currency_end&&(this.moneda2=e.currency_end),e.hasOwnProperty("unity_end")&&null!=e.unity_end&&null!=e.unity_end&&""!=e.unity_end&&0!=e.unity_end)try{this.unidad2=amountFormattingObject(e.unity_end),this.unidad2=this.unidad2.integerPart+","+this.unidad2.decimalPart}catch(e){}}},e.SettingsComponent.prototype.clean=function(){this.moneda1="VES",this.moneda2="VES",this.unidad2="0,00",this.listaMonedas=[{value:"VES",label:"Bs",name:capitalizeOnly(_("bs")),check:!1},{value:"USD",label:"$",name:capitalizeOnly(_("usd")),check:!1}]},e.SettingsComponent.prototype.done=function(){if(null==this.listaMonedas||null==this.listaMonedas||""==this.listaMonedas||0==this.listaMonedas.length)return this.mensaje=capitalizeOnly(_("warning18")),void this.msg.warning();for(var e=[],t=0;t<this.listaMonedas.length;t++)null!=this.listaMonedas[t]&&!0==this.listaMonedas[t].check&&e.push(this.listaMonedas[t].value);if(0==e.length)return this.mensaje=capitalizeOnly(_("warning18")),void this.msg.warning();if(this.moneda1==this.moneda2)return this.mensaje=capitalizeOnly(_("warning20")),void this.msg.warning();if(null==this.unidad2||null==this.unidad2||""==this.unidad2)return this.mensaje=capitalizeOnly(_("warning19")),void this.msg.warning();var n=null;try{n=$("#unidad2").val(),n=n.replace(/\./g,"").replace(/,/g,""),n=(replaceAll(n," ","")+"").trim()}catch(t){n=null}var r=n;if(null==r||null==r||0==r||""==r)return this.mensaje=capitalizeOnly(_("warning19")),void this.msg.warning();let s=capitalizeOnly(_("message_dflt_19")),o=this.ser.callServicesHttp("config-general-post",null,{});o.subscribe(e=>{null==e||e==null||""==e?(this.mensaje=s,this.msg.error()):200==e.status_http?(this.mensaje=capitalizeOnly(_("success15")),this.msg.info()):(this.mensaje=this.ser.processMessageError(e,s),this.msg.error())},e=>{this.mensaje=this.ser.processError(e,s),this.msg.error()})},e.SettingsComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TravelCreateComponent=ng.core.Component({selector:"travel-create",templateUrl:"views/travel-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,e.LoadingServiceComponent,function(e,t,a,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n,this.loading=i}]}),e.TravelCreateComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title62")),this.disponibilidad=null,this.fecha=null,this.hora=null,this.save=!0,this.mostrarCargando=!1,this.imagenCargando="assets/images/loading.gif",this.lineaSelected=null,this.lineaSelectedShow=null,this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.pagingActualLine={},this.listTarifasSelected=[],this.capacidad_mayor=0,this.vehicleSelected=null,this.vehicleSelectedShow=null,this.totalPageVehicle=1,this.pageSelectedVehicle=1,this.detallePorPaginaVehicle=10,this.pagingActualVehicle={},this.listVehicles=[],this.vehicle_buscar=null,this.rutaSelected=null,this.rutaSelectedShow=null,this.totalPageRuta=1,this.pageSelectedRuta=1,this.detallePorPaginaRuta=10,this.pagingActualRuta={},this.listRutas=[],this.ruta_buscar=null,this.codigo_ciudad=null,this.pagingActualTarifa={},this.totalPageTarifa=1,this.detallePorPaginaTarifa=10,this.pageSelectedTarifa=1,this.listTarifas=[],this.capacidad=0,this.pagingActualChofer={},this.totalPageChofer=1,this.detallePorPaginaChofer=10,this.pageSelectedChofer=1,this.listChoferes=[],this.listChoferesSelected=[],this.texto="Guardar",this.active_status=!0,this.status_publicacion="UNPUBLISHED";try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.TravelCreateComponent.prototype.checkRol=function(){var e="TRIP-CREATE";this.active.url.hasOwnProperty("_value")&&("travel-create"==this.active.url._value[0].path?(this.title=_("title62"),this.save=!0,e="TRIP-CREATE"):(this.title=_("title63"),this.save=!1,e="TRIP-UPDATE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TravelCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.TravelCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPaginaLine=e.detalles,this.totalPageLine=e.pagina,null==this.listLines||this.listLines==null||0==this.listLines.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.TravelCreateComponent.prototype.getValueFirstLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.TravelCreateComponent.prototype.getValuePreviousLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.TravelCreateComponent.prototype.getValueLastLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.TravelCreateComponent.prototype.getValueNextLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.TravelCreateComponent.prototype.callServicesLine=function(e,t){let a=_("message_dflt_4");this.pageSelectedLine=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t;this.mostrarCargando=!0;let i=this.service.callServicesHttp("line-report",n,this.jsonFilterLine);i.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaLine(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.TravelCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listLines=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listLines=[];else if(null==e.count||null==e.count||0==e.count)this.listLines=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listLines=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listLines.push(a);this.pagingActualLine.count=e.count}else this.listLines=[]}},e.TravelCreateComponent.prototype.openModalLineas=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],$("#modalLineas").modal("show")},e.TravelCreateComponent.prototype.buscarLinea=function(){this.jsonFilterLine={};var e=[],t=null;if(null==this.linea_buscar||null==this.linea_buscar||""==this.linea_buscar||"null"==this.linea_buscar||(null==t&&(t={}),t.name="*"+this.linea_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterLine.entities=a}this.jsonFilterLine.sort={"info.created_at":"desc"},this.callServicesLine(1,"&offset=0&limit="+this.detallePorPaginaLine)},e.TravelCreateComponent.prototype.selectedLinea=function(e){null!=e&&($("#modalLineas").modal("hide"),this.lineaSelected=e,e.hasOwnProperty("name")&&(this.lineaSelectedShow=e.name))},e.TravelCreateComponent.prototype.getCantidadSelectedRuta=function(e){null==e||e==null||""==e||(this.detallePorPaginaRuta=e.detalles,this.totalPageRuta=e.pagina,null==this.listRutas||this.listRutas==null||0==this.listRutas.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesRuta(1,"&limit="+this.detallePorPaginaRuta))},e.TravelCreateComponent.prototype.getValueFirstRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("first_page")&&null!=this.pagingActualRuta.first_page&&this.pagingActualRuta.first_page!=null&&""!=this.pagingActualRuta.first_page&&this.callServicesRuta(e,this.pagingActualRuta.first_page)},e.TravelCreateComponent.prototype.getValuePreviousRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("previous_page")&&null!=this.pagingActualRuta.previous_page&&this.pagingActualRuta.previous_page!=null&&""!=this.pagingActualRuta.previous_page&&this.callServicesRuta(e,this.pagingActualRuta.previous_page)},e.TravelCreateComponent.prototype.getValueLastRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("last_page")&&null!=this.pagingActualRuta.last_page&&this.pagingActualRuta.last_page!=null&&""!=this.pagingActualRuta.last_page&&this.callServicesRuta(e,this.pagingActualRuta.last_page)},e.TravelCreateComponent.prototype.getValueNextRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("next_page")&&null!=this.pagingActualRuta.next_page&&this.pagingActualRuta.next_page!=null&&""!=this.pagingActualRuta.next_page&&this.callServicesRuta(e,this.pagingActualRuta.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsRuta=function(e){this.pageSelectedRuta=e},e.TravelCreateComponent.prototype.callServicesRuta=function(e,t){let a=_("message_dflt_4");this.pageSelectedRuta=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t;this.mostrarCargando=!0;let i=this.service.callServicesHttp("route-report",n,this.jsonFilterRoute);i.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaRuta(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.TravelCreateComponent.prototype.procesarRespuestaRuta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRutas=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listRutas=[];else if(null==e.count||null==e.count||0==e.count)this.listRutas=[];else{this.pagingActualRuta={},this.pagingActualRuta.count=e.count;let t=Math.floor(this.pagingActualRuta.count/this.detallePorPaginaRuta),i=this.pagingActualRuta.count%this.detallePorPaginaRuta;if(this.totalPageRuta=0==i?t:t+1,e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?this.detallePorPaginaRuta.next_page=null:this.detallePorPaginaRuta.next_page=e.next_page:this.pagingActualRuta.next_page=null,this.pagingActualRuta.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualRuta.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualRuta.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRutas=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listRutas.push(a);this.pagingActualRuta.count=e.count}else this.listRutas=[]}},e.TravelCreateComponent.prototype.openModalRuta=function(){return null==this.lineaSelected?(this.mensaje="Debe seleccionar la l\xEDnea de transporte primero",void this.msg.warning()):void(this.mensajeServicio=null,this.mostrarCargando=!1,this.ruta_buscar=null,this.listRutas=[],$("#modalRuta").modal("show"))},e.TravelCreateComponent.prototype.buscarRuta=function(){this.jsonFilterRoute={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,null==this.ruta_buscar||null==this.ruta_buscar||""==this.ruta_buscar||"null"==this.ruta_buscar||(null==t&&(t={}),t.name="*"+this.ruta_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterRoute.entities=a}this.jsonFilterRoute.sort={"info.created_at":"desc"},this.callServicesRuta(1,"&offset=0&limit="+this.detallePorPaginaRuta)},e.TravelCreateComponent.prototype.selectedRuta=function(e){if(null!=e&&($("#modalRuta").modal("hide"),this.rutaSelected=e,e.hasOwnProperty("stops")&&null!=e.stops&&0!=e.stops.length)){this.rutaSelectedShow="";for(var t=0;t<e.stops.length;t++)null!=e.stops[t]&&(t==e.stops[t].length-1?this.rutaSelectedShow+=e.stops[t].code:this.rutaSelectedShow=this.rutaSelectedShow+e.stops[t].code+" - ")}},e.TravelCreateComponent.prototype.getCantidadSelectedVehicle=function(e){null==e||e==null||""==e||(this.detallePorPaginaVehicle=e.detalles,this.totalPageVehicle=e.pagina,null==this.listVehicles||this.listVehicles==null||0==this.listVehicles.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesVehicle(1,"&limit="+this.detallePorPaginaVehicle))},e.TravelCreateComponent.prototype.getValueFirstVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("first_page")&&null!=this.pagingActualVehicle.first_page&&this.pagingActualVehicle.first_page!=null&&""!=this.pagingActualVehicle.first_page&&this.callServicesVehicle(e,this.pagingActualVehicle.first_page)},e.TravelCreateComponent.prototype.getValuePreviousVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("previous_page")&&null!=this.pagingActualVehicle.previous_page&&this.pagingActualVehicle.previous_page!=null&&""!=this.pagingActualVehicle.previous_page&&this.callServicesVehicle(e,this.pagingActualVehicle.previous_page)},e.TravelCreateComponent.prototype.getValueLastVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("last_page")&&null!=this.pagingActualVehicle.last_page&&this.pagingActualVehicle.last_page!=null&&""!=this.pagingActualVehicle.last_page&&this.callServicesVehicle(e,this.pagingActualVehicle.last_page)},e.TravelCreateComponent.prototype.getValueNextVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("next_page")&&null!=this.pagingActualVehicle.next_page&&this.pagingActualVehicle.next_page!=null&&""!=this.pagingActualVehicle.next_page&&this.callServicesVehicle(e,this.pagingActualVehicle.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsVehicle=function(e){this.pageSelectedVehicle=e},e.TravelCreateComponent.prototype.callServicesVehicle=function(e,t){let a=_("message_dflt_4");this.pageSelectedVehicle=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t;this.mostrarCargando=!0;let i=this.service.callServicesHttp("car-report",n,this.jsonFilterVehicle);i.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaVehicle(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.TravelCreateComponent.prototype.procesarRespuestaVehicle=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listVehicles=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listLines=[];else if(null==e.count||null==e.count||0==e.count)this.listVehicles=[];else{this.pagingActualVehicle={},this.pagingActualVehicle.count=e.count;let t=Math.floor(this.pagingActualVehicle.count/this.detallePorPaginaVehicle),i=this.pagingActualVehicle.count%this.detallePorPaginaVehicle;if(this.totalPageVehicle=0==i?t:t+1,this.pagingActualVehicle.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualVehicle.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualVehicle.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualVehicle.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listVehicles=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listVehicles.push(a);this.pagingActualVehicle.count=e.count}else this.listVehicles=[]}},e.TravelCreateComponent.prototype.openModalLineas=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],$("#modalLineas").modal("show")},e.TravelCreateComponent.prototype.openModalVehicle=function(){return null==this.lineaSelected?(this.mensaje="Debe seleccionar la l\xEDnea de transporte primero",void this.msg.warning()):void(this.mensajeServicio=null,this.mostrarCargando=!1,this.vehicle_buscar=null,this.listVehicles=[],$("#modalVehicles").modal("show"))},e.TravelCreateComponent.prototype.buscarVehicle=function(){this.jsonFilterVehicle={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,null==this.vehicle_buscar||null==this.vehicle_buscar||""==this.vehicle_buscar||"null"==this.vehicle_buscar||(null==t&&(t={}),t.license_plate="*"+this.vehicle_buscar+"*"),t.active=!0,null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterVehicle.entities=a}this.jsonFilterVehicle.sort={"info.created_at":"desc"},this.callServicesVehicle(1,"&offset=0&limit="+this.detallePorPaginaVehicle)},e.TravelCreateComponent.prototype.selectedLinea=function(e){null!=e&&($("#modalLineas").modal("hide"),this.lineaSelected=e,e.hasOwnProperty("name")&&(this.lineaSelectedShow=e.name))},e.TravelCreateComponent.prototype.selectedVehicle=function(e){null!=e&&($("#modalVehicles").modal("hide"),this.vehicleSelected=e,e.hasOwnProperty("license_plate")&&(this.vehicleSelectedShow=e.license_plate))},e.TravelCreateComponent.prototype.searchTarifas=function(){if(null==this.lineaSelected||null==this.vehicleSelected)return this.mensaje="Antes de colocar las tarifas debe seleccionar la linea de transporte y el veh\xEDculo",void this.msg.warning();this.jsonFilterTarifa={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,t.vehicle_type_id=this.vehicleSelected.vehicle_type_id,null==this.codigo_ciudad||null==this.codigo_ciudad||""==this.codigo_ciudad||"null"==this.codigo_ciudad||(null==t&&(t={}),t.destination_stop_name="*"+this.codigo_ciudad.trim()+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterTarifa.entities=a}this.jsonFilterTarifa.sort={"info.created_at":"desc"},this.callServicesTarifa(1,"&limit="+this.detallePorPaginaTarifa)},e.TravelCreateComponent.prototype.getCantidadSelectedTarifa=function(e){if(null!=e&&null!=e&&""!=e){if(this.detallePorPaginaTarifa=e.detalles,this.totalPageTarifa=e.pagina,null==this.listTarifas||null==this.listTarifas||0==this.listTarifas.length)return this.mensaje=capitalizeOnly(_("message_dflt_4")),void this.msg.warning();this.callServicesTarifa(1,"&limit="+this.detallePorPaginaTarifa)}},e.TravelCreateComponent.prototype.getValueFirstTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("first_page")&&null!=this.pagingActualTarifa.first_page&&this.pagingActualTarifa.first_page!=null&&""!=this.pagingActualTarifa.first_page&&this.callServicesTarifa(e,this.pagingActualTarifa.first_page)},e.TravelCreateComponent.prototype.getValuePreviousTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("previous_page")&&null!=this.pagingActualTarifa.previous_page&&this.pagingActualTarifa.previous_page!=null&&""!=this.pagingActualTarifa.previous_page&&this.callServicesTarifa(e,this.pagingActualTarifa.previous_page)},e.TravelCreateComponent.prototype.getValueLastTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("last_page")&&null!=this.pagingActualTarifa.last_page&&this.pagingActualTarifa.last_page!=null&&""!=this.pagingActualTarifa.last_page&&this.callServicesTarifa(e,this.pagingActualTarifa.last_page)},e.TravelCreateComponent.prototype.getValueNextTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("next_page")&&null!=this.pagingActualTarifa.next_page&&this.pagingActualTarifa.next_page!=null&&""!=this.pagingActualTarifa.next_page&&this.callServicesTarifa(e,this.pagingActualTarifa.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsTarifa=function(e){this.pageSelectedTarifa=e},e.TravelCreateComponent.prototype.callServicesTarifa=function(e,t){let a=_("message_dflt_4");this.pageSelectedTarifa=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("fare-report",n,this.jsonFilterTarifa);i.subscribe(e=>{this.procesarRespuestaTarifa(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.TravelCreateComponent.prototype.procesarRespuestaTarifa=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listTarifas=[],this.mensajeServicio=t;else{if(200!=e.status_http)return this.mensaje=this.service.processMessageError(e,t),void this.msg.error();if(!e.hasOwnProperty("count"))this.listTarifas=[];else if(null==e.count||null==e.count||0==e.count)this.listTarifas=[];else{this.pagingActualTarifa={},this.pagingActualTarifa.count=e.count;let t=Math.floor(this.pagingActualTarifa.count/this.detallePorPaginaTarifa),i=this.pagingActualTarifa.count%this.detallePorPaginaTarifa;if(this.totalPageVehicle=0==i?t:t+1,this.pagingActualTarifa.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualTarifa.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualTarifa.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualTarifa.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listTarifas=[];for(var n=0;n<e.results.length;n++)a=this.formattedTarifa(e.results[n]),null!=a&&this.listTarifas.push(a);this.pagingActualTarifa.count=e.count}else this.listTarifas=[]}}},e.TravelCreateComponent.prototype.formattedTarifa=function(e){if(null==e||e==null||""==e)return null;if(e.hasOwnProperty("amount")&&null!=e.amount&&null!=e.amount&&""!=e.amount)try{e.formatted_amount=amountFormattingObject(100*e.amount),e.formatted_amount=e.formatted_amount.integerPart+","+e.formatted_amount.decimalPart,e.hasOwnProperty("currency")&&null!=e.currency&&""!=e.currency&&null!=e.currency&&(e.formatted_amount=e.formatted_amount+" "+e.currency)}catch(e){}return e},e.TravelCreateComponent.prototype.selectedTarifa=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listTarifas&&0!=this.listTarifas.length)for(var t=0;t<this.listTarifas.length;t++)if(null!=this.listTarifas[t]&&this.listTarifas[t].id==e.id)if(null==this.listTarifas[t].classSelected)this.listTarifasSelected.push(this.listTarifas[t]),this.listTarifas[t].classSelected="selected";else{this.listTarifas[t].classSelected=null;for(var a=0;a<this.listTarifasSelected.length;a++)if(null!=this.listTarifasSelected[a]&&this.listTarifasSelected[a].id==e.id){var n=this.listTarifasSelected.slice(a+1);this.listTarifasSelected=this.listTarifasSelected.slice(0,a),this.listTarifasSelected=this.listTarifasSelected.concat(n)}}},e.TravelCreateComponent.prototype.searchChoferes=function(){if(null==this.lineaSelected)return this.mensaje="Antes de seleccionar el chofer debe seleccionar la l\xEDnea de transporte",void this.msg.warning();this.jsonFilterChofer={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,null==this.rif_buscar||null==this.rif_buscar||""==this.rif_buscar||"null"==this.rif_buscar||(null==t&&(t={}),t.id_doc="*"+this.rif_buscar.trim()+"*"),null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||"null"==this.nombre_buscar||(null==t&&(t={}),t.name="*"+this.nombre_buscar.trim()+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterChofer.entities=a}this.jsonFilterChofer.sort={"info.created_at":"desc"},this.callServicesChofer(1,"&limit="+this.detallePorPaginaChofer)},e.TravelCreateComponent.prototype.getCantidadSelectedChofer=function(e){if(null!=e&&null!=e&&""!=e){if(this.detallePorPaginaChofer=e.detalles,this.totalPageChofer=e.pagina,null==this.listChoferes||null==this.listChoferes||0==this.listChoferes.length)return this.mensaje=capitalizeOnly(_("message_dflt_4")),void this.msg.warning();this.callServicesChofer(1,"&limit="+this.detallePorPaginaChofer)}},e.TravelCreateComponent.prototype.getValueFirstChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("first_page")&&null!=this.pagingActualChofer.first_page&&this.pagingActualChofer.first_page!=null&&""!=this.pagingActualChofer.first_page&&this.callServicesChofer(e,this.pagingActualChofer.first_page)},e.TravelCreateComponent.prototype.getValuePreviousChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("previous_page")&&null!=this.pagingActualChofer.previous_page&&this.pagingActualChofer.previous_page!=null&&""!=this.pagingActualChofer.previous_page&&this.callServicesChofer(e,this.pagingActualChofer.previous_page)},e.TravelCreateComponent.prototype.getValueLastChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("last_page")&&null!=this.pagingActualChofer.last_page&&this.pagingActualChofer.last_page!=null&&""!=this.pagingActualChofer.last_page&&this.callServicesChofer(e,this.pagingActualChofer.last_page)},e.TravelCreateComponent.prototype.getValueNextChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("next_page")&&null!=this.pagingActualChofer.next_page&&this.pagingActualChofer.next_page!=null&&""!=this.pagingActualChofer.next_page&&this.callServicesChofer(e,this.pagingActualChofer.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsChofer=function(e){this.pageSelectedChofer=e},e.TravelCreateComponent.prototype.callServicesChofer=function(e,t){let a=_("message_dflt_4");this.pageSelectedChofer=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("driver-report",n,this.jsonFilterChofer);i.subscribe(e=>{this.procesarRespuestaChofer(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.TravelCreateComponent.prototype.procesarRespuestaChofer=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listChoferes=[],this.mensaje=t,this.msg.error();else{if(200!=e.status_http)return this.mensaje=this.service.processMessageError(e,t),void this.msg.error();if(!e.hasOwnProperty("count"))this.listChoferes=[];else if(null==e.count||null==e.count||0==e.count)this.listChoferes=[];else{this.pagingActualChofer={},this.pagingActualChofer.count=e.count;let t=Math.floor(this.pagingActualChofer.count/this.detallePorPaginaChofer),i=this.pagingActualChofer.count%this.detallePorPaginaChofer;if(this.totalPageChofer=0==i?t:t+1,this.pagingActualChofer.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualChofer.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualChofer.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualChofer.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listChoferes=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listChoferes.push(a);this.pagingActualChofer.count=e.count}else this.listChoferes=[]}}},e.TravelCreateComponent.prototype.selectedChoferes=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listChoferes&&0!=this.listChoferes.length)for(var t=0;t<this.listChoferes.length;t++)if(null!=this.listChoferes[t]&&this.listChoferes[t].id==e.id)if(null==this.listChoferes[t].classSelected)this.listChoferesSelected.push(this.listChoferes[t]),this.listChoferes[t].classSelected="selected";else{this.listChoferes[t].classSelected=null;for(var a=0;a<this.listChoferesSelected.length;a++)if(null!=this.listChoferesSelected[a]&&this.listChoferesSelected[a].id==e.id){var n=this.listChoferesSelected.slice(a+1);this.listChoferesSelected=this.listChoferesSelected.slice(0,a),this.listChoferesSelected=this.listChoferesSelected.concat(n)}}},e.TravelCreateComponent.prototype.openModalLineas=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],$("#modalLineas").modal("show")},e.TravelCreateComponent.prototype.openModalVehicle=function(){return null==this.lineaSelected?(this.mensaje="Debe seleccionar la l\xEDnea de transporte primero",void this.msg.warning()):void(this.mensajeServicio=null,this.mostrarCargando=!1,this.vehicle_buscar=null,this.listVehicles=[],$("#modalVehicles").modal("show"))},e.TravelCreateComponent.prototype.buscarVehicle=function(){this.jsonFilterVehicle={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,null==this.vehicle_buscar||null==this.vehicle_buscar||""==this.vehicle_buscar||"null"==this.vehicle_buscar||(null==t&&(t={}),t.license_plate="*"+this.vehicle_buscar+"*"),t.active=!0,null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterVehicle.entities=a}this.jsonFilterVehicle.sort={"info.created_at":"desc"},this.callServicesVehicle(1,"&offset=0&limit="+this.detallePorPaginaVehicle)},e.TravelCreateComponent.prototype.selectedLinea=function(e){null!=e&&($("#modalLineas").modal("hide"),this.lineaSelected=e,e.hasOwnProperty("name")&&(this.lineaSelectedShow=e.name))},e.TravelCreateComponent.prototype.selectedVehicle=function(e){null!=e&&($("#modalVehicles").modal("hide"),this.vehicleSelected=e,e.hasOwnProperty("license_plate")&&(this.vehicleSelectedShow=e.license_plate),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity))},e.TravelCreateComponent.prototype.getService=function(){},e.TravelCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/travel-report"])},e.TravelCreateComponent.prototype.clean=function(){this.lineaSelected=null,this.lineaSelectedShow=null,this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.pagingActualLine={},this.listTarifasSelected=[],this.vehicleSelected=null,this.vehicleSelectedShow=null,this.totalPageVehicle=1,this.pageSelectedVehicle=1,this.detallePorPaginaVehicle=10,this.pagingActualVehicle={},this.listVehicles=[],this.vehicle_buscar=null,this.rutaSelected=null,this.rutaSelectedShow=null,this.totalPageRuta=1,this.pageSelectedRuta=1,this.detallePorPaginaRuta=10,this.pagingActualRuta={},this.listRutas=[],this.ruta_buscar=null,this.codigo_ciudad=null,this.pagingActualTarifa={},this.totalPageTarifa=1,this.detallePorPaginaTarifa=10,this.pageSelectedTarifa=1,this.listTarifas=[],this.capacidad=0,this.rif_buscar=null,this.nombre_buscar=null,this.pagingActualChofer={},this.totalPageChofer=1,this.detallePorPaginaChofer=10,this.pageSelectedChofer=1,this.listChoferes=[],this.listChoferesSelected=[]},e.TravelCreateComponent.prototype.done=function(){var e={},t="";if(null==this.lineaSelected)return this.mensaje="Debe seleccionar la linea de transporte que realizar\xE1 el viaje",void this.msg.warning();if(t="&business_id="+this.lineaSelected.id,null==this.vehicleSelected)return this.mensaje="Debe seleccionar el veh\xEDculo que realizar\xE1 el viaje",void this.msg.warning();if(this.capacidad>this.vehicleSelected.capacity)return this.mensaje="La capacidad introducida no est\xE1 acorde a la capacidad del veh\xEDculo, debe ser igual o menor a "+this.vehicleSelected.capacity,void this.msg.warning();if(e.vehicle_id=this.vehicleSelected.id,t=t+"&vehicle_id="+this.vehicleSelected.id+"&vehicle_type_id="+this.vehicleSelected.vehicle_type_id+"&vehicle_owner_id="+this.vehicleSelected.owner_id,null==this.rutaSelected)return this.mensaje="Debe seleccionar ruta que se realizar\xE1",void this.msg.warning();if(t=t+"&itinerary_id="+this.rutaSelected.id,null==this.fecha||null==this.fecha||""==this.fecha)return this.mensaje="Debe ingresar la fecha del viaje",void this.msg.warning();var a=new Date;try{new Date(this.fecha)}catch(e){}if(null==this.time||null==this.time||""==this.time)return this.mensaje="Debe ingresar la hora del viaje",void this.msg.warning();if(null==this.capacidad||0==this.capacidad||"0"==this.capacidad)return this.mensaje="Debe ingresar la capacidad de asientos a vender",void this.msg.warning();if(e.seats_active=parseInt(this.capacidad),null==this.capacidad_mayor||0==this.capacidad_mayor||"0"==this.capacidad_mayor)return this.mensaje="Debe ingresar la capacidad de asientos para personas mayores y con discapacidad",void this.msg.warning();e.passenger_limits={},e.passenger_limits.ELDERLY=parseInt(this.capacidad_mayor),e.departure_date=this.fecha+"T"+this.time+":00.000Z",e.active=this.active_status,e.status=this.status_publicacion;var n=[];if(null==this.listChoferesSelected||0==this.listChoferesSelected.length)return this.mensaje="Debe seleccionar al menos un chofer que realizar\xE1 este viaje",void this.msg.warning();for(var r=0;r<this.listChoferesSelected.length;r++)null!=this.listChoferesSelected[r]&&n.push(this.listChoferesSelected[r].id);var s=[];if(null==this.listTarifasSelected||0==this.listTarifasSelected.length)return this.mensaje="Debe seleccionar las tarifas a cobrar",void this.msg.warning();for(var r=0;r<this.listTarifasSelected.length;r++)null!=this.listTarifasSelected[r]&&s.push(this.listTarifasSelected[r].id);e.drivers=n,e.fares=s;let o=_("message_dflt_71"),d=null;this.save?d=this.service.callServicesHttp("travel-post",t,e):(o=_("message_dflt_72"),d=this.service.callServicesHttp("travel-put","&id="+this.id,e)),d.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,o),this.msg.error()})},e.TravelCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_71");this.save||(t=_("message_dflt_72")),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success52")):capitalizeOnly(_("success53")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TravelCreateLineComponent=ng.core.Component({selector:"travel-create-line",templateUrl:"views/travel-create-line.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,e.LoadingServiceComponent,function(e,t,a,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n,this.loading=i}]}),e.TravelCreateLineComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title65")),this.disponibilidad=null,this.fecha=null,this.hora=null,this.save=!0,this.mostrarCargando=!1,this.imagenCargando="assets/images/loading.gif",this.lineaSelected=null,this.lineaSelectedShow=null,this.listTarifasSelected=[],this.capacidad_mayor=0,this.vehicleSelected=null,this.vehicleSelectedShow=null,this.totalPageVehicle=1,this.pageSelectedVehicle=1,this.detallePorPaginaVehicle=10,this.pagingActualVehicle={},this.listVehicles=[],this.vehicle_buscar=null,this.rutaSelected=null,this.rutaSelectedShow=null,this.totalPageRuta=1,this.pageSelectedRuta=1,this.detallePorPaginaRuta=10,this.pagingActualRuta={},this.listRutas=[],this.ruta_buscar=null,this.codigo_ciudad=null,this.pagingActualTarifa={},this.totalPageTarifa=1,this.detallePorPaginaTarifa=10,this.pageSelectedTarifa=1,this.listTarifas=[],this.capacidad=0,this.pagingActualChofer={},this.totalPageChofer=1,this.detallePorPaginaChofer=10,this.pageSelectedChofer=1,this.listChoferes=[],this.listChoferesSelected=[],this.texto="Guardar",this.active_status=!0,this.status_publicacion="UNPUBLISHED";try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.TravelCreateLineComponent.prototype.checkRol=function(){var e="TRIP-LINE-CREATE";this.active.url.hasOwnProperty("_value")&&("travel-create-line"==this.active.url._value[0].path?(this.title=_("title65"),this.save=!0,e="TRIP-LINE-CREATE"):(this.title=_("title63"),this.save=!1,e="TRIP-LINE-UPDATE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TravelCreateLineComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.TravelCreateLineComponent.prototype.getCantidadSelectedRuta=function(e){null==e||e==null||""==e||(this.detallePorPaginaRuta=e.detalles,this.totalPageRuta=e.pagina,null==this.listRutas||this.listRutas==null||0==this.listRutas.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesRuta(1,"&limit="+this.detallePorPaginaRuta))},e.TravelCreateLineComponent.prototype.getValueFirstRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("first_page")&&null!=this.pagingActualRuta.first_page&&this.pagingActualRuta.first_page!=null&&""!=this.pagingActualRuta.first_page&&this.callServicesRuta(e,this.pagingActualRuta.first_page)},e.TravelCreateLineComponent.prototype.getValuePreviousRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("previous_page")&&null!=this.pagingActualRuta.previous_page&&this.pagingActualRuta.previous_page!=null&&""!=this.pagingActualRuta.previous_page&&this.callServicesRuta(e,this.pagingActualRuta.previous_page)},e.TravelCreateLineComponent.prototype.getValueLastRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("last_page")&&null!=this.pagingActualRuta.last_page&&this.pagingActualRuta.last_page!=null&&""!=this.pagingActualRuta.last_page&&this.callServicesRuta(e,this.pagingActualRuta.last_page)},e.TravelCreateLineComponent.prototype.getValueNextRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("next_page")&&null!=this.pagingActualRuta.next_page&&this.pagingActualRuta.next_page!=null&&""!=this.pagingActualRuta.next_page&&this.callServicesRuta(e,this.pagingActualRuta.next_page)},e.TravelCreateLineComponent.prototype.getValueChangeRecordsRuta=function(e){this.pageSelectedRuta=e},e.TravelCreateLineComponent.prototype.callServicesRuta=function(e,t){let a=_("message_dflt_4");this.pageSelectedRuta=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t;this.mostrarCargando=!0;let i=this.service.callServicesHttp("route-line-report",n,this.jsonFilterRoute);i.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaRuta(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.TravelCreateLineComponent.prototype.procesarRespuestaRuta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRutas=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listRutas=[];else if(null==e.count||null==e.count||0==e.count)this.listRutas=[];else{this.pagingActualRuta={},this.pagingActualRuta.count=e.count;let t=Math.floor(this.pagingActualRuta.count/this.detallePorPaginaRuta),i=this.pagingActualRuta.count%this.detallePorPaginaRuta;if(this.totalPageRuta=0==i?t:t+1,e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?this.detallePorPaginaRuta.next_page=null:this.detallePorPaginaRuta.next_page=e.next_page:this.pagingActualRuta.next_page=null,this.pagingActualRuta.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualRuta.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualRuta.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRutas=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listRutas.push(a);this.pagingActualRuta.count=e.count}else this.listRutas=[]}},e.TravelCreateLineComponent.prototype.openModalRuta=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.ruta_buscar=null,this.listRutas=[],$("#modalRuta").modal("show")},e.TravelCreateLineComponent.prototype.buscarRuta=function(){this.jsonFilterRoute={},null==this.ruta_buscar||this.ruta_buscar==null||""==this.ruta_buscar||"null"==this.ruta_buscar||(this.jsonFilterRoute.name=this.ruta_buscar),this.jsonFilterRoute.active=!0,this.callServicesRuta(1,"&offset=0&limit="+this.detallePorPaginaRuta)},e.TravelCreateLineComponent.prototype.selectedRuta=function(e){if(null!=e&&($("#modalRuta").modal("hide"),this.rutaSelected=e,e.hasOwnProperty("stops")&&null!=e.stops&&0!=e.stops.length)){this.rutaSelectedShow="";for(var t=0;t<e.stops.length;t++)null!=e.stops[t]&&(t==e.stops[t].length-1?this.rutaSelectedShow+=e.stops[t].code:this.rutaSelectedShow=this.rutaSelectedShow+e.stops[t].code+" - ")}},e.TravelCreateLineComponent.prototype.getCantidadSelectedVehicle=function(e){null==e||e==null||""==e||(this.detallePorPaginaVehicle=e.detalles,this.totalPageVehicle=e.pagina,null==this.listVehicles||this.listVehicles==null||0==this.listVehicles.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesVehicle(1,"&limit="+this.detallePorPaginaVehicle))},e.TravelCreateLineComponent.prototype.getValueFirstVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("first_page")&&null!=this.pagingActualVehicle.first_page&&this.pagingActualVehicle.first_page!=null&&""!=this.pagingActualVehicle.first_page&&this.callServicesVehicle(e,this.pagingActualVehicle.first_page)},e.TravelCreateLineComponent.prototype.getValuePreviousVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("previous_page")&&null!=this.pagingActualVehicle.previous_page&&this.pagingActualVehicle.previous_page!=null&&""!=this.pagingActualVehicle.previous_page&&this.callServicesVehicle(e,this.pagingActualVehicle.previous_page)},e.TravelCreateLineComponent.prototype.getValueLastVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("last_page")&&null!=this.pagingActualVehicle.last_page&&this.pagingActualVehicle.last_page!=null&&""!=this.pagingActualVehicle.last_page&&this.callServicesVehicle(e,this.pagingActualVehicle.last_page)},e.TravelCreateLineComponent.prototype.getValueNextVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("next_page")&&null!=this.pagingActualVehicle.next_page&&this.pagingActualVehicle.next_page!=null&&""!=this.pagingActualVehicle.next_page&&this.callServicesVehicle(e,this.pagingActualVehicle.next_page)},e.TravelCreateLineComponent.prototype.getValueChangeRecordsVehicle=function(e){this.pageSelectedVehicle=e},e.TravelCreateLineComponent.prototype.callServicesVehicle=function(e,t){let a=_("message_dflt_4");this.pageSelectedVehicle=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="&type=PAGINATE"+t;this.mostrarCargando=!0;let i=this.service.callServicesHttp("car-report-line",n,this.jsonFilterVehicle);i.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaVehicle(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.TravelCreateLineComponent.prototype.procesarRespuestaVehicle=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listVehicles=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listLines=[];else if(null==e.count||null==e.count||0==e.count)this.listVehicles=[];else{this.pagingActualVehicle={},this.pagingActualVehicle.count=e.count;let t=Math.floor(this.pagingActualVehicle.count/this.detallePorPaginaVehicle),i=this.pagingActualVehicle.count%this.detallePorPaginaVehicle;if(this.totalPageVehicle=0==i?t:t+1,this.pagingActualVehicle.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualVehicle.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualVehicle.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualVehicle.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listVehicles=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listVehicles.push(a);this.pagingActualVehicle.count=e.count}else this.listVehicles=[]}},e.TravelCreateLineComponent.prototype.openModalVehicle=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.vehicle_buscar=null,this.listVehicles=[],$("#modalVehicles").modal("show")},e.TravelCreateLineComponent.prototype.buscarVehicle=function(){this.jsonFilterVehicle={},null==this.vehicle_buscar||this.vehicle_buscar==null||""==this.vehicle_buscar||"null"==this.vehicle_buscar||(this.jsonFilterVehicle.license_plate=this.vehicle_buscar.trim()),this.callServicesVehicle(1,"&offset=0&limit="+this.detallePorPaginaVehicle)},e.TravelCreateLineComponent.prototype.selectedVehicle=function(e){null!=e&&($("#modalVehicles").modal("hide"),this.vehicleSelected=e,e.hasOwnProperty("license_plate")&&(this.vehicleSelectedShow=e.license_plate),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity,this.capacidad_mayor=e.capacity))},e.TravelCreateLineComponent.prototype.searchTarifas=function(){if(null==this.vehicleSelected)return this.mensaje="Antes de colocar las tarifas debe seleccionar el veh\xEDculo",void this.msg.warning();this.jsonFilterTarifa={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.service.getBusinessId(),t.vehicle_type_id=this.vehicleSelected.vehicle_type_id,null==this.codigo_ciudad||null==this.codigo_ciudad||""==this.codigo_ciudad||"null"==this.codigo_ciudad||(null==t&&(t={}),t.destination_stop_name="*"+this.codigo_ciudad.trim()+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterTarifa.entities=a}this.jsonFilterTarifa.sort={"info.created_at":"desc"},this.callServicesTarifa(1,"&limit="+this.detallePorPaginaTarifa)},e.TravelCreateLineComponent.prototype.getCantidadSelectedTarifa=function(e){if(null!=e&&null!=e&&""!=e){if(this.detallePorPaginaTarifa=e.detalles,this.totalPageTarifa=e.pagina,null==this.listTarifas||null==this.listTarifas||0==this.listTarifas.length)return this.mensaje=capitalizeOnly(_("message_dflt_4")),void this.msg.warning();this.callServicesTarifa(1,"&limit="+this.detallePorPaginaTarifa)}},e.TravelCreateLineComponent.prototype.getValueFirstTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("first_page")&&null!=this.pagingActualTarifa.first_page&&this.pagingActualTarifa.first_page!=null&&""!=this.pagingActualTarifa.first_page&&this.callServicesTarifa(e,this.pagingActualTarifa.first_page)},e.TravelCreateLineComponent.prototype.getValuePreviousTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("previous_page")&&null!=this.pagingActualTarifa.previous_page&&this.pagingActualTarifa.previous_page!=null&&""!=this.pagingActualTarifa.previous_page&&this.callServicesTarifa(e,this.pagingActualTarifa.previous_page)},e.TravelCreateLineComponent.prototype.getValueLastTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("last_page")&&null!=this.pagingActualTarifa.last_page&&this.pagingActualTarifa.last_page!=null&&""!=this.pagingActualTarifa.last_page&&this.callServicesTarifa(e,this.pagingActualTarifa.last_page)},e.TravelCreateLineComponent.prototype.getValueNextTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("next_page")&&null!=this.pagingActualTarifa.next_page&&this.pagingActualTarifa.next_page!=null&&""!=this.pagingActualTarifa.next_page&&this.callServicesTarifa(e,this.pagingActualTarifa.next_page)},e.TravelCreateLineComponent.prototype.getValueChangeRecordsTarifa=function(e){this.pageSelectedTarifa=e},e.TravelCreateLineComponent.prototype.callServicesTarifa=function(e,t){let a=_("message_dflt_4");this.pageSelectedTarifa=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("fare-report",n,this.jsonFilterTarifa);i.subscribe(e=>{this.procesarRespuestaTarifa(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.TravelCreateLineComponent.prototype.procesarRespuestaTarifa=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listTarifas=[],this.mensajeServicio=t;else{if(200!=e.status_http)return this.mensaje=this.service.processMessageError(e,t),void this.msg.error();if(!e.hasOwnProperty("count"))this.listTarifas=[];else if(null==e.count||null==e.count||0==e.count)this.listTarifas=[];else{this.pagingActualTarifa={},this.pagingActualTarifa.count=e.count;let t=Math.floor(this.pagingActualTarifa.count/this.detallePorPaginaTarifa),i=this.pagingActualTarifa.count%this.detallePorPaginaTarifa;if(this.totalPageVehicle=0==i?t:t+1,this.pagingActualTarifa.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualTarifa.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualTarifa.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualTarifa.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listTarifas=[];for(var n=0;n<e.results.length;n++)a=this.formattedTarifa(e.results[n]),null!=a&&this.listTarifas.push(a);this.pagingActualTarifa.count=e.count}else this.listTarifas=[]}}},e.TravelCreateLineComponent.prototype.formattedTarifa=function(e){if(null==e||e==null||""==e)return null;if(e.hasOwnProperty("amount")&&null!=e.amount&&null!=e.amount&&""!=e.amount)try{e.formatted_amount=amountFormattingObject(100*e.amount),e.formatted_amount=e.formatted_amount.integerPart+","+e.formatted_amount.decimalPart,e.hasOwnProperty("currency")&&null!=e.currency&&""!=e.currency&&null!=e.currency&&(e.formatted_amount=e.formatted_amount+" "+e.currency)}catch(e){}return e},e.TravelCreateLineComponent.prototype.selectedTarifa=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listTarifas&&0!=this.listTarifas.length)for(var t=0;t<this.listTarifas.length;t++)if(null!=this.listTarifas[t]&&this.listTarifas[t].id==e.id)if(null==this.listTarifas[t].classSelected)this.listTarifasSelected.push(this.listTarifas[t]),this.listTarifas[t].classSelected="selected";else{this.listTarifas[t].classSelected=null;for(var a=0;a<this.listTarifasSelected.length;a++)if(null!=this.listTarifasSelected[a]&&this.listTarifasSelected[a].id==e.id){var n=this.listTarifasSelected.slice(a+1);this.listTarifasSelected=this.listTarifasSelected.slice(0,a),this.listTarifasSelected=this.listTarifasSelected.concat(n)}}},e.TravelCreateLineComponent.prototype.searchChoferes=function(){this.jsonFilterChofer={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.service.getBusinessId(),null==this.rif_buscar||null==this.rif_buscar||""==this.rif_buscar||"null"==this.rif_buscar||(null==t&&(t={}),t.id_doc="*"+this.rif_buscar.trim()+"*"),null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||"null"==this.nombre_buscar||(null==t&&(t={}),t.name="*"+this.nombre_buscar.trim()+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterChofer.entities=a}this.jsonFilterChofer.sort={"info.created_at":"desc"},this.callServicesChofer(1,"&limit="+this.detallePorPaginaChofer)},e.TravelCreateLineComponent.prototype.getCantidadSelectedChofer=function(e){if(null!=e&&null!=e&&""!=e){if(this.detallePorPaginaChofer=e.detalles,this.totalPageChofer=e.pagina,null==this.listChoferes||null==this.listChoferes||0==this.listChoferes.length)return this.mensaje=capitalizeOnly(_("message_dflt_4")),void this.msg.warning();this.callServicesChofer(1,"&limit="+this.detallePorPaginaChofer)}},e.TravelCreateLineComponent.prototype.getValueFirstChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("first_page")&&null!=this.pagingActualChofer.first_page&&this.pagingActualChofer.first_page!=null&&""!=this.pagingActualChofer.first_page&&this.callServicesChofer(e,this.pagingActualChofer.first_page)},e.TravelCreateLineComponent.prototype.getValuePreviousChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("previous_page")&&null!=this.pagingActualChofer.previous_page&&this.pagingActualChofer.previous_page!=null&&""!=this.pagingActualChofer.previous_page&&this.callServicesChofer(e,this.pagingActualChofer.previous_page)},e.TravelCreateLineComponent.prototype.getValueLastChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("last_page")&&null!=this.pagingActualChofer.last_page&&this.pagingActualChofer.last_page!=null&&""!=this.pagingActualChofer.last_page&&this.callServicesChofer(e,this.pagingActualChofer.last_page)},e.TravelCreateLineComponent.prototype.getValueNextChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("next_page")&&null!=this.pagingActualChofer.next_page&&this.pagingActualChofer.next_page!=null&&""!=this.pagingActualChofer.next_page&&this.callServicesChofer(e,this.pagingActualChofer.next_page)},e.TravelCreateLineComponent.prototype.getValueChangeRecordsChofer=function(e){this.pageSelectedChofer=e},e.TravelCreateLineComponent.prototype.callServicesChofer=function(e,t){let a=_("message_dflt_4");this.pageSelectedChofer=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("driver-report",n,this.jsonFilterChofer);i.subscribe(e=>{this.procesarRespuestaChofer(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.TravelCreateLineComponent.prototype.procesarRespuestaChofer=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listChoferes=[],this.mensaje=t,this.msg.error();else{if(200!=e.status_http)return this.mensaje=this.service.processMessageError(e,t),void this.msg.error();if(!e.hasOwnProperty("count"))this.listChoferes=[];else if(null==e.count||null==e.count||0==e.count)this.listChoferes=[];else{this.pagingActualChofer={},this.pagingActualChofer.count=e.count;let t=Math.floor(this.pagingActualChofer.count/this.detallePorPaginaChofer),i=this.pagingActualChofer.count%this.detallePorPaginaChofer;if(this.totalPageChofer=0==i?t:t+1,this.pagingActualChofer.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualChofer.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualChofer.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualChofer.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listChoferes=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listChoferes.push(a);this.pagingActualChofer.count=e.count}else this.listChoferes=[]}}},e.TravelCreateLineComponent.prototype.selectedChoferes=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listChoferes&&0!=this.listChoferes.length)for(var t=0;t<this.listChoferes.length;t++)if(null!=this.listChoferes[t]&&this.listChoferes[t].id==e.id)if(null==this.listChoferes[t].classSelected)this.listChoferesSelected.push(this.listChoferes[t]),this.listChoferes[t].classSelected="selected";else{this.listChoferes[t].classSelected=null;for(var a=0;a<this.listChoferesSelected.length;a++)if(null!=this.listChoferesSelected[a]&&this.listChoferesSelected[a].id==e.id){var n=this.listChoferesSelected.slice(a+1);this.listChoferesSelected=this.listChoferesSelected.slice(0,a),this.listChoferesSelected=this.listChoferesSelected.concat(n)}}},e.TravelCreateLineComponent.prototype.openModalVehicle=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.vehicle_buscar=null,this.listVehicles=[],$("#modalVehicles").modal("show")},e.TravelCreateLineComponent.prototype.getService=function(){},e.TravelCreateLineComponent.prototype.getValueMsg=function(){this.router.navigate(["/travel-report-line"])},e.TravelCreateLineComponent.prototype.clean=function(){this.lineaSelected=null,this.lineaSelectedShow=null,this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.pagingActualLine={},this.listTarifasSelected=[],this.vehicleSelected=null,this.vehicleSelectedShow=null,this.totalPageVehicle=1,this.pageSelectedVehicle=1,this.detallePorPaginaVehicle=10,this.pagingActualVehicle={},this.listVehicles=[],this.vehicle_buscar=null,this.rutaSelected=null,this.rutaSelectedShow=null,this.totalPageRuta=1,this.pageSelectedRuta=1,this.detallePorPaginaRuta=10,this.pagingActualRuta={},this.listRutas=[],this.ruta_buscar=null,this.codigo_ciudad=null,this.pagingActualTarifa={},this.totalPageTarifa=1,this.detallePorPaginaTarifa=10,this.pageSelectedTarifa=1,this.listTarifas=[],this.capacidad=0,this.rif_buscar=null,this.nombre_buscar=null,this.pagingActualChofer={},this.totalPageChofer=1,this.detallePorPaginaChofer=10,this.pageSelectedChofer=1,this.listChoferes=[],this.listChoferesSelected=[],this.capacidad_mayor=0},e.TravelCreateLineComponent.prototype.done=function(){var e={},t="";if(t="&business_id="+this.service.getBusinessId(),null==this.vehicleSelected)return this.mensaje="Debe seleccionar el veh\xEDculo que realizar\xE1 el viaje",void this.msg.warning();if(this.capacidad>this.vehicleSelected.capacity)return this.mensaje="La capacidad introducida no est\xE1 acorde a la capacidad del veh\xEDculo, debe ser igual o menor a "+this.vehicleSelected.capacity,void this.msg.warning();if(e.vehicle_id=this.vehicleSelected.id,t=t+"&vehicle_id="+this.vehicleSelected.id+"&vehicle_type_id="+this.vehicleSelected.vehicle_type_id+"&vehicle_owner_id="+this.vehicleSelected.owner_id,null==this.rutaSelected)return this.mensaje="Debe seleccionar ruta que se realizar\xE1",void this.msg.warning();if(t=t+"&itinerary_id="+this.rutaSelected.id,null==this.fecha||null==this.fecha||""==this.fecha)return this.mensaje="Debe ingresar la fecha del viaje",void this.msg.warning();var a=new Date;try{new Date(this.fecha)}catch(e){}if(null==this.time||null==this.time||""==this.time)return this.mensaje="Debe ingresar la hora del viaje",void this.msg.warning();if(null==this.capacidad||0==this.capacidad||"0"==this.capacidad)return this.mensaje="Debe ingresar la capacidad de asientos a vender",void this.msg.warning();if(e.seats_active=parseInt(this.capacidad),null==this.capacidad_mayor||0==this.capacidad_mayor||"0"==this.capacidad_mayor)return this.mensaje="Debe ingresar la capacidad de asientos para personas mayores y con discapacidad",void this.msg.warning();e.passenger_limits={},e.passenger_limits.ELDERLY=parseInt(this.capacidad_mayor),e.departure_date=this.fecha+"T"+this.time+":00.000Z",e.active=this.active_status,e.status=this.status_publicacion;var n=[];if(null==this.listChoferesSelected||0==this.listChoferesSelected.length)return this.mensaje="Debe seleccionar al menos un chofer que realizar\xE1 este viaje",void this.msg.warning();for(var r=0;r<this.listChoferesSelected.length;r++)null!=this.listChoferesSelected[r]&&n.push(this.listChoferesSelected[r].id);var s=[];if(null==this.listTarifasSelected||0==this.listTarifasSelected.length)return this.mensaje="Debe seleccionar las tarifas a cobrar",void this.msg.warning();for(var r=0;r<this.listTarifasSelected.length;r++)null!=this.listTarifasSelected[r]&&s.push(this.listTarifasSelected[r].id);e.drivers=n,e.fares=s;let o=_("message_dflt_71"),d=null;this.save?d=this.service.callServicesHttp("travel-post",t,e):(o=_("message_dflt_72"),d=this.service.callServicesHttp("travel-put","&id="+this.id,e)),d.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,o),this.msg.error()})},e.TravelCreateLineComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_71");this.save||(t=_("message_dflt_72")),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success52")):capitalizeOnly(_("success53")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelCreateLineComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TripPassengerComponent=ng.core.Component({selector:"travel-passengers",templateUrl:"views/travel-passengers.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.TripPassengerComponent.prototype.ngOnInit=function(){try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=100,this.pageSelected=1,this.listRegister=[],this.jsonFilter={},this.checkRol()},e.TripPassengerComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=0;a<t.length;a++)if(null!=t[a]&&"PASSENGERS-TRIP-LINE"==t[a].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TripPassengerComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("trip_id")&&(this.trip_id=this.active.queryParams._value.trip_id,this.active.queryParams._value.hasOwnProperty("itinerary_id")&&(this.itinerary_id=this.active.queryParams._value.itinerary_id,this.search()))},e.TripPassengerComponent.prototype.search=function(){this.jsonFilter={},null==this.pasajero||this.pasajero==null||""==this.pasajero||"null"==this.pasajero||(this.jsonFilter.passenger=this.pasajero.trim()),null==this.destino||this.destino==null||""==this.destino||"null"==this.destino||(this.jsonFilter.destination_stop=this.destino.trim()),this.callServices(1,"&limit="+this.detallePorPagina)},e.TripPassengerComponent.prototype.clean=function(){this.pasajero=null,this.destino=null},e.TripPassengerComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.TripPassengerComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.TripPassengerComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.TripPassengerComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.TripPassengerComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.TripPassengerComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.TripPassengerComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t),this.listRegister=[];let n="&type=PAGINATE"+t+"&trip_id="+this.trip_id+"&itinerary_id="+this.itinerary_id,i=this.service.callServicesHttp("travel-passenger",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.TripPassengerComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.TripPassengerComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("type")&&null!=e.type&&null!=e.type&&""!=e.type&&(e.formatted_type=_(e.type).toUpperCase()),e)}})(window.app||(window.app={}));(function(e){e.TravelReportComponent=ng.core.Component({selector:"travel-report",templateUrl:"views/travel-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.TravelReportComponent.prototype.ngOnInit=function(){this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"PUBLISHED",name:"Publicado"},{value:"UNPUBLISHED",name:"No publicado"},{value:"INACTIVE",name:"Suspendido"}],this.status=null,this.parada=null,this.placa=null,this.chofer=null,this.horario=null,this.linea=null,this.fecha=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.TravelReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("TRIP"!=t[n].name)"TRIP"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TravelReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.TravelReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"TRIP-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.TravelReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.line_name="*"+this.linea+"*"),null==this.parada||null==this.parada||""==this.parada||"null"==this.parada||(null==t&&(t={}),t["fares.destination_stop_name"]="*"+this.parada+"*"),null==this.placa||null==this.placa||""==this.placa||"null"==this.placa||(null==t&&(t={}),t.vehicle_license_plate="*"+this.placa+"*"),null==this.chofer||null==this.chofer||""==this.chofer||"null"==this.chofer||(null==t&&(t={}),t["drivers.name"]="*"+this.chofer+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||("ACTIVE"==this.status?(t.active=!0,t.status="PUBLISHED"):"INACTIVE"==this.status?t.active=!1:"UNPUBLISHED"==this.status&&(t.status="UNPUBLISHED")),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}if(null!=this.fecha&&null!=this.fecha&&""!=this.fecha){var a=[{greater_than_equal:this.fecha,less_than_equal:this.end,fecha:"departure_date",time_zone:getTimeZone()}];this.jsonFilter.ranges=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.TravelReportComponent.prototype.clean=function(){this.status=null,this.parada=null,this.placa=null,this.chofer=null,this.horario=null,this.linea=null,this.fecha=null},e.TravelReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.TravelReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.TravelReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.TravelReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.TravelReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.TravelReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.TravelReportComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("travel-report",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.TravelReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.TravelReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.TravelReportComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(e.hasOwnProperty("fares")&&null!=e.fares&&null!=e.fares&&0!=e.fares.length)for(var t=0;t<e.fares.length;t++)if(null!=e.fares[t]&&e.fares[t].hasOwnProperty("amount"))try{e.fares[t].formatted_amount=amountFormattingObject(100*e.fares[t].amount),e.fares[t].formatted_amount=e.fares[t].formatted_amount.integerPart+","+e.fares[t].formatted_amount.decimalPart,e.fares[t].hasOwnProperty("currency")&&null!=e.fares[t].currency&&null!=e.fares[t].currency&&""!=e.fares[t].currency&&(e.fares[t].formatted_amount=e.fares[t].formatted_amount+" "+_(e.fares[t].currency))}catch(e){console.log(e)}if(e.hasOwnProperty("departure_date"))try{e.formatted_departure_date=formattingDate(e.departure_date)}catch(e){}if(e.hasOwnProperty("seats_active")&&e.hasOwnProperty("seats_available"))try{e.ocup=e.seats_active-e.seats_available}catch(e){}return e.actions=[],null!=this.checkAction("TRIP-DELETE")&&e.actions.push(this.checkAction("TRIP-DELETE")),e.actions.push({name:"TRAVEL-UPDATE",functionality_detail:"Actualizar viaje"}),e.actions.push({name:"TRAVEL-VIEW",functionality_detail:"Ver lista de embarque"}),e.hasOwnProperty("active")&&(e.active?e.hasOwnProperty("status")&&("PUBLISHED"==e.status?e.formatted_status="PUBLICADO":(e.formatted_status=" NO PUBLICADO",null!=this.checkAction("TRIP-PUBLISH")&&e.actions.push(this.checkAction("TRIP-PUBLISH")))):e.formatted_status="SUSPENDIDO"),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&("ACTIVE"==e.status?(e.actions.push({name:"TRAVEL-INACTIVE",functionality_detail:"Suspender viaje"}),e.actions.push({name:"TRAVEL-COMPLETE",functionality_detail:"Completar viaje"}),e.actions.push({name:"TRAVEL-CANCEL",functionality_detail:"Cancelar viaje"})):"INACTIVE"==e.status&&e.actions.push({name:"TRAVEL-ACTIVE",functionality_detail:"Reanudar viaje"})),e},e.TravelReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.TravelReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,this.fecha_reactivacion=null,this.hora_reactivacion=null,t.hasOwnProperty("name"))switch(t.name){case"TRIP-DELETE":$("#modalDeleteTravel").modal("show");break;case"TRIP-PUBLISH":$("#modelPusblishTravel").modal("show");break;case"TRAVEL-INACTIVE":$("#modalInactivateTravel").modal("show");break;case"TRAVEL-COMPLETE":$("#modalCompletedTravel").modal("show");break;case"TRAVEL-CANCEL":$("#modalCancelTravel").modal("show");break;case"TRAVEL-VIEW":this.router.navigate(["/travel-view"],{queryParams:{id:e.id}});break;case"TRAVEL-UPDATE":this.router.navigate(["/travel-update"],{queryParams:{id:e.id}});break;default:}},e.TravelReportComponent.prototype.deleteData=function(){if($("#modalDeleteTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id+"&itinerary_id="+this.dataSelected.itinerary_id;let t=_("message_dflt_17"),a=this.service.callServicesHttp("travel-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.TravelReportComponent.prototype.publishData=function(){if($("#modelPusblishTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id+"&itinerary_id="+this.dataSelected.itinerary_id+"&vehicle_id="+this.dataSelected.vehicle_id+"&vehicle_type_id="+this.dataSelected.vehicle_type_id+"&vehicle_owner_id="+this.dataSelected.vehicle_owner_id,t={};try{if(this.dataSelected.hasOwnProperty("departure_date")&&(t.departure_date=this.dataSelected.departure_date+"Z"),this.dataSelected.hasOwnProperty("vehicle_id")&&(t.vehicle_id=this.dataSelected.vehicle_id),this.dataSelected.hasOwnProperty("seats_active")&&(t.seats_active=this.dataSelected.seats_active),this.dataSelected.hasOwnProperty("active")&&(t.active=this.dataSelected.active),this.dataSelected.hasOwnProperty("drivers")&&null!=this.dataSelected.drivers&&0!=this.dataSelected.drivers.length){t.drivers=[];for(var a=0;a<this.dataSelected.drivers.length;a++)null!=this.dataSelected.drivers[a]&&t.drivers.push(this.dataSelected.drivers[a].id)}if(this.dataSelected.hasOwnProperty("fares")&&null!=this.dataSelected.fares&&0!=this.dataSelected.fares.length){t.fares=[];for(var a=0;a<this.dataSelected.fares.length;a++)null!=this.dataSelected.fares[a]&&t.fares.push(this.dataSelected.fares[a].id)}t.status="PUBLISHED"}catch(e){}let n=_("message_dflt_72"),i=this.service.callServicesHttp("travel-put",e,t);i.subscribe(e=>{this.procesarRespuestaPublish(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.TravelReportComponent.prototype.procesarRespuestaPublish=function(e){let t=_("message_dflt_72");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id&&this.listRegister[a].line_id==e.line_id&&this.listRegister[a].itinerary_id==e.itinerary_id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success54"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.inactiveData=function(){if($("#modalInactivateTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("travel-inactive",e,null);this.procesarRespuestaDesactivar(t)}},e.TravelReportComponent.prototype.cancelData=function(){if($("#modalCancelTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("travel-cancel",e,null);this.procesarRespuestaCancelar(t)}},e.TravelReportComponent.prototype.completeData=function(){if($("#modalCompletedTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("travel-complete",e,null);this.procesarRespuestaCompletar(t)}},e.TravelReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_17");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success1")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_19");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success12"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_18");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success11"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.procesarRespuestaCancelar=function(e){let t=_("message_dflt_20");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success15"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.procesarRespuestaCompletar=function(e){let t=_("message_dflt_21");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success14"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TravelReportLineComponent=ng.core.Component({selector:"travel-report-line",templateUrl:"views/travel-report-line.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.TravelReportLineComponent.prototype.ngOnInit=function(){this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"PUBLISHED",name:"Publicado"},{value:"UNPUBLISHED",name:"No publicado"},{value:"INACTIVE",name:"Suspendido"}],this.status=null,this.parada=null,this.placa=null,this.chofer=null,this.horario=null,this.linea=null,this.fecha=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.TravelReportLineComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("TRIP-LINE"!=t[n].name)"TRIP-LINE"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TravelReportLineComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.TravelReportLineComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"TRIP-LINE-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.TravelReportLineComponent.prototype.search=function(){this.jsonFilter={};null==this.init||this.init==null||""==this.init||null==this.end||this.end==null||""==this.end||(this.jsonFilter.departure_date={},this.jsonFilter.departure_date.lte=this.end+"T23:59:59.000Z",this.jsonFilter.departure_date.gte=this.init+"T00:00:00.000Z",this.jsonFilter.departure_date.time_zone=getTimeZone()),null==this.parada||this.parada==null||""==this.parada||"null"==this.parada||(this.jsonFilter.destination_stop=this.parada),null==this.placa||this.placa==null||""==this.placa||"null"==this.placa||(this.jsonFilter.vehicle=this.placa),null==this.chofer||this.chofer==null||""==this.chofer||"null"==this.chofer||(this.jsonFilter.driver=this.chofer),null==this.status||this.status==null||""==this.status||"null"==this.status||("PUBLISHED"==this.status?(this.jsonFilter.active=!0,this.jsonFilter.status=["PUBLISHED"]):"INACTIVE"==this.status?this.jsonFilter.active=!1:"UNPUBLISHED"==this.status&&(this.jsonFilter.status=["UNPUBLISHED"])),this.callServices(1,"&limit="+this.detallePorPagina)},e.TravelReportLineComponent.prototype.clean=function(){this.init=null,this.end=null,this.parada=null,this.placa=null,this.chofer=null,this.status=null},e.TravelReportLineComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.TravelReportLineComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.TravelReportLineComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.TravelReportLineComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.TravelReportLineComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.TravelReportLineComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.TravelReportLineComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t),this.listRegister=[];let n="&type=PAGINATE"+t,i=this.service.callServicesHttp("travel-report-line",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.TravelReportLineComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.TravelReportLineComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.TravelReportLineComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(this.listItems=[],e.hasOwnProperty("fares")&&null!=e.fares&&null!=e.fares&&0!=e.fares.length)for(var t=0;t<e.fares.length;t++)if(null!=e.fares[t]&&e.fares[t].hasOwnProperty("amount"))try{e.fares[t].formatted_amount=amountFormattingObject(100*e.fares[t].amount),e.fares[t].formatted_amount=e.fares[t].formatted_amount.integerPart+","+e.fares[t].formatted_amount.decimalPart,e.fares[t].hasOwnProperty("currency")&&null!=e.fares[t].currency&&null!=e.fares[t].currency&&""!=e.fares[t].currency&&(e.fares[t].formatted_amount=e.fares[t].formatted_amount+" "+_(e.fares[t].currency))}catch(e){console.log(e)}if(e.hasOwnProperty("departure_date"))try{e.formatted_departure_date=formattingDate(e.departure_date)}catch(e){}if(e.hasOwnProperty("seats_active")&&e.hasOwnProperty("seats_available"))try{e.ocup=e.seats_active-e.seats_available}catch(e){}return e.actions=[],null!=this.checkAction("TRIP-DELETE")&&e.actions.push(this.checkAction("TRIP-DELETE")),null!=this.checkAction("PASSENGERS-TRIP-LINE")&&e.actions.push(this.checkAction("PASSENGERS-TRIP-LINE")),e.hasOwnProperty("active")&&(e.active?"PUBLISHED"==e.status?e.formatted_status="PUBLICADO":e.formatted_status="NO PUBLICADO":e.formatted_status="SUSPENDIDO"),e},e.TravelReportLineComponent.prototype.deselectedData=function(){this.dataSelected=null},e.TravelReportLineComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,this.fecha_reactivacion=null,this.hora_reactivacion=null,t.hasOwnProperty("name"))switch(t.name){case"TRIP-DELETE":$("#modalDeleteTravel").modal("show");break;case"TRAVEL-VIEW":this.router.navigate(["/travel-view"],{queryParams:{id:e.id}});break;case"TRAVEL-UPDATE":this.router.navigate(["/travel-update"],{queryParams:{id:e.id}});break;case"PASSENGERS-TRIP-LINE":this.router.navigate(["/travel-passengers"],{queryParams:{itinerary_id:e.itinerary_id,trip_id:e.id}});break;default:}},e.TravelReportLineComponent.prototype.deleteData=function(){if($("#modalDeleteTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id+"&itinerary_id="+this.dataSelected.itinerary_id;let t=_("message_dflt_17"),a=this.service.callServicesHttp("travel-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.TravelReportLineComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_17");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success1")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelReportLineComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TravelViewComponent=ng.core.Component({selector:"travel-view",templateUrl:"views/travel-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,a){this.msg=e,this.mensaje="",this.router=t,this.active=a}]}),e.TravelViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title11")),this.id=null,this.ruta=null,this.linea=null,this.conductor=null,this.auto=null,this.fecha_salida=null,this.fecha_vencimiento=null,this.max=null,this.ocupados=null,this.disponibles=null,this.status=null,this.pasajeros=[],this.getData()},e.TravelViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.TravelViewComponent.prototype.getService=function(){},e.TravelViewComponent.prototype.formattedData=function(){},e.TravelViewComponent.prototype.print=function(){window.print()},e.TravelViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarCreateComponent=ng.core.Component({selector:"car-create",templateUrl:"views/car-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.CarCreateComponent.prototype.ngOnInit=function(){this.texto="Crear",this.claseResponsive="col-lg-4 col-md-4 col-sm-12 col-12",this.title=capitalizeOnly(_("title2")),this.listType=[{value:null,name:"Ninguno"},{value:"MINIBUS",name:"Bus"},{value:"HIPER",name:"Buscama"},{value:"MINI",name:"Autom\xF3vil"}],this.pagingActual={},this.detallePorPagina=10,this.totalPage=1,this.pageSelected=1,this.pagingActualType={},this.detallePorPaginaType=10,this.totalPageType=1,this.pageSelectedType=1,this.rif_buscar=null,this.nombre_buscar=null,this.listRegister=[],this.listRegisterType=[],this.linea=null,this.profileSelected=null,this.lineSelected=null,this.placa=null,this.carroceria=null,this.capacidad=null,this.marca=null,this.color=null,this.anno=null,this.type=null,this.nombre_buscar_type=null,this.typeSelected=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.active_status=!0,this.checkRol()},e.CarCreateComponent.prototype.checkRol=function(){var e="CREATE-VEHICLE";this.active.url.hasOwnProperty("_value")&&("car-create"==this.active.url._value[0].path?(this.title=_("title2"),this.save=!0,e="CREATE-VEHICLE"):(this.title=_("title4"),this.save=!1,e="UPDATE-VEHICLE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarCreateComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("car-create"==this.active.url._value[0].path?(this.title=capitalizeOnly(_("title2")),this.texto="Crear",this.save=!0):(this.title=capitalizeOnly(_("title4")),this.texto="Actualizar",this.claseResponsive="col-lg-12 col-md-12 col-sm-12 col-12",this.save=!1,this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("owner_id")&&(this.owner_id=this.active.queryParams._value.owner_id),this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id),this.active.queryParams._value.hasOwnProperty("vehicle_type_id")&&(this.vehicle_type_id=this.active.queryParams._value.vehicle_type_id),this.getService())))},e.CarCreateComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||"null"==this.nombre_buscar||(null==t&&(t={}),t.name="*"+this.nombre_buscar.trim()+"*"),null==this.rif_buscar||null==this.rif_buscar||""==this.rif_buscar||"null"==this.rif_buscar||(null==t&&(t={}),t.id_doc="*"+this.rif_buscar.trim()+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.CarCreateComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CarCreateComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CarCreateComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CarCreateComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CarCreateComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CarCreateComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CarCreateComponent.prototype.searchVehicleType=function(){this.jsonFilterType={};var e=[],t=null;if(null==this.nombre_buscar_type||null==this.nombre_buscar_type||""==this.nombre_buscar_type||"null"==this.nombre_buscar_type||(null==t&&(t={}),t.name="*"+this.nombre_buscar_type+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterType.entities=a}this.jsonFilterType.sort={"info.created_at":"desc"},this.callServicesType(1,"&limit="+this.detallePorPaginaType)},e.CarCreateComponent.prototype.getCantidadSelectedType=function(e){null==e||e==null||""==e||(this.detallePorPaginaType=e.detalles,this.totalPageType=e.pagina,null==this.listRegisterType||this.listRegisterType==null||0==this.listRegisterType.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesType(1,"&limit="+this.detallePorPaginaType))},e.CarCreateComponent.prototype.getValueFirstType=function(e){this.listRegisterType=[],this.pagingActualType.hasOwnProperty("first_page")&&null!=this.pagingActualType.first_page&&this.pagingActualType.first_page!=null&&""!=this.pagingActualType.first_page&&this.callServicesType(e,this.pagingActualType.first_page)},e.CarCreateComponent.prototype.getValuePreviousType=function(e){this.listRegisterType=[],this.pagingActualType.hasOwnProperty("previous_page")&&null!=this.pagingActualType.previous_page&&this.pagingActualType.previous_page!=null&&""!=this.pagingActualType.previous_page&&this.callServicesType(e,this.pagingActualType.previous_page)},e.CarCreateComponent.prototype.getValueLastType=function(e){this.listRegisterType=[],this.pagingActualType.hasOwnProperty("last_page")&&null!=this.pagingActualType.last_page&&this.pagingActualType.last_page!=null&&""!=this.pagingActualType.last_page&&this.callServicesType(e,this.pagingActualType.last_page)},e.CarCreateComponent.prototype.getValueNextType=function(e){this.listRegisterType=[],this.pagingActualType.hasOwnProperty("next_page")&&null!=this.pagingActualType.next_page&&this.pagingActualType.next_page!=null&&""!=this.pagingActualType.next_page&&this.callServicesType(e,this.pagingActualType.next_page)},e.CarCreateComponent.prototype.getValueChangeRecordsType=function(e){this.pageSelectedType=e},e.CarCreateComponent.prototype.callServicesType=function(e,t){let a=_("message_dflt_4");this.pageSelectedType=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("car-type-report",n,this.jsonFilterType);i.subscribe(e=>{this.procesarRespuestaType(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.CarCreateComponent.prototype.procesarRespuestaType=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegisterType=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegisterType=[];else if(null==e.count||null==e.count||0==e.count)this.listRegisterType=[];else{this.pagingActualType={},this.pagingActualType.count=e.count;let t=Math.floor(this.pagingActualType.count/this.detallePorPaginaType),i=this.pagingActualType.count%this.detallePorPaginaType;if(this.totalPageType=0==i?t:t+1,this.pagingActualType.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualType.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualType.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualType.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegisterType=[];for(var n=0;n<e.results.length;n++)a=this.formattedDataType(e.results[n]),null!=a&&this.listRegisterType.push(a);this.pagingActual.count=e.count}else this.listRegisterType=[]}},e.CarCreateComponent.prototype.formattedDataType=function(e){return null==e||null==e||""==e?null:e},e.CarCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("car-get","&id="+this.id+"&owner_id="+this.owner_id+"&vehicle_type_id="+this.vehicle_type_id+"&business_id="+this.business_id,null),t=_("message_dflt_36");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.CarCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_36");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarCreateComponent.prototype.formattedDataGET=function(e){e.hasOwnProperty("license_plate")&&null!=e.license_plate&&e.license_plate!=null&&""!=e.license_plate&&(this.placa=e.license_plate),e.hasOwnProperty("bodywork")&&null!=e.bodywork&&e.bodywork!=null&&""!=e.bodywork&&(this.carroceria=e.bodywork),e.hasOwnProperty("brand")&&null!=e.brand&&e.brand!=null&&""!=e.brand&&(this.marca=e.brand),e.hasOwnProperty("year")&&null!=e.year&&e.year!=null&&""!=e.year&&(this.anno=e.year),e.hasOwnProperty("color")&&null!=e.color&&e.color!=null&&""!=e.color&&(this.color=e.color),e.hasOwnProperty("vehicle_type_name")&&null!=e.vehicle_type_name&&e.vehicle_type_name!=null&&""!=e.vehicle_type_name&&(this.typeSelected={},this.typeSelected.name=e.vehicle_type_name,e.hasOwnProperty("capacity")&&(this.typeSelected.capacity=e.capacity)),e.hasOwnProperty("owner_name")&&null!=e.owner_name&&e.owner_name!=null&&""!=e.owner_name&&(this.profileSelected={},this.profileSelected.name=e.owner_name,e.hasOwnProperty("owner_id_doc")&&null!=e.owner_id_doc&&e.owner_id_doc!=null&&""!=e.owner_id_doc&&(this.profileSelected.id_doc=e.owner_id_doc),e.hasOwnProperty("owner_email")&&null!=e.owner_email&&e.owner_email!=null&&""!=e.owner_email&&(this.profileSelected.email=e.owner_email),e.hasOwnProperty("owner_phone")&&null!=e.owner_phone&&e.owner_phone!=null&&""!=e.owner_phone&&(this.profileSelected.phone=e.owner_phone),e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.profileSelected.line_name=e.line_name)),e.hasOwnProperty("info")&&null!=e.info&&e.info!=null&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&e.info.created_by_email!=null&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&e.info.created_at!=null&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&e.info.updated_by_email!=null&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&e.info.updated_at!=null&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.CarCreateComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("propietario-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.CarCreateComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CarCreateComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.CarCreateComponent.prototype.selectedPropietario=function(e){if(this.profileSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)null!=this.listRegister[t]&&(this.listRegister[t].id==e.id?null==this.listRegister[t].classSelected?(this.profileSelected=this.listRegister[t],this.listRegister[t].classSelected="selected"):this.listRegister[t].classSelected=null:this.listRegister[t].classSelected=null)},e.CarCreateComponent.prototype.selectedType=function(e){if(this.typeSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegisterType&&0!=this.listRegisterType.length)for(var t=0;t<this.listRegisterType.length;t++)null!=this.listRegisterType[t]&&(this.listRegisterType[t].id==e.id?null==this.listRegisterType[t].listRegisterType?(this.typeSelected=this.listRegisterType[t],this.listRegisterType[t].classSelected="selected"):this.listRegisterType[t].classSelected=null:this.listRegisterType[t].classSelected=null)},e.CarCreateComponent.prototype.quitarPropietario=function(){if(this.profileSelected=null,null!=this.listRegister&&0!=this.listRegister.length)for(var e=0;e<this.listRegister.length;e++)null!=this.listRegister[e]&&(this.listRegister[e].classSelected=null)},e.CarCreateComponent.prototype.quitarType=function(){if(this.typeSelected=null,null!=this.listRegisterType&&0!=this.listRegisterType.length)for(var e=0;e<this.listRegisterType.length;e++)null!=this.listRegisterType[e]&&(this.listRegisterType[e].classSelected=null)},e.CarCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/car-report"])},e.CarCreateComponent.prototype.clean=function(){this.typeSelected=null,this.pagingActual={},this.detallePorPagina=10,this.totalPage=1,this.pageSelected=1,this.rif_buscar=null,this.nombre_buscar=null,this.listRegister=[],this.linea=null,this.profileSelected=null,this.placa=null,this.carroceria=null,this.capacidad=null,this.marca=null,this.color=null,this.anno=null,this.type=null,this.nombre_buscar_type=null,this.pagingActualType={},this.detallePorPaginaType=10,this.totalPageType=1,this.pageSelectedType=1,this.typeSelected=null,this.listRegisterType=[]},e.CarCreateComponent.prototype.done=function(){var e={};if(null==this.profileSelected)return this.mensaje="Debe seleccionar el propietario del veh\xEDculo",void this.msg.warning();if(null==this.typeSelected)return this.mensaje="Debe seleccionar el tipo de veh\xEDculo",void this.msg.warning();if(null==this.placa||null==this.placa||""==this.placa)return this.mensaje=capitalizeOnly(_("warning8")),void this.msg.warning();if(e.license_plate=this.placa.trim().toUpperCase(),null==this.carroceria||null==this.carroceria||""==this.carroceria)return this.mensaje=capitalizeOnly(_("warning33")),void this.msg.warning();if(e.bodywork=this.carroceria.trim().toUpperCase(),null==this.marca||null==this.marca||""==this.marca)return this.mensaje=capitalizeOnly(_("warning6")),void this.msg.warning();if(e.brand=this.marca.trim().toUpperCase(),null==this.color||null==this.color||""==this.color)return this.mensaje=capitalizeOnly(_("warning34")),void this.msg.warning();if(e.color=this.color.trim().toUpperCase(),null==this.anno||null==this.anno||""==this.anno)return this.mensaje=capitalizeOnly(_("warning7")),void this.msg.warning();e.year=parseInt(this.anno),e.active=this.active_status;let t=null,a=_("message_dflt_37");this.save?t=this.service.callServicesHttp("car-post","&owner_id="+this.profileSelected.id+"&business_id="+this.profileSelected.business_id+"&vehicle_type_id="+this.typeSelected.id,e):(a=_("message_dflt_38"),t=this.service.callServicesHttp("car-put","&id="+this.id+"&owner_id="+this.owner_id+"&vehicle_type_id="+this.vehicle_type_id+"&business_id="+this.business_id,e)),t.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.CarCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_37");t=this.save?_("message_dflt_37"):_("message_dflt_38"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success27")):capitalizeOnly(_("success28")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarReportComponent=ng.core.Component({selector:"car-report",templateUrl:"views/car-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.CarReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.line=null,this.status=null,this.propietario=null,this.marca=null,this.model=null,this.placa=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.CarReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("VEHICLE"!=t[n].name)"VEHICLE"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.CarReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-VEHICLE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.CarReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.line||null==this.line||""==this.line||"null"==this.line||(null==t&&(t={}),t.line_name="*"+this.line.trim()+"*"),null==this.rif||null==this.rif||""==this.rif||"null"==this.rif||(null==t&&(t={}),t.owner_id_doc="*"+this.rif.trim()+"*"),null==this.propietario||null==this.propietario||""==this.propietario||"null"==this.propietario||(null==t&&(t={}),t.owner_name="*"+this.propietario.trim()+"*"),null==this.marca||null==this.marca||""==this.marca||"null"==this.marca||(null==t&&(t={}),t.brand="*"+this.marca.trim()+"*"),null==this.placa||null==this.placa||""==this.placa||(null==t&&(t={}),t.license_plate="*"+this.placa.trim()+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.CarReportComponent.prototype.clean=function(){this.line=null,this.propietario=null,this.marca=null,this.model=null,this.placa=null,this.status=null,this.rif=null},e.CarReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CarReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CarReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CarReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CarReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CarReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CarReportComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("car-report",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.CarReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CarReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.CarReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("VEHICLE-DELETE")&&e.actions.push(this.checkAction("VEHICLE-DELETE")),null!=this.checkAction("UPDATE-VEHICLE")&&e.actions.push(this.checkAction("UPDATE-VEHICLE")),null!=this.checkAction("VIEW-VEHICLE")&&e.actions.push(this.checkAction("VIEW-VEHICLE")),e)},e.CarReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.CarReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"VEHICLE-DELETE":$("#modalDeleteCar").modal("show");break;case"UPDATE-VEHICLE":this.router.navigate(["/car-update"],{queryParams:{id:e.id,business_id:e.business_id,vehicle_type_id:e.vehicle_type_id,owner_id:e.owner_id}});break;case"VIEW-VEHICLE":this.router.navigate(["/car-view"],{queryParams:{id:e.id,business_id:e.business_id,vehicle_type_id:e.vehicle_type_id,owner_id:e.owner_id}});break;default:}},e.CarReportComponent.prototype.deleteData=function(){if($("#modalDeleteCar").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning5")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id+"&owner_id="+this.dataSelected.owner_id+"&vehicle_type_id="+this.dataSelected.vehicle_type_id;let t=_("message_dflt_33"),a=this.service.callServicesHttp("car-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.CarReportComponent.prototype.activeData=function(){if($("#modalActivateCar").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning5")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("placa")&&null!=this.dataSelected.placa&&null!=this.dataSelected.placa&&""!=this.dataSelected.placa){var e="&placa="+this.dataSelected.id;let t=this.service.callServicesHttp("car-active",e,null);this.procesarRespuestaActivar(t)}},e.CarReportComponent.prototype.inactiveData=function(){if($("#modalInactivateCar").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning5")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("placa")&&null!=this.dataSelected.placa&&null!=this.dataSelected.placa&&""!=this.dataSelected.placa){var e="&placa="+this.dataSelected.id;let t=this.service.callServicesHttp("car-inactive",e,null);this.procesarRespuestaDesactivar(t)}},e.CarReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_33");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success24")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_34");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("placa")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].placa==e.placa){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success25"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.CarReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_35");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("placa")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].placa==e.placa){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success26"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.CarReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarTypeCreateComponent=ng.core.Component({selector:"car-type-create",templateUrl:"views/car-type-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.CarTypeCreateComponent.prototype.ngOnInit=function(){this.title=_("title55"),this.nombre=null,this.capacidad=null,this.listCaracteristicas=[];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.CarTypeCreateComponent.prototype.checkRol=function(){var e="CREATE-CAR-TYPES";this.active.url.hasOwnProperty("_value")&&("car-type-create"==this.active.url._value[0].path?(this.title=_("title55"),this.save=!0,e="CREATE-CAR-TYPES"):(this.title=_("title56"),this.save=!1,e="UPDATE-CAR-TYPE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarTypeCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.CarTypeCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("car-type-get","&id="+this.id,null),t=_("message_dflt_60");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.CarTypeCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_60");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarTypeCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&(this.nombre=e.name),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity),e.hasOwnProperty("features")&&(this.listCaracteristicas=[],null!=e.features&&0!=e.features.length))for(var t={},a=0;a<e.features.length;a++)null!=e.features[a]&&(t={},t.value=e.features[a],this.listCaracteristicas.push(t))},e.CarTypeCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/car-type-report"])},e.CarTypeCreateComponent.prototype.addFeature=function(){this.listCaracteristicas.push({value:""})},e.CarTypeCreateComponent.prototype.deleteFeature=function(e){var t=this.listCaracteristicas.slice(e+1);this.listCaracteristicas=this.listCaracteristicas.slice(0,e),this.listCaracteristicas=this.listCaracteristicas.concat(t)},e.CarTypeCreateComponent.prototype.clean=function(){this.nombre=null,this.capacidad=null,this.listCaracteristicas=[]},e.CarTypeCreateComponent.prototype.done=function(){var e={};if(null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje=_("warning38"),void this.msg.warning();if(e.name=this.nombre.trim().toUpperCase(),null==this.capacidad||null==this.capacidad||""==this.capacidad)return this.mensaje=_("warning39"),void this.msg.warning();if(e.capacity=this.capacidad,null==this.listCaracteristicas||0==this.listCaracteristicas.length)return this.mensaje=_("warning40"),void this.msg.warning();for(var t=[],a=0;a<this.listCaracteristicas.length;a++)null!=this.listCaracteristicas[a]&&(null==this.listCaracteristicas[a].value||null==this.listCaracteristicas[a].value||""==this.listCaracteristicas[a].value||t.push(this.listCaracteristicas[a].value.trim().toUpperCase()));if(null==t||0==t.length)return this.mensaje=_("warning40"),void this.msg.warning();e.features=t;let n=_("message_dflt_57"),r=null;this.save?r=this.service.callServicesHttp("car-type-post",null,e):(n=_("message_dflt_58"),r=this.service.callServicesHttp("car-type-put","&id="+this.id,e)),r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.CarTypeCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_57");this.save||(t=_("message_dflt_58")),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success41")):capitalizeOnly(_("success42")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarTypeCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarTypeReportComponent=ng.core.Component({selector:"car-type-report",templateUrl:"views/car-type-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.CarTypeReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.nombre=null,this.checkRol()},e.CarTypeReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("CAR-TYPES"!=t[n].name)"CAR-TYPES"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarTypeReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.CarTypeReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-CAR-TYPES"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.CarTypeReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||"Todos"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.CarTypeReportComponent.prototype.clean=function(){this.nombre=null},e.CarTypeReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CarTypeReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CarTypeReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CarTypeReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CarTypeReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CarTypeReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CarTypeReportComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("car-type-report",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.CarTypeReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CarTypeReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.CarTypeReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("CAR-TYPE-DELETE")&&e.actions.push(this.checkAction("CAR-TYPE-DELETE")),null!=this.checkAction("UPDATE-CAR-TYPE")&&e.actions.push(this.checkAction("UPDATE-CAR-TYPE")),null!=this.checkAction("VIEW-CAR-TYPE")&&e.actions.push(this.checkAction("VIEW-CAR-TYPE")),e)},e.CarTypeReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.CarTypeReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"CAR-TYPE-DELETE":$("#modalDeleteCarType").modal("show");break;case"UPDATE-CAR-TYPE":this.router.navigate(["/car-type-update"],{queryParams:{id:e.id}});break;case"VIEW-CAR-TYPE":this.router.navigate(["/car-type-view"],{queryParams:{id:e.id}});break;default:}},e.CarTypeReportComponent.prototype.deleteData=function(){if($("#modalDeleteCarType").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning41")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=_("message_dflt_59"),a=this.service.callServicesHttp("car-type-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.CarTypeReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_59");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success43")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarTypeReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarTypeViewComponent=ng.core.Component({selector:"car-type-view",templateUrl:"views/car-type-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.CarTypeViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title57")),this.nombre=null,this.capacidad=null,this.listCaracteristicas=[];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.CarTypeViewComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=0;a<t.length;a++)if(null!=t[a]&&"VIEW-CAR-TYPE"==t[a].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarTypeViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.CarTypeViewComponent.prototype.getService=function(){let e=this.service.callServicesHttp("car-type-get","&id="+this.id,null),t=_("message_dflt_60");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.CarTypeViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_60");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarTypeViewComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&(this.nombre=e.name),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity),e.hasOwnProperty("features")&&(this.listCaracteristicas=[],null!=e.features&&0!=e.features.length))for(var t={},a=0;a<e.features.length;a++)null!=e.features[a]&&(t={},t.value=e.features[a],this.listCaracteristicas.push(t));e.hasOwnProperty("info")&&null!=e.info&&null!=e.info&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&null!=e.info.created_by_email&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&null!=e.info.created_at&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&null!=e.info.updated_by_email&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&null!=e.info.updated_at&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.CarTypeViewComponent.prototype.print=function(){window.print()},e.CarTypeViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarViewComponent=ng.core.Component({selector:"car-view",templateUrl:"views/car-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.CarViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title3")),this.placa=null,this.carroceria=null,this.linea=null,this.propietario=null,this.marca=null,this.color=null,this.anno=null,this.type=null,this.capacidad=null,this.status=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.CarViewComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=0;a<t.length;a++)if(null!=t[a]&&"VIEW-VEHICLE"==t[a].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("owner_id")&&(this.owner_id=this.active.queryParams._value.owner_id),this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id),this.active.queryParams._value.hasOwnProperty("vehicle_type_id")&&(this.vehicle_type_id=this.active.queryParams._value.vehicle_type_id),this.getService())},e.CarViewComponent.prototype.getService=function(){let e=this.service.callServicesHttp("car-get","&id="+this.id+"&owner_id="+this.owner_id+"&vehicle_type_id="+this.vehicle_type_id+"&business_id="+this.business_id,null),t=_("message_dflt_36");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.CarViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_36");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarViewComponent.prototype.formattedData=function(e){e.hasOwnProperty("license_plate")&&null!=e.license_plate&&e.license_plate!=null&&""!=e.license_plate&&(this.placa=e.license_plate),e.hasOwnProperty("bodywork")&&null!=e.bodywork&&e.bodywork!=null&&""!=e.bodywork&&(this.carroceria=e.bodywork),e.hasOwnProperty("brand")&&null!=e.brand&&e.brand!=null&&""!=e.brand&&(this.marca=e.brand),e.hasOwnProperty("year")&&null!=e.year&&e.year!=null&&""!=e.year&&(this.anno=e.year),e.hasOwnProperty("color")&&null!=e.color&&e.color!=null&&""!=e.color&&(this.color=e.color),e.hasOwnProperty("vehicle_type_name")&&null!=e.vehicle_type_name&&e.vehicle_type_name!=null&&""!=e.vehicle_type_name&&(this.tipo=e.vehicle_type_name),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity),e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.linea=e.line_name),e.hasOwnProperty("owner_name")&&null!=e.owner_name&&e.owner_name!=null&&""!=e.owner_name&&(this.propietario=e.owner_name+" ("+e.owner_id_doc+")"),e.hasOwnProperty("info")&&null!=e.info&&e.info!=null&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&e.info.created_by_email!=null&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&e.info.created_at!=null&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&e.info.updated_by_email!=null&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&e.info.updated_at!=null&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.CarViewComponent.prototype.print=function(){window.print()},e.CarViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CheckPassengerComponent=ng.core.Component({selector:"check-passenger",templateUrl:"views/check-passenger.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.CheckPassengerComponent.prototype.ngOnInit=function(){this.title=_("title66"),this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.doc=null,this.reservacion=null;var e=new Date,t=e.getDate();10>t&&(t="0"+e.getDate());var a=e.getMonth()+1;10>a&&(a="0"+a),this.fecha=e.getFullYear()+"-"+a+"-"+t;try{var n=document.getElementsByClassName("modal-backdrop")[0];if(null!=n){var i=n.parentNode;i.removeChild(n)}}catch(e){}try{var n=document.getElementById("sidenav-overlay");if(null!=n){var i=n.parentNode;i.removeChild(n)}}catch(e){}this.checkRol()},e.CheckPassengerComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=0;a<t.length;a++)if(null!=t[a]&&"CHECK-PASSENGER"==t[a].name){e=!0;break}e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CheckPassengerComponent.prototype.search=function(){if(this.jsonFilter={},null==this.fecha||null==this.fecha||""==this.fecha)return this.mensaje="Debe ingresar la fecha de salida",void this.msg.warning();if(this.jsonFilter.trip_departure_date={},this.jsonFilter.trip_departure_date.lte=this.fecha+"T23:59:59.000Z",this.jsonFilter.trip_departure_date.gte=this.fecha+"T00:00:00.000Z",this.jsonFilter.trip_departure_date.time_zone=getTimeZone(),(null==this.reservacion||null==this.reservacion||""==this.reservacion||0==this.reservacion)&&(null==this.doc||null==this.doc||""==this.doc))return this.mensaje="Debe ingresar el n\xFAmero de reservaci\xF3n o n\xFAmero de documento del pasajero",void this.msg.warning();if(null!=this.reservacion&&null!=this.reservacion&&""!=this.reservacion&&0!=this.reservacion){var e=null;try{e=parseInt(this.reservacion.trim())}catch(t){e=null}if(null==e)return this.mensaje="El formato de la reserva tiene un formato incorrecto",void this.msg.warning();this.jsonFilter.reservation_sequence={},this.jsonFilter.reservation_sequence.lte=e,this.jsonFilter.reservation_sequence.gte=e}null==this.doc||null==this.doc||""==this.doc||(this.jsonFilter.passenger=this.doc.trim()),this.callServices(1,"&limit="+this.detallePorPagina)},e.CheckPassengerComponent.prototype.clean=function(){var e=new Date,t=e.getDate();10>t&&(t="0"+e.getDate());var a=e.getMonth()+1;10>a&&(a="0"+a),this.fecha=e.getFullYear()+"-"+a+"-"+t,this.doc=null,this.reservacion=null},e.CheckPassengerComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CheckPassengerComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CheckPassengerComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CheckPassengerComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CheckPassengerComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CheckPassengerComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CheckPassengerComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="&type=PAGINATE"+t,i=this.service.callServicesHttp("passenger-report",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.CheckPassengerComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CheckPassengerComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("type")&&null!=e.type&&null!=e.type&&""!=e.type&&(e.formatted_type=_(e.type).toUpperCase()),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase()),e)},e.CheckPassengerComponent.prototype.changeStatus=function(e,t){if(null==e||null==e||""==e)return this.mensaje=capitalizeOnly(_("warning50")),void this.msg.warning();else{var a="&itinerary_id="+e.itinerary_id+"&trip_id="+e.trip_id+"&id="+e.id+"&business_id="+e.business_id+"&status="+t+"&vehicle_type_id="+e.vehicle_type_id;let n=_("message_dflt_76"),i=this.service.callServicesHttp("passenger-change-status",a,null);i.subscribe(e=>{if(null==e||null==e||""==e)this.mensaje=n,this.msg.error();else if(200==e.status_http)try{if(null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].id==e.id){this.listRegister[t]=this.formattedData(e);break}this.mensaje=_("success56"),this.msg.info()}catch(e){}else this.mensaje=this.service.processMessageError(e,n),this.msg.error()},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}}})(window.app||(window.app={}));(function(e){e.DriverCreateComponent=ng.core.Component({selector:"driver-create",templateUrl:"views/driver-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.DriverCreateComponent.prototype.ngOnInit=function(){this.title=_("title60"),this.pagingActualLine={},this.detallePorPaginaLine=10,this.totalPageLine=1,this.pageSelectedLine=1,this.listRegisterLine=[],this.listDocs=["V","E","G","J"],this.id_doc="V",this.doc=null,this.nombre=null,this.apellido=null,this.telefono=[],this.email=[],this.etiqueta=null,this.isRif=!0,this.isCi=!1,this.save=!0,this.texto="Guardar",this.active_status=!0,this.classView1="col-lg-4 col-md-4 col-sm-6 col-12",this.classView2="col-lg-8 col-md-8 col-sm-6 col-12",this.checkRol()},e.DriverCreateComponent.prototype.checkRol=function(){var e="DRIVER-CREATE";this.active.url.hasOwnProperty("_value")&&("driver-create"==this.active.url._value[0].path?(this.title=_("title60"),this.save=!0,e="DRIVER-CREATE"):(this.title=_("title61"),this.save=!1,e="DRIVER-UPDATE",this.classView2="col-lg-12 col-md-12 col-sm-12 col-12",this.texto="Actualizar"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.DriverCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.DriverCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("driver-get","&id="+this.id+"&business_id="+this.business_id,null),t=_("message_dflt_70");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.DriverCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_70");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.DriverCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name)try{e.name=e.name.split(","),1==e.name.length?this.nombre=e.name[0].trim():2==e.name.length&&(this.nombre=e.name[0].trim(),this.apellido=e.name[1].trim())}catch(e){}e.hasOwnProperty("phone")&&null!=e.phone&&e.phone!=null&&""!=e.phone&&(this.telefono=e.phone),e.hasOwnProperty("email")&&null!=e.email&&e.email!=null&&""!=e.email&&(this.email=e.email),e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.lineSelected={},this.lineSelected.name=e.line_name,this.lineSelected.id=this.id),e.hasOwnProperty("active")&&(this.active_status=e.active);try{e.hasOwnProperty("id_doc")&&null!=e.id_doc&&e.id_doc!=null&&""!=e.id_doc&&(this.id_doc=e.id_doc.charAt(0),this.doc=e.id_doc.substring(1,e.id_doc.length))}catch(e){}},e.DriverCreateComponent.prototype.searchLine=function(){this.jsonFilter={};var e=[],t=null;if(t={},t.active=!0,null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.name="*"+this.linea+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServicesLine(1,"&offset=0&limit="+this.detallePorPaginaLine)},e.DriverCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPaginaLine=e.detalles,this.totalPageLine=e.pagina,null==this.listRegisterLine||this.listRegisterLine==null||0==this.listRegisterLine.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.DriverCreateComponent.prototype.getValueFirstLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.DriverCreateComponent.prototype.getValuePreviousLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.DriverCreateComponent.prototype.getValueLastLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.DriverCreateComponent.prototype.getValueNextLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.DriverCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.DriverCreateComponent.prototype.callServicesLine=function(e,t){this.pageSelectedLine=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("line-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuestaLine(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.DriverCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegisterLine=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegisterLine=[];else if(null==e.count||null==e.count||0==e.count)this.listRegisterLine=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegisterLine=[];for(var n=0;n<e.results.length;n++)a=this.formattedDataLine(e.results[n]),null!=a&&this.listRegisterLine.push(a);this.pagingActualLine.count=e.count}else this.listRegisterLine=[]}},e.DriverCreateComponent.prototype.formattedDataLine=function(e){return null==e||null==e||""==e?null:e},e.DriverCreateComponent.prototype.quitarLinea=function(){if(this.lineSelected=null,null!=data&&null!=data&&""!=data&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var e=0;e<this.listRegisterLine.length;e++)null!=this.listRegisterLine[e]&&(this.listRegisterLine[e].classSelected=null)},e.DriverCreateComponent.prototype.selectLine=function(e){if(this.lineSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var t=0;t<this.listRegisterLine.length;t++)null!=this.listRegisterLine[t]&&(this.listRegisterLine[t].code==e.code?null==this.listRegisterLine[t].classSelected?(this.lineSelected=this.listRegisterLine[t],this.listRegisterLine[t].classSelected="selected"):this.listRegisterLine[t].classSelected=null:this.listRegisterLine[t].classSelected=null)},e.DriverCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/driver-report"])},e.DriverCreateComponent.prototype.clean=function(){this.listRegisterLine=[],this.nombre=null,this.apellido=null,this.telefono=null,this.email=null,this.save&&(this.lineSelected=null,this.doc=null,this.id_doc="V")},e.DriverCreateComponent.prototype.done=function(){var e={};if(null==this.lineSelected)return this.mensaje="Debe seleccionar la linea a la que pertenece el conductor",void this.msg.warning();if(null==this.id_doc||null==this.id_doc||""==this.id_doc||"null"==this.id_doc)return this.mensaje="Debe seleccionar el tipo de documento",void this.msg.warning();if(e.id_doc=this.id_doc,null==this.doc||null==this.doc||""==this.doc)return this.mensaje="Debe ingresar el n\xFAmero de RIF/CI del conductor",void this.msg.warning();this.doc=this.doc.trim();var t=0;if(9>this.doc.length){t=9-this.doc.length;for(var a="",n=0;n<t;n++)a+="0";this.doc=a+this.doc}if(e.id_doc+=this.doc,null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje="Debe ingresar el nombre del conductor",void this.msg.warning();if(e.name=this.nombre.trim().toUpperCase(),null==this.apellido||null==this.apellido||""==this.apellido)return this.mensaje="Debe ingresar el apellido del conductor",void this.msg.warning();if(e.name=e.name+" , "+this.apellido.trim().toUpperCase(),null!=this.telefono&&""!=this.telefono&&null!=this.telefono&&""!=this.telefono.trim()){e.phone=this.telefono+"";var r=this.telefono.substring(0,3);if("414"!=r&&"416"!=r&&"424"!=r&&"426"!=r&&"412"!=r)return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe comenzar por 414 | 416 | 426 | 424 |412",void this.msg.warning();e.phone=e.phone.trim()}null==this.email||""==this.email||null==this.email||""==this.email.trim()||(e.email=this.email.trim().toLowerCase()),e.active=this.active_status;let s=null,o=_("message_dflt_65");this.save?s=this.service.callServicesHttp("driver-post","&business_id="+this.lineSelected.id,e):(o=_("message_dflt_66"),s=this.service.callServicesHttp("driver-put","&business_id="+this.business_id+"&id="+this.id,e)),s.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,o),this.msg.error()})},e.DriverCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_65");t=this.save?_("message_dflt_65"):_("message_dflt_66"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success47")):capitalizeOnly(_("success48")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.DriverCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.DriverReportComponent=ng.core.Component({selector:"driver-report",templateUrl:"views/driver-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.DriverReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.status=null,this.nombre=null,this.doc=null,this.email=null,this.linea=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.DriverReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("DRIVERS"!=t[n].name)"DRIVERS"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.DriverReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:"DRIVER-REPORT"==e.name?null:e},e.DriverReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"DRIVER-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.DriverReportComponent.prototype.clean=function(){this.nombre=null,this.doc=null,this.marca=null,this.rif=null,this.email=null,this.linea=null,this.status=null},e.DriverReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre.trim()+"*"),null==this.doc||null==this.doc||""==this.doc||"null"==this.doc||(null==t&&(t={}),t.id_doc="*"+this.doc.trim()+"*"),null==this.email||null==this.email||""==this.email||"null"==this.email||(null==t&&(t={}),t.email="*"+this.email.trim()+"*"),null==this.linea||null==this.linea||""==this.linea||(null==t&&(t={}),t.line_name="*"+this.linea.trim()+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.DriverReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.DriverReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.DriverReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.DriverReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.DriverReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.DriverReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.DriverReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("driver-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.DriverReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.DriverReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.DriverReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("DRIVER-DELETE")&&e.actions.push(this.checkAction("DRIVER-DELETE")),null!=this.checkAction("DRIVER-UPDATE")&&e.actions.push(this.checkAction("DRIVER-UPDATE")),null!=this.checkAction("DRIVER-VIEW")&&e.actions.push(this.checkAction("DRIVER-VIEW")),e.hasOwnProperty("active")&&(e.active?(e.formatted_status="ACTIVO",null!=this.checkAction("DRIVER-INACTIVE")&&e.actions.push(this.checkAction("DRIVER-INACTIVE"))):(e.formatted_status="INACTIVO",null!=this.checkAction("DRIVER-ACTIVE")&&e.actions.push(this.checkAction("DRIVER-ACTIVE")))),e)},e.DriverReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.DriverReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"DRIVER-DELETE":$("#modalDeleteDriver").modal("show");break;case"DRIVER-UPDATE":this.router.navigate(["/driver-update"],{queryParams:{id:e.id,business_id:e.business_id}});break;case"DRIVER-ACTIVE":$("#modalActivateDriver").modal("show");break;case"DRIVER-INACTIVE":$("#modalInactivateDriver").modal("show");break;default:}},e.DriverReportComponent.prototype.deleteData=function(){if($("#modalDeleteDriver").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning48")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id;let t=_("message_dflt_67"),a=this.service.callServicesHttp("driver-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.DriverReportComponent.prototype.activeData=function(){if($("#modalActivateDriver").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning48")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!0}catch(e){}let a=_("message_dflt_68"),n=this.service.callServicesHttp("driver-put",e,t);n.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})}},e.DriverReportComponent.prototype.inactiveData=function(){if($("#modalInactivateDriver").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning48")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!1}catch(e){}let a=_("message_dflt_69"),n=this.service.callServicesHttp("driver-put",e,t);n.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})}},e.DriverReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_67");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success49")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.DriverReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_68");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id&&this.listRegister[a].business_id==e.business_id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success50"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.DriverReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_69");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id&&this.listRegister[a].business_id==e.business_id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success51"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.DriverReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.FareCreateComponent=ng.core.Component({selector:"fare-create",templateUrl:"views/fare-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,e.LoadingServiceComponent,function(e,t,a,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n,this.loading=i}]}),e.FareCreateComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title58")),this.save=!0,this.lineaSelected=null,this.lineaSelectedShow=null,this.tipoSelectedShow=null,this.tipoSelected=null,this.nombre=null,this.monto=null,this.paradaSelectedSalidaShow=null,this.paradaSelectedSalida=null,this.paradaSelectedLlegadaShow=null,this.paradaSelectedLlegada=null,this.pagingActualLine={},this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.listLines=[],this.pagingActualType={},this.totalPageType=1,this.pageSelectedType=1,this.detallePorPaginaType=10,this.listTypes=[],this.pagingActualParada={},this.totalPageParada=1,this.pageSelectedParada=1,this.detallePorPaginaParada=10,this.listParadas=[],this.parada_buscar=null,this.type_buscar=null,this.texto="Guardar",this.mostrarCargando=!1,this.imagenCargando="assets/images/loading.gif",this.listCurrency=[{value:"VES",name:"Bs",decimals:2,display:"BOL\xCDVAR SOBERANO"},{value:"USD",name:"$",decimals:2,display:"D\xD3LAR ESTADOUNIDENSE"}],this.currency="VES",this.checkRol()},e.FareCreateComponent.prototype.checkRol=function(){var e="FARE-CREATE";this.active.url.hasOwnProperty("_value")&&("fare-create"==this.active.url._value[0].path?(this.title=_("title58"),this.save=!0,e="FARE-CREATE"):(this.title=_("title59"),this.save=!1,e="FARE-UPDATE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.FareCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.active.queryParams._value.hasOwnProperty("vehicle_type_id")&&(this.vehicle_type_id=this.active.queryParams._value.vehicle_type_id,this.getService())))},e.FareCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("fare-get","&id="+this.id+"&business_id="+this.business_id+"&vehicle_type_id="+this.vehicle_type_id,null),t=_("message_dflt_64");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.FareCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_64");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.FareCreateComponent.prototype.formattedDataGET=function(e){e.hasOwnProperty("line_name")&&(this.line_name=e.line_name),e.hasOwnProperty("vehicle_type_id")&&(this.tipoSelected={},this.tipoSelected.id=e.vehicle_type_id,e.hasOwnProperty("vehicle_type_name")&&(this.tipoSelected.name=e.vehicle_type_name,this.tipoSelectedShow=e.vehicle_type_name)),e.hasOwnProperty("start_stop_code")&&(this.paradaSelectedSalida={},this.paradaSelectedSalida.code=e.start_stop_code,e.hasOwnProperty("start_stop_name")&&(this.paradaSelectedSalida.name=e.start_stop_name,this.paradaSelectedSalidaShow=e.start_stop_code+" - "+e.start_stop_name)),e.hasOwnProperty("destination_stop_code")&&(this.paradaSelectedLlegada={},this.paradaSelectedLlegada.code=e.destination_stop_code,e.hasOwnProperty("destination_stop_name")&&(this.paradaSelectedLlegada.name=e.destination_stop_code,this.paradaSelectedLlegadaShow=e.destination_stop_code+" - "+e.destination_stop_name)),e.hasOwnProperty("name")&&(this.nombre=e.name),e.hasOwnProperty("amount")&&(this.monto=e.amount),e.hasOwnProperty("currency")&&(this.currency=e.currency)},e.FareCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/fare-report"])},e.FareCreateComponent.prototype.clean=function(){this.save&&(this.lineaSelected=null,this.lineaSelectedShow=null,this.tipoSelectedShow=null,this.tipoSelected=null,this.paradaSelectedSalidaShow=null,this.paradaSelectedSalida=null,this.paradaSelectedLlegadaShow=null,this.paradaSelectedLlegada=null),this.nombre=null,this.monto=null,this.currency=null,this.pagingActualLine={},this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],this.pagingActualType={},this.totalPageType=1,this.pageSelectedType=1,this.detallePorPaginaType=10,this.listTypes=[]},e.FareCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPageLine=e.pagina,null==this.listLines||this.listLines==null||0==this.listLines.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.FareCreateComponent.prototype.getValueFirstLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.FareCreateComponent.prototype.getValuePreviousLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.FareCreateComponent.prototype.getValueLastLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.FareCreateComponent.prototype.getValueNextLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.FareCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.FareCreateComponent.prototype.callServicesLine=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t;this.mostrarCargando=!0;let i=this.service.callServicesHttp("line-report",n,this.jsonFilterLine);i.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaLine(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.FareCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listLines=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listLines=[];else if(null==e.count||null==e.count||0==e.count)this.listLines=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listLines=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listLines.push(a);this.pagingActualLine.count=e.count}else this.listLines=[]}},e.FareCreateComponent.prototype.getCantidadSelectedType=function(e){null==e||e==null||""==e||(this.detallePorPaginaType=e.detalles,this.totalPageType=e.pagina,null==this.listTypes||this.listTypes==null||0==this.listTypes.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesType(1,"&limit="+this.detallePorPaginaType))},e.FareCreateComponent.prototype.getValueFirstType=function(e){this.listTypes=[],this.pagingActualType.hasOwnProperty("first_page")&&null!=this.pagingActualType.first_page&&this.pagingActualType.first_page!=null&&""!=this.pagingActualType.first_page&&this.callServicesType(e,this.pagingActualType.first_page)},e.FareCreateComponent.prototype.getValuePreviousType=function(e){this.listTypes=[],this.pagingActualType.hasOwnProperty("previous_page")&&null!=this.pagingActualType.previous_page&&this.pagingActualType.previous_page!=null&&""!=this.pagingActualType.previous_page&&this.callServicesType(e,this.pagingActualType.previous_page)},e.FareCreateComponent.prototype.getValueLastType=function(e){this.listTypes=[],this.pagingActualType.hasOwnProperty("last_page")&&null!=this.pagingActualType.last_page&&this.pagingActualType.last_page!=null&&""!=this.pagingActualType.last_page&&this.callServicesType(e,this.pagingActualType.last_page)},e.FareCreateComponent.prototype.getValueNextType=function(e){this.listTypes=[],this.pagingActualType.hasOwnProperty("next_page")&&null!=this.pagingActualType.next_page&&this.pagingActualType.next_page!=null&&""!=this.pagingActualType.next_page&&this.callServicesType(e,this.pagingActualType.next_page)},e.FareCreateComponent.prototype.getValueChangeRecordsType=function(e){this.pageSelectedType=e},e.FareCreateComponent.prototype.callServicesType=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t;this.mostrarCargando=!0;let i=this.service.callServicesHttp("car-type-report",n,this.jsonFilterType);i.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaType(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.FareCreateComponent.prototype.procesarRespuestaType=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listTypes=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listTypes=[];else if(null==e.count||null==e.count||0==e.count)this.listTypes=[];else{this.pagingActualType={},this.pagingActualType.count=e.count;let t=Math.floor(this.pagingActualType.count/this.detallePorPaginaType),i=this.pagingActualType.count%this.detallePorPaginaType;if(this.totalPageType=0==i?t:t+1,this.pagingActualType.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualType.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualType.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualType.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listTypes=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listTypes.push(a);this.pagingActualType.count=e.count}else this.listTypes=[]}},e.FareCreateComponent.prototype.getCantidadSelectedParada=function(e){null==e||e==null||""==e||(this.detallePorPaginaParada=e.detalles,this.totalPageParada=e.pagina,null==this.listParadas||this.listParadas==null||0==this.listParadas.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesParada(1,"&limit="+this.detallePorPaginaParada))},e.FareCreateComponent.prototype.getValueFirstParada=function(e){this.listParadas=[],this.pagingActualParada.hasOwnProperty("first_page")&&null!=this.pagingActualParada.first_page&&this.pagingActualParada.first_page!=null&&""!=this.pagingActualParada.first_page&&this.callServicesParada(e,this.pagingActualParada.first_page)},e.FareCreateComponent.prototype.getValuePreviousParada=function(e){this.listParadas=[],this.pagingActualParada.hasOwnProperty("previous_page")&&null!=this.pagingActualParada.previous_page&&this.pagingActualParada.previous_page!=null&&""!=this.pagingActualParada.previous_page&&this.callServicesParada(e,this.pagingActualParada.previous_page)},e.FareCreateComponent.prototype.getValueLastParada=function(e){this.listParadas=[],this.pagingActualParada.hasOwnProperty("last_page")&&null!=this.pagingActualParada.last_page&&this.pagingActualParada.last_page!=null&&""!=this.pagingActualParada.last_page&&this.callServicesParada(e,this.pagingActualParada.last_page)},e.FareCreateComponent.prototype.getValueNextParada=function(e){this.listParadas=[],this.pagingActualParada.hasOwnProperty("next_page")&&null!=this.pagingActualParada.next_page&&this.pagingActualParada.next_page!=null&&""!=this.pagingActualParada.next_page&&this.callServicesParada(e,this.pagingActualParada.next_page)},e.FareCreateComponent.prototype.getValueChangeRecordsParada=function(e){this.pageSelectedParada=e},e.FareCreateComponent.prototype.callServicesParada=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t;this.mostrarCargando=!0;let i=this.service.callServicesHttp("parada-report",n,this.jsonFilterParada);i.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaParada(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,a)})},e.FareCreateComponent.prototype.procesarRespuestaParada=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listParadas=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listParadas=[];else if(null==e.count||null==e.count||0==e.count)this.listParadas=[];else{this.pagingActualParada={},this.pagingActualParada.count=e.count;let t=Math.floor(this.pagingActualParada.count/this.detallePorPaginaParada),i=this.pagingActualParada.count%this.detallePorPaginaParada;if(this.totalPageParada=0==i?t:t+1,this.pagingActualParada.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualParada.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualParada.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualParada.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listParadas=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listParadas.push(a);this.pagingActualParada.count=e.count}else this.listParadas=[]}},e.FareCreateComponent.prototype.openModalLineas=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],$("#modalLineas").modal("show")},e.FareCreateComponent.prototype.openModalTypes=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.type_buscar=null,this.listTypes=[],$("#modalType").modal("show")},e.FareCreateComponent.prototype.openModalParadas=function(e){this.mensajeServicio=null,this.mostrarCargando=!1,this.parada_buscar=null,this.listParadas=[],this.punto=e,$("#modalParada").modal("show")},e.FareCreateComponent.prototype.buscarLinea=function(){this.jsonFilterLine={};var e=[],t=null;if(null==this.linea_buscar||null==this.linea_buscar||""==this.linea_buscar||"null"==this.linea_buscar||(null==t&&(t={}),t.name="*"+this.linea_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterLine.entities=a}this.jsonFilterLine.sort={"info.created_at":"desc"},this.callServicesLine(1,"&offset=0&limit="+this.detallePorPaginaLine)},e.FareCreateComponent.prototype.buscarType=function(){this.jsonFilterType={};var e=[],t=null;if(null==this.type_buscar||null==this.type_buscar||""==this.type_buscar||"null"==this.type_buscar||(null==t&&(t={}),t.name="*"+this.type_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterType.entities=a}this.jsonFilterType.sort={"info.created_at":"desc"},this.callServicesType(1,"&offset=0&limit="+this.detallePorPaginaType)},e.FareCreateComponent.prototype.selectedLinea=function(e){null!=e&&($("#modalLineas").modal("hide"),this.lineaSelected=e,e.hasOwnProperty("name")&&(this.lineaSelectedShow=e.name))},e.FareCreateComponent.prototype.selectedType=function(e){null!=e&&($("#modalType").modal("hide"),this.tipoSelected=e,e.hasOwnProperty("name")&&(this.tipoSelectedShow=e.name))},e.FareCreateComponent.prototype.selectedParada=function(e){$("#modalParada").modal("hide"),"SALIDA"==this.punto?(this.paradaSelectedSalida=e,e.hasOwnProperty("name")&&(this.paradaSelectedSalidaShow=e.code+" - "+e.name)):(this.paradaSelectedLlegada=e,e.hasOwnProperty("name")&&(this.paradaSelectedLlegadaShow=e.code+" - "+e.name))},e.FareCreateComponent.prototype.buscarParada=function(){this.jsonFilterParada={};var e=[],t=null;if(null==this.parada_buscar||null==this.parada_buscar||""==this.parada_buscar||"null"==this.parada_buscar||(null==t&&(t={}),t.name="*"+this.parada_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterParada.entities=a}this.jsonFilterParada.sort={"info.created_at":"desc"},this.callServicesParada(1,"&limit="+this.detallePorPaginaParada)},e.FareCreateComponent.prototype.done=function(){var e={};e.rates={},e.rates.INFANT=0,e.rates.CHILD=106,e.rates.ADULT=106,e.rates.ELDERLY=53;var t=null;if(this.save){if(null==this.lineaSelected||null==this.lineaSelected||""==this.lineaSelected)return this.mensaje=capitalizeOnly(_("warning3")),void this.msg.warning();if(t="&business_id="+this.lineaSelected.id,null==this.tipoSelected||null==this.tipoSelected||""==this.tipoSelected)return this.mensaje=capitalizeOnly(_("warning41")),void this.msg.warning();if(t=t+"&vehicle_type_id="+this.tipoSelected.id,null==this.paradaSelectedSalida||null==this.paradaSelectedSalida||""==this.paradaSelectedSalida)return this.mensaje=capitalizeOnly(_("warning43")),void this.msg.warning();if(t=t+"&start_stop_code="+this.paradaSelectedSalida.code,null==this.paradaSelectedLlegada||null==this.paradaSelectedLlegada||""==this.paradaSelectedLlegada)return this.mensaje=capitalizeOnly(_("warning44")),void this.msg.warning();t=t+"&destination_stop_code="+this.paradaSelectedLlegada.code}if(null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje=capitalizeOnly(_("warning45")),void this.msg.warning();if(e.name=this.nombre.trim().toUpperCase(),null==this.monto||null==this.monto||""==this.monto||0==this.monto)return this.mensaje=capitalizeOnly(_("warning46")),void this.msg.warning();if(e.amount=parseFloat(parseFloat(this.monto).toFixed(2)),null==this.currency||null==this.currency||""==this.currency||"null"==this.currency)return this.mensaje="Debe ingresar la moneda de la tarifa",void this.msg.warning();e.currency=this.currency;let a=_("message_dflt_61"),n=null;this.save?n=this.service.callServicesHttp("fare-post",t,e):(a=_("message_dflt_62"),n=this.service.callServicesHttp("fare-put","&id="+this.id+"&business_id="+this.business_id+"&vehicle_type_id="+this.vehicle_type_id,e)),n.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.FareCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_61");this.save||(t=_("message_dflt_62")),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success44")):capitalizeOnly(_("success45")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.FareCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.FareReportComponent=ng.core.Component({selector:"fare-report",templateUrl:"views/fare-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.FareReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.nombre=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.FareReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("FARE"!=t[n].name)"FARE"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.FareReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.FareReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"FARE-REPORT"==e.name?null:"FARE-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.FareReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre.trim()+"*"),null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.line_name="*"+this.linea.trim()+"*"),null==this.tipo||null==this.tipo||""==this.tipo||"null"==this.tipo||(null==t&&(t={}),t.vehicle_type_name="*"+this.tipo.trim()+"*"),null==this.salida||null==this.salida||""==this.salida||"null"==this.salida||(null==t&&(t={}),t.start_stop_name="*"+this.salida.trim()+"*"),null==this.llegada||null==this.llegada||""==this.llegada||"null"==this.llegada||(null==t&&(t={}),t.destination_stop_name="*"+this.llegada.trim()+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.FareReportComponent.prototype.clean=function(){this.nombre=null,this.linea=null,this.tipo=null,this.salida=null,this.llegada=null},e.FareReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.FareReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.FareReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.FareReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.FareReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.FareReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.FareReportComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("fare-report",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.FareReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.FareReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.FareReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("currency")&&null!=e.currency&&null!=e.currency&&""!=e.currency&&(e.formatted_currency=_(e.currency)),e.actions=[],null!=this.checkAction("FARE-DELETE")&&e.actions.push(this.checkAction("FARE-DELETE")),null!=this.checkAction("FARE-UPDATE")&&e.actions.push(this.checkAction("FARE-UPDATE")),e)},e.FareReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.FareReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"FARE-DELETE":$("#modalDeleteFare").modal("show");break;case"FARE-UPDATE":this.router.navigate(["/fare-update"],{queryParams:{id:e.id,business_id:e.business_id,vehicle_type_id:e.vehicle_type_id}});break;default:}},e.FareReportComponent.prototype.deleteData=function(){if($("#modalDeleteFare").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning47")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id+"&vehicle_type_id="+this.dataSelected.vehicle_type_id;let t=_("message_dflt_63"),a=this.service.callServicesHttp("fare-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.FareReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_63");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success46")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.FareReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineCreateComponent=ng.core.Component({selector:"line-create",templateUrl:"views/line-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.LineCreateComponent.prototype.ngOnInit=function(){this.classCreate="col-lg-8 col-md-8 col-sm-6 col-12",this.listDocs=["V","E","J","G"],this.listBankAccounts=[],this.listPagoMovil=[],this.listBancos=returnBancos(),this.title=capitalizeOnly(_("title9")),this.profileSelected=null,this.texto="Crear",this.expedicion=null,this.vencimiento=null,this.nombre=null,this.modalidad=null,this.codigo=null,this.active_status=!0,this.save=!0,this.rif_buscar=null,this.nombre_buscar=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.checkRol()},e.LineCreateComponent.prototype.checkRol=function(){var e="CREATE-LINE";this.active.url.hasOwnProperty("_value")&&("line-create"==this.active.url._value[0].path?(this.title=_("title9"),this.save=!0,e="CREATE-LINE"):(this.title=_("title10"),this.save=!1,this.classCreate="col-lg-12 col-md-12 col-sm-12 col-12",e="UPDATE-LINE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.LineCreateComponent.prototype.getData=function(){"line-create"==this.active.url._value[0].path?(this.title=_("title9"),this.save=!0,this.texto="Guardar"):this.active.url.hasOwnProperty("_value")&&(this.title=_("title10"),this.save=!1,this.texto="Actualizar",this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService()))},e.LineCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("line-get","&id="+this.id,null),t=_("message_dflt_3");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.LineCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_3");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.nombre=e.name),e.hasOwnProperty("bank_accounts")&&null!=e.bank_accounts&&0!=e.bank_accounts.length){var t={};this.listBankAccounts=[];for(var a=0;a<e.bank_accounts.length;a++)if(null!=e.bank_accounts[a]){if(t={},e.bank_accounts[a].hasOwnProperty("bank")&&(t.banco=e.bank_accounts[a].bank),e.bank_accounts[a].hasOwnProperty("number")&&(t.cuenta=e.bank_accounts[a].number),e.bank_accounts[a].hasOwnProperty("id_doc"))try{t.id_doc_type=e.bank_accounts[a].id_doc.charAt(0),t.documento=e.bank_accounts[a].id_doc.substring(1,e.bank_accounts[a].id_doc.length)}catch(e){}this.listBankAccounts.push(t)}}if(e.hasOwnProperty("mobile_payment")&&null!=e.mobile_payment&&0!=e.mobile_payment.length){var t={};this.listPagoMovil=[];for(var a=0;a<e.mobile_payment.length;a++)if(null!=e.mobile_payment[a]){if(t={},e.mobile_payment[a].hasOwnProperty("bank")&&(t.banco=e.mobile_payment[a].bank),e.mobile_payment[a].hasOwnProperty("phone")&&(t.telefono=e.mobile_payment[a].phone),e.mobile_payment[a].hasOwnProperty("id_doc"))try{t.id_doc_type=e.mobile_payment[a].id_doc.charAt(0),t.documento=e.mobile_payment[a].id_doc.substring(1,e.mobile_payment[a].id_doc.length)}catch(e){}this.listPagoMovil.push(t)}}e.hasOwnProperty("start_date")&&null!=e.start_date&&null!=e.start_date&&""!=e.start_date&&(this.expedicion=formattingDate2(e.start_date)),e.hasOwnProperty("expiration_date")&&null!=e.expiration_date&&null!=e.expiration_date&&""!=e.expiration_date&&(this.vencimiento=formattingDate2(e.expiration_date)),e.hasOwnProperty("code")&&null!=e.code&&null!=e.code&&""!=e.code&&(this.codigo=e.code),e.hasOwnProperty("mode")&&null!=e.mode&&null!=e.mode&&""!=e.mode&&(this.modalidad=e.mode),e.hasOwnProperty("active")&&(this.active_status=e.active),e.hasOwnProperty("address")&&null!=e.address&&null!=e.address&&""!=e.address&&(this.direccion=e.address)},e.LineCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/line-report"])},e.LineCreateComponent.prototype.clean=function(){this.expedicion=null,this.vencimiento=null,this.nombre=null,this.modalidad=null,this.codigo=null,this.direccion=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.profileSelected=null,this.listRegister=[],this.listBankAccounts=[],this.listPagoMovil=[],this.profileSelected=null},e.LineCreateComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||(t={},t={business_name:"*"+this.nombre_buscar.trim()+"*"}),null==this.rif_buscar||null==this.rif_buscar||""==this.rif_buscar||(null==t&&(t={}),t.id_doc="*"+this.rif_buscar+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter={entities:a}}this.jsonFilter.sort={created_at:"DESC"},this.callServices(1,"&limit="+this.detallePorPagina)},e.LineCreateComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.LineCreateComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.LineCreateComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.LineCreateComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.LineCreateComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.LineCreateComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.LineCreateComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("profile-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.LineCreateComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.LineCreateComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.LineCreateComponent.prototype.addBankAccount=function(){this.listBankAccounts.push({value:""})},e.LineCreateComponent.prototype.deleteCuentaBancaria=function(e){var t=this.listBankAccounts.slice(e+1);this.listBankAccounts=this.listBankAccounts.slice(0,e),this.listBankAccounts=this.listBankAccounts.concat(t)},e.LineCreateComponent.prototype.addPagoMovil=function(){this.listPagoMovil.push({value:""})},e.LineCreateComponent.prototype.deletePagoMovil=function(e){var t=this.listPagoMovil.slice(e+1);this.listPagoMovil=this.listPagoMovil.slice(0,e),this.listPagoMovil=this.listPagoMovil.concat(t)},e.LineCreateComponent.prototype.selectedPropietario=function(e){if(this.profileSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)null!=this.listRegister[t]&&(this.listRegister[t].id==e.id?null==this.listRegister[t].classSelected?(this.profileSelected=this.listRegister[t],this.listRegister[t].classSelected="selected"):this.listRegister[t].classSelected=null:this.listRegister[t].classSelected=null)},e.LineCreateComponent.prototype.done=function(){var e={};if(this.save&&(null==this.profileSelected||null==this.profileSelected||""==this.profileSelected))return this.mensaje="Debe seleccionar el representante de la l\xEDnea",void this.msg.warning();if(null==this.expedicion||null==this.expedicion||""==this.expedicion)return this.mensaje="La fecha de expedici\xF3n no puede estar vac\xEDa",void this.msg.warning();if(e.start_date=this.expedicion+"T00:01:01.000Z",null==this.vencimiento||null==this.vencimiento||""==this.vencimiento)return this.mensaje="La fecha de vencimiento no puede estar vac\xEDa",void this.msg.warning();if(e.expiration_date=this.vencimiento+"T23:59:59.000Z",null==this.codigo||null==this.codigo||""==this.codigo)return this.mensaje="Debe ingresar el c\xF3digo de la l\xEDnea",void this.msg.warning();if(e.code=this.codigo.toUpperCase().trim(),null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje="Debe ingresar el nombre de la l\xEDnea",void this.msg.warning();if(e.name=this.nombre.toUpperCase().trim(),null==this.modalidad||null==this.modalidad||""==this.modalidad)return this.mensaje="Debe ingresar el modalidad del transporte",void this.msg.warning();if(e.mode=this.modalidad.toUpperCase().trim(),null==this.direccion||null==this.direccion||""==this.direccion)return this.mensaje="Debe ingresar la direcci\xF3n de la sede de la linea de transporte",void this.msg.warning();if(e.address=this.direccion.toUpperCase().trim(),null!=this.listBankAccounts&&0!=this.listBankAccounts.length){e.bank_accounts=[];for(var t={},a=0;a<this.listBankAccounts.length;a++)if(null!=this.listBankAccounts[a]&&(t={},this.listBankAccounts[a].hasOwnProperty("banco"))){if(null==this.listBankAccounts[a].banco||null==this.listBankAccounts[a].banco||""==this.listBankAccounts[a].banco)return this.mensaje="Debe seleccionar el banco de la l\xEDnea "+(a+1),void this.msg.warning();if(t.bank=this.listBankAccounts[a].banco,null==this.listBankAccounts[a].cuenta||null==this.listBankAccounts[a].cuenta||""==this.listBankAccounts[a].cuenta)return this.mensaje="Debe ingresar el n\xFAmero de cuenta de la l\xEDnea "+(a+1),void this.msg.warning();if(t.number=this.listBankAccounts[a].cuenta,null==this.listBankAccounts[a].id_doc_type||null==this.listBankAccounts[a].id_doc_type||""==this.listBankAccounts[a].id_doc_type)return this.mensaje="Debe ingresar el tipo de documento de la l\xEDnea "+(a+1),void this.msg.warning();if(t.id_doc=this.listBankAccounts[a].id_doc_type,null==this.listBankAccounts[a].documento||null==this.listBankAccounts[a].documento||""==this.listBankAccounts[a].documento)return this.mensaje="Debe ingresar el n\xFAmero de documento de la l\xEDnea "+(a+1),void this.msg.warning();var n=0;if(9>this.listBankAccounts[a].documento.length){n=9-this.listBankAccounts[a].documento.length;for(var r="",s=0;s<n;s++)r+="0";this.listBankAccounts[a].documento=r+this.listBankAccounts[a].documento}t.id_doc+=this.listBankAccounts[a].documento,t.active=!0,e.bank_accounts.push(t)}}if(null!=this.listPagoMovil&&0!=this.listPagoMovil.length){e.mobile_payment=[];for(var t={},a=0;a<this.listPagoMovil.length;a++)if(null!=this.listPagoMovil[a]&&(t={},this.listPagoMovil[a].hasOwnProperty("banco"))){if(null==this.listPagoMovil[a].banco||null==this.listPagoMovil[a].banco||""==this.listPagoMovil[a].banco)return this.mensaje="Debe seleccionar el banco de la l\xEDnea "+(a+1),void this.msg.warning();if(t.bank=this.listPagoMovil[a].banco,null==this.listPagoMovil[a].telefono||null==this.listPagoMovil[a].telefono||""==this.listPagoMovil[a].telefono)return this.mensaje="Debe ingresar el tel\xE9fono de la l\xEDnea "+(a+1),void this.msg.warning();var o=this.listPagoMovil[a].telefono.substring(0,3);if("414"!=o&&"416"!=o&&"424"!=o&&"426"!=o&&"412"!=o)return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe comenzar por 414 | 416 | 426 | 424 |412",void this.msg.warning();if(t.phone=this.listPagoMovil[a].telefono,null==this.listPagoMovil[a].id_doc_type||null==this.listPagoMovil[a].id_doc_type||""==this.listPagoMovil[a].id_doc_type)return this.mensaje="Debe ingresar el tipo de documento de la l\xEDnea "+(a+1),void this.msg.warning();if(t.id_doc=this.listPagoMovil[a].id_doc_type,null==this.listPagoMovil[a].documento||null==this.listPagoMovil[a].documento||""==this.listPagoMovil[a].documento)return this.mensaje="Debe ingresar el n\xFAmero de documento de la l\xEDnea "+(a+1),void this.msg.warning();var n=0;if(9>this.listPagoMovil[a].documento.length){n=9-this.listPagoMovil[a].documento.length;for(var r="",s=0;s<n;s++)r+="0";this.listPagoMovil[a].documento=r+this.listPagoMovil[a].documento}t.id_doc+=this.listPagoMovil[a].documento,t.active=!0,e.mobile_payment.push(t)}}e.active=this.active_status;let d=null;d=this.save?this.service.callServicesHttp("line-post","&id="+this.profileSelected.id,e):this.service.callServicesHttp("line-put","&id="+this.id,e);let l=_("message_dflt_1");l=this.save?_("message_dflt_1"):_("message_dflt_2"),d.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,l),this.msg.error()})},e.LineCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_1");t=this.save?_("message_dflt_1"):_("message_dflt_2"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success16")):capitalizeOnly(_("success17")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineReportComponent=ng.core.Component({selector:"line-report",templateUrl:"views/line-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,e.LoadingServiceComponent,function(e,t,a,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n,this.loading=i}]}),e.LineReportComponent.prototype.ngOnInit=function(){this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.nombre=null,this.codigo=null,this.modalidad=null,this.direccion=null,this.status=null,this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activa"},{value:"INACTIVE",name:"Inactiva"}];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.LineReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("LINES"!=t[n].name)"LINES"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.LineReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.LineReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-LINE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.LineReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre+"*"),null==this.codigo||null==this.codigo||""==this.codigo||"null"==this.codigo||(null==t&&(t={}),t.code="*"+this.codigo+"*"),null==this.modalidad||null==this.modalidad||""==this.modalidad||"null"==this.modalidad||(null==t&&(t={}),t.mode="*"+this.modalidad+"*"),null==this.direccion||null==this.direccion||""==this.direccion||"null"==this.direccion||(null==t&&(t={}),t.address="*"+this.direccion+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.LineReportComponent.prototype.clean=function(){this.nombre=null,this.codigo=null,this.modalidad=null,this.direccion=null,this.status=null},e.LineReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.LineReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.LineReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.LineReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.LineReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.LineReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.LineReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("line-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.LineReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.LineReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.LineReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("start_date")&&null!=e.start_date&&null!=e.start_date&&""!=e.start_date&&(e.expedicion=formattingDate1(e.start_date)),e.hasOwnProperty("expiration_date")&&null!=e.expiration_date&&null!=e.expiration_date&&""!=e.expiration_date&&(e.vencimiento=formattingDate1(e.expiration_date)),e.actions=[],null!=this.checkAction("LINE-DELETE")&&e.actions.push(this.checkAction("LINE-DELETE")),null!=this.checkAction("VIEW-LINE")&&e.actions.push(this.checkAction("VIEW-LINE")),null!=this.checkAction("UPDATE-LINE")&&e.actions.push(this.checkAction("UPDATE-LINE")),null!=this.checkAction("LINE-VIEW-OWNER")&&e.actions.push(this.checkAction("LINE-VIEW-OWNER")),null!=this.checkAction("LINE-VIEW-CARS")&&e.actions.push(this.checkAction("LINE-VIEW-CARS")),e.hasOwnProperty("active")&&(e.active?(e.formatted_status="ACTIVA",null!=this.checkAction("LINE-INACTIVE")&&e.actions.push(this.checkAction("LINE-INACTIVE"))):(e.formatted_status="INACTIVA",null!=this.checkAction("LINE-ACTIVE")&&e.actions.push(this.checkAction("LINE-ACTIVE")))),e)},e.LineReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.LineReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"LINE-DELETE":$("#modalDeleteLine").modal("show");break;case"LINE-ACTIVE":$("#modalActivateLine").modal("show");break;case"LINE-INACTIVE":$("#modalInactivateLine").modal("show");break;case"LINE-VIEW":this.router.navigate(["/line-view"],{queryParams:{id:e.code}});break;case"UPDATE-LINE":this.router.navigate(["/line-update"],{queryParams:{id:e.id}});break;case"LINE-VIEW-PROPIETARIO":this.router.navigate(["/line-view-propietario"],{queryParams:{id:e.code}});break;case"LINE-VIEW-CAR":this.router.navigate(["/line-view-car"],{queryParams:{id:e.code}});break;default:}},e.LineReportComponent.prototype.deleteData=function(){if($("#modalDeleteLine").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning3")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=_("message_dflt_9"),a=this.service.callServicesHttp("line-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.LineReportComponent.prototype.activeData=function(){if($("#modalActivateLine").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning3")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("vencimiento")&&delete t.vencimiento,t.hasOwnProperty("expedicion")&&delete t.expedicion,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!0}catch(e){}let a=_("message_dflt_45"),n=this.service.callServicesHttp("line-put",e,t);n.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})}},e.LineReportComponent.prototype.inactiveData=function(){if($("#modalInactivateLine").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning3")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("vencimiento")&&delete t.vencimiento,t.hasOwnProperty("expedicion")&&delete t.expedicion,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!1}catch(e){}let a=_("message_dflt_46"),n=this.service.callServicesHttp("line-put",e,t);n.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})}},e.LineReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_9");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success5")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_45");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success34"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.LineReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_46");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].code==e.code){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success35"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.LineReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineViewComponent=ng.core.Component({selector:"line-view",templateUrl:"views/line-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.LineViewComponent.prototype.ngOnInit=function(){this.title=_("title11"),this.nombre=null,this.codigo=null,this.modalidad=null,this.unidades=null,this.expedicion=null,this.vencimiento=null,this.direccion=null,this.rutas=[],this.title2=_("title12"),this.checkRol()},e.LineViewComponent.prototype.checkRol=function(){this.getData()},e.LineViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.codigo=this.active.queryParams._value.id,this.getService())},e.LineViewComponent.prototype.getService=function(){var e="&code="+this.codigo;let t=this.service.callServicesHttp("line-get-routes",e,null);this.procesarRespuestaGET(t)},e.LineViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_3");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineViewComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.nombre=e.name),e.hasOwnProperty("expedicion")&&null!=e.expedicion&&null!=e.expedicion&&""!=e.expedicion&&(this.expedicion=e.expedicion),e.hasOwnProperty("vencimiento")&&null!=e.vencimiento&&null!=e.vencimiento&&""!=e.vencimiento&&(this.vencimiento=e.vencimiento),e.hasOwnProperty("code")&&null!=e.code&&null!=e.code&&""!=e.code&&(this.codigo=e.code),e.hasOwnProperty("modalidad")&&null!=e.modalidad&&null!=e.modalidad&&""!=e.modalidad&&(this.modalidad=e.modalidad),e.hasOwnProperty("address")&&null!=e.address&&null!=e.address&&""!=e.address&&(this.direccion=e.address),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(this.status=_(e.status).toUpperCase()),e.hasOwnProperty("routes")&&null!=e.routes&&null!=e.routes&&""!=e.routes&&(this.routes=e.routes),e.hasOwnProperty("info")&&null!=e.info&&null!=e.info&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&null!=e.info.created_by_email&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&null!=e.info.created_at&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&null!=e.info.updated_by_email&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&null!=e.info.updated_at&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at))),e.hasOwnProperty("unidades")&&null!=e.unidades&&null!=e.unidades&&""!=e.unidades&&0!=e.unidades.length){this.unidades="";for(var t=0;t<e.unidades.length;t++)this.unidades=0==t?e.unidades[t]:this.unidades+" , "+e.unidades[t]}},e.LineViewComponent.prototype.print=function(){window.print()},e.LineViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineViewCarComponent=ng.core.Component({selector:"line-view-car",templateUrl:"views/line-view-car.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.LineViewCarComponent.prototype.ngOnInit=function(){this.title=_("title13"),this.nombre=null,this.codigo=null,this.cars=[],this.cars_activos=0,this.cars_inactivos=0,this.checkRol()},e.LineViewCarComponent.prototype.checkRol=function(){this.getData()},e.LineViewCarComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.codigo=this.active.queryParams._value.id,this.getService())},e.LineViewCarComponent.prototype.getService=function(){var e="&code="+this.codigo;let t=this.service.callServicesHttp("line-get-cars",e,null);this.procesarRespuestaGET(t)},e.LineViewCarComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_6");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineViewCarComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.nombre=e.name),e.hasOwnProperty("code")&&null!=e.code&&null!=e.code&&""!=e.code&&(this.codigo=e.code),this.cars=[],e.hasOwnProperty("results")&&null!=e.results&&0!=e.results.length)for(var t=0;t<e.results.length;t++)null!=e.results[t]&&(e.results[t].hasOwnProperty("status")&&null!=e.results[t].status&&null!=e.results[t].status&&""!=e.results[t].status&&(e.results[t].formatted_status=_(e.results[t].status).toUpperCase(),"ACTIVE"==e.results[t].status?++this.cars_activos:++this.cars_inactivos),this.cars.push(e.results[t]))},e.LineViewCarComponent.prototype.print=function(){window.print()},e.LineViewCarComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineViewPropietarioComponent=ng.core.Component({selector:"line-view-propietario",templateUrl:"views/line-view-propietario.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.LineViewPropietarioComponent.prototype.ngOnInit=function(){this.title=_("title12"),this.nombre=null,this.codigo=null,this.propietarios=[],this.propietarios_activos=0,this.propietarios_suspendidos=0,this.checkRol()},e.LineViewPropietarioComponent.prototype.checkRol=function(){this.getData()},e.LineViewPropietarioComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.codigo=this.active.queryParams._value.id,this.getService())},e.LineViewPropietarioComponent.prototype.getService=function(){var e="&code="+this.codigo;let t=this.service.callServicesHttp("line-get-propietarios",e,null);this.procesarRespuestaGET(t)},e.LineViewPropietarioComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_5");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineViewPropietarioComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.nombre=e.name),e.hasOwnProperty("code")&&null!=e.code&&null!=e.code&&""!=e.code&&(this.codigo=e.code),this.propietarios=[],e.hasOwnProperty("results")&&null!=e.results&&0!=e.results.length)for(var t=0;t<e.results.length;t++)null!=e.results[t]&&(e.results[t].hasOwnProperty("status")&&null!=e.results[t].status&&null!=e.results[t].status&&""!=e.results[t].status&&(e.results[t].formatted_status=_(e.results[t].status).toUpperCase(),"ACTIVE"==e.results[t].status?++this.propietarios_activos:++this.propietarios_suspendidos),this.propietarios.push(e.results[t]))},e.LineViewPropietarioComponent.prototype.print=function(){window.print()},e.LineViewPropietarioComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LoadingAppComponent=ng.core.Component({selector:"loading-app",templateUrl:"views/loading.html"}).Class({constructor:[ng.router.ActivatedRoute,ng.router.Router,e.AppCallService,function(e,t,a){this.active=this.active,this.router=t,this.ser=a}]}),e.LoadingAppComponent.prototype.ngOnInit=function(){this.imagen_src="assets/images/loading.gif",this.menu=null,this.dataShow=_("message_dflt_55");null==this.ser.getAccessToken()?(this.dataShow=_("message_dflt_54"),setTimeout(function(){window.location.href=redirectUri()},2e3)):this.getInit()},e.LoadingAppComponent.prototype.getInit=function(){let e=_("message_dflt_55");if(null==this.ser.getRole())return this.dataShow=_("message_dflt_56"),void setTimeout(function(){window.location.href=redirectUri()},2e3);let t=this.ser.callServicesHttp("init-auth","?role_owner_id="+this.ser.getBusinessId(),null);t.subscribe(t=>{if(null!=t&&t!=null&&""!=t)if(200==t.status_http){delete t.status_http;let a=null;t.hasOwnProperty("profile")?null==t.profile||null==t.profile||""==t.profile?(this.dataShow=e,setTimeout(function(){window.location.href=redirectUri()},2e3)):(a=t.profile,t.hasOwnProperty("country")&&null!=t.country&&null!=t.country&&""!=t.country&&(a.country=t.country,this.ser.setInit(a)),t.hasOwnProperty("role")?null==t.role||null==t.role||""==t.role?(this.dataShow=_("message_dflt_3"),setTimeout(function(){window.location.href=redirectUri()},2e3)):(this.ser.setRole(t.role),this.redirectInit()):(this.dataShow=_("message_dflt_3"),setTimeout(function(){window.location.href=redirectUri()},2e3))):(this.dataShow=e,setTimeout(function(){window.location.href=redirectUri()},2e3))}else this.dataShow=this.ser.processMessageError(t,e),setTimeout(function(){window.location.href=redirectUri()},2e3)},t=>{this.dataShow=this.ser.processError(t,e),setTimeout(function(){window.location.href=redirectUri()},2e3)})},e.LoadingAppComponent.prototype.redirectInit=function(){this.router.navigate(["/section"])}})(window.app||(window.app={}));(function(e){e.MenuComponent=ng.core.Component({selector:"menu-component",templateUrl:"views/menu.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.ser=n}]}),e.MenuComponent.prototype.ngOnInit=function(){this.formatedName=null,this.listMenu=null,this.formattedMenu()},e.MenuComponent.prototype.formattedMenu=function(e){null!=e&&(e=e.toLowerCase()),this.title="TERMINAL LA BANDERA",this.listMenu=this.getMenu("BANDERA"),null==this.listMenu&&this.router.navigate(["/not-user"])},e.MenuComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.icon="assets/images/pending_actions.svg",e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&("STOPS"==e.name?e.image="assets/images/room_morado_oscuro.svg":"CAR-TYPES"==e.name?e.image="assets/images/estacionamiento.svg":"LINES"==e.name?e.image="assets/images/group_morado.svg":"VEHICLE-OWNER"==e.name?e.image="assets/images/chofer_morado.svg":"VEHICLE"==e.name?e.image="assets/images/emoji_transportation_morado.svg":"FARE"==e.name?e.image="assets/images/precios.svg":"ITINERARY"==e.name?e.image="assets/images/timeline_morado.svg":"TRIP"==e.name?e.image="assets/images/destino.svg":"DRIVERS"==e.name?e.image="assets/images/conductor.svg":"RESERVATION-LINE"==e.name?e.image="assets/images/campana.svg":"TRIP-LINE"==e.name?e.image="assets/images/destino.svg":"CHECK-PASSENGER"==e.name&&(e.image="assets/images/check.svg"),e.formatted_name=_(e.name)),e)},e.MenuComponent.prototype.getMenu=function(e){var t=[],a=[];if(null!=this.ser.getRole()){if(!this.ser.getRole().hasOwnProperty("views"))return null;if(null!=this.ser.getRole().views&&null!=this.ser.getRole().views&&""!=this.ser.getRole().views){for(var n=orderList(this.ser.getRole().views),r=0;r<n.length;r++)null!=n[r]&&(n[r].name==e?n[r].hasOwnProperty("actions")&&null!=n[r].actions&&0!=n[r].actions.length&&t.push(this.formattedData(n[r])):n[r].tag==e&&a.push(this.formattedData(n[r])));return t=t.concat(a),t}}else return null},e.MenuComponent.prototype.getRedirect=function(e){if(e.hasOwnProperty("name")&&e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url){var t=null;try{t=e.url.split("?")}catch(e){t=null}if(null!=t){var a=null;if("/section"==t[0]){if(1<t.length)try{var n=[];n=t[1].split("&"),array3=[];for(var r=0;r<n.length;r++)if(array3=[],array3=n[r].split("="),1<array3.length&&"name"==array3[0]){a=array3[1];break}}catch(e){}null!=a&&(this.formattedMenu(a),this.router.navigate(["/section"],{queryParams:{name:a}}))}else null!=e.url&&(e.url=e.url.toLowerCase()),this.router.navigate([e.url])}}}})(window.app||(window.app={}));(function(e){e.NewSalesComponent=ng.core.Component({selector:"new-sales",templateUrl:"views/new-sales.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.NewSalesComponent.prototype.ngOnInit=function(){this.mostrarViaje=!0,this.listAdultos=[],this.listInfantes=[],this.listMayores=[],this.title=capitalizeOnly(_("title19")),this.typeViaje="IDA",this.viajeSeleccionado=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.destinoSelected=null,this.adultos=1,this.infantes=0,this.viejitos=0,this.total_pasajeros=1,this.pasajerosSelectedMostrar=this.total_pasajeros+" Pasajeros",this.listDestinos=[],this.listViajes=[],this.mostrarCargando=!1,this.imagen_minus_adultos="assets/images/minimize_gray.svg",this.imagen_minus_infantes="assets/images/minimize_gray.svg",this.imagen_minus_tercera="assets/images/minimize_gray.svg",this.imagenCargando="assets/images/loading.gif",this.mensajeServicio=null,this.monedaSelected={value:"Bs",name:"Bol\xEDvar",class:"bg-bs"},this.listMonedas=[{value:"Bs",name:"Bol\xEDvar",class:"bg-bs"},{value:"USD",name:"Divisas",class:"bg-usd"}];var e=new Date;hora=10>e.getHours()?"0"+e.getHours():e.getHours(),minutos=10>e.getMinutes()?"0"+e.getMinutes():e.getMinutes();var t=e.getDate();10>t&&(t="0"+e.getDate());var a=e.getMonth()+1;10>a&&(a="0"+a),this.dateFormatting=e.getFullYear()+"-"+a+"-"+t,this.fecha_ida=this.dateFormatting,this.fecha_vuelta=this.dateFormatting,this.listMetodosPagoMovil=[{banco:"Venezuela",rif:"V20000000",phone:"04146667777"},{banco:"Mercantil",rif:"V20000000",phone:"04146667777"}],this.listMetodosTransferencia=[{banco:"Venezuela",account:"0102-0235-0000000000000",rif:"V22222222222"},{banco:"Mercantil",account:"0102-0235-0000000000000",rif:"V22222222222"}],this.checkRol()},e.NewSalesComponent.prototype.checkRol=function(){},e.NewSalesComponent.prototype.openModalDestinos=function(){this.destino_buscar=null,$("#modalSearchViajes").modal("show")},e.NewSalesComponent.prototype.buscarDestinos=function(){this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.NewSalesComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.NewSalesComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.NewSalesComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.NewSalesComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.NewSalesComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.NewSalesComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.NewSalesComponent.prototype.callServices=function(){let e=this.service.callServicesHttp("parada-report",null,null);this.mostrarCargando=!0,this.procesarRespuesta(e)},e.NewSalesComponent.prototype.procesarRespuesta=function(e){this.mostrarCargando=!1;let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listDestinos=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listDestinos=[];else if(null==e.count||null==e.count||0==e.count)this.listDestinos=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listDestinos=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listDestinos.push(a);this.pagingActual.count=e.count}else this.listDestinos=[]}},e.NewSalesComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.NewSalesComponent.prototype.selectedDestino=function(e){null==e||e==null||""==e||(this.destinoSelected=e,this.destinoSelectedMostrar=e.code+" - "+e.name,$("#modalSearchViajes").modal("hide"))},e.NewSalesComponent.prototype.openModalPasajeros=function(){this.adultos=1,this.infantes=0,this.viejitos=0,this.total_pasajeros=0,this.pasajerosSelectedMostrar=null,$("#modalSelectedPassenger").modal("show")},e.NewSalesComponent.prototype.changeAdult=function(e){if("MENOS"==e){if(0==this.adultos)return;--this.adultos,this.imagen_minus_adultos=0==this.adultos?"assets/images/minimize_gray.svg":"assets/images/minimize_prend.svg"}else this.imagen_minus_adultos="assets/images/minimize_prend.svg",++this.adultos},e.NewSalesComponent.prototype.changeInfantes=function(e){if("MENOS"==e){if(0==this.infantes)return;--this.infantes,this.imagen_minus_infantes=0==this.infantes?"assets/images/minimize_gray.svg":"assets/images/minimize_prend.svg"}else this.imagen_minus_infantes="assets/images/minimize_prend.svg",++this.infantes},e.NewSalesComponent.prototype.changeMayores=function(e){if("MENOS"==e){if(0==this.viejitos)return;--this.viejitos,this.imagen_minus_tercera=0==this.viejitos?"assets/images/minimize_gray.svg":"assets/images/minimize_prend.svg"}else this.imagen_minus_tercera="assets/images/minimize_prend.svg",++this.viejitos},e.NewSalesComponent.prototype.buscar=function(){if(this.listAdultos=[],this.listInfantes=[],this.listMayores=[],this.viajeSeleccionado=null,this.viajeObjetoSelected=null,null==this.destinoSelected)return this.mensaje="Debe seleccionar el destino",void this.msg.warning();if(0==this.total_pasajeros)return this.mensaje="Debe ingresar al menos un pasajero",void this.msg.warning();if(null==this.fecha_ida||null==this.fecha_ida||""==this.fecha_ida)return this.mensaje="Debe ingresar la fecha de ida",void this.msg.warning();if("IDA_VUELTA"==this.typeViaje&&(null==this.fecha_vuelta||""==this.fecha_vuelta||null==this.fecha_vuelta))return this.mensaje="Debe ingresar la fecha de vuelta",void this.msg.warning();let e=this.service.callServicesHttp("travel-report-available",null,null);this.procesarRespuestaTravel(e)},e.NewSalesComponent.prototype.procesarRespuestaTravel=function(e){let t=_("message_dflt_53");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?e.hasOwnProperty("results")&&(this.listViajes=e.results,this.adicionarLista()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.NewSalesComponent.prototype.selectedMoneda=function(e){null==e||e==null||""==e||(this.monedaSelected=e)},e.NewSalesComponent.prototype.calculatePassenger=function(){this.total_pasajeros=this.adultos+this.infantes+this.viejitos,this.pasajerosSelectedMostrar=this.total_pasajeros+" Pasajeros",$("#modalSelectedPassenger")},e.NewSalesComponent.prototype.adicionarLista=function(){var e={};if(0!=this.adultos)for(var t=0;t<this.adultos;t++)e={},this.listAdultos.push(e);if(0!=this.viejitos)for(var t=0;t<this.viejitos;t++)e={},this.listMayores.push(e);if(0!=this.infantes)for(var t=0;t<this.infantes;t++)e={},this.listInfantes.push(e)},e.NewSalesComponent.prototype.printDataPagoMovil=function(){if(this.metodoSelected=null,null!=this.pagoMovil&&null!=this.pagoMovil&&""!=this.pagoMovil)for(var e=0;e<this.listMetodosPagoMovil.length;e++)if(null!=this.listMetodosPagoMovil[e]&&this.listMetodosPagoMovil[e].banco==this.pagoMovil){this.metodoSelected=this.listMetodosPagoMovil[e];break}},e.NewSalesComponent.prototype.printDataTransferencia=function(){if(this.metodoSelected=null,null!=this.transferencia&&null!=this.transferencia&&""!=this.transferencia)for(var e=0;e<this.listMetodosTransferencia.length;e++)if(null!=this.listMetodosTransferencia[e]&&this.listMetodosTransferencia[e].banco==this.transferencia){this.metodoSelected=this.listMetodosTransferencia[e];break}},e.NewSalesComponent.prototype.changeDisponibilidad=function(e){if(this.viajeObjetoSelected=null,this.listItems=[],this.montoTotal=0,null!=e){if(e.disp<this.total_pasajeros-this.infantes)return this.viajeSeleccionado=null,this.mensaje="La unidad seleccionada no posee asientos suficientes",void this.msg.warning();try{for(var t=0;t<this.listViajes.length;t++)if(null!=this.listViajes[t]&&this.listViajes[t].code==e.code){this.listViajes[t].disp-=this.total_pasajeros-this.infantes,this.viajeObjetoSelected=e;break}}catch(e){}var a={};0<this.adultos&&(a.description="Adultos",a.unit=amountFormattingObject(100*this.viajeObjetoSelected.total),a.unit=a.unit.integerPart+","+a.unit.decimalPart+" "+this.viajeObjetoSelected.currency_symbol,a.cantidad=this.adultos,this.montoTotal=this.viajeObjetoSelected.total*this.adultos,a.subtotal=amountFormattingObject(100*this.viajeObjetoSelected.total*this.adultos),a.subtotal=a.subtotal.integerPart+","+a.subtotal.decimalPart+" "+this.viajeObjetoSelected.currency_symbol,this.listItems.push(a)),0<this.infantes&&(a={},a.description="Infantes",a.unit=amountFormattingObject(0),a.unit=a.unit.integerPart+","+a.unit.decimalPart+" "+this.viajeObjetoSelected.currency_symbol,a.cantidad=this.infantes,this.montoTotal+=0,a.subtotal=amountFormattingObject(0),a.subtotal=a.subtotal.integerPart+","+a.subtotal.decimalPart+" "+this.viajeObjetoSelected.currency_symbol,this.listItems.push(a)),0<this.viejitos&&(a={},a.description="Adultos mayores",a.unit=amountFormattingObject(100*(this.viajeObjetoSelected.total/2)),a.unit=a.unit.integerPart+","+a.unit.decimalPart+" "+this.viajeObjetoSelected.currency_symbol,a.cantidad=this.viejitos,this.montoTotal+=this.viajeObjetoSelected.total/2*this.viejitos,a.subtotal=amountFormattingObject(100*(this.viajeObjetoSelected.total/2)*this.viejitos),a.subtotal=a.subtotal.integerPart+","+a.subtotal.decimalPart+" "+this.viajeObjetoSelected.currency_symbol,this.listItems.push(a)),this.tasaSalida=1e6,this.montoTotalFormatted=amountFormattingObject(100*this.montoTotal),this.montoTotalFormatted=this.montoTotalFormatted.integerPart+","+this.montoTotalFormatted.decimalPart+" "+this.viajeObjetoSelected.currency_symbol,this.total=this.montoTotal+this.tasaSalida,this.totalFormatted=amountFormattingObject(100*this.total),this.totalFormatted=this.totalFormatted.integerPart+","+this.totalFormatted.decimalPart+" "+this.viajeObjetoSelected.currency_symbol}},e.NewSalesComponent.prototype.confirmar=function(){$("#modalTicket").modal("show")}})(window.app||(window.app={}));(function(e){e.NotUserComponent=ng.core.Component({selector:"not-user",templateUrl:"views/not-user.html"}).Class({constructor:[ng.router.ActivatedRoute,ng.router.Router,function(e,t){this.active=this.active,this.router=t}]}),e.NotUserComponent.prototype.ngOnInit=function(){try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}},e.NotUserComponent.prototype.redirect=function(){this.router.navigate(["/loading"])},e.NotUserComponent.prototype.goInit=function(){window.location.href=getLoginUri()}})(window.app||(window.app={}));(function(e){e.ParadaCreateComponent=ng.core.Component({selector:"parada-create",templateUrl:"views/parada-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.ParadaCreateComponent.prototype.ngOnInit=function(){this.title=_("title1"),this.nombre=null,this.code=null,this.checkRol()},e.ParadaCreateComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=0;a<t.length;a++)if(null!=t[a]&&"STOP-CREATE"==t[a].name){e=!0;break}e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ParadaCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/parada-report"])},e.ParadaCreateComponent.prototype.clean=function(){this.nombre=null,this.code=null},e.ParadaCreateComponent.prototype.done=function(){var e={},t="";if(null==this.code||null==this.code||""==this.code)return this.mensaje=_("warning32"),void this.msg.warning();if(3!=this.code.trim().length)return this.mensaje=_("warning32"),void this.msg.warning();if(t="&code="+this.code.trim().toUpperCase(),null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje=_("warning31"),void this.msg.warning();e.name=this.nombre.trim().toUpperCase(),e.active=!0;let a=_("message_dflt_29"),n=this.service.callServicesHttp("parada-post",t,e);n.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.ParadaCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_29");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=capitalizeOnly(_("success23")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ParadaCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ParadaReportComponent=ng.core.Component({selector:"parada-report",templateUrl:"views/parada-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.ParadaReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activa"},{value:"INACTIVE",name:"Inactiva"}],this.status=null,this.nombre=null,this.codigo=null,this.checkRol()},e.ParadaReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("STOPS"!=t[n].name)"STOPS"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ParadaReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.ParadaReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"STOP-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.ParadaReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.code||null==this.code||""==this.code||"null"==this.code||"Todos"==this.code||(t={},t={code:"*"+this.codigo+"".trim()+"*"}),null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||"Todos"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||"Todos"==this.status||(null==t&&(t={}),t.active="ACTIVE"==status),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.ParadaReportComponent.prototype.clean=function(){this.nombre=null,this.codigo=null,this.status=null},e.ParadaReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ParadaReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ParadaReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ParadaReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ParadaReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ParadaReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ParadaReportComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=this.service.callServicesHttp("parada-report",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.ParadaReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ParadaReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.ParadaReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("STOP-DELETE")&&e.actions.push(this.checkAction("STOP-DELETE")),e.hasOwnProperty("active")?e.active?(e.formatted_status="Activa",null!=this.checkAction("STOP-INACTIVE")&&e.actions.push(this.checkAction("STOP-INACTIVE"))):(e.formatted_status="Inactiva",null!=this.checkAction("STOP-ACTIVE")&&e.actions.push(this.checkAction("STOP-ACTIVE"))):(e.formatted_status="Inactiva",null!=this.checkAction("STOP-ACTIVE")&&e.actions.push(this.checkAction("STOP-ACTIVE"))),e)},e.ParadaReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.ParadaReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"STOP-ACTIVE":$("#modalActivateParada").modal("show");break;case"STOP-INACTIVE":$("#modalInactivateParada").modal("show");break;case"STOP-DELETE":$("#modalDeleteParada").modal("show");break;default:}},e.ParadaReportComponent.prototype.deleteData=function(){if($("#modalDeleteParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code;let t=_("message_dflt_30"),a=this.service.callServicesHttp("parada-delete",e);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.ParadaReportComponent.prototype.activeData=function(){if($("#modalActivateParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code,t={name:this.dataSelected.name,active:!0};let a=_("message_dflt_31"),n=this.service.callServicesHttp("parada-put",e,t);n.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})}},e.ParadaReportComponent.prototype.inactiveData=function(){if($("#modalInactivateParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code,t={name:this.dataSelected.name,active:!1};let a=this.service.callServicesHttp("parada-put",e,t),n=_("message_dflt_32");a.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.ParadaReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_30");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success20")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ParadaReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_31");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].code==e.code){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success21"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.ParadaReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_32");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].code==e.code){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success22"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.ParadaReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarViewComponent=ng.core.Component({selector:"car-view",templateUrl:"views/car-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,a){this.msg=e,this.mensaje="",this.router=t,this.active=a}]}),e.CarViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title3")),this.id=null,this.placa=null,this.conductor=null,this.modelo=null,this.marca=null,this.getData()},e.CarViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.CarViewComponent.prototype.getService=function(){},e.CarViewComponent.prototype.formattedData=function(){},e.CarViewComponent.prototype.print=function(){window.print()},e.CarViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PassengerCreateComponent=ng.core.Component({selector:"passenger-create",templateUrl:"views/passenger-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,a){this.msg=e,this.mensaje="",this.router=t,this.active=a}]}),e.PassengerCreateComponent.prototype.ngOnInit=function(){this.title="Nuevo pasajero",this.id=null,this.name=null,this.id_doc="V",this.doc=null,this.telefono=[],this.email=[],this.direccion=null,this.listDocs=["V","E","G","J"],this.etiqueta=null,this.isRif=!0,this.isCi=!1,$("#phone").inputmask("(9999) 999-9999"),this.save=!0,this.getData()},e.PassengerCreateComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("passenger-create"==this.active.url._value[0].path?(this.title="Nuevo Pasajero",this.save=!0):(this.title="Actualizar datos del pasajeros",this.save=!1,this.getService()))},e.PassengerCreateComponent.prototype.getService=function(){},e.PassengerCreateComponent.prototype.getValueMsg=function(){},e.PassengerCreateComponent.prototype.clean=function(){this.name=null,this.id_doc=null,this.doc=null,this.telefono=[],this.email=[],this.direccion=null,this.isRif=!0,this.isCi=!1,this.id_doc="V",this.phone=null},e.PassengerCreateComponent.prototype.selectTypeDoc=function(){this.isRif=!this.isRif,this.isCi=!this.isCi},e.PassengerCreateComponent.prototype.done=function(){if(null==this.name||null==this.name||""==this.name)return this.mensaje=capitalizeOnly(_("message_dflt_1")),void this.msg.warning();if(null==this.id_doc||null==this.id_doc||""==this.id_doc)return this.mensaje=capitalizeOnly(_("message_dflt_2")),void this.msg.warning();if(null==this.doc||null==this.doc||""==this.doc)return this.mensaje=capitalizeOnly(_("message_dflt_3")),void this.msg.warning();null!=this.phone&&""!=this.phone&&this.phone!=null&&""!=this.phone.trim(),null!=this.email&&""!=this.email&&this.email!=null&&""!=this.email.trim(),null!=this.direccion&&this.direccion!=null&&""!=this.direccion&&""!=this.direccion.trim()},e.PassengerCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PassengerReportComponent=ng.core.Component({selector:"passenger-report",templateUrl:"views/passenger-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,a){this.msg=e,this.mensaje="",this.router=t,this.active=a}]}),e.PassengerReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.nombre=null,this.doc=null,this.email=null,this.direccion=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}},e.PassengerReportComponent.prototype.search=function(){},e.PassengerReportComponent.prototype.clean=function(){this.nombre=null,this.doc=null,this.email=null},e.PassengerReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.PassengerReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.PassengerReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.PassengerReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.PassengerReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.PassengerReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.PassengerReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),r="results",s=this.service.callServicesHttp("passenger-report",a,this.jsonFilter);s.subscribe(e=>{if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=n,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,n),this.msg.error();else if(delete e.status_http,!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let n=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?n:n+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty(r)){var t={};this.listRegister=[];for(var a=0;a<e[r].length;a++)t=this.formattedData(e[r][a]),null!=t&&this.listRegister.push(t);this.pagingActual.count=e.count}else this.listRegister=[]}},e=>{this.listRegister=[],this.mensaje=this.service.processError(e,n),this.msg.error()})},e.PassengerReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.PassengerReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.PassengerReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"PASSENGER-VIEW":this.router.navigate(["/passenger-view"],{queryParams:{id:e.id}});break;case"PASSENGER-UPDATE":this.router.navigate(["/passenger-update"],{queryParams:{id:e.id}});break;case"PASSENGER-DELETE":$("#deletePassenger").modal();break;default:}},e.PassengerReportComponent.prototype.deleteData=function(){if($("#deletePassenger").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning2")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=capitalizeOnly(_("message_dflt_8")),a=this.service.callServicesHttp("passenger-delete",e,null);a.subscribe(e=>{null==e||null==e||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(delete e.status_http,this.ngOnInit(),this.mensaje=capitalizeOnly(_("success4")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.PassengerReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PassengerViewComponent=ng.core.Component({selector:"passenger-view",templateUrl:"views/passenger-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,a){this.msg=e,this.mensaje="",this.router=t,this.active=a}]}),e.PassengerViewComponent.prototype.ngOnInit=function(){this.id=null,this.name=null,this.documento=null,this.phone=null,this.email=null,this.direccion=null,this.getData()},e.PassengerViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.PassengerViewComponent.prototype.getService=function(){},e.PassengerViewComponent.prototype.formattedData=function(){},e.PassengerViewComponent.prototype.print=function(){window.print()},e.PassengerViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PaymentAddComponent=ng.core.Component({selector:"payment-add",templateUrl:"views/payment-add.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.PaymentAddComponent.prototype.ngOnInit=function(){this.listAsientos="",this.listPagos=[{type:""}],this.listItems=[],this.typePayment=null,this.listPagoMovil=[],this.listTransferencias=[],this.listTipos=[{value:"CASH",name:"Efectivo"},{value:"POS",name:"Punto de venta"},{value:"MOBILE",name:"Pago M\xF3vil"},{value:"TRANSFERENCE",name:"Transferencia"}],this.listMonedas=[{value:"USD",name:"$"},{value:"VES",name:"Bs"}],this.currency="USD";try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.monto="0,00",$("#monto1").mask("#.##0,00",{reverse:!0}),this.checkRol()},e.PaymentAddComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=0;a<t.length;a++)if(null!=t[a]&&"ADD-PAYMENT"==t[a].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.PaymentAddComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&(this.active.queryParams._value.hasOwnProperty("id")&&(this.reservation_id=this.active.queryParams._value.id),this.active.queryParams._value.hasOwnProperty("itinerary_id")&&(this.itinerary_id=this.active.queryParams._value.itinerary_id),this.active.queryParams._value.hasOwnProperty("trip_id")&&(this.trip_id=this.active.queryParams._value.trip_id),this.getReservation(),this.getReservationLine())},e.PaymentAddComponent.prototype.getReservation=function(){let e=this.service.callServicesHttp("reservation-get-line","&id="+this.reservation_id+"&itinerary_id="+this.itinerary_id+"&trip_id="+this.trip_id,null),t=_("message_dflt_56");e.subscribe(e=>{null==e||e==null||""==e?(this.mensaje=t,this.msg.warning()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.PaymentAddComponent.prototype.formattedData=function(e){if(this.parada=null,this.listItems=[],null!=e&&null!=e&&""!=e){if(e.hasOwnProperty("trip_departure_date")&&null!=e.trip_departure_date&&null!=e.trip_departure_date&&""!=e.trip_departure_date){this.fecha_salida=formattingDate(e.trip_departure_date);try{this.fecha_salida=this.fecha_salida.split(" "),this.hora=this.fecha_salida[1],this.fecha_salida=this.fecha_salida[0]}catch(e){}}if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&""!=e.line_name&&(this.line_name=e.line_name),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(this.status=_(e.status).toUpperCase(),this.status_question=e.status),e.hasOwnProperty("itinerary_id")&&null!=e.itinerary_id&&null!=e.itinerary_id&&""!=e.itinerary_id&&(this.itinerary_id=e.itinerary_id),e.hasOwnProperty("sequence")&&null!=e.sequence&&null!=e.sequence&&""!=e.sequence&&(this.sequence=e.sequence),e.hasOwnProperty("vehicle_type_name")&&null!=e.vehicle_type_name&&null!=e.vehicle_type_name&&""!=e.vehicle_type_name&&(this.vehicle_type_name=e.vehicle_type_name),e.hasOwnProperty("number_of_passengers")&&null!=e.number_of_passengers&&null!=e.number_of_passengers&&""!=e.number_of_passengers&&(this.number_of_passengers=e.number_of_passengers),this.listAsientos="",e.hasOwnProperty("seats")&&null!=e.seats&&0!=e.seats.length)for(var t=0;t<e.seats.length;t++)t==e.seats.length-1?this.listAsientos+=e.seats[t]:this.listAsientos=this.listAsientos+e.seats[t]+" - ";if(this.listPayments=[],e.hasOwnProperty("payments")&&null!=e.payments&&0!=e.payments.length)for(var a={},t=0;t<e.payments.length;t++)null!=e.payments[t]&&(a={},a=e.payments[t],a.hasOwnProperty("collector_bank")&&null!=a.collector_bank&&null!=a.collector_bank&&""!=a.collector_bank&&(a.banco=returnBankSelected(a.collector_bank)),a.hasOwnProperty("payment_method")&&null!=a.payment_method&&null!=a.payment_method&&""!=a.payment_method&&(a.metodo=_(a.payment_method).toUpperCase()),a.hasOwnProperty("amount")&&null!=a.amount&&null!=a.amount&&""!=a.amount&&(a.formatted_amount=amountFormattingObject(100*a.amount),a.formatted_amount=a.formatted_amount.integerPart+","+a.formatted_amount.decimalPart,a.hasOwnProperty("currency")&&null!=a.currency&&null!=a.currency&&""!=a.currency&&(a.formatted_amount=a.formatted_amount+" "+_(a.currency))),this.listPayments.push(a));if(e.hasOwnProperty("passengers")&&null!=e.passengers&&0!=e.passengers.length)for(var a={},t=0;t<e.passengers.length;t++)if(null!=e.passengers[t]){if(a={},(null==this.parada||""==this.parada)&&e.passengers[t].hasOwnProperty("destination_stop_code")&&null!=e.passengers[t].destination_stop_code&&null!=e.passengers[t].destination_stop_code&&""!=e.passengers[t].destination_stop_code&&(this.parada=e.passengers[t].destination_stop_code,e.passengers[t].hasOwnProperty("destination_stop_name")&&null!=e.passengers[t].destination_stop_name&&null!=e.passengers[t].destination_stop_name&&""!=e.passengers[t].destination_stop_name&&(this.parada=this.parada+" - "+e.passengers[t].destination_stop_name)),e.passengers[t].hasOwnProperty("name")&&null!=e.passengers[t].name&&null!=e.passengers[t].name&&""!=e.passengers[t].name&&(a.name=e.passengers[t].name),e.passengers[t].hasOwnProperty("type")&&null!=e.passengers[t].type&&null!=e.passengers[t].type&&""!=e.passengers[t].type&&(a.formatted_type=_(e.passengers[t].type).toUpperCase()),e.passengers[t].hasOwnProperty("id_doc")&&null!=e.passengers[t].id_doc&&null!=e.passengers[t].id_doc&&""!=e.passengers[t].id_doc&&(a.id_doc=e.passengers[t].id_doc),e.passengers[t].hasOwnProperty("fare_amount")&&null!=e.passengers[t].fare_amount&&null!=e.passengers[t].fare_amount&&""!=e.passengers[t].fare_amount)try{a.monto=amountFormattingObject(100*e.passengers[t].fare_amount),a.monto=a.monto.integerPart+","+a.monto.decimalPart,e.passengers[t].hasOwnProperty("fare_currency")&&(this.moneda=_(e.passengers[t].fare_currency),a.monto=a.monto+" "+_(e.passengers[t].fare_currency)),this.currency=e.passengers[t].fare_currency}catch(e){}this.listItems.push(a)}if(e.hasOwnProperty("total")&&null!=e.total&&null!=e.total&&""!=e.total){try{this.total=e.total,this.total_formatted=amountFormattingObject(100*e.total),this.total_formatted=this.total_formatted.integerPart+","+this.total_formatted.decimalPart,null!=this.moneda&&(this.total_formatted=this.total_formatted+" "+this.moneda)}catch(e){}if(e.hasOwnProperty("usd_exchange_rate")&&null!=e.usd_exchange_rate&&null!=e.usd_exchange_rate&&""!=e.usd_exchange_rate&&0!=e.usd_exchange_rate)try{this.total_bs=this.total*e.usd_exchange_rate,this.total_formatted_bs=amountFormattingObject(100*this.total_bs),this.total_formatted_bs=this.total_formatted_bs.integerPart+","+this.total_formatted_bs.decimalPart+" Bs",this.formatted_tasa_cambio=amountFormattingObject(100*e.usd_exchange_rate),this.formatted_tasa_cambio=this.formatted_tasa_cambio.integerPart+","+this.formatted_tasa_cambio.decimalPart+" Bs"}catch(e){}}}},e.PaymentAddComponent.prototype.openModalPayment=function(){this.telefono_pago_movil=null,this.typePayment="CASH",this.monto=null,this.banco=null,this.currency="USD",this.listPagos=[],$("#modalMediosPago").modal("show")},e.PaymentAddComponent.prototype.cleanData=function(){this.telefono_pago_movil=null,this.typePayment="CASH",this.monto=null,this.banco=null,this.referencia_pago_movil=null},e.PaymentAddComponent.prototype.getReservationLine=function(){let e=this.service.callServicesHttp("line-get-reservation",null,null),t=_("message_dflt_3");e.subscribe(e=>{this.formattedLinePayments(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.PaymentAddComponent.prototype.formattedLinePayments=function(e){if(null!=e&&e!=null&&""!=e){if(e.hasOwnProperty("mobile_payment")&&null!=e.mobile_payment&&0!=e.mobile_payment.length){this.listPagoMovil=e.mobile_payment;for(var t=0;t<this.listPagoMovil.length;t++)null!=this.listPagoMovil[t]&&this.listPagoMovil[t].hasOwnProperty("bank")&&null!=this.listPagoMovil[t].bank&&null!=this.listPagoMovil[t].bank&&""!=this.listPagoMovil[t].bank&&(this.listPagoMovil[t].name=returnBankSelected(this.listPagoMovil[t].bank))}if(e.hasOwnProperty("bank_accounts")&&null!=e.bank_accounts&&0!=e.bank_accounts.length){this.listTransferencias=e.bank_accounts;for(var t=0;t<this.listTransferencias.length;t++)null!=this.listTransferencias[t]&&this.listTransferencias[t].hasOwnProperty("bank")&&null!=this.listTransferencias[t].bank&&null!=this.listTransferencias[t].bank&&""!=this.listTransferencias[t].bank&&(this.listTransferencias[t].name=returnBankSelected(this.listTransferencias[t].bank))}}},e.PaymentAddComponent.prototype.addPayment=function(){if($("#modalMediosPago").modal("hide"),null==this.listPagos||0==this.listPagos.length)return this.mensaje="Debe adicionar al menos un pago a la reservaci\xF3n",void this.msg.warning();var e={},t={},n=null,r=0,s=new Date,o=s.getDate();10>o&&(o="0"+s.getDate());var d=s.getMonth()+1;10>d&&(d="0"+d);for(var l=s.getFullYear()+"-"+d+"-"+o,p=0;p<this.listPagos.length;p++)if(null!=this.listPagos[p]&&(t={},this.listPagos[p].hasOwnProperty("type"))){if(null==this.listPagos[p].type||null==this.listPagos[p].type||""==this.listPagos[p].type)return this.mensaje="Debe seleccionar el tipo de pago de la linea "+(p+1),void this.msg.warning();if(null==this.listPagos[p].currency||null==this.listPagos[p].currency||""==this.listPagos[p].currency)return this.mensaje="Debe seleccionar la moneda de la l\xEDnea "+(p+1),void this.msg.warning();if(t.currency=this.listPagos[p].currency,null==this.listPagos[p].currency||null==this.listPagos[p].currency||""==this.listPagos[p].currency)return this.mensaje="Debe seleccionar la moneda",void this.msg.warning();if(t.currency=this.listPagos[p].currency,null==this.listPagos[p].monto||null==this.listPagos[p].monto||""==this.listPagos[p].monto)return this.mensaje="Debe seleccionar el monto de la l\xEDnea "+(p+1),void this.msg.warning();try{n=$("#monto1"+p).val(),n=n.replace(/\./g,"").replace(/,/g,""),n=(replaceAll(n," ","")+"").trim(),r=(parseFloat(n)/100).toFixed(2)}catch(e){r=0}if(""==r||0==r)return this.mensaje="Debe ingresar el monto de la l\xEDnea "+(p+1),void this.msg.warning();if(r=parseFloat(r),t.amount=r,"CASH"==this.listPagos[p].type)e.hasOwnProperty("cash_payments")||(e.cash_payments=[]),e.cash_payments.push(t);else if("POS"==this.listPagos[p].type)e.hasOwnProperty("pos_payments")||(e.pos_payments=[]),e.pos_payments.push(t);else if("MOBILE"==this.listPagos[p].type){var u=null,c=null;if(null==this.listPagos[p].banco||null==this.listPagos[p].banco||""==this.listPagos[p].banco)return this.mensaje="Debe ingresar el banco receptor de la linea "+(p+1),void this.msg.warning();if(null!=this.listPagoMovil&&0!=this.listPagoMovil.length)for(var g=0;g<this.listPagoMovil.length;g++)if(null!=this.listPagoMovil[g]&&this.listPagoMovil[g].bank==this.listPagos[p].banco){u=this.listPagoMovil[g].id_doc,c=this.listPagoMovil[g].phone;break}if(null==this.listPagos[p].telefono_pago_movil||null==this.listPagos[p].telefono_pago_movil||""==this.listPagos[p].telefono_pago_movil)return this.mensaje="Debe ingresar el tel\xE9fono de la transacci\xF3n de la l\xEDnea "+(p+1),void this.msg.warning();var f=this.listPagos[p].telefono_pago_movil.substring(0,3);if("414"!=f&&"416"!=f&&"424"!=f&&"426"!=f&&"412"!=f)return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe comenzar por 414 | 416 | 426 | 424 |412",void this.msg.warning();if(null==this.listPagos[p].referencia_pago_movil||null==this.listPagos[p].referencia_pago_movil||""==this.listPagos[p].referencia_pago_movil)return this.mensaje="Debe ingresar la referencia de la transacci\xF3n  de la l\xEDnea "+(p+1),void this.msg.warning();t.date_of_payment=l,t.collector_bank=this.listPagos[p].banco,t.collector_id_doc=u,t.collector_phone=c,t.payer_phone=this.listPagos[p].telefono_pago_movil,t.payer_reference=this.listPagos[p].referencia_pago_movil,t.payer_bank=this.listPagos[p].banco,e.hasOwnProperty("mobile_payments")||(e.mobile_payments=[]),e.mobile_payments.push(t)}else if("TRANSFERENCE"==this.listPagos[p].type){var u=null,m=null;if(null==this.listPagos[p].banco||null==this.listPagos[p].banco||""==this.listPagos[p].banco)return this.mensaje="Debe ingresar el banco receptor de la linea "+(p+1),void this.msg.warning();if(null!=this.listTransferencias&&0!=this.listTransferencias.length)for(var g=0;g<this.listTransferencias.length;g++)if(null!=this.listTransferencias[g]&&this.listTransferencias[g].bank==this.listPagos[g].banco){u=this.listTransferencias[g].id_doc,m=this.listTransferencias[g].number;break}if(null==this.listPagos[p].referencia_pago_movil||null==this.listPagos[p].referencia_pago_movil||""==this.listPagos[p].referencia_pago_movil)return this.mensaje="Debe ingresar la referencia de la transacci\xF3n  de la l\xEDnea "+(p+1),void this.msg.warning();t.date_of_payment=l,t.collector_bank=this.listPagos[p].banco,t.collector_id_doc=u,t.collector_bank_account_number=m,t.payer_reference=this.listPagos[p].referencia_pago_movil,t.payer_bank=this.listPagos[p].banco,e.hasOwnProperty("transfer_payments")||(e.transfer_payments=[]),e.transfer_payments.push(t)}}if(null!=this.listItems&&0!=this.listItems.length){e.seats=[];for(var p=0;p<this.listItems.length;p++)if(null!=this.listItems[p]&&this.listItems[p].hasOwnProperty("asiento")){if(null==this.listItems[p].asiento||null==this.listItems[p].asiento||""==this.listItems[p].asiento)return this.mensaje="Debe ingresar el n\xFAmero de asiento "+(p+1),void this.msg.warning();e.seats.push(this.listItems[p].asiento.trim())}}this.addPaymentService(e)},e.PaymentAddComponent.prototype.addPaymentService=function(e){let t=this.service.callServicesHttp("add-payment-reservation","&id="+this.reservation_id+"&itinerary_id="+this.itinerary_id+"&trip_id="+this.trip_id,e),a=_("message_dflt_74");t.subscribe(e=>{null==e||e==null||""==e?(this.mensaje=a,this.msg.warning()):200==e.status_http?(this.formattedData(e),this.mensaje="Pago adicionado con \xE9xito",this.msg.info()):(this.mensaje=this.service.processMessageError(e,a),this.msg.error())},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.PaymentAddComponent.prototype.addPago=function(){},e.PaymentAddComponent.prototype.deletePago=function(e){var t=this.listPagos.slice(e+1);this.listPagos=this.listPagos.slice(0,e),this.listPagos=this.listPagos.concat(t)},e.PaymentAddComponent.prototype.addPago=function(){this.listPagos.push({type:""})},e.PaymentAddComponent.prototype.focusMonto=function(){$(".moneda1").mask("#.##0,00",{reverse:!0})},e.PaymentAddComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PropietarioCreateComponent=ng.core.Component({selector:"propietario-create",templateUrl:"views/propietario-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.PropietarioCreateComponent.prototype.ngOnInit=function(){this.title=_("title7"),this.pagingActualLine={},this.detallePorPaginaLine=10,this.totalPageLine=1,this.pageSelectedLine=1,this.listRegisterLine=[],this.listDocs=["V","E","G","J"],this.id_doc="V",this.doc=null,this.nombre=null,this.apellido=null,this.telefono=[],this.email=[],this.etiqueta=null,this.isRif=!0,this.isCi=!1,this.save=!0,this.texto="Guardar",this.active_status=!0,this.clase="col-lg-8 col-md-8 col-sm-6 col-12",this.checkRol()},e.PropietarioCreateComponent.prototype.checkRol=function(){var e="CREATE-VEHICLE-OWNER";this.active.url.hasOwnProperty("_value")&&("propietario-create"==this.active.url._value[0].path?(this.title=_("title7"),this.save=!0,e="CREATE-VEHICLE-OWNER"):(this.title=_("title8"),this.save=!1,this.clase="col-lg-12 col-md-12 col-sm-12 col-12",e="UPDATE-VEHICLE-OWNER"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.PropietarioCreateComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("propietario-create"==this.active.url._value[0].path?(this.title=_("title7"),this.save=!0,this.texto="Guardar"):(this.title=_("title8"),this.save=!1,this.texto="Actualizar",this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))))},e.PropietarioCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("propietario-get","&id="+this.id+"&business_id="+this.business_id,null),t=_("message_dflt_42");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.PropietarioCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_42");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.PropietarioCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name)try{e.name=e.name.split(","),1==e.name.length?this.nombre=e.name[0].trim():2==e.name.length&&(this.nombre=e.name[0].trim(),this.apellido=e.name[1].trim())}catch(e){}e.hasOwnProperty("phone")&&null!=e.phone&&e.phone!=null&&""!=e.phone&&(this.telefono=e.phone),e.hasOwnProperty("email")&&null!=e.email&&e.email!=null&&""!=e.email&&(this.email=e.email),e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.lineSelected={},this.lineSelected.name=e.line_name,this.lineSelected.id=this.line_id),e.hasOwnProperty("active")&&(this.active_status=e.active);try{e.hasOwnProperty("id_doc")&&null!=e.id_doc&&e.id_doc!=null&&""!=e.id_doc&&(this.id_doc=e.id_doc.charAt(0),this.doc=e.id_doc.substring(1,e.id_doc.length))}catch(e){}},e.PropietarioCreateComponent.prototype.searchLine=function(){this.jsonFilter={};var e=[],t=null;if(t={},t.active=!0,null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.name="*"+this.linea+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServicesLine(1,"&offset=0&limit="+this.detallePorPaginaLine)},e.PropietarioCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPaginaLine=e.detalles,this.totalPageLine=e.pagina,null==this.listRegisterLine||this.listRegisterLine==null||0==this.listRegisterLine.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.PropietarioCreateComponent.prototype.getValueFirstLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.PropietarioCreateComponent.prototype.getValuePreviousLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.PropietarioCreateComponent.prototype.getValueLastLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.PropietarioCreateComponent.prototype.getValueNextLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.PropietarioCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.PropietarioCreateComponent.prototype.callServicesLine=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("line-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuestaLine(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.PropietarioCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegisterLine=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegisterLine=[];else if(null==e.count||null==e.count||0==e.count)this.listRegisterLine=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegisterLine=[];for(var n=0;n<e.results.length;n++)a=this.formattedDataLine(e.results[n]),null!=a&&this.listRegisterLine.push(a);this.pagingActualLine.count=e.count}else this.listRegisterLine=[]}},e.PropietarioCreateComponent.prototype.formattedDataLine=function(e){return null==e||null==e||""==e?null:e},e.PropietarioCreateComponent.prototype.quitarLinea=function(){if(this.lineSelected=null,null!=data&&null!=data&&""!=data&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var e=0;e<this.listRegisterLine.length;e++)null!=this.listRegisterLine[e]&&(this.listRegisterLine[e].classSelected=null)},e.PropietarioCreateComponent.prototype.selectLine=function(e){if(this.lineSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var t=0;t<this.listRegisterLine.length;t++)null!=this.listRegisterLine[t]&&(this.listRegisterLine[t].code==e.code?null==this.listRegisterLine[t].classSelected?(this.lineSelected=this.listRegisterLine[t],this.listRegisterLine[t].classSelected="selected"):this.listRegisterLine[t].classSelected=null:this.listRegisterLine[t].classSelected=null)},e.PropietarioCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/propietario-report"])},e.PropietarioCreateComponent.prototype.clean=function(){this.listRegisterLine=[],this.nombre=null,this.lineSelected=null,this.apellido=null,this.telefono=null,this.email=null,this.save&&(this.doc=null,this.id_doc="V")},e.PropietarioCreateComponent.prototype.done=function(){var e={};if(null==this.lineSelected)return this.mensaje="Debe seleccionar la linea a la que pertenece el propietario",void this.msg.warning();if(null==this.id_doc||null==this.id_doc||""==this.id_doc||"null"==this.id_doc)return this.mensaje="Debe seleccionar el tipo de documento",void this.msg.warning();if(e.id_doc=this.id_doc,null==this.doc||null==this.doc||""==this.doc)return this.mensaje="Debe ingresar el n\xFAmero de RIF/CI del conductor",void this.msg.warning();this.doc=this.doc.trim();var t=0;if(9>this.doc.length){t=9-this.doc.length;for(var a="",n=0;n<t;n++)a+="0";this.doc=a+this.doc}if(e.id_doc+=this.doc,null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje="Debe ingresar el nombre del propietario",void this.msg.warning();if(e.name=this.nombre.trim().toUpperCase(),null==this.apellido||null==this.apellido||""==this.apellido)return this.mensaje="Debe ingresar el apellido del propietario",void this.msg.warning();if(e.name=e.name+" , "+this.apellido.trim().toUpperCase(),null!=this.telefono&&""!=this.telefono&&null!=this.telefono&&""!=this.telefono.trim()){e.phone=this.telefono+"";var r=this.telefono.substring(0,3);if("414"!=r&&"416"!=r&&"424"!=r&&"426"!=r&&"412"!=r)return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe comenzar por 414 | 416 | 426 | 424 |412",void this.msg.warning();e.phone=e.phone.trim()}null==this.email||""==this.email||null==this.email||""==this.email.trim()||(e.email=this.email.trim().toLowerCase()),e.active=this.active_status;let s=null,o=_("message_dflt_43");this.save?s=this.service.callServicesHttp("propietario-post","&line_id="+this.lineSelected.id+"&business_id="+this.lineSelected.id,e):(o=_("message_dflt_44"),s=this.service.callServicesHttp("propietario-put","&business_id="+this.business_id+"&id="+this.id,e)),s.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,o),this.msg.error()})},e.PropietarioCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_43");t=this.save?_("message_dflt_43"):_("message_dflt_44"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success32")):capitalizeOnly(_("success33")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.PropietarioCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PropietarioReportComponent=ng.core.Component({selector:"propietario-report",templateUrl:"views/propietario-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.PropietarioReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.status=null,this.nombre=null,this.doc=null,this.email=null,this.linea=null,this.checkRol()},e.PropietarioReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("VEHICLE-OWNER"!=t[n].name)"VEHICLE-OWNER"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.PropietarioReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.PropietarioReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-VEHICLE-OWNER"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.PropietarioReportComponent.prototype.clean=function(){this.nombre=null,this.doc=null,this.marca=null,this.rif=null,this.email=null,this.linea=null,this.status=null},e.PropietarioReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre.trim()+"*"),null==this.doc||null==this.doc||""==this.doc||"null"==this.doc||(null==t&&(t={}),t.id_doc="*"+this.doc.trim()+"*"),null==this.email||null==this.email||""==this.email||"null"==this.email||(null==t&&(t={}),t.email="*"+this.email.trim()+"*"),null==this.linea||null==this.linea||""==this.linea||(null==t&&(t={}),t.line_name="*"+this.linea.trim()+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.PropietarioReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.PropietarioReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.PropietarioReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.PropietarioReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.PropietarioReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.PropietarioReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.PropietarioReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("propietario-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.PropietarioReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.PropietarioReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.PropietarioReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("VEHICLE-OWNER-DELETE")&&e.actions.push(this.checkAction("VEHICLE-OWNER-DELETE")),null!=this.checkAction("UPDATE-VEHICLE-OWNER")&&e.actions.push(this.checkAction("UPDATE-VEHICLE-OWNER")),null!=this.checkAction("VIEW-VEHICLE-OWNER")&&e.actions.push(this.checkAction("VIEW-VEHICLE-OWNER")),e.hasOwnProperty("active")&&(e.active?(e.formatted_status="ACTIVO",null!=this.checkAction("VEHICLE-OWNER-INACTIVE")&&e.actions.push(this.checkAction("VEHICLE-OWNER-INACTIVE"))):(e.formatted_status="INACTIVO",null!=this.checkAction("VEHICLE-OWNER-ACTIVE")&&e.actions.push(this.checkAction("VEHICLE-OWNER-ACTIVE")))),e)},e.PropietarioReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.PropietarioReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"VEHICLE-OWNER-DELETE":$("#modalDeletePropietario").modal("show");break;case"VIEW-VEHICLE-OWNER":this.router.navigate(["/propietario-view"],{queryParams:{id:e.id}});break;case"UPDATE-VEHICLE-OWNER":this.router.navigate(["/propietario-update"],{queryParams:{id:e.id,line_id:e.line_id,business_id:e.business_id}});break;case"VEHICLE-OWNER-ACTIVE":$("#modalActivatePropietario").modal("show");break;case"VEHICLE-OWNER-INACTIVE":$("#modalInactivatePropietario").modal("show");break;default:}},e.PropietarioReportComponent.prototype.deleteData=function(){if($("#modalDeletePropietario").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning42")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id;let t=_("message_dflt_39"),a=this.service.callServicesHttp("propietario-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.PropietarioReportComponent.prototype.activeData=function(){if($("#modalActivatePropietario").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning42")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!0}catch(e){}let a=_("message_dflt_40"),n=this.service.callServicesHttp("propietario-put",e,t);n.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})}},e.PropietarioReportComponent.prototype.inactiveData=function(){if($("#modalInactivatePropietario").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning42")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!1}catch(e){}let a=_("message_dflt_41"),n=this.service.callServicesHttp("propietario-put",e,t);n.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})}},e.PropietarioReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_39");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success29")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.PropietarioReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_40");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id&&this.listRegister[a].line_id==e.line_id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success30"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.PropietarioReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_41");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id&&this.listRegister[a].line_id==e.line_id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success31"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.PropietarioReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PropietarioViewComponent=ng.core.Component({selector:"propietario-view",templateUrl:"views/propietario-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.PropietarioViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title5")),this.title2=capitalizeOnly(_("title6")),this.id=null,this.nombre=null,this.id_doc=null,this.email=null,this.phone=null,this.linea=null,this.cars_count=0,this.cars=[],this.status=null,this.checkRol()},e.PropietarioViewComponent.prototype.checkRol=function(){this.getData()},e.PropietarioViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.PropietarioViewComponent.prototype.getService=function(){var e="&id="+this.id;let t=this.service.callServicesHttp("propietario-get",e,null);this.procesarRespuestaGET(t)},e.PropietarioViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_42");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.PropietarioViewComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("business_name")&&null!=e.business_name&&null!=e.business_name&&""!=e.business_name&&(this.nombre=e.business_name),e.hasOwnProperty("id_doc")&&null!=e.id_doc&&null!=e.id_doc&&""!=e.id_doc&&(this.id_doc=e.id_doc),e.hasOwnProperty("phone_deflt")&&null!=e.phone_deflt&&null!=e.phone_deflt&&""!=e.phone_deflt&&(this.phone=e.phone_deflt),e.hasOwnProperty("email")&&null!=e.email_deflt&&null!=e.email_deflt&&""!=e.email_deflt&&(this.email=e.email_deflt),e.hasOwnProperty("line")&&null!=e.line&&null!=e.line&&""!=e.line&&(this.linea=e.line),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(this.status=_(e.status).toUpperCase()),e.hasOwnProperty("info")&&null!=e.info&&null!=e.info&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&null!=e.info.created_by_email&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&null!=e.info.created_at&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&null!=e.info.updated_by_email&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&null!=e.info.updated_at&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at))),e.hasOwnProperty("cars")&&null!=e.cars&&null!=e.cars&&""!=e.cars&&0!=e.cars.length){this.cars=[];for(var t=0;t<e.cars.length;t++)null!=e.cars[t]&&(e.cars[t].hasOwnProperty("status")&&null!=e.cars[t].status&&null!=e.cars[t].status&&""!=e.cars[t].status&&(e.cars[t].formatted_status=_(e.cars[t].status).toUpperCase()),this.cars.push(e.cars[t]))}},e.PropietarioViewComponent.prototype.print=function(){window.print()},e.PropietarioViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ReservationReportComponent=ng.core.Component({selector:"reservation-report",templateUrl:"views/reservation-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.ReservationReportComponent.prototype.ngOnInit=function(){this.title="Reservaciones",this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listCanales=[{value:null,name:"Todos"},{value:"WEB",name:"Web"},{value:"TAQUILLA",name:"Taquilla"}],this.listStatus=[{value:null,name:"Todos"},{value:"PAID",name:"Pagada"},{value:"PENDING_VALIDATION",name:"Pendiente por validaci\xF3n"},{value:"PENDING_PAYMENT",name:"Pendiente por pago"}],this.status=null,this.canal=null,this.nombre=null,this.codigo=null,this.checkRol()},e.ReservationReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("RESERVATION-LINE"!=t[n].name)"RESERVATION-LINE"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ReservationReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.ReservationReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-RESERVATION-LINE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.ReservationReportComponent.prototype.search=function(){this.jsonFilter={},null==this.status||this.status==null||""==this.status||"null"==this.status||(this.jsonFilter.status=[this.status]),null==this.init||this.init==null||""==this.init||null==this.end||this.end==null||""==this.end||(this.jsonFilter.created_at={},this.jsonFilter.created_at.lte=this.end+"T23:59:59.000Z",this.jsonFilter.created_at.gte=this.init+"T00:00:00.000Z",this.jsonFilter.created_at.time_zone=getTimeZone()),null==this.nro||this.nro==null||""==this.nro||"null"==this.nro||(this.jsonFilter.sequence={},this.jsonFilter.sequence.lte=parseInt(this.nro),this.jsonFilter.sequence.gte=parseInt(this.nro)),this.callServices(1,"&limit="+this.detallePorPagina)},e.ReservationReportComponent.prototype.clean=function(){this.init=null,this.end=null,this.canal=null,this.status=null,this.cliente=null,this.nro=null},e.ReservationReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ReservationReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ReservationReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ReservationReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ReservationReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ReservationReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ReservationReportComponent.prototype.callServices=function(e,t){let a=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="&type=PAGINATE"+t,i=this.service.callServicesHttp("reservation-report-line",n,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})},e.ReservationReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ReservationReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.ReservationReportComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(e.hasOwnProperty("passengers")&&null!=e.passengers&&0!=e.passengers.length)for(var t=0;t<e.passengers.length;t++)if(null!=e.passengers[t]&&(e.passengers[t].hasOwnProperty("fare_currency")&&(e.moneda=_(e.passengers[t].fare_currency)),e.passengers[t].hasOwnProperty("destination_stop_code")&&(e.parada=e.passengers[t].destination_stop_code,e.passengers[t].hasOwnProperty("destination_stop_name")))){e.parada=e.parada+" - "+e.passengers[t].destination_stop_name;break}if(e.hasOwnProperty("total")&&null!=e.total&&null!=e.total&&""!=e.total)try{e.total=e.total,e.total_formatted=amountFormattingObject(100*e.total),e.total_formatted=e.total_formatted.integerPart+","+e.total_formatted.decimalPart,null!=e.moneda&&(e.total_formatted=e.total_formatted+" "+e.moneda)}catch(e){}if(e.hasOwnProperty("trip_departure_date")&&null!=e.trip_departure_date&&null!=e.trip_departure_date&&""!=e.trip_departure_date){e.date=formattingDate(e.trip_departure_date);try{e.date=e.date.split(" "),e.schedule=e.date[1],e.date=e.date[0]}catch(e){}}if(e.hasOwnProperty("payments")){if(e.metodo=null,null!=e.payments&&0!=e.payments.length)try{e.metodo=e.payments[0]}catch(t){e.metodo=null}null!=e.metodo&&(e.metodo.hasOwnProperty("payment_method")&&null!=e.metodo.payment_method&&null!=e.metodo.payment_method&&""!=e.metodo.payment_method&&(e.formatted_method=_(e.metodo.payment_method).toUpperCase()),e.metodo.hasOwnProperty("collector_bank")&&null!=e.metodo.collector_bank&&null!=e.metodo.collector_bank&&""!=e.metodo.collector_bank&&(e.banco=returnBankSelected(e.metodo.collector_bank)),e.metodo.hasOwnProperty("payer_reference")&&null!=e.metodo.payer_reference&&null!=e.metodo.payer_reference&&""!=e.metodo.payer_reference&&(e.referencia=e.metodo.payer_reference))}return e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase()),e.actions=[],null!=this.checkAction("RESERVATION-LINE-VIEW")&&e.actions.push(this.checkAction("RESERVATION-LINE-VIEW")),"PENDING_VALIDATION"==e.status?null!=this.checkAction("AUTHORIZED-PAYMENT")&&e.actions.push(this.checkAction("AUTHORIZED-PAYMENT")):"PENDING_PAYMENT"==e.status&&(null!=this.checkAction("ADD-PAYMENT")&&e.actions.push(this.checkAction("ADD-PAYMENT")),null!=this.checkAction("DELETE-RESERVATION")&&e.actions.push(this.checkAction("DELETE-RESERVATION"))),e},e.ReservationReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.ReservationReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"RESERVATION-LINE-VIEW":this.router.navigate(["/reservation-view-line"],{queryParams:{id:e.id,itinerary_id:e.itinerary_id,trip_id:e.trip_id}});break;case"AUTHORIZED-PAYMENT":$("#modalValidarReserva").modal("show");break;case"DELETE-RESERVATION":$("#modalEliminarReserva").modal("show");break;case"ADD-PAYMENT":this.router.navigate(["/add-payment"],{queryParams:{id:e.id,itinerary_id:e.itinerary_id,trip_id:e.trip_id}});break;default:}},e.ReservationReportComponent.prototype.reservar=function(){$("#modalValidarReserva").modal("hide");var e=[],t=[];try{if(null!=this.dataSelected){if(this.dataSelected.hasOwnProperty("passengers")&&null!=this.dataSelected.passengers&&0!=this.dataSelected.passengers.length)for(var a=0;a<this.dataSelected.passengers.length;a++)null!=this.dataSelected.passengers[a]&&this.dataSelected.passengers[a].hasOwnProperty("asiento")&&null!=this.dataSelected.passengers[a].asiento&&null!=this.dataSelected.passengers[a].asiento&&""!=this.dataSelected.passengers[a].asiento&&e.push(this.dataSelected.passengers[a].asiento);if(this.dataSelected.hasOwnProperty("payments")&&null!=this.dataSelected.payments&&0!=this.dataSelected.payments.length)for(var n={},a=0;a<this.dataSelected.payments.length;a++)null!=this.dataSelected.payments[a]&&(n={},this.dataSelected.payments[a].hasOwnProperty("payer_reference")&&null!=this.dataSelected.payments[a].payer_reference&&null!=this.dataSelected.payments[a].payer_reference&&""!=this.dataSelected.payments[a].payer_reference&&(n.collector_reference=this.dataSelected.payments[a].payer_reference,n.payment_id=this.dataSelected.payments[a].id,t.push(n)));let i=this.service.callServicesHttp("reservation-validate","&id="+this.dataSelected.id+"&itinerary_id="+this.dataSelected.itinerary_id+"&trip_id="+this.dataSelected.trip_id,{seats:e,payments:t}),r=_("message_dflt_73");i.subscribe(e=>{if(200==e.status_http){for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].id==e.id){this.listRegister[t]=this.formattedData(e);break}this.mensaje="Reserva validada con \xE9xito",this.msg.info()}else this.mensaje=this.service.processMessageError(e,r),this.msg.error()},e=>{this.mensaje=this.service.processError(e,r),this.msg.error()})}}catch(e){}},e.ReservationReportComponent.prototype.deleteData=function(){if($("#modalEliminarReserva").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=_("warning49"),void this.msg.warning();else{var e="&itinerary_id="+this.dataSelected.itinerary_id+"&trip_id="+this.dataSelected.trip_id+"&id="+this.dataSelected.id;let t=this.service.callServicesHttp("reservation-delete",e,null),a=_("message_dflt_75");t.subscribe(e=>{null==e||null==e||""==e?(this.mensaje=a,this.msg.warning()):200==e.status_http?(this.ngOnInit(),this.mensaje=_("success55"),this.msg.info()):(this.mensaje=this.service.processMessageError(e,a),this.msg.error())},e=>{this.mensaje=this.service.processError(e,a),this.msg.error()})}},e.ReservationReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ReservationViewComponent=ng.core.Component({selector:"reservation-view",templateUrl:"views/reservation-view.html"}).Class({constructor:[ng.router.ActivatedRoute,ng.router.Router,e.AppCallService,e.MsgComponent,function(e,t,a,n){this.active=e,this.router=t,this.service=a,this.msg=n}]}),e.ReservationViewComponent.prototype.ngOnInit=function(){this.title=_("title64"),this.listItems=[],this.checkRol()},e.ReservationViewComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=0;a<t.length;a++)if(null!=t[a]&&"RESERVATION-LINE-VIEW"==t[a].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ReservationViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&(this.active.queryParams._value.hasOwnProperty("id")&&(this.reservation_id=this.active.queryParams._value.id),this.active.queryParams._value.hasOwnProperty("itinerary_id")&&(this.itinerary_id=this.active.queryParams._value.itinerary_id),this.active.queryParams._value.hasOwnProperty("trip_id")&&(this.trip_id=this.active.queryParams._value.trip_id),this.getReservation())},e.ReservationViewComponent.prototype.getReservation=function(){let e=this.service.callServicesHttp("reservation-get-line","&id="+this.reservation_id+"&itinerary_id="+this.itinerary_id+"&trip_id="+this.trip_id,null),t=_("message_dflt_56");e.subscribe(e=>{this.formattedData(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.ReservationViewComponent.prototype.formattedData=function(e){if(this.parada=null,null!=e&&null!=e&&""!=e){if(e.hasOwnProperty("trip_id")&&null!=e.trip_id&&null!=e.trip_id&&""!=e.trip_id&&(this.trip_id=e.trip_id),e.hasOwnProperty("trip_departure_date")&&null!=e.trip_departure_date&&null!=e.trip_departure_date&&""!=e.trip_departure_date){this.fecha_salida=formattingDate(e.trip_departure_date);try{this.fecha_salida=this.fecha_salida.split(" "),this.hora=this.fecha_salida[1],this.fecha_salida=this.fecha_salida[0]}catch(e){}}if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&""!=e.line_name&&(this.line_name=e.line_name),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(this.status=_(e.status).toUpperCase()),e.hasOwnProperty("itinerary_id")&&null!=e.itinerary_id&&null!=e.itinerary_id&&""!=e.itinerary_id&&(this.itinerary_id=e.itinerary_id),e.hasOwnProperty("sequence")&&null!=e.sequence&&null!=e.sequence&&""!=e.sequence&&(this.sequence=e.sequence),e.hasOwnProperty("vehicle_type_name")&&null!=e.vehicle_type_name&&null!=e.vehicle_type_name&&""!=e.vehicle_type_name&&(this.vehicle_type_name=e.vehicle_type_name),e.hasOwnProperty("number_of_passengers")&&null!=e.number_of_passengers&&null!=e.number_of_passengers&&""!=e.number_of_passengers&&(this.number_of_passengers=e.number_of_passengers),this.listPayments=[],e.hasOwnProperty("payments")&&null!=e.payments&&0!=e.payments.length)for(var t={},a=0;a<e.payments.length;a++)null!=e.payments[a]&&(t={},t=e.payments[a],t.hasOwnProperty("collector_bank")&&null!=t.collector_bank&&null!=t.collector_bank&&""!=t.collector_bank&&(t.banco=returnBankSelected(t.collector_bank)),t.hasOwnProperty("payment_method")&&null!=t.payment_method&&null!=t.payment_method&&""!=t.payment_method&&(t.metodo=_(t.payment_method).toUpperCase()),t.hasOwnProperty("amount")&&null!=t.amount&&null!=t.amount&&""!=t.amount&&(t.formatted_amount=amountFormattingObject(100*t.amount),t.formatted_amount=t.formatted_amount.integerPart+","+t.formatted_amount.decimalPart,t.hasOwnProperty("currency")&&null!=t.currency&&null!=t.currency&&""!=t.currency&&(t.formatted_amount=t.formatted_amount+" "+_(t.currency))),this.listPayments.push(t));if(e.hasOwnProperty("passengers")&&null!=e.passengers&&0!=e.passengers.length)for(var t={},a=0;a<e.passengers.length;a++)if(null!=e.passengers[a]){if(t={},(null==this.parada||""==this.parada)&&e.passengers[a].hasOwnProperty("destination_stop_code")&&null!=e.passengers[a].destination_stop_code&&null!=e.passengers[a].destination_stop_code&&""!=e.passengers[a].destination_stop_code&&(this.parada=e.passengers[a].destination_stop_code,e.passengers[a].hasOwnProperty("destination_stop_name")&&null!=e.passengers[a].destination_stop_name&&null!=e.passengers[a].destination_stop_name&&""!=e.passengers[a].destination_stop_name&&(this.parada=this.parada+" - "+e.passengers[a].destination_stop_name)),e.passengers[a].hasOwnProperty("name")&&null!=e.passengers[a].name&&null!=e.passengers[a].name&&""!=e.passengers[a].name&&(t.name=e.passengers[a].name),e.passengers[a].hasOwnProperty("type")&&null!=e.passengers[a].type&&null!=e.passengers[a].type&&""!=e.passengers[a].type&&(t.formatted_type=_(e.passengers[a].type).toUpperCase()),e.passengers[a].hasOwnProperty("id_doc")&&null!=e.passengers[a].id_doc&&null!=e.passengers[a].id_doc&&""!=e.passengers[a].id_doc&&(t.id_doc=e.passengers[a].id_doc),e.passengers[a].hasOwnProperty("fare_amount")&&null!=e.passengers[a].fare_amount&&null!=e.passengers[a].fare_amount&&""!=e.passengers[a].fare_amount)try{t.monto=amountFormattingObject(100*e.passengers[a].fare_amount),t.monto=t.monto.integerPart+","+t.monto.decimalPart,e.passengers[a].hasOwnProperty("fare_currency")&&(this.moneda=_(e.passengers[a].fare_currency),t.monto=t.monto+" "+_(e.passengers[a].fare_currency)),this.currency=e.passengers[a].fare_currency}catch(e){}this.listItems.push(t)}if(e.hasOwnProperty("total")&&null!=e.total&&null!=e.total&&""!=e.total){try{this.total=e.total,this.total_formatted=amountFormattingObject(100*e.total),this.total_formatted=this.total_formatted.integerPart+","+this.total_formatted.decimalPart,null!=this.moneda&&(this.total_formatted=this.total_formatted+" "+this.moneda)}catch(e){}if(e.hasOwnProperty("usd_exchange_rate")&&null!=e.usd_exchange_rate&&null!=e.usd_exchange_rate&&""!=e.usd_exchange_rate&&0!=e.usd_exchange_rate)try{this.total_bs=this.total*e.usd_exchange_rate,this.total_formatted_bs=amountFormattingObject(100*this.total_bs),this.total_formatted_bs=this.total_formatted_bs.integerPart+","+this.total_formatted_bs.decimalPart+" Bs",this.formatted_tasa_cambio=amountFormattingObject(100*e.usd_exchange_rate),this.formatted_tasa_cambio=this.formatted_tasa_cambio.integerPart+","+this.formatted_tasa_cambio.decimalPart+" Bs"}catch(e){}}}},e.ReservationViewComponent.prototype.back=function(){window.history.back()},e.ReservationViewComponent.prototype.print=function(){window.print()}})(window.app||(window.app={}));(function(e){e.RouteCreateComponent=ng.core.Component({selector:"route-create",templateUrl:"views/route-create.html",styleUrls:["styles/route-create.css"]}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.RouteCreateComponent.prototype.ngOnInit=function(){this.classView1="col-lg-4 col-md-4 col-sm-6 col-12",this.classView2="col-lg-4 col-md-4 col-sm-6 col-12",this.classView3="col-lg-4 col-md-4 col-sm-12 col-12",this.texto="Crear",this.title=capitalizeOnly(_("title14")),this.pagingActual={},this.detallePorPagina=10,this.totalPage=1,this.pageSelected=1,this.pagingActualLine={},this.detallePorPaginaLine=10,this.totalPageLine=1,this.pageSelectedLine=1,this.line_buscar=null,this.parada_buscar=null,this.listRegister=[],this.listRegisterLine=[],this.linea=null,this.lineSelected=null,this.code=null,this.listTrayectos=[],this.active_status=!0,this.checkRol()},e.RouteCreateComponent.prototype.checkRol=function(){var e="ITINERARY-CREATE";this.active.url.hasOwnProperty("_value")&&("route-create"==this.active.url._value[0].path?(this.title=_("title14"),this.save=!0,e="ITINERARY-CREATE"):(this.title=_("title15"),this.save=!1,this.classView2="col-lg-4 col-md-4 col-sm-6 col-12",this.classView3="col-lg-8 col-md-8 col-sm-6 col-12",e="ITINERARY-UPDATE",this.texto="Actualizar"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var a=orderList(this.service.getRole().views),n=0;n<a.length;n++)if(null!=a[n]&&a[n].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.RouteCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.RouteCreateComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||"null"==this.nombre_buscar||(null==t&&(t={}),t.name="*"+this.nombre_buscar+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.RouteCreateComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.RouteCreateComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.RouteCreateComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.RouteCreateComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.RouteCreateComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.RouteCreateComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.RouteCreateComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("parada-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.RouteCreateComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.RouteCreateComponent.prototype.searchLine=function(){this.jsonFilterLine={};var e=[],t=null;if(null==t&&(t={}),t.active=!0,null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.name="*"+this.linea+"*"),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilterLine.entities=a}this.jsonFilterLine.sort={"info.created_at":"desc"},this.callServicesLine(1,"&limit="+this.detallePorPaginaLine)},e.RouteCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPaginaLine=e.detalles,this.totalPageLine=e.pagina,null==this.listRegisterLine||this.listRegisterLine==null||0==this.listRegisterLine.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.RouteCreateComponent.prototype.getValueFirstLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.RouteCreateComponent.prototype.getValuePreviousLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.RouteCreateComponent.prototype.getValueLastLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.RouteCreateComponent.prototype.getValueNextLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.RouteCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.RouteCreateComponent.prototype.callServicesLine=function(e,t){this.pageSelectedLine=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("line-report",a,this.jsonFilterLine);i.subscribe(e=>{this.procesarRespuestaLine(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.RouteCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegisterLine=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegisterLine=[];else if(null==e.count||null==e.count||0==e.count)this.listRegisterLine=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegisterLine=[];for(var n=0;n<e.results.length;n++)a=e.results[n],null!=a&&this.listRegisterLine.push(a);this.pagingActualLine.count=e.count}else this.listRegisterLine=[]}},e.RouteCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("route-get","&id="+this.id+"&business_id="+this.business_id,null),t=_("message_dflt_16");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.RouteCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_16");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.RouteCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&""!=e.line_name&&(this.lineSelected={},this.lineSelected.name=e.line_name),e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.code=e.name),e.hasOwnProperty("active")&&(e.active?this.active_status=!0:this.active_status=!1),e.hasOwnProperty("stops")&&(this.listTrayectos=[],null!=e.stops&&null!=e.stops&&""!=e.stops&&0!=e.stops.length))for(var t={},a=0;a<e.stops.length;a++)null!=e.stops[a]&&(t={},t.name=e.stops[a].name,t.code=e.stops[a].code,this.listTrayectos.push(t))},e.RouteCreateComponent.prototype.selectedParada=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].code==e.code)if(null==this.listRegister[t].classSelected)this.listTrayectos.push(this.listRegister[t]),this.listRegister[t].classSelected="selected";else{var a=this.listTrayectos.slice(t+1);this.listTrayectos=this.listTrayectos.slice(0,t),this.listTrayectos=this.listTrayectos.concat(a),this.listRegister[t].classSelected=null}},e.RouteCreateComponent.prototype.quitarLinea=function(){if(this.lineSelected=null,null!=data&&null!=data&&""!=data&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var e=0;e<this.listRegisterLine.length;e++)null!=this.listRegisterLine[e]&&(this.listRegisterLine[e].classSelected=null)},e.RouteCreateComponent.prototype.selectLine=function(e){if(this.lineSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var t=0;t<this.listRegisterLine.length;t++)null!=this.listRegisterLine[t]&&(this.listRegisterLine[t].id==e.id?null==this.listRegisterLine[t].classSelected?(this.lineSelected=this.listRegisterLine[t],this.listRegisterLine[t].classSelected="selected"):this.listRegisterLine[t].classSelected=null:this.listRegisterLine[t].classSelected=null)},e.RouteCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/route-report"])},e.RouteCreateComponent.prototype.clean=function(){this.line_buscar=null,this.parada_buscar=null,this.listRegister=[],this.listRegisterLine=[],this.code=null,this.save&&(this.linea=null,this.lineSelected=null),this.listTrayectos=[]},e.RouteCreateComponent.prototype.done=function(){var e=[];if(null==this.lineSelected)return this.mensaje="Debe seleccionar la linea de la ruta que esta creando",void this.msg.warning();if(null==this.code||null==this.code||""==this.code)return this.mensaje="Debe seleccionar ingresar el c\xF3digo que identifica la ruta y la l\xEDnea",void this.msg.warning();if(null==this.listTrayectos||2>this.listTrayectos.length)return this.mensaje="Debe seleccionar al menos dos paradas",void this.msg.warning();for(var t=0;t<this.listTrayectos.length;t++)null!=this.listTrayectos[t]&&e.push(this.listTrayectos[t].code);let a=null;a=this.save?this.service.callServicesHttp("route-post","&business_id="+this.lineSelected.id+"&name="+this.code+"&active="+this.active_status,e):this.service.callServicesHttp("route-put","&id="+this.id+"&business_id="+this.business_id+"&name="+this.code+"&active="+this.active_status,e),a.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,mensajeAll),this.msg.error()})},e.RouteCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_14");t=this.save?_("message_dflt_14"):_("message_dflt_15"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success18")):capitalizeOnly(_("success19")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.RouteCreateComponent.prototype.quitarPunto=function(e,t){var a=this.listTrayectos.slice(e+1);if(this.listTrayectos=this.listTrayectos.slice(0,e),this.listTrayectos=this.listTrayectos.concat(a),null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].code==t.code){this.listRegister[n].classSelected=null;break}},e.RouteCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.RouteReportComponent=ng.core.Component({selector:"route-report",templateUrl:"views/route-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.RouteReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.status=null,this.codigo=null,this.linea=null,this.parada=null,this.checkRol()},e.RouteReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),a=null,n=0;n<t.length;n++)if(null!=t[n])if("ITINERARY"!=t[n].name)"ITINERARY"==t[n].tag&&(a=null,a=this.formattedView(t[n]),null!=a&&this.actions.push(a));else if(e=!0,t[n].hasOwnProperty("actions")&&null!=t[n].actions&&null!=t[n].actions&&""!=t[n].actions&&0!=t[n].actions.length)for(var r=0;r<t[n].actions.length;r++)null!=t[n].actions[r]&&(a=null,a=this.formattedActions(t[n].actions[r]),null!=a&&this.actions.push(a));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.RouteReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:"ITINERARY-REPORT"==e.name?null:e},e.RouteReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"ITINERARY-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.RouteReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.codigo||null==this.codigo||""==this.codigo||"null"==this.codigo||(null==t&&(t={}),t.name="*"+this.codigo+"*"),null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.line_name="*"+this.linea+"*"),null==this.parada||null==this.parada||""==this.parada||"null"==this.parada||(null==t&&(t={}),t["stops.name"]="*"+this.parada+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let a=[e];this.jsonFilter.entities=a}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.RouteReportComponent.prototype.clean=function(){this.status=null,this.codigo=null,this.linea=null,this.parada=null},e.RouteReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.RouteReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.RouteReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.RouteReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.RouteReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.RouteReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.RouteReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let a="?type=PAGINATE"+t,n=capitalizeOnly(_("message_dflt_4")),i=this.service.callServicesHttp("route-report",a,this.jsonFilter);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.RouteReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.RouteReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("ITINERARY-DELETE")&&e.actions.push(this.checkAction("ITINERARY-DELETE")),null!=this.checkAction("ITINERARY-VIEW")&&e.actions.push(this.checkAction("ITINERARY-VIEW")),null!=this.checkAction("ITINERARY-UPDATE")&&e.actions.push(this.checkAction("ITINERARY-UPDATE")),e.hasOwnProperty("active")&&(e.active?(e.formatted_status="ACTIVO",null!=this.checkAction("ITINERARY-INACTIVE")&&e.actions.push(this.checkAction("ITINERARY-INACTIVE"))):(e.formatted_status="INACTIVO",null!=this.checkAction("ITINERARY-ACTIVE")&&e.actions.push(this.checkAction("ITINERARY-ACTIVE")))),e)},e.RouteReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.RouteReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.RouteReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"ITINERARY-DELETE":$("#modalDeleteRoute").modal("show");break;case"ITINERARY-ACTIVE":$("#modalActivateRoute").modal("show");break;case"ITINERARY-INACTIVE":$("#modalInactivateRoute").modal("show");break;case"ITINERARY-VIEW":this.router.navigate(["/route-view"],{queryParams:{id:e.id,business_id:e.business_id}});break;case"ITINERARY-UPDATE":this.router.navigate(["/route-update"],{queryParams:{id:e.id,business_id:e.business_id}});break;default:}},e.RouteReportComponent.prototype.deleteData=function(){if($("#modalDeleteRoute").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning9")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id;let t=_("message_dflt_11"),a=this.service.callServicesHttp("route-delete",e,null);a.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.RouteReportComponent.prototype.activeData=function(){if($("#modalActivateRoute").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning9")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id+"&name="+this.dataSelected.name+"&active=true",t=[];if(this.dataSelected.hasOwnProperty("stops")&&null!=this.dataSelected.stops&&0!=this.dataSelected.stops.length)for(var a=0;a<this.dataSelected.stops.length;a++)null!=this.dataSelected.stops[a]&&this.dataSelected.stops[a].hasOwnProperty("code")&&null!=this.dataSelected.stops[a].code&&null!=this.dataSelected.stops[a].code&&""!=this.dataSelected.stops[a].code&&t.push(this.dataSelected.stops[a].code);let n=_("message_dflt_13"),i=this.service.callServicesHttp("route-put",e,t);i.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.RouteReportComponent.prototype.inactiveData=function(){if($("#modalInactivateRoute").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning9")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&business_id="+this.dataSelected.business_id+"&name="+this.dataSelected.name+"&active=false",t=[];if(this.dataSelected.hasOwnProperty("stops")&&null!=this.dataSelected.stops&&0!=this.dataSelected.stops.length)for(var a=0;a<this.dataSelected.stops.length;a++)null!=this.dataSelected.stops[a]&&this.dataSelected.stops[a].hasOwnProperty("code")&&null!=this.dataSelected.stops[a].code&&null!=this.dataSelected.stops[a].code&&""!=this.dataSelected.stops[a].code&&t.push(this.dataSelected.stops[a].code);let n=_("message_dflt_12"),i=this.service.callServicesHttp("route-put",e,t);i.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.RouteReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_11");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success7")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.RouteReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_13");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id&&this.listRegister[a].business_id==e.business_id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success9"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.RouteReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_12");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].id==e.id&&this.listRegister[a].business_id==e.business_id){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success8"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.RouteReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.RouteViewComponent=ng.core.Component({selector:"route-view",templateUrl:"views/route-view.html",styleUrls:["styles/route-create.css"]}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.RouteViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title16")),this.name=null,this.lineSelected=null,this.code=null,this.listTrayectos=[],this.checkRol()},e.RouteViewComponent.prototype.checkRol=function(){this.getData()},e.RouteViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.RouteViewComponent.prototype.getService=function(){let e=this.service.callServicesHttp("route-get","&id="+this.id+"&business_id="+this.business_id,null),t=_("message_dflt_16");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.RouteViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_16");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.RouteViewComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&""!=e.line_name&&(this.linea=e.line_name),e.hasOwnProperty("active")&&(e.active?this.status="ACTIVO":this.status="INACTIVO"),e.hasOwnProperty("stops")&&(this.listTrayectos=[],null!=e.stops&&null!=e.stops&&""!=e.stops&&0!=e.stops.length))for(var t={},a=0;a<e.stops.length;a++)null!=e.stops[a]&&(t={},t.name=e.stops[a].name,t.code=e.stops[a].code,this.listTrayectos.push(t));e.hasOwnProperty("info")&&null!=e.info&&null!=e.info&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&null!=e.info.created_by_email&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&null!=e.info.created_at&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&null!=e.info.updated_by_email&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&null!=e.info.updated_at&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.RouteViewComponent.prototype.print=function(){window.print()},e.RouteViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.SalesReportComponent=ng.core.Component({selector:"sales-report",templateUrl:"views/sales-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.SalesReportComponent.prototype.ngOnInit=function(){this.title="Ventas",this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listCanales=[{value:null,name:"Todos"},{value:"WEB",name:"Web"},{value:"TAQUILLA",name:"Taquilla"}],this.listType=[{value:null,name:"Todos"},{value:"PAGO_MOVIL",name:"Pago m\xF3vil"},{value:"TRANSFERENCIA",name:"Transferencia"},{value:"TAQUILLA",name:"Taquilla"},{value:"PATRIA",name:"Carnet patria"}],this.type=null,this.channel=null,this.canal=null,this.banco=null},e.SalesReportComponent.prototype.search=function(){this.callServices(1,"&limit="+this.detallePorPagina)},e.SalesReportComponent.prototype.clean=function(){this.init=null,this.end=null,this.canal=null,this.status=null,this.cliente=null,this.type=null,this.nro=null},e.SalesReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.SalesReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.SalesReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.SalesReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.SalesReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.SalesReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.SalesReportComponent.prototype.callServices=function(){let e=this.service.callServicesHttp("sales-report",null,null);this.procesarRespuesta(e)},e.SalesReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.SalesReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],e.actions.push({name:"RESERVA-VER",functionality_detail:"Ver reservaci\xF3n"}),"PENDIENTE"==e.formatted_status?(e.actions.push({name:"RESERVA-VALIDAR",functionality_detail:"Validar pago"}),"TAQUILLA"==e.formatted_channel&&e.actions.push({name:"RESERVA-PAGO",functionality_detail:"Realizar pago"})):"CANCELADO"==e.formatted_status&&e.actions.push({name:"ASIGNAR-VIAJE",functionality_detail:"Asignar nuevo viaje"}),e)},e.SalesReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.SalesReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"RESERVA-VALIDAR":$("#modalValidarReserva").modal("show");break;case"PARADA-INACTIVE":$("#modalInactivateParada").modal("show");break;case"PARADA-DELETE":$("#modalDeleteParada").modal("show");break;default:}},e.SalesReportComponent.prototype.reservar=function(){$("#modalValidarReserva").modal("hide");try{for(var e=0;e<this.listRegister.length;e++)if(this.listRegister[e].code==this.dataSelected.code){this.listRegister[e].formatted_status="PAGADO";break}}catch(e){}this.mensaje="Reservaci\xF3n validada con \xE9xito",this.msg.info()},e.SalesReportComponent.prototype.activeData=function(){if($("#modalActivateParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.id;let t=this.service.callServicesHttp("parada-active",e,null);this.procesarRespuestaActivar(t)}},e.SalesReportComponent.prototype.inactiveData=function(){if($("#modalInactivateParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.id;let t=this.service.callServicesHttp("parada-inactive",e,null);this.procesarRespuestaDesactivar(t)}},e.SalesReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_30");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success20")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.SalesReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_31");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].code==e.code){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success21"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.SalesReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_32");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var a=0;a<this.listRegister.length;a++)if(null!=this.listRegister[a]&&this.listRegister[a].code==e.code){this.listRegister[a]=this.formattedData(e);break}this.mensaje=_("success22"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.SalesReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ScheduleCreateComponent=ng.core.Component({selector:"schedule-create",templateUrl:"views/schedule-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,a,n){this.msg=e,this.mensaje="",this.router=t,this.active=a,this.service=n}]}),e.ScheduleCreateComponent.prototype.ngOnInit=function(){this.texto="Crear",this.title=capitalizeOnly(_("title17")),this.pagingActual={},this.detallePorPagina=10,this.totalPage=1,this.pageSelected=1,this.line_buscar=null,this.parada_buscar=null,this.listRegister=[],this.isFijo=!0,this.isVariable=!1,this.listTrayectos=[],this.getData()},e.ScheduleCreateComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("schedule-create"==this.active.url._value[0].path?(this.title=capitalizeOnly(_("title17")),this.texto="Crear",this.save=!0):(this.title=capitalizeOnly(_("title18")),this.texto="Actualizar",this.save=!1,this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.code=this.active.queryParams._value.id,this.getService())))},e.ScheduleCreateComponent.prototype.search=function(){this.callServices(1,"&limit="+this.detallePorPagina)},e.ScheduleCreateComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ScheduleCreateComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ScheduleCreateComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ScheduleCreateComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ScheduleCreateComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ScheduleCreateComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ScheduleCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("schedule-get",null,null);this.procesarRespuestaGET(e)},e.ScheduleCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_52");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ScheduleCreateComponent.prototype.formattedDataGET=function(e){if(this.routeSelected=null,e.hasOwnProperty("code")&&(this.routeSelected={},this.routeSelected.code=e.code,e.hasOwnProperty("line")&&(this.routeSelected.line=e.line)),e.hasOwnProperty("trayectos")&&(this.routeSelected.trayectos=[],null!=e.trayectos&&null!=e.trayectos&&""!=e.trayectos&&0!=e.trayectos.length))for(var t=0;t<e.trayectos.length;t++)null!=e.trayectos[t]&&this.routeSelected.trayectos.push(e.trayectos[t]);e.hasOwnProperty("schedule")&&(this.horario_fijo=e.schedule,this.isFijo=!0,this.isVariable=!1),this.lunes=!0,this.martes=!0,this.miercoles=!0,this.jueves=!0,this.isFeriado=!0},e.ScheduleCreateComponent.prototype.callServices=function(){let e=this.service.callServicesHttp("route-report",null,null);this.procesarRespuesta(e)},e.ScheduleCreateComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var a={};this.listRegister=[];for(var n=0;n<e.results.length;n++)a=this.formattedData(e.results[n]),null!=a&&this.listRegister.push(a);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ScheduleCreateComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.ScheduleCreateComponent.prototype.selectedRoute=function(e){if(this.routeSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)null!=this.listRegister[t]&&(this.listRegister[t].id==e.id?null==this.listRegister[t].classSelected?(this.routeSelected=this.listRegister[t],this.listRegister[t].classSelected="selected"):this.listRegister[t].classSelected=null:this.listRegister[t].classSelected=null)},e.ScheduleCreateComponent.prototype.quitarRoute=function(){if(this.routeSelected=null,null!=this.listRegister&&0!=this.listRegister.length)for(var e=0;e<this.listRegister.length;e++)null!=this.listRegister[e]&&(this.listRegister[e].classSelected=null)},e.ScheduleCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/schedule-report"])},e.ScheduleCreateComponent.prototype.selectedTypeHorario=function(){this.isFijo=!this.isFijo,this.isVariable=!this.isVariable},e.ScheduleCreateComponent.prototype.clean=function(){this.line_buscar=null,this.parada_buscar=null,this.listRegister=[],this.routeSelected=null,this.isFijo=!0,this.isVariable=!1,this.horario_fijo=null,this.horario_init=null,this.horario_fin=null,this.frecuencia=null,this.lunes=!1,this.martes=!1,this.miercoles=!1,this.jueves=!1,this.viernes=!1,this.sabado=!1,this.domingo=!1,this.isFeriado=!1},e.ScheduleCreateComponent.prototype.done=function(){var e={};if(null==this.routeSelected)return this.mensaje="Debe seleccionar la ruta",void this.msg.warning();let t=null;t=this.save?this.service.callServicesHttp("schedule-post",null,e):this.service.callServicesHttp("schedule-put",null,e),this.procesarRespuestaDone(t)},e.ScheduleCreateComponent.prototype.quitarPunto=function(e,t){var a=this.listTrayectos.slice(e+1);if(this.listTrayectos=this.listTrayectos.slice(0,e),this.listTrayectos=this.listTrayectos.concat(a),null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].code==t.code){this.listRegister[n].classSelected=null;break}},e.ScheduleCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_50");t=this.save?_("message_dflt_50"):_("message_dflt_51"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success39")):capitalizeOnly(_("success40")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ScheduleCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.AppComponent=ng.core.Component({selector:"boleteria-app",templateUrl:"app.component.html"}).Class({constructor:[function(){}]})})(window.app||(window.app={}));(function(e){e.routing=ng.router.RouterModule.forRoot([{path:"",redirectTo:"loading",pathMatch:"full"},{path:"menu",component:e.MenuComponent},{path:"loading",component:e.LoadingAppComponent},{path:"propietario-create",component:e.PropietarioCreateComponent},{path:"propietario-update",component:e.PropietarioCreateComponent},{path:"propietario-view",component:e.PropietarioViewComponent},{path:"propietario-report",component:e.PropietarioReportComponent},{path:"check-passenger",component:e.CheckPassengerComponent},{path:"reservation-report-line",component:e.ReservationReportComponent},{path:"reservation-view-line",component:e.ReservationViewComponent},{path:"sales-report",component:e.SalesReportComponent},{path:"parada-create",component:e.ParadaCreateComponent},{path:"parada-report",component:e.ParadaReportComponent},{path:"car-type-create",component:e.CarTypeCreateComponent},{path:"car-type-update",component:e.CarTypeCreateComponent},{path:"car-type-view",component:e.CarTypeViewComponent},{path:"car-type-report",component:e.CarTypeReportComponent},{path:"passenger-report",component:e.PassengerReportComponent},{path:"passenger-create",component:e.PassengerCreateComponent},{path:"passenger-update",component:e.PassengerCreateComponent},{path:"passenger-view",component:e.PassengerViewComponent},{path:"fare-create",component:e.FareCreateComponent},{path:"fare-update",component:e.FareCreateComponent},{path:"fare-report",component:e.FareReportComponent},{path:"driver-report",component:e.DriverReportComponent},{path:"driver-create",component:e.DriverCreateComponent},{path:"driver-update",component:e.DriverCreateComponent},{path:"line-report",component:e.LineReportComponent},{path:"line-view",component:e.LineViewComponent},{path:"line-create",component:e.LineCreateComponent},{path:"line-update",component:e.LineCreateComponent},{path:"line-view-propietario",component:e.LineViewPropietarioComponent},{path:"line-view-car",component:e.LineViewCarComponent},{path:"car-report",component:e.CarReportComponent},{path:"car-create",component:e.CarCreateComponent},{path:"car-update",component:e.CarCreateComponent},{path:"car-view",component:e.CarViewComponent},{path:"route-report",component:e.RouteReportComponent},{path:"route-create",component:e.RouteCreateComponent},{path:"route-update",component:e.RouteCreateComponent},{path:"route-view",component:e.RouteViewComponent},{path:"schedule-report",component:e.ScheduleReportComponent},{path:"schedule-create",component:e.ScheduleCreateComponent},{path:"schedule-update",component:e.ScheduleCreateComponent},{path:"travel-report",component:e.TravelReportComponent},{path:"travel-report-line",component:e.TravelReportLineComponent},{path:"travel-create",component:e.TravelCreateComponent},{path:"travel-create-line",component:e.TravelCreateLineComponent},{path:"travel-update",component:e.TravelCreateComponent},{path:"travel-view",component:e.TravelViewComponent},{path:"travel-passengers",component:e.TripPassengerComponent},{path:"add-payment",component:e.PaymentAddComponent},{path:"settings",component:e.SettingsComponent},{path:"not-user",component:e.NotUserComponent},{path:"**",component:e.MenuComponent}],{useHash:!0})})(window.app||(window.app={}));(function(e){e.AppModule=ng.core.NgModule({imports:[ng.platformBrowser.BrowserModule,ng.forms.FormsModule,ng.router.RouterModule,ng.http.HttpModule,e.routing],declarations:[e.MsgComponent,e.CustomTableComponent,e.LoadingServiceComponent,e.NavBarComponent,e.LoadingAppComponent,e.MenuComponent,e.NotUserComponent,e.CheckPassengerComponent,e.TravelCreateLineComponent,e.TravelReportLineComponent,e.PaymentAddComponent,e.ScheduleReportComponent,e.ScheduleCreateComponent,e.ParadaReportComponent,e.ParadaCreateComponent,e.CarTypeReportComponent,e.CarTypeCreateComponent,e.CarTypeViewComponent,e.PropietarioCreateComponent,e.PropietarioViewComponent,e.PropietarioReportComponent,e.PassengerReportComponent,e.PassengerCreateComponent,e.PassengerViewComponent,e.FareReportComponent,e.FareCreateComponent,e.LineReportComponent,e.LineViewComponent,e.LineCreateComponent,e.LineViewPropietarioComponent,e.ReservationViewComponent,e.LineViewCarComponent,e.DriverReportComponent,e.DriverCreateComponent,e.CarReportComponent,e.CarCreateComponent,e.CarViewComponent,e.RouteReportComponent,e.RouteCreateComponent,e.RouteViewComponent,e.TravelReportComponent,e.TravelCreateComponent,e.TravelViewComponent,e.SettingsComponent,e.ReservationReportComponent,e.SalesReportComponent,e.TripPassengerComponent,e.AppComponent],providers:[e.MsgComponent,e.AppCallService,e.LoadingServiceComponent],bootstrap:[e.AppComponent]}).Class({constructor:function(){}})})(window.app||(window.app={}));(function(e){document.addEventListener("DOMContentLoaded",function(){ng.core.enableProdMode(),ng.platformBrowserDynamic.platformBrowserDynamic().bootstrapModule(e.AppModule)})})(window.app||(window.app={}));