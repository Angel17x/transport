function _(e){return null!=e&&(e=e.toLowerCase(),"undefined"!=typeof i18n&&i18n[e])?i18n[e]:e}var i18n={message_dflt_1:"Error al guardar la linea de transporte",message_dflt_2:"Error al actualizar datos de la linea de transporte",message_dflt_3:"Error al obtener datos de la linea de transporte",message_dflt_4:"Error al consultar registros",message_dflt_5:"Error al obtener propietarios asociados a la linea de conductores",message_dflt_6:"Error al obtener unidades afiliadas a la linea de transporte",message_dflt_7:"Error al desbloquear conductor",message_dflt_8:"Error al eliminar pasajero",message_dflt_9:"Error al eliminar linea de transporte",message_dflt_10:"Error al eliminar automovil",message_dflt_11:"Error al borrar ruta",message_dflt_12:"Error al deshabilitar ruta",message_dflt_13:"Error al reactivar ruta",message_dflt_14:"Error al guardar datos de la ruta",message_dflt_15:"Error al actualizar datos de la ruta",message_dflt_16:"Error al obtener detalles de la ruta",message_dflt_17:"Error al borrar viaje",message_dflt_18:"Error al suspender viaje",message_dflt_19:"Error al activar viaje",message_dflt_20:"Error al cancelar el viaje",message_dflt_21:"Error al completar el viaje",message_dflt_22:"No hay registros",message_dflt_23:"Error al cargar detalles de la linea",message_dflt_24:"No tiene oficinas registradas",message_dflt_25:"No hay conductores asociados a esta linea",message_dflt_26:"adicionar parada",message_dflt_27:"No hay paradas",message_dflt_28:"Error al guardar datos de la ruta",message_dflt_29:"Error al guardar parada",message_dflt_30:"Error al borrar parada",message_dflt_31:"Error al activar parada",message_dflt_32:"Error al deshabilitar parada",message_dflt_33:"Error al borrar transporte",message_dflt_34:"Error al activar transporte",message_dflt_35:"Error al deshabilitar transporte",message_dflt_36:"Error al cargar detalles transporte",message_dflt_37:"Error al guardar detalles transporte",message_dflt_38:"Error al actualizar detalles transporte",message_dflt_39:"Error al borrar propietario",message_dflt_40:"Error al activar propietario",message_dflt_41:"Error al suspender propietario",message_dflt_42:"Error al obtener detalles del propietario",message_dflt_43:"Error al guardar datos del propietario",message_dflt_44:"Error al actualizar datos del propietario",message_dflt_45:"Error al activar linea de transporte",message_dflt_46:"Error al suspender linea de transporte",message_dflt_47:"Error al borrar horario",message_dflt_48:"Error al activar horario",message_dflt_49:"Error al deshabilitar horario",message_dflt_50:"Error al guardar horario",message_dflt_51:"Error al actualizar horario",message_dflt_52:"Error al obtener detalles del horario",message_dflt_53:"Error al obtener detalles del viaje",message_dflt_54:"Error al obtener datos del usuario",message_dflt_55:"Cargando servicios de inicio",message_dflt_56:"Error obteniendo opciones de la aplicaci\xF3n",message_dflt_57:"Error al guardar tipo de veh\xEDculo",message_dflt_58:"Error al actualizar tipo de veh\xEDculo",message_dflt_59:"Error al borrar el tipo de veh\xEDculo",message_dflt_60:"Error al obtener detalles del tipo de veh\xEDculo",message_dflt_61:"Error al crear nueva tarifa",message_dflt_62:"Error al actualizar tarifa",message_dflt_63:"Error al eliminar tarifa",message_dflt_64:"Error al consultar datos de la tarifa",message_dflt_65:"Error al crear conductor",message_dflt_66:"Error al actualizar conductor",message_dflt_67:"Error al borrar conductor",message_dflt_68:"Error al activar conductor",message_dflt_69:"Error al suspender conductor",message_dflt_70:"Error al obtener detalles del conductor",message_dflt_71:"Error al guardar viaje",message_dflt_72:"Error al actualizar viaje",message_dflt_73:"Error al validar reserva",message_dflt_74:"Error al adicionar pago",message_dflt_75:"Error al borrar reservaci\xF3n",message_dflt_76:"Error al cambiar status del pasajero",message_dflt_77:"Error al crear tasa de cambio",message_dflt_78:"Error al ingresar pasajeros de forma r\xE1pida",message_dflt_79:"Error al obtener datos del viaje",message_dflt_80:"Error al cancelar reservaci\xF3n",message_dflt_81:"Error al obtener informaci\xF3n del viaje y la fecha ingresada",message_dflt_82:"Error al realizar chequeo",message_dflt_83:"Error al trasbordar los pasajeros",message_dflt_84:"Error al borrar el pago",message_dflt_85:"Error al obtener tasa de cambio",message_dflt_86:"Error al crear reservaci\xF3n",warning1:"Debe seleccionar el conductor",warning2:"Debe seleccionar el pasajero",warning3:"Debe seleccionar la linea de transporte",warning4:"Debe adicionar al menos una oficia a la linea de conductores",warning5:"Debe seleccionar el automovil",warning6:"Debe ingresar la marca del automovil",warning7:"Debe ingresar el a\xF1o del automovil",warning8:"Debe ingresar la placa del automovil",warning9:"Debe seleccionar la ruta",warning10:"Debe ingresar la tarifa",warning11:"Debe ingresar la menos una parada de la ruta",warning12:"Debe seleccionar el viaje",warning13:"Debe ingresar la fecha de salida del viaje",warning14:"Debe ingresar la hora de salida del viaje",warning15:"Debe ingresar la fecha de vencimiento para la compra de pasajes",warning16:"Debe ingresar la hora de vencimiento para la compra de pasajes",warning17:"Debe ingresar la capacidad m\xE1xima de pasajeros",warning18:"Debe seleccionar al menos una de las monedas aceptadas",warning19:"Debe ingresar el valor de la tarifa de cambio",warning20:"La moneda de cambio debe ser diferente",warning21:"la linea",warning22:"esta incompleta falta el nombre",warning23:"esta incompleta falta la direcci\xF3n",warning24:"esta incompleta falta el tel\xE9fono",warning25:"esta incompleta falta el horario de apertura",warning26:"esta incompleta falta el horario de cierre",warning27:"esta incompleta falta el estatus",warning28:"esta incompleta: el tel\xE9fono esta incompleto",warning29:"Debe ingresar el valor de la tarifa",warning30:"Debe seleccionar la parada",warning31:"Debe ingresar el nombre de la parada",warning32:"Debe ingresar el c\xF3digo de 3 d\xEDgitos de la parada",warning33:"Debe ingresar la carrocer\xEDa del transporte",warning34:"Debe ingresar el color del transporte",warning35:"Debe ingresar la capacidad del transporte",warning36:"Debe ingresar el tipo de transporte",warning37:"Debe seleccionar el horario",warning38:"Debe ingresar el nombre del tipo de veh\xEDculo",warning39:"Debe ingresar la capacidad del veh\xEDculo",warning40:"Debe ingresar al menos una caracter\xEDtica",warning41:"Debe seleccionar el tipo de veh\xEDculo",warning42:"Debe seleccionar el propietario",warning43:"Debe seleccionar el punto de partida",warning44:"Debe seleccionar el punto de llegada",warning45:"Debe ingresar un nombre representativo",warning46:"Debe ingresar el costo",warning47:"Debe seleccionar la tarifa a borrar",warning48:"Debe seleccionar el conductor",warning49:"Debe seleccionar la reservaci\xF3n",warning50:"Debe seleccionar el pasajero",warning51:"Debe ingresar el valor de la moneda",warning52:"Debe ingresar la moneda de cambio",warning53:"El a\xF1o del veh\xEDculo tiene un formato incorrecto s\xF3lo se aceptan n\xFAmeros",warning54:"Debe ingresar al menos un pasajero",warning55:"No hay tarifas para el tipo de veh\xEDculo seleccionado",warning56:"Debe seleccionar el viaje",warning57:"Debe seleccionar el destino",warning58:"No hay una tarifa para el viaje y destino seleccionado",success1:"Viaje borrado con \xE9xito",success2:"Conductor bloqueado con \xE9xito",success3:"Conductor desbloqueado con \xE9xito",success4:"Pasajero eliminado con \xE9xito",success5:"Linea de transporte eliminada con \xE9xito",success6:"Automovil eliminado con \xE9xito",success7:"Ruta eliminada con \xE9xito",success8:"Ruta deshabilitada con \xE9xito",success9:"Ruta activada con \xE9xito",success10:"Viaje eliminado con \xE9xito",success11:"Viaje suspendido con \xE9xito",success12:"Viaje reactivado con \xE9xito",success13:"Viaje cerrado con \xE9xito",success14:"Viaje completado con \xE9xito",success15:"Viaje cancelado con \xE9xito",success16:"Linea de transporte guardada con \xE9xito",success17:"Linea de transporte actualizada con \xE9xito",success18:"Ruta guardada con \xE9xito",success19:"Ruta actualizada con \xE9xito",success20:"Parada borrada con \xE9xito",success21:"Parada activada con \xE9xito",success22:"Parada desactivada con \xE9xito",success23:"Parada creada con \xE9xito",success24:"Autom\xF3vil borrado con \xE9xito",success25:"Autom\xF3vil activado con \xE9xito",success26:"Autom\xF3vil deshabilitado con \xE9xito",success27:"Autom\xF3vil guardado con \xE9xito",success28:"Autom\xF3vil actualizado con \xE9xito",success29:"Propietario borrado con \xE9xito",success30:"Propietario activado con \xE9xito",success31:"Propietario suspendido con \xE9xito",success32:"Propietario creado con \xE9xito",success33:"Propietario actualizado con \xE9xito",success34:"Linea de transporte activada con \xE9xito",success35:"Linea de transporte suspendida con \xE9xito",success36:"Horario borrado con \xE9xito",success37:"Horario activado con \xE9xito",success38:"Horario deshabilitado con \xE9xito",success39:"Horario guardado con \xE9xito",success40:"Horario actualizado con \xE9xito",success41:"Tipo de veh\xEDculo creado con \xE9xito",success42:"Tipo de veh\xEDculo actualizado con exito",success43:"Tipo de veh\xEDculo borrado con exito",success44:"Tarifa creada con \xE9xito",success45:"Tarifa actualizada con \xE9xito",success46:"Tarifa borrada con \xE9xito",success47:"Conductor creado con \xE9xito",success48:"Conductor actualizado con \xE9xito",success49:"Conductor borrado con \xE9xito",success50:"Conductor activado con \xE9xito",success51:"Conductor suspendido con \xE9xito",success52:"Viaje guardado con \xE9xito",success53:"Viaje actualizado con \xE9xito",success54:"Viaje publicado con \xE9xito",success55:"Reservaci\xF3n borrada con \xE9xito",success56:"Estatus cambiado con \xE9xito",success57:"Tasa de cambio creada con \xE9xito",success58:"Pasajeros adicionado con \xE9xito al viaje",success59:"Reservaci\xF3n cancelada con \xE9xito",success60:"Viaje chequeado con \xE9xito",success61:"Pago borrado con \xE9xito",title1:"Nueva parada",title2:"Nuevo autom\xF3vil",title3:"Detalles del automovil",title4:"Actualizar datos del autom\xF3vil",title5:"Detalles del propietario",title6:"Transportes disponibles",title7:"Nuevo propietario",title8:"Actualizar datos del propietario",title9:"Nueva linea de transporte",title10:"Actualizar datos de linea de transporte",title11:"Detalles de la linea de transporte",title12:"Propietarios asociados",title13:"Unidades afiliadas",title14:"Nueva ruta",title15:"Actualizaci\xF3n de ruta",title16:"Detalles de la ruta",title17:"Nuevo horario",title18:"Actualizar horario",title19:"Nueva venta",title20:"Actualizar",title21:"Nueva linea de conductores",title22:"Actualizar linea de conductores",title23:"nombre",title24:"direcci\xF3n",title25:"tel\xE9fono",title26:"correo electr\xF3nico",title27:"horario",title28:"estatus",title29:"apertura",title30:"cierre",title31:"ver m\xE1s",title32:"actualizar linea",title33:"eliminar linea",title34:"lineas de conductores",title35:"nuevo",title36:"oficinas",title37:"direcciones",title38:"estado",title39:"ciudad",title40:"buscar",title41:"\xBFDesea borrar la linea de conductores",title42:"cancelar",title43:"eliminar",title44:"detalles del linea de conductores",title45:"conductores asociados",title46:"R.I.F/C.I",title47:"automovil",title48:"imprimir",title49:"adicionar oficina",title50:"linea",title51:"paradas",title52:"punto salida",title53:"punto llegada",title54:"buscar lineas",title55:"Nuevo tipo de vehiculo",title56:"Actualizar tipo de vehiculo",title57:"Detalles del tipo de vehiculo",title58:"Nueva tarifa",title59:"Actualizar tarifa",title60:"Nuevo conductor",title61:"Actualizar conductor",title62:"Nuevo viaje",title63:"Actualizar viaje",title64:"Detalles de una reservaci\xF3n",title65:"Nuevo viaje de l\xEDnea de transporte",title66:"Chequear pasajero",title67:"Nueva tasa de cambio",title68:"Entrada r\xE1pida de pasajeros",title69:"Chequear viaje",title70:"Manual de operador",title71:"Manual de supervidor",title72:"Manual de cajero",title73:"Manual de chofer",title74:"Manual de cuerpos policiales",title75:"Manual de recaudaci\xF3n",title76:"Manual de chequeador",active:"activo",inactive:"inactivo",closed:"cerrado",completed:"completado",bs:"Bol\xEDvares",usd:"Dolares",stops:"paradas",stop_already_created:"Parada creada anteriormente",failed_request:"Error al procesar solicitud",fares_stops_do_not_have_the_same_size_as_the_itinerary_stops:"La cantidad de tarifas ingresadas no corresponde a la cantidad de paradas realizadas",stop_not_found:"Parada no encotrada",usd:"$",ves:"bs",not_enough_seats_available:"No hay suficientes asientos disponibles",social_help:"Ayuda social",courtesy:"cortesia",pending_payment:"pendiente por pago",pending_validation:"por validaci\xF3n de pago",mobile:"pago m\xF3vil",transference:"transferencia",paid:"pagado",cash:"efectivo",reservation_is_pending_payment:"reservaci\xF3n esta pendiente por pago",adult:"adulto",elderly:"adulto mayor",infant:"infante",child:"ni\xF1o",pre_boarding:"pre-abordaje",boarding:"a bordo",passenger_not_found:"pasajero  no encontrado",out_inside:"retiro en instalaciones",out_outside:"retiro fuera de instalaciones",not_allowed_to_create_reservation_departure_date_is_too_closed:"el viajes esta cerrado",session_expired:"sesi\xF3n expirada",trip_cannot_be_deleted_trip_has_passengers_already:"El viaje no puede ser borrado porque ya tiene reservaciones",itinerary_not_found:"ruta no encontrada",fare_not_found:"Tarifa no encontrada",departure_date_must_be_in_the_future:"Fecha de salida no v\xE1lida, verifique la fecha y hora de salida que no haya pasado",trip_not_found:"Viaje no encontrado",long_route:"ruta larga",short_route:"ruta corta",seats_size_do_not_matc_with_passengers_size:"los asientos no corresponden a la cantidad de pasajeros",stops_must_be_different:"las paradas deben ser diferentes",fares_stops_do_not_match_with_the_itinerary_stops:"las tarifas seleccionadas no coinciden con la ruta seleccionada",vehicle_owner_not_found:"due\xF1o del veh\xEDculo no encontrado",line_not_found:"L\xEDnea de transporte no encontrada",trip_creation_not_available:"creaci\xF3n del viaje no disponible",vehicle_not_found:"Veh\xEDculo no encontrado",driver_not_found:"Conductor no encontrado",trip_is_in_process:"El viaje se encuentra en proceso",canceled:"cancelado",session_closed:"sesi\xF3n cerrada",passenger_limits_cannot_exceed_active_seats:"El l\xEDmite de pasajeros no puede exceder los asientos activos",reservation_is_not_paid:"Reservaci\xF3n no est\xE1 pagada",trip_must_be_different:"El viaje debe ser diferente",cannot_exceed_total_reservation_amount:"El monto ingresado no puede exceder el monto de la reservaci\xF3n, por favor chequee el monto y la moneda ingresada",admin_hast_checked_trip_not_allowed_to_create_more_reservations:"El viaje ya fue verificado por administraci\xF3n, no se le puede agregar m\xE1s pasajeros"};(function(e){'use strict';e.LoadingServiceComponent=ng.core.Component({selector:"loading-service",template:"<div class=\"modal\" tabindex=\"-1\" role=\"dialog\" data-bs-backdrop=\"static\" style=\"text-align:center;margin-top:180px;\" scroll=\"no\" id=\"pleaseWaitDialog\" data-backdrop=\"static\" data-keyboard=\"false\"><div class=\"modal-dialog\" role=\"document\"><img style=\"width:70px;height:70px;\"src=\"assets/images/loading.gif\"></div></div>"}).Class({constructor:[function(){}]}),e.LoadingServiceComponent.prototype.showPleaseWait=function(){$("#pleaseWaitDialog").modal("show")},e.LoadingServiceComponent.prototype.hidePleaseWait=function(){$("#pleaseWaitDialog").modal("hide")}})(window.app||(window.app={}));(function(e){e.AppCallService=ng.core.Injectable().Class({constructor:[ng.http.Http,e.LoadingServiceComponent,function(e,t){this._url=getApi(),this.http=e,this.loading=t,this.timeout="30000",this.enlace_api=getEnlaceApi(),this.enlace_api_deegle=getEnlaceApiDeegle(),this.enlace_auth=getEnlaceAuth()}]}),e.AppCallService.prototype.callServices=function(e,t,n,i,r,s,o,d,l){let p=this._url,u=new Headers;null==i||i==null||""==i||(u=i);var c="";e==null||""==e||null==e?p="":p+=e,null==o||o==null||""==o||(u["Content-Type"]=o.trim().toLowerCase()),r&&(u.Authorization="bearer "+this.getAccessToken()),null!=o||r||(u=null),"multipart/form-data"==o?(delete u["Content-Type"],c=n):n!=null&&null!=n&&""!=n&&(jQuery.isEmptyObject(n)?c=n:"application/json"==o?c=JSON.stringify(n):c=n),d&&this.loading.showPleaseWait();let g=null;switch(t){case"GET":g=null==u?this.http.get(p):this.http.get(p,{headers:u});break;case"POST":g=null==u?this.http.post(p,c,null):this.http.post(p,c,{headers:u});break;case"PUT":g=this.http.put(p,c,{headers:u});break;case"DELETE":g=null==u?this.http.delete(p):this.http.delete(p,{headers:u});break;default:return null;}null==l&&(l=this.timeout);let f=g.timeout(l,new Error("TIMEOUT")).map(e=>(this.loading.hidePleaseWait(),this.processResponse(s,e)));return f},e.AppCallService.prototype.fakeData=function(e){var t=_fakeData(e);return t},e.AppCallService.prototype.processResponse=function(e,t){var n=null;if(t.hasOwnProperty("status"))if(n=t.status,202==n||"202"==n||"403"==n||403==n){var i=t.json();i.hasOwnProperty("message")&&null!=i.message&&null!=i.message&&""!=i.message&&("UNAUTHORIZED_SESSION"==i.message||"SESSION_CLOSED"==i.message||"SESSION_EXPIRED"==i.message||"SESSION_NOT_FOUND"==i.message||"INVALID_AUTHORIZATION"==i.message)&&(doLogout(),alert(_(i.message.toLowerCase())),window.location.href=redirectUri())}else(401==n||403==n)&&(window.location.href=redirectUri());if("JSON"==e)try{var n=null;t.hasOwnProperty("status")&&(n=t.status),t=t.json();try{var r=Array.isArray(t);if(r){var i=t;t={body:i,status_http:n}}else t.status_http=n}catch(e){console.log("Error al procesar",e)}return t.status_http=n,t}catch(e){return t={status_http:500,message:"ERROR",typeSys:"ERROR",value:"NOT_JSON"},t}else if("CSV"==e)try{return t=t._body,t.toString()}catch(e){return t="Error",t}else return console.log("res",t),t=t._body.blob(),t},e.AppCallService.prototype.callServicesHttp=function(e,t,n){if(null==this.getAccessToken())doLogout(),alert("Sesi\xF3n vencida"),window.location.href=redirectUri();else{let i=null;switch(e){case"init-auth":return i=this.callServices("deegle_auth/init/"+getClient()+t,"GET",null,null,!0,"JSON",null,!0,null),i;break;case"logout":return i=this.callServices(this.enlace_auth+"/session/close","DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"parada-post":return i=this.callServices(this.enlace_api+"/stop?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"parada-report":return i=this.callServices(this.enlace_api+"/stop/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"parada-delete":return i=this.callServices(this.enlace_api+"/stop?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"parada-put":return i=this.callServices(this.enlace_api+"/stop?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"car-type-post":return i=this.callServices(this.enlace_api+"/vehicle_type?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"car-type-put":return i=this.callServices(this.enlace_api+"/vehicle_type?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"car-type-report":return i=this.callServices(this.enlace_api+"/vehicle_type/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"car-type-delete":return i=this.callServices(this.enlace_api+"/vehicle_type?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"car-type-get":return i=this.callServices(this.enlace_api+"/vehicle_type?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!0,"JSON",null,!0,null),i;break;case"line-post":return i=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"line-report":return i=this.callServices(this.enlace_api+"/line/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"line-delete":return i=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"line-get":return i=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"GET",null,null,!0,"JSON",null,!0,null),i;break;case"line-put":return i=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"propietario-post":return i=this.callServices(this.enlace_api+"/vehicle_owner/line/"+t+"?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"propietario-put":return i=this.callServices(this.enlace_api+"/vehicle_owner/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"propietario-report":return i=this.callServices(this.enlace_api+"/vehicle_owner/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"propietario-delete":return i=this.callServices(this.enlace_api+"/vehicle_owner/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"parada-report-open":return i=this.callServices(this.enlace_api+"_open/stop/report?realm="+this.getRealm()+t,"POST",n,null,!1,"JSON","text/plain",!1,null),i;break;case"propietario-get":return i=this.callServices(this.enlace_api+"/vehicle_owner/line/"+t,"GET",null,null,!0,"JSON",null,!0,null),i;break;case"car-post":return i=this.callServices(this.enlace_api+"/vehicle/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"car-put":return i=this.callServices(this.enlace_api+"/vehicle/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"car-report":return i=this.callServices(this.enlace_api+"/vehicle/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"car-delete":return i=this.callServices(this.enlace_api+"/vehicle/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"car-get":return i=this.callServices(this.enlace_api+"/vehicle/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"GET",null,null,!0,"JSON",null,!0,null),i;break;case"car-report-line":return i=this.callServices(this.enlace_api+"/vehicle/report/line?realm="+this.getRealm()+"&line_id="+this.getBusinessId()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"fare-post":return i=this.callServices(this.enlace_api+"/fare?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"fare-report":return i=this.callServices(this.enlace_api+"/fare/report?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"fare-report-line":return i=this.callServices(this.enlace_api+"/fare/line/report?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"fare-search":return i=this.callServices(this.enlace_api+"/fare/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"fare-delete":return i=this.callServices(this.enlace_api+"/fare?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"fare-get":return i=this.callServices(this.enlace_api+"/fare/line/"+t,"GET",null,null,!0,"JSON",null,!0,null),i;break;case"fare-put":return i=this.callServices(this.enlace_api+"/fare?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"route-post":return i=this.callServices(this.enlace_api+"/itinerary?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"route-put":return i=this.callServices(this.enlace_api+"/itinerary?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"route-delete":return i=this.callServices(this.enlace_api+"/itinerary?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"route-get":return i=this.callServices(this.enlace_api+"/itinerary/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"GET",null,null,!0,"JSON",null,!0,null),i;break;case"route-search":return i=this.callServices(this.enlace_api+"/itinerary/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"route-report":return i=this.callServices(this.enlace_api+"/itinerary/report?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"route-line-report":return i=this.callServices(this.enlace_api+"/itinerary/line/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"driver-post":return i=this.callServices(this.enlace_api+"/driver/line/"+t+"?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"driver-put":return i=this.callServices(this.enlace_api+"/driver/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"driver-report":return i=this.callServices(this.enlace_api+"/driver/search?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"driver-delete":return i=this.callServices(this.enlace_api+"/driver/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"driver-get":return i=this.callServices(this.enlace_api+"/driver/line/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry(),"GET",null,null,!0,"JSON",null,!0,null),i;break;case"travel-post":return i=this.callServices(this.enlace_api+"/trip/line/"+t+"&user_email="+this.getEmail()+"&user_id="+this.getUserId()+"&business_id="+this.getBusinessId(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-post-line":return i=this.callServices(this.enlace_api+"/trip?realm="+this.getRealm()+t+"&user_id="+this.getUserId()+"&business_id="+this.getBusinessId()+"&realm="+this.getRealm(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-put":return i=this.callServices(this.enlace_api+"/trip/line/"+t+"&user_id="+this.getUserId()+"&business_id="+this.getBusinessId()+"&realm="+this.getRealm()+"&user_email="+this.getEmail(),"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-report":return i=this.callServices(this.enlace_api+"/trip/system_report?realm="+this.getRealm()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-delete":return i=this.callServices(this.enlace_api+"/trip/line/"+t+"&user_id="+this.getUserId()+"&business_id="+this.getBusinessId(),"DELETE",n,null,!0,"JSON",null,!0,null),i;break;case"travel-delete-line":return i=this.callServices(this.enlace_api+"/trip?realm="+this.getRealm()+t,"DELETE",n,null,!0,"JSON",null,!0,null),i;break;case"fast-entry":return i=this.callServices(this.enlace_api+"/reservation/fast_entry/"+t+"&realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&business_id="+this.getBusinessId(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"fast-entry-line":return i=this.callServices(this.enlace_api+"/reservation/fast_entry?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&business_id="+this.getBusinessId()+"&user_email="+this.getEmail()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-get":return i=this.callServices(this.enlace_api+"/trip/line/"+t,"GET",n,null,!0,"JSON",null,!0,null),i;break;case"travel-get-line":return i=this.callServices(this.enlace_api+"/trip?realm="+this.getRealm()+t,"GET",n,null,!0,"JSON",null,!0,null),i;break;case"travel-report-line":return i=this.callServices(this.enlace_api+"/trip/report/line?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"profile-report":return i=this.callServices(this.enlace_api_deegle+"/profile/search"+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"reservation-report-line":return i=this.callServices(this.enlace_api+"/reservation/line/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"reservation-report":return i=this.callServices(this.enlace_api+"/reservation/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"reservation-post":return i=this.callServices(this.enlace_api+"/reservation?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"reservation-get-line":return i=this.callServices(this.enlace_api+"/reservation?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"GET",null,null,!0,"JSON",null,!0,null),i;break;case"reservation-delete":return i=this.callServices(this.enlace_api+"/reservation?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"DELETE",null,null,!0,"JSON",null,!0,null),i;break;case"reservation-cancel":return i=this.callServices(this.enlace_api+"/reservation/cancel?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+t,"PUT",null,null,!0,"JSON",null,!0,null),i;break;case"reservation-validate":return i=this.callServices(this.enlace_api+"/reservation/validate_payments?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"line-get-reservation":return i=this.callServices(this.enlace_api+"/line?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+"&id="+this.getBusinessId(),"GET",null,null,!0,"JSON",null,!0,null),i;break;case"add-payment-reservation":return i=this.callServices(this.enlace_api+"/reservation/ticket/add_payments?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+"&business_id="+this.getBusinessId()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"delete-payment-reservation":return i=this.callServices(this.enlace_api+"/reservation/delete_payments?realm="+this.getRealm()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&country="+this.getCountry()+"&business_id="+this.getBusinessId()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-passenger":return i=this.callServices(this.enlace_api+"/passenger/trip/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-passenger-operation":return i=this.callServices(this.enlace_api+"/passenger/trip/report/"+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"passenger-report":return i=this.callServices(this.enlace_api+"/passenger/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"passenger-report-line":return i=this.callServices(this.enlace_api+"/passenger/line/report?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"passenger-change-status":return i=this.callServices(this.enlace_api+"/passenger/status?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"PUT",null,null,!0,"JSON",null,!0,null),i;break;case"currency-exchange-report":return i=this.callServices(this.enlace_api+"/currency_exchange_rate/report?realm="+this.getRealm()+t,"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"currency-exchange-post":return i=this.callServices(this.enlace_api+"/currency_exchange_rate?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"POST",null,null,!0,"JSON",null,!0,null),i;break;case"sales-report-acumulate":return i=this.callServices(this.enlace_api+"/reservation/ves_payments?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-check-intt":return i=this.callServices(this.enlace_api+"/trip/intt_check?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-check-operation":return i=this.callServices(this.enlace_api+"/trip/operation_check?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-close-line":return i=this.callServices(this.enlace_api+"/trip/online_sales_check?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail()+"&line_id="+this.getBusinessId()+t,"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"travel-report-available":return i=this.callServices(this.enlace_api+"_open/trip/report?realm="+this.getRealm()+t,"POST",n,null,!1,"JSON","application/json",!1,null),i;break;case"travel-line-trasbordo":return i=this.callServices(this.enlace_api+"/passenger/transfer?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail(),"PUT",n,null,!0,"JSON","application/json",!0,null),i;break;case"sales-all-line":return i=this.callServices(this.enlace_api+"/line/payment_aggregation?realm="+this.getRealm()+"&business_id="+this.getBusinessId()+"&user_id="+this.getUserId()+"&user_email="+this.getEmail(),"POST",n,null,!0,"JSON","application/json",!0,null),i;break;case"get-exchanged":return i=this.callServices(this.enlace_api+"_open/currency_exchange_rates?realm="+getRealm(),"GET",null,null,!1,"JSON",null,!1,null),i;break;default:}}},e.AppCallService.prototype.callServicesCountry=function(e){var t=null;if(null!=e&&e!=null&&""!=e){switch(e){case"VE":t="https://static.paguetodo.com/resources/countries/venezuela.json";break;default:}this.loading.showPleaseWait();let n=this.http.get(t).map(e=>(e=e.json(),e));return n}},e.AppCallService.prototype.removeKey=function(e){try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(e){}},e.AppCallService.prototype.setInit=function(e){e=JSON.stringify(e),localStorage.setItem("init",e)},e.AppCallService.prototype.getInit=function(){var e=localStorage.getItem("init");if(null==e)return null;try{return JSON.parse(e)}catch(t){return null}},e.AppCallService.prototype.getAccessToken=function(){return localStorage.getItem("access_token")},e.AppCallService.prototype.getRealm=function(){return null==this.getRole()?null:this.getRole().hasOwnProperty("realm")?this.getRole().realm:null},e.AppCallService.prototype.getCurrency=function(){var e=localStorage.getItem("init");if(null!=e){try{e=JSON.parse(e),e=e.country.currency}catch(t){console.log("er",t),e=null}return e}return e},e.AppCallService.prototype.getCountry=function(){var e=localStorage.getItem("init");if(null!=e){try{e=JSON.parse(e),e=e.country.alpha2}catch(t){console.log("er",t),e=null}return e}return e},e.AppCallService.prototype.getUserId=function(){return null==this.getRole()?null:this.getRole().hasOwnProperty("user_id")?this.getRole().user_id:null},e.AppCallService.prototype.getUserName=function(){return null==this.getRole()?null:this.getRole().hasOwnProperty("user_name")?this.getRole().user_name:null},e.AppCallService.prototype.setRole=function(e){e=JSON.stringify(e),localStorage.setItem("role",e)},e.AppCallService.prototype.getRole=function(){var e=localStorage.getItem("role");if(null==e)return null;try{return JSON.parse(e)}catch(e){return null}},e.AppCallService.prototype.getBusinessId=function(){if(aux=this.getRole(),null==aux)return null;try{return aux=aux.business_id,aux}catch(e){return null}},e.AppCallService.prototype.getBusinessName=function(){if(aux=this.getRole(),null==aux)return null;try{return aux=aux.owner_name,aux}catch(e){return console.log("er",e),null}},e.AppCallService.prototype.getEmail=function(){if(aux=this.getRole(),null==aux)return null;try{return aux=aux.user_email,aux}catch(e){return null}},e.AppCallService.prototype.getBusinessEmail=function(){if(aux=this.getRole(),null==aux)return null;try{return aux=aux.owner_email,aux}catch(e){return null}},e.AppCallService.prototype.processError=function(e,t){let n=t;this.loading.hidePleaseWait();try{var i="";if(e.hasOwnProperty("status")){this;if(i=e.status+", ",401==e.status)n="Sesi\xF3n cerrada",setTimeout(function(){doLogout(),window.location.href=redirectUri()},2e3);else if(403==e.status)n="Sesi\xF3n expirada",setTimeout(function(){doLogout(),window.location.href=redirectUri()},2e3);else if(e.hasOwnProperty("_body")){var r=JSON.parse(e._body);n=r.hasOwnProperty("message")?null==r.message||null==r.message||""==r.message?t:"FAILED_REQUEST"==r.message.toUpperCase()?t:i+translate(r.message,"ES").toUpperCase():e.hasOwnProperty("statusText")?i+e.statusText:t}else n=t}else n=t}catch(e){n=t}return n},e.AppCallService.prototype.processMessageError=function(e,t){if(e.hasOwnProperty("message")){var n="",r="";if(null==e.message||null==e.message||""==e.message?r=t:(e.message=e.message.toLowerCase(),r=_(e.message)),e.hasOwnProperty("cause")&&null!=e.cause&&null!=e.cause&&""!=e.cause&&0!=e.cause.length){for(var s=0;s<e.cause.length;s++)null!=e.cause[s]&&(e.cause[s]=e.cause[s].toLowerCase(),n=n+" "+_(e.cause[s]));""!=n&&(r=r+": "+n)}return t=r,t}return t}})(window.app||(window.app={}));function formattingIntegerPart(e){var t="",n=!1;t=e.charAt(0);"-"==t&&(e=e.substring(1,e.length),n=!0,n=!0);var r="",s=0;if(3<e.length)for(var o=0;o<e.length;o++){if(0==o&&(s=e.length),3>=s)return r=e.substring(0,s)+r,n&&(r="-"+r),r;r="."+e.substring(s-3,s)+r,s-=3}else r=e;return n&&(r="-"+r),r}function returnBancos(){return[{value:"BDV",name:"Banco de Venezuela"},{value:"SOFITASA",name:"Banco sofitasa"},{value:"BNC",name:"Banco nacional de cr\xE9dito"},{value:"BANESCO",name:"Banesco banco universal"},{value:"CARONI",name:"Banco caron\xED"},{value:"PLAZA",name:"Banco plaza"},{value:"BANGENTE",name:"Banco de la gente emprendedora"},{value:"BANCO100",name:"100% banco"},{value:"DELSUR",name:"Delsur banco universal"},{value:"BAV",name:"Banco agr\xEDcola de venezuela"},{value:"BANCRECER",name:"Bancrecer"},{value:"ACTIVO",name:"Banco activo"},{value:"BANCAMIGA",name:"Bancamiga"},{value:"BANPLUS",name:"Banplus"},{value:"BVC",name:"Venezolano de cr\xE9dito"},{value:"MERCANTIL",name:"Banco mercantil"},{value:"BBVA",name:"Banco provincial"},{value:"EXTERIOR",name:"Banco exterior c.a."},{value:"BICENTENARIO",name:"Banco bicentenario"},{value:"BANFANB",name:" Banco de la fuerza armada nacional bolivariana"},{value:"MIBANCO",name:"Mi banco"},{value:"BOD",name:"Banco occidental de descuento"},{value:"TESORO",name:"Banco del tesoro"},{value:"BANCARIBE",name:"Bancaribe c.a"},{value:"BFC",name:"Banco fondo com\xFAn c.a."}]}function returnBankSelected(e){if(null==e||e==null||""==e)return null;var t=returnBancos();if(null!=t&&0!=t.length)for(var n=0;n<t.length;n++)if(null!=t[n]&&t[n].hasOwnProperty("value")&&t[n].value==e)return t[n].name}function amountFormattingObject(e){var t={integerPart:"",decimalPart:""},n=(e/100).toFixed(2),i="",r="";if(0<n.toString().indexOf(".")){var s=n.toString().split(".");r=s[0],i=2>s[1].length?s[1]+"0":s[1]}else r=n.toString(),i="00";return t.integerPart=formattingIntegerPart(r),t.decimalPart=i,t}function trunc(e,t=0){var n=e.toString(),i=n.length,r=n.indexOf(".")+1,s=n.substr(0,r+t);return+s}function validarEmail(e){return!(0<=e.indexOf("&"))&&!(0<=e.indexOf("/"))&&!!/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/.test(e)}function utils_keyNumber(e){return!!/^[0-9]*$/.test(e)}function keypressNumbersInteger(e){var t=e.keyCode||e.which,n=String.fromCharCode(t).toLowerCase(),r=[8],s=!1;for(var o in r)if(t==r[o]){s=!0;break}if(-1=="0123456789".indexOf(n)&&!s)return!1}function formattingDate(e){e=replaceAll(e,"T"," ");var t=new Date(e),n="00",i="00";n=10>t.getHours()?"0"+t.getHours():t.getHours(),i=10>t.getMinutes()?"0"+t.getMinutes():t.getMinutes();var r=t.getDate();10>r&&(r="0"+t.getDate());var s=t.getMonth()+1;10>s&&(s="0"+s);var o=r+"-"+s+"-"+t.getFullYear()+" "+n+":"+i;return o}function formattingDate1(e){e=replaceAll(e,"T"," ");var t=new Date(e),n="00",i="00";n=10>t.getHours()?"0"+t.getHours():t.getHours(),i=10>t.getMinutes()?"0"+t.getMinutes():t.getMinutes();var r=t.getDate();10>r&&(r="0"+t.getDate());var s=t.getMonth()+1;10>s&&(s="0"+s);var o=r+"-"+s+"-"+t.getFullYear();return o}function formattingDate2(e){e=replaceAll(e,"T"," ");try{return e=e.split(" "),e[0]}catch(e){return null}}function replaceAll(e,t,n){if(null==e||e==null)return e;for(;-1!=e.toString().indexOf(t);)e=e.toString().replace(t,n);return e}function capitalizeOnly(e){if(null==e||e==null)return"";var t=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();return t}function orderList(e){if(null==e||e==null||0==e.length)return null;var t=e.length,t,r,s,o;for(s=1;s<t;s++)for(r=0;r<t-s;r++)e[r].sort>e[r+1].sort&&(o=e[r],e[r]=e[r+1],e[r+1]=o);return e}function getTimeZone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function keyPressValidarLetrasNumerosSimplesGuionesPisos(e){var t=e.keyCode||e.which,n=String.fromCharCode(t).toLowerCase(),r=[8,45,95],s=!1;for(var o in r)if(t==r[o]){s=!0;break}if(-1=="abcdefghijklmnopqrstuvwxyz0123456789".indexOf(n)&&!s)return!1}function validarLetrasNumerosSimplesGuionesPiso(e){return!!/^([a-zA-Z-Z]|[0-9]|-|_)*$/.test(e)}function keypressvalidarEmail(e,t){var n=e.keyCode||e.which,r=String.fromCharCode(n).toLowerCase(),s=[8,38,45,46,64,95],o=!1;for(var d in s)if(n==s[d]){if(64==n&&-1<t.indexOf(r)){o=!1;break}if(46==n&&null!=t&&t.charAt(t.length-1)==r){o=!1;break}o=!0;break}if(-1=="abcdefghijklmnopqrstuvwxyz0123456789".indexOf(r)&&!o)return!1}function keyPressValidarLetrasyOtrosCaracteres(e){var t=e.keyCode||e.which,n=String.fromCharCode(t).toLowerCase(),r=[8,32,35,36,37,38,64,45,46,95],s=!1;for(var o in r)if(t==r[o]){s=!0;break}if(-1=="abcdefghijklmnopqrstuvwxyz0123456789\xD1\xF1\xC1\xE1\xC9\xE9\xCD\xED\xD3\xF3\xDA\xFA".indexOf(n)&&!s)return!1}function formatearTelefono(e){var t;if(e!=null){if(5<=e.length){var n=e;t="("+n.substring(0,4)+")-"+n.substring(4,7)+" "+n.substring(7,n.length)}else t=e;return t}}(function(e){e.MsgComponent=ng.core.Component({selector:"msg-component",templateUrl:"views/msg-v2.html",inputs:["mensaje"],outputs:["valueChanged","valueChangedError"]}).Class({constructor:[function(){this.valueChanged=new ng.core.EventEmitter,this.valueChangedError=new ng.core.EventEmitter}]}),e.MsgComponent.prototype.info=function(){$("#msgInfo").modal("show")},e.MsgComponent.prototype.error=function(){$("#msgError").modal("show")},e.MsgComponent.prototype.error2=function(){$("#msgErrorRedirect").modal("show")},e.MsgComponent.prototype.warning=function(){$("#msgWarning").modal("show")},e.MsgComponent.prototype.sendMsg=function(){$("#msgInfo").modal("hide"),this.valueChanged.emit()},e.MsgComponent.prototype.sendMsg2=function(){this.valueChangedError.emit()}})(window.app||(window.app={}));(function(e){'use strict';e.CustomTableComponent=ng.core.Component({selector:"custom-table",templateUrl:"views/custom-table.html",inputs:["size","labelSize","alignSize","totalPage","totalPageRecords","pageSelected","listOffice","ocultarCantidad"],outputs:["cantidadTransaccionesTabla","valueFirst","valuePrevious","valueNext","valueLast","valueChangeRecords"]}).Class({constructor:[function(){this.cantidadTransaccionesTabla=new ng.core.EventEmitter,this.valueFirst=new ng.core.EventEmitter,this.valuePrevious=new ng.core.EventEmitter,this.valueNext=new ng.core.EventEmitter,this.valueLast=new ng.core.EventEmitter,this.valueChangeRecords=new ng.core.EventEmitter}]}),e.CustomTableComponent.prototype.acciones=function(){this.mostrarAcciones=!(this.size<=this.totalPage)},e.CustomTableComponent.prototype.ngOnInit=function(){1==this.pageSelected?(this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled"):this.pageSelected==this.totalPageRecords?(this.lastPage="last-page-disabled",this.nextPage="next-page-disabled",this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled"):(this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled"),this.mostrarHeader=!1,this.mostrarAcciones=!1,this.mostrarHeader=null!=this.header&&null!=this.header&&""!=this.header,this.listPageRecord=[10,20,25,50,100],this.acciones()},e.CustomTableComponent.prototype.ngOnChanges=function(){1==this.pageSelected?(this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled"):this.pageSelected==this.totalPageRecords?(this.lastPage="last-page-disabled",this.nextPage="next-page-disabled",this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled"):(this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled"),this.acciones()},e.CustomTableComponent.prototype.selectedPageShow=function(e){this.totalPage=e,this.pageSelected=1;var t=Math.floor(this.size/this.totalPage),n=this.size%this.totalPage;this.totalPageRecords=0==n?t:t+1,this.lastPage="last-page-enabled",this.nextPage="next-page-enabled",this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled";var i={detalles:this.totalPage,pagina:this.totalPageRecords};this.valueChangeRecords.emit(this.pageSelected),this.acciones(),this.cantidadTransaccionesTabla.emit(i)},e.CustomTableComponent.prototype.firstPageFunction=function(){"first-page-enabled"==this.firstPage&&(this.pageSelected=1,this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled",this.lastPage="last-page-enabled",this.nextPage="next-page-enabled",this.valueFirst.emit(this.pageSelected))},e.CustomTableComponent.prototype.previousPageFunction=function(){"previous-page-enabled"==this.previousPage&&(--this.pageSelected,this.lastPage="last-page-enabled",this.nextPage="next-page-enabled",1==this.pageSelected?(this.firstPage="first-page-disabled",this.previousPage="previous-page-disabled"):(this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled"),this.valuePrevious.emit(this.pageSelected))},e.CustomTableComponent.prototype.nextPageFunction=function(){"next-page-enabled"==this.nextPage&&(++this.pageSelected,this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled",this.pageSelected==this.totalPageRecords&&(this.lastPage="last-page-disabled",this.nextPage="next-page-disabled"),this.valueNext.emit(this.pageSelected))},e.CustomTableComponent.prototype.lastPageFunction=function(){"last-page-enabled"==this.lastPage&&(this.pageSelected=this.totalPageRecords,this.lastPage="last-page-disabled",this.nextPage="next-page-disabled",this.firstPage="first-page-enabled",this.previousPage="previous-page-enabled",this.valueLast.emit(this.pageSelected))}})(window.app||(window.app={}));(function(e){'use strict';e.NavBarComponent=ng.core.Component({selector:"nav-bar",templateUrl:"views/navbar.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,e.AppCallService,function(e,t,n){this.msg=e,this.router=t,this.ser=n}]}),e.NavBarComponent.prototype.ngOnInit=function(){},e.NavBarComponent.prototype.doLogout=function(){let e="Error al cerrar sesion",t=this.ser.callServicesHttp("logout",null,null);t.subscribe(t=>{null==t||t==null||""==t||200==t.status_http||(this.mensaje=this.ser.processMessageError(t,e)),doLogout(),window.location.href="/bandera"},t=>{this.mensaje=this.ser.processError(t,e),doLogout(),window.location.href="/bandera"})}})(window.app||(window.app={}));(function(e){e.RouteCreateComponent=ng.core.Component({selector:"route-create",templateUrl:"views/route-create.html",styleUrls:["styles/route-create.css"]}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.RouteCreateComponent.prototype.ngOnInit=function(){this.classView1="col-lg-4 col-md-4 col-sm-6 col-12",this.classView2="col-lg-4 col-md-4 col-sm-6 col-12",this.classView3="col-lg-4 col-md-4 col-sm-12 col-12",this.texto="Crear",this.title=capitalizeOnly(_("title14")),this.pagingActual={},this.detallePorPagina=10,this.totalPage=1,this.pageSelected=1,this.pagingActualLine={},this.detallePorPaginaLine=10,this.totalPageLine=1,this.pageSelectedLine=1,this.line_buscar=null,this.parada_buscar=null,this.listRegister=[],this.listRegisterLine=[],this.linea=null,this.lineSelected=null,this.code=null,this.listTrayectos=[],this.active_status=!0,this.checkRol()},e.RouteCreateComponent.prototype.checkRol=function(){var e="ITINERARY-CREATE";this.active.url.hasOwnProperty("_value")&&("route-create"==this.active.url._value[0].path?(this.title=_("title14"),this.save=!0,e="ITINERARY-CREATE"):(this.title=_("title15"),this.save=!1,this.classView2="col-lg-4 col-md-4 col-sm-6 col-12",this.classView3="col-lg-8 col-md-8 col-sm-6 col-12",e="ITINERARY-UPDATE",this.texto="Actualizar"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.RouteCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.RouteCreateComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||"null"==this.nombre_buscar||(null==t&&(t={}),t.name="*"+this.nombre_buscar+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.RouteCreateComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.RouteCreateComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.RouteCreateComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.RouteCreateComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.RouteCreateComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.RouteCreateComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.RouteCreateComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("parada-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.RouteCreateComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.RouteCreateComponent.prototype.searchLine=function(){this.jsonFilterLine={};var e=[],t=null;if(null==t&&(t={}),t.active=!0,null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.name="*"+this.linea+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterLine.entities=n}this.jsonFilterLine.sort={"info.created_at":"desc"},this.callServicesLine(1,"&limit="+this.detallePorPaginaLine)},e.RouteCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPaginaLine=e.detalles,this.totalPageLine=e.pagina,null==this.listRegisterLine||this.listRegisterLine==null||0==this.listRegisterLine.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.RouteCreateComponent.prototype.getValueFirstLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.RouteCreateComponent.prototype.getValuePreviousLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.RouteCreateComponent.prototype.getValueLastLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.RouteCreateComponent.prototype.getValueNextLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.RouteCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.RouteCreateComponent.prototype.callServicesLine=function(e,t){this.pageSelectedLine=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("line-report",n,this.jsonFilterLine);r.subscribe(e=>{this.procesarRespuestaLine(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.RouteCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegisterLine=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegisterLine=[];else if(null==e.count||null==e.count||0==e.count)this.listRegisterLine=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegisterLine=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listRegisterLine.push(n);this.pagingActualLine.count=e.count}else this.listRegisterLine=[]}},e.RouteCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("route-get",this.business_id+"?id="+this.id,null),t=_("message_dflt_16");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.RouteCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_16");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.RouteCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&""!=e.line_name&&(this.lineSelected={},this.lineSelected.name=e.line_name),e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.code=e.name),e.hasOwnProperty("active")&&(e.active?this.active_status=!0:this.active_status=!1),e.hasOwnProperty("stops")&&(this.listTrayectos=[],null!=e.stops&&null!=e.stops&&""!=e.stops&&0!=e.stops.length))for(var t={},n=0;n<e.stops.length;n++)null!=e.stops[n]&&(t={},t.name=e.stops[n].name,t.code=e.stops[n].code,this.listTrayectos.push(t))},e.RouteCreateComponent.prototype.selectedParada=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].code==e.code)if(null==this.listRegister[t].classSelected)this.listTrayectos.push(this.listRegister[t]),this.listRegister[t].classSelected="selected";else{var n=this.listTrayectos.slice(t+1);this.listTrayectos=this.listTrayectos.slice(0,t),this.listTrayectos=this.listTrayectos.concat(n),this.listRegister[t].classSelected=null}},e.RouteCreateComponent.prototype.quitarLinea=function(){if(this.lineSelected=null,null!=data&&null!=data&&""!=data&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var e=0;e<this.listRegisterLine.length;e++)null!=this.listRegisterLine[e]&&(this.listRegisterLine[e].classSelected=null)},e.RouteCreateComponent.prototype.selectLine=function(e){if(this.lineSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var t=0;t<this.listRegisterLine.length;t++)null!=this.listRegisterLine[t]&&(this.listRegisterLine[t].id==e.id?null==this.listRegisterLine[t].classSelected?(this.lineSelected=this.listRegisterLine[t],this.listRegisterLine[t].classSelected="selected"):this.listRegisterLine[t].classSelected=null:this.listRegisterLine[t].classSelected=null)},e.RouteCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/route-report"])},e.RouteCreateComponent.prototype.clean=function(){this.line_buscar=null,this.parada_buscar=null,this.listRegister=[],this.listRegisterLine=[],this.code=null,this.save&&(this.linea=null,this.lineSelected=null),this.listTrayectos=[]},e.RouteCreateComponent.prototype.done=function(){var e=[];if(null==this.lineSelected)return this.mensaje="Debe seleccionar la linea de la ruta que esta creando",void this.msg.warning();if(null==this.code||null==this.code||""==this.code)return this.mensaje="Debe seleccionar ingresar el c\xF3digo que identifica la ruta y la l\xEDnea",void this.msg.warning();if(null==this.listTrayectos||2>this.listTrayectos.length)return this.mensaje="Debe seleccionar al menos dos paradas",void this.msg.warning();for(var t=0;t<this.listTrayectos.length;t++)null!=this.listTrayectos[t]&&e.push(this.listTrayectos[t].code);let n=null,r=_("message_dflt_14");this.save?(r=_("message_dflt_14"),n=this.service.callServicesHttp("route-post","&line_id="+this.lineSelected.id+"&name="+this.code.trim().toUpperCase()+"&active="+this.active_status,e)):(r=_("message_dflt_15"),n=this.service.callServicesHttp("route-put","&id="+this.id+"&line_id="+this.business_id+"&name="+this.code+"&active="+this.active_status,e)),n.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,r),this.msg.error()})},e.RouteCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_14");t=this.save?_("message_dflt_14"):_("message_dflt_15"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success18")):capitalizeOnly(_("success19")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.RouteCreateComponent.prototype.quitarPunto=function(e,t){var n=this.listTrayectos.slice(e+1);if(this.listTrayectos=this.listTrayectos.slice(0,e),this.listTrayectos=this.listTrayectos.concat(n),null!=this.listRegister&&0!=this.listRegister.length)for(var r=0;r<this.listRegister.length;r++)if(null!=this.listRegister[r]&&this.listRegister[r].code==t.code){this.listRegister[r].classSelected=null;break}},e.RouteCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.RouteReportComponent=ng.core.Component({selector:"route-report",templateUrl:"views/route-report-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.RouteReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.status=null,this.codigo=null,this.linea=null,this.parada=null,this.checkRol()},e.RouteReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("ITINERARY"!=t[r].name)"ITINERARY"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.RouteReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:"ITINERARY-REPORT"==e.name?null:e},e.RouteReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"ITINERARY-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.RouteReportComponent.prototype.search=function(){this.jsonFilter={},null==this.codigo||this.codigo==null||""==this.codigo||"null"==this.codigo||(this.jsonFilter.name=this.codigo.trim()),null==this.linea||this.linea==null||""==this.linea||"null"==this.linea||(this.jsonFilter.line=this.linea),null==this.parada||this.parada==null||""==this.parada||"null"==this.parada||(this.jsonFilter.stop=this.parada),null==this.status||this.status==null||""==this.status||"null"==this.status||("ACTIVE"==this.status?this.jsonFilter.active=!0:this.jsonFilter.active=!1),this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.RouteReportComponent.prototype.clean=function(){this.status=null,this.codigo=null,this.linea=null,this.parada=null},e.RouteReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.RouteReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.RouteReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.RouteReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.RouteReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.RouteReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.RouteReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("route-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.RouteReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.RouteReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("ITINERARY-DELETE")&&e.actions.push(this.checkAction("ITINERARY-DELETE")),null!=this.checkAction("ITINERARY-VIEW")&&e.actions.push(this.checkAction("ITINERARY-VIEW")),null!=this.checkAction("ITINERARY-UPDATE")&&e.actions.push(this.checkAction("ITINERARY-UPDATE")),e.hasOwnProperty("active")&&(e.active?(e.formatted_status="ACTIVO",null!=this.checkAction("ITINERARY-INACTIVE")&&e.actions.push(this.checkAction("ITINERARY-INACTIVE"))):(e.formatted_status="INACTIVO",null!=this.checkAction("ITINERARY-ACTIVE")&&e.actions.push(this.checkAction("ITINERARY-ACTIVE")))),e)},e.RouteReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.RouteReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.RouteReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"ITINERARY-DELETE":$("#modalDeleteRoute").modal("show");break;case"ITINERARY-ACTIVE":$("#modalActivateRoute").modal("show");break;case"ITINERARY-INACTIVE":$("#modalInactivateRoute").modal("show");break;case"ITINERARY-VIEW":this.router.navigate(["/route-view"],{queryParams:{id:e.id,business_id:e.business_id}});break;case"ITINERARY-UPDATE":this.router.navigate(["/route-update"],{queryParams:{id:e.id,business_id:e.business_id}});break;default:}},e.RouteReportComponent.prototype.deleteData=function(){if($("#modalDeleteRoute").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning9")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&line_id="+this.dataSelected.business_id;let t=_("message_dflt_11"),n=this.service.callServicesHttp("route-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.RouteReportComponent.prototype.activeData=function(){if($("#modalActivateRoute").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning9")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&line_id="+this.dataSelected.business_id+"&name="+this.dataSelected.name+"&active=true",t=[];if(this.dataSelected.hasOwnProperty("stops")&&null!=this.dataSelected.stops&&0!=this.dataSelected.stops.length)for(var n=0;n<this.dataSelected.stops.length;n++)null!=this.dataSelected.stops[n]&&this.dataSelected.stops[n].hasOwnProperty("code")&&null!=this.dataSelected.stops[n].code&&null!=this.dataSelected.stops[n].code&&""!=this.dataSelected.stops[n].code&&t.push(this.dataSelected.stops[n].code);let i=_("message_dflt_13"),r=this.service.callServicesHttp("route-put",e,t);r.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})}},e.RouteReportComponent.prototype.inactiveData=function(){if($("#modalInactivateRoute").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning9")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&line_id="+this.dataSelected.business_id+"&name="+this.dataSelected.name+"&active=false",t=[];if(this.dataSelected.hasOwnProperty("stops")&&null!=this.dataSelected.stops&&0!=this.dataSelected.stops.length)for(var n=0;n<this.dataSelected.stops.length;n++)null!=this.dataSelected.stops[n]&&this.dataSelected.stops[n].hasOwnProperty("code")&&null!=this.dataSelected.stops[n].code&&null!=this.dataSelected.stops[n].code&&""!=this.dataSelected.stops[n].code&&t.push(this.dataSelected.stops[n].code);let i=_("message_dflt_12"),r=this.service.callServicesHttp("route-put",e,t);r.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})}},e.RouteReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_11");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success7")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.RouteReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_13");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id&&this.listRegister[n].business_id==e.business_id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success9"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.RouteReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_12");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id&&this.listRegister[n].business_id==e.business_id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success8"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.RouteReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.RouteViewComponent=ng.core.Component({selector:"route-view",templateUrl:"views/route-view.html",styleUrls:["styles/route-create.css"]}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.RouteViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title16")),this.name=null,this.lineSelected=null,this.code=null,this.listTrayectos=[],this.checkRol()},e.RouteViewComponent.prototype.checkRol=function(){this.getData()},e.RouteViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.RouteViewComponent.prototype.getService=function(){let e=this.service.callServicesHttp("route-get",this.business_id+"?id="+this.id,null),t=_("message_dflt_16");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.RouteViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_16");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.RouteViewComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&""!=e.line_name&&(this.linea=e.line_name),e.hasOwnProperty("active")&&(e.active?this.status="ACTIVO":this.status="INACTIVO"),e.hasOwnProperty("stops")&&(this.listTrayectos=[],null!=e.stops&&null!=e.stops&&""!=e.stops&&0!=e.stops.length))for(var t={},n=0;n<e.stops.length;n++)null!=e.stops[n]&&(t={},t.name=e.stops[n].name,t.code=e.stops[n].code,this.listTrayectos.push(t));e.hasOwnProperty("info")&&null!=e.info&&null!=e.info&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&null!=e.info.created_by_email&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&null!=e.info.created_at&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&null!=e.info.updated_by_email&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&null!=e.info.updated_at&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.RouteViewComponent.prototype.print=function(){window.print()},e.RouteViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ScheduleCreateComponent=ng.core.Component({selector:"schedule-create",templateUrl:"views/schedule-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.ScheduleCreateComponent.prototype.ngOnInit=function(){this.texto="Crear",this.title=capitalizeOnly(_("title17")),this.pagingActual={},this.detallePorPagina=10,this.totalPage=1,this.pageSelected=1,this.line_buscar=null,this.parada_buscar=null,this.listRegister=[],this.isFijo=!0,this.isVariable=!1,this.listTrayectos=[],this.getData()},e.ScheduleCreateComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("schedule-create"==this.active.url._value[0].path?(this.title=capitalizeOnly(_("title17")),this.texto="Crear",this.save=!0):(this.title=capitalizeOnly(_("title18")),this.texto="Actualizar",this.save=!1,this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.code=this.active.queryParams._value.id,this.getService())))},e.ScheduleCreateComponent.prototype.search=function(){this.callServices(1,"&limit="+this.detallePorPagina)},e.ScheduleCreateComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ScheduleCreateComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ScheduleCreateComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ScheduleCreateComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ScheduleCreateComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ScheduleCreateComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ScheduleCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("schedule-get",null,null);this.procesarRespuestaGET(e)},e.ScheduleCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_52");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ScheduleCreateComponent.prototype.formattedDataGET=function(e){if(this.routeSelected=null,e.hasOwnProperty("code")&&(this.routeSelected={},this.routeSelected.code=e.code,e.hasOwnProperty("line")&&(this.routeSelected.line=e.line)),e.hasOwnProperty("trayectos")&&(this.routeSelected.trayectos=[],null!=e.trayectos&&null!=e.trayectos&&""!=e.trayectos&&0!=e.trayectos.length))for(var t=0;t<e.trayectos.length;t++)null!=e.trayectos[t]&&this.routeSelected.trayectos.push(e.trayectos[t]);e.hasOwnProperty("schedule")&&(this.horario_fijo=e.schedule,this.isFijo=!0,this.isVariable=!1),this.lunes=!0,this.martes=!0,this.miercoles=!0,this.jueves=!0,this.isFeriado=!0},e.ScheduleCreateComponent.prototype.callServices=function(){let e=this.service.callServicesHttp("route-report",null,null);this.procesarRespuesta(e)},e.ScheduleCreateComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ScheduleCreateComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.ScheduleCreateComponent.prototype.selectedRoute=function(e){if(this.routeSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)null!=this.listRegister[t]&&(this.listRegister[t].id==e.id?null==this.listRegister[t].classSelected?(this.routeSelected=this.listRegister[t],this.listRegister[t].classSelected="selected"):this.listRegister[t].classSelected=null:this.listRegister[t].classSelected=null)},e.ScheduleCreateComponent.prototype.quitarRoute=function(){if(this.routeSelected=null,null!=this.listRegister&&0!=this.listRegister.length)for(var e=0;e<this.listRegister.length;e++)null!=this.listRegister[e]&&(this.listRegister[e].classSelected=null)},e.ScheduleCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/schedule-report"])},e.ScheduleCreateComponent.prototype.selectedTypeHorario=function(){this.isFijo=!this.isFijo,this.isVariable=!this.isVariable},e.ScheduleCreateComponent.prototype.clean=function(){this.line_buscar=null,this.parada_buscar=null,this.listRegister=[],this.routeSelected=null,this.isFijo=!0,this.isVariable=!1,this.horario_fijo=null,this.horario_init=null,this.horario_fin=null,this.frecuencia=null,this.lunes=!1,this.martes=!1,this.miercoles=!1,this.jueves=!1,this.viernes=!1,this.sabado=!1,this.domingo=!1,this.isFeriado=!1},e.ScheduleCreateComponent.prototype.done=function(){var e={};if(null==this.routeSelected)return this.mensaje="Debe seleccionar la ruta",void this.msg.warning();let t=null;t=this.save?this.service.callServicesHttp("schedule-post",null,e):this.service.callServicesHttp("schedule-put",null,e),this.procesarRespuestaDone(t)},e.ScheduleCreateComponent.prototype.quitarPunto=function(e,t){var n=this.listTrayectos.slice(e+1);if(this.listTrayectos=this.listTrayectos.slice(0,e),this.listTrayectos=this.listTrayectos.concat(n),null!=this.listRegister&&0!=this.listRegister.length)for(var r=0;r<this.listRegister.length;r++)if(null!=this.listRegister[r]&&this.listRegister[r].code==t.code){this.listRegister[r].classSelected=null;break}},e.ScheduleCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_50");t=this.save?_("message_dflt_50"):_("message_dflt_51"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success39")):capitalizeOnly(_("success40")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ScheduleCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ScheduleReportComponent=ng.core.Component({selector:"schedule-report",templateUrl:"views/schedule-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.ScheduleReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.status=null,this.linea=null,this.parada=null,this.horario=null,this.checkRol()},e.ScheduleReportComponent.prototype.checkRol=function(){},e.ScheduleReportComponent.prototype.search=function(){this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.ScheduleReportComponent.prototype.clean=function(){this.status=null,this.codigo=null,this.linea=null,this.parada=null,this.horario=null},e.ScheduleReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ScheduleReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ScheduleReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ScheduleReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ScheduleReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ScheduleReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ScheduleReportComponent.prototype.callServices=function(){let e=this.service.callServicesHttp("schedule-report",null,null);this.procesarRespuesta(e)},e.ScheduleReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ScheduleReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase()),e.actions=[],e.actions.push({name:"SCHEDULE-DELETE",functionality_detail:"Eliminar"}),e.actions.push({name:"SCHEDULE-UPDATE",functionality_detail:"Actualizar horario"}),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase(),"ACTIVE"==e.status?e.actions.push({name:"SCHEDULE-INACTIVE",functionality_detail:"Deshabilitar horario"}):e.actions.push({name:"SCHEDULE-ACTIVE",functionality_detail:"Habilitar horario"})),e)},e.ScheduleReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.ScheduleReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"SCHEDULE-DELETE":$("#modalDeleteSchedule").modal("show");break;case"SCHEDULE-ACTIVE":$("#modalActivateSchedule").modal("show");break;case"SCHEDULE-INACTIVE":$("#modalInactivateSchedule").modal("show");break;case"SCHEDULE-UPDATE":this.router.navigate(["/schedule-update"],{queryParams:{id:e.id}});break;default:}},e.ScheduleReportComponent.prototype.deleteData=function(){if($("#modalDeleteSchedule").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning37")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("schedule-delete",e,null);this.procesarRespuestaDelete(t)}},e.ScheduleReportComponent.prototype.activeData=function(){if($("#modalActivateSchedule").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning37")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("schedule-active",e,null);this.procesarRespuestaActivar(t)}},e.ScheduleReportComponent.prototype.inactiveData=function(){if($("#modalInactivateSchedule").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning37")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("schedule-inactive",e,null);this.procesarRespuestaDesactivar(t)}},e.ScheduleReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_47");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success36")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ScheduleReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_48");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success37"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.ScheduleReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_49");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success38"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.ScheduleReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.SettingsComponent=ng.core.Component({selector:"settings-component",templateUrl:"views/settings.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.ser=i}]}),e.SettingsComponent.prototype.devolverEvent=function(e){null==e||e==null||""==e||8!=e.keyCode||(null==this.unidad2?this.unidad2="0,00":""==this.unidad2?this.unidad2="0,00":3==this.unidad2.length&&(this.unidad2="0,"+this.unidad2.charAt(0)+this.unidad2.charAt(2)))},e.SettingsComponent.prototype.keyDown=function(e){if(null!=e&&e!=null&&""!=e&&(37==e.keyCode||38==e.keyCode))return!1},e.SettingsComponent.prototype.getEventMonto=function(e){if(null!=e&&e!=null&&""!=e){if(!this.regex.test(e.key))return!1;if(null!=this.unidad2&&4==this.unidad2.length){if("0,00"==this.unidad2)return 0!=e.key&&"0"!=e.key&&(this.unidad2="0,0"+e.key,!1);if("0,0"==this.unidad2.substring(0,3))return this.unidad2="0,"+this.unidad2.charAt(this.unidad2.length-1)+e.key,!1;if("0"==this.unidad2.charAt(0)||0==this.unidad2.charAt(0))return this.unidad2=this.unidad2.charAt(2)+","+this.unidad2.charAt(3)+e.key,!1}}},e.SettingsComponent.prototype.moveCursorToEnd=function(){var e=document.getElementById("unidad2");if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if("undefined"!=typeof e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}},e.SettingsComponent.prototype.changeAmount=function(){null==this.unidad2||this.unidad2==null||""==this.unidad2||(1==this.unidad2.length?this.unidad2="0,0"+this.unidad2:2==this.unidad2.length&&(this.unidad2="0,"+this.unidad2))},e.SettingsComponent.prototype.inputEvent=function(e){if(null!=e&&e!=null&&""!=e)if(null!=e.data&&null!=e.data&&""!=e.data){if(!this.regex.test(e.data))return!1;if(null!=this.unidad2&&4==this.unidad2.length){if("0,00"==this.unidad2)return 0==e.data||"0"==e.data?(document.getElementById("unidad2").value="0,00",!1):(document.getElementById("unidad2").value="0,0"+e.data,!1);if("0,0"==this.unidad2.substring(0,3))return document.getElementById("unidad2").value="0,"+this.unidad2.charAt(this.unidad2.length-1)+e.data,!1;if("0"==this.unidad2.charAt(0)||0==this.unidad2.charAt(0))return document.getElementById("unidad2").value=this.unidad2.charAt(2)+","+this.unidad2.charAt(3)+e.data,!1}}else"deleteContentBackward"==e.inputType&&(null==this.unidad2?document.getElementById("unidad2").value="0,00":""==this.unidad2?document.getElementById("unidad2").value="0,00":3==this.unidad2.length&&(document.getElementById("unidad2").value="0,"+this.unidad2.charAt(0)+this.unidad2.charAt(2)))},e.SettingsComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title12")),this.title1=capitalizeOnly(_("title14")),this.title2=capitalizeOnly(_("title15")),this.title3=capitalizeOnly(_("title16")),this.title_back=_("title17"),this.title_clean=_("title18"),this.title_done=_("title19"),this.listaMonedas=[{value:"VES",label:"Bs",name:capitalizeOnly(_("bs")),check:!1},{value:"USD",label:"$",name:capitalizeOnly(_("usd")),check:!1}],this.unidad1="1,00",this.moneda1="VES",this.moneda2="VES",this.unidad2="0,00",this.regex=/^\d+$/,$("#unidad2").mask("#.##0,00",{reverse:!0}),this.getServices()},e.SettingsComponent.prototype.getServices=function(){let e=capitalizeOnly(_("message_dflt_20")),t=this.ser.callServicesHttp("config-general-get",null,null);t.subscribe(t=>{null==t||t==null||""==t?(this.mensaje=e,this.msg.error()):200==t.status_http?null!=t&&t!=null&&""!=t&&0!=t.length&&this.formattedData(t):(this.mensaje=this.ser.processMessageError(t,e),this.msg.error())},t=>{this.mensaje=this.ser.processError(t,e),this.msg.error()})},e.SettingsComponent.prototype.formattedData=function(e){if(null!=e&&null!=e&&""!=e){if(e.hasOwnProperty("currencys")&&null!=e.currencys&&null!=e.currencys&&""!=e.currencys&&0!=e.currencys.length)for(var t=0;t<e.currencys.length;t++)for(var n=0;n<this.listaMonedas.length;n++)null!=e.currencys[t]&&e.currencys[t]==this.listaMonedas[n].value&&(this.listaMonedas[n].check=!0);if(e.hasOwnProperty("currency_init")&&null!=e.currency_init&&null!=e.currency_init&&""!=e.currency_init&&(this.moneda1=e.currency_init),e.hasOwnProperty("unity_init")&&null!=e.unity_init&&null!=e.unity_init&&""!=e.unity_init&&0!=e.unity_init)try{this.unidad1=amountFormattingObject(e.unity_init),this.unidad1=this.unidad1.integerPart+","+this.unidad1.decimalPart}catch(e){}if(e.hasOwnProperty("currency_end")&&null!=e.currency_end&&null!=e.currency_end&&""!=e.currency_end&&(this.moneda2=e.currency_end),e.hasOwnProperty("unity_end")&&null!=e.unity_end&&null!=e.unity_end&&""!=e.unity_end&&0!=e.unity_end)try{this.unidad2=amountFormattingObject(e.unity_end),this.unidad2=this.unidad2.integerPart+","+this.unidad2.decimalPart}catch(e){}}},e.SettingsComponent.prototype.clean=function(){this.moneda1="VES",this.moneda2="VES",this.unidad2="0,00",this.listaMonedas=[{value:"VES",label:"Bs",name:capitalizeOnly(_("bs")),check:!1},{value:"USD",label:"$",name:capitalizeOnly(_("usd")),check:!1}]},e.SettingsComponent.prototype.done=function(){if(null==this.listaMonedas||null==this.listaMonedas||""==this.listaMonedas||0==this.listaMonedas.length)return this.mensaje=capitalizeOnly(_("warning18")),void this.msg.warning();for(var e=[],t=0;t<this.listaMonedas.length;t++)null!=this.listaMonedas[t]&&!0==this.listaMonedas[t].check&&e.push(this.listaMonedas[t].value);if(0==e.length)return this.mensaje=capitalizeOnly(_("warning18")),void this.msg.warning();if(this.moneda1==this.moneda2)return this.mensaje=capitalizeOnly(_("warning20")),void this.msg.warning();if(null==this.unidad2||null==this.unidad2||""==this.unidad2)return this.mensaje=capitalizeOnly(_("warning19")),void this.msg.warning();var n=null;try{n=$("#unidad2").val(),n=n.replace(/\./g,"").replace(/,/g,""),n=(replaceAll(n," ","")+"").trim()}catch(t){n=null}var r=n;if(null==r||null==r||0==r||""==r)return this.mensaje=capitalizeOnly(_("warning19")),void this.msg.warning();let s=capitalizeOnly(_("message_dflt_19")),o=this.ser.callServicesHttp("config-general-post",null,{});o.subscribe(e=>{null==e||e==null||""==e?(this.mensaje=s,this.msg.error()):200==e.status_http?(this.mensaje=capitalizeOnly(_("success15")),this.msg.info()):(this.mensaje=this.ser.processMessageError(e,s),this.msg.error())},e=>{this.mensaje=this.ser.processError(e,s),this.msg.error()})},e.SettingsComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TravelCreateComponent=ng.core.Component({selector:"travel-create",templateUrl:"views/travel-create-v2.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,e.LoadingServiceComponent,function(e,t,n,i,r){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i,this.loading=r}]}),e.TravelCreateComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title62")),this.disponibilidad=null,this.fecha=null,this.hora=null,this.save=!0,this.mostrarCargando=!1,this.imagenCargando="assets/images/loading.gif",this.lineaSelected=null,this.lineaSelectedShow=null,this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.pagingActualLine={},this.listTarifasSelected=[],this.capacidad_mayor=0,this.vehicleSelected=null,this.vehicleSelectedShow=null,this.totalPageVehicle=1,this.pageSelectedVehicle=1,this.detallePorPaginaVehicle=10,this.pagingActualVehicle={},this.listVehicles=[],this.vehicle_buscar=null,this.rutaSelected=null,this.rutaSelectedShow=null,this.totalPageRuta=1,this.pageSelectedRuta=1,this.detallePorPaginaRuta=10,this.pagingActualRuta={},this.listRutas=[],this.ruta_buscar=null,this.codigo_ciudad=null,this.pagingActualTarifa={},this.totalPageTarifa=1,this.detallePorPaginaTarifa=10,this.pageSelectedTarifa=1,this.listTarifas=[],this.capacidad=0,this.pagingActualChofer={},this.totalPageChofer=1,this.detallePorPaginaChofer=10,this.pageSelectedChofer=1,this.listChoferes=[],this.listChoferesSelected=[],this.texto="Guardar",this.active_status=!0,this.type=null,this.status_publicacion="UNPUBLISHED";try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.puerta=null,this.listTypes=[{value:"LONG_ROUTE",name:"Ruta Larga"},{value:"SHORT_ROUTE",name:"Ruta Corta"}],this.checkRol()},e.TravelCreateComponent.prototype.checkRol=function(){var e="TRIP-CREATE";this.active.url.hasOwnProperty("_value")&&("travel-create"==this.active.url._value[0].path?(this.title=_("title62"),this.save=!0,e="TRIP-CREATE"):(this.title=_("title63"),this.save=!1,e="TRIP-UPDATE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TravelCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("trip_id")&&(this.id=this.active.queryParams._value.trip_id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.active.queryParams._value.hasOwnProperty("itinerary_id")&&(this.itinerary_id=this.active.queryParams._value.itinerary_id,this.getService())))},e.TravelCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("travel-get",this.business_id+"?realm="+this.service.getRealm()+"&itinerary_id="+this.itinerary_id+"&id="+this.id,null),t=_("message_dflt_79");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.TravelCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_79");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelCreateComponent.prototype.formattedDataGET=function(e){if(null!=e&&null!=e&&""!=e){if(e.hasOwnProperty("line_code")&&null!=e.line_code&&""!=e.line_code&&null!=e.line_code&&(this.line_name=e.line_code,e.hasOwnProperty("line_name")&&null!=e.line_name&&""!=e.line_name&&null!=e.line_name&&(this.line_name=this.line_name+" "+e.line_name)),this.ruta="",e.hasOwnProperty("fares")&&null!=e.fares&&0!=e.fares.length){this.listTarifasSelected=[];for(var t={},n=0;n<e.fares.length;n++)null!=e.fares[n]&&(t={},t=this.formattedTarifa(e.fares[n]),null!=t&&this.listTarifasSelected.push(t),n==e.fares[n].length-1?this.ruta+=e.fares[n].destination_stop_code:this.ruta=this.ruta+e.fares[n].destination_stop_code+" - ")}if(e.hasOwnProperty("drivers")&&null!=e.drivers&&0!=e.drivers.length){this.listChoferesSelected=[];for(var t={},n=0;n<e.drivers.length;n++)null!=e.drivers[n]&&(t={},t=e.drivers[n],null!=t&&this.listChoferesSelected.push(t))}}if(e.hasOwnProperty("business_id")&&(this.lineaSelected={},this.lineaSelected.id=e.business_id,e.hasOwnProperty("line_code")&&(this.lineaSelected.code=e.line_code),e.hasOwnProperty("line_name")&&(this.lineaSelected.name=e.line_name)),e.hasOwnProperty("type")&&null!=e.type&&null!=e.type&&""!=e.type&&(this.type=e.type),e.hasOwnProperty("departure_date")&&null!=e.departure_date&&null!=e.departure_date&&""!=e.departure_date)try{var r=e.departure_date.split("T");null!=r&&(this.fecha=r[0],this.time=r[1].split(":"),this.time=this.time[0]+":"+this.time[1])}catch(e){}e.hasOwnProperty("vehicle_id")&&(this.vehicleSelected={},this.vehicleSelected.id=e.vehicle_id,e.hasOwnProperty("vehicle_bodywork")&&(this.vehicleSelected.bodywork=e.vehicle_bodywork),e.hasOwnProperty("vehicle_license_plate")&&(this.vehicleSelected.license_plate=e.vehicle_license_plate,this.vehicleSelectedShow=this.vehicleSelected.license_plate),e.hasOwnProperty("vehicle_type_id")&&(this.vehicleSelected.vehicle_type_id=e.vehicle_type_id),e.hasOwnProperty("vehicle_owner_id")&&(this.vehicleSelected.owner_id=e.vehicle_owner_id)),e.hasOwnProperty("seats_active")&&(this.capacidad=e.seats_active),e.hasOwnProperty("boarding_gate")&&(this.puerta=e.boarding_gate),e.hasOwnProperty("passenger_limits")&&null!=e.passenger_limits&&null!=e.passenger_limits&&""!=e.passenger_limits&&e.passenger_limits.hasOwnProperty("ELDERLY")&&(this.capacidad_mayor=e.passenger_limits.ELDERLY),e.hasOwnProperty("status")&&(this.status_publicacion=e.status),e.hasOwnProperty("active")&&(this.active_status=e.active)},e.TravelCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPaginaLine=e.detalles,this.totalPageLine=e.pagina,null==this.listLines||this.listLines==null||0==this.listLines.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.TravelCreateComponent.prototype.getValueFirstLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.TravelCreateComponent.prototype.getValuePreviousLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.TravelCreateComponent.prototype.getValueLastLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.TravelCreateComponent.prototype.getValueNextLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.TravelCreateComponent.prototype.callServicesLine=function(e,t){let n=_("message_dflt_4");this.pageSelectedLine=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("line-report",i,this.jsonFilterLine);r.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaLine(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.TravelCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listLines=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listLines=[];else if(null==e.count||null==e.count||0==e.count)this.listLines=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listLines=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listLines.push(n);this.pagingActualLine.count=e.count}else this.listLines=[]}},e.TravelCreateComponent.prototype.openModalLineas=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],$("#modalLineas").modal("show")},e.TravelCreateComponent.prototype.buscarLinea=function(){this.jsonFilterLine={};var e=[],t=null;if(null==this.linea_buscar||null==this.linea_buscar||""==this.linea_buscar||"null"==this.linea_buscar||(null==t&&(t={}),t.name="*"+this.linea_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterLine.entities=n}this.jsonFilterLine.sort={"info.created_at":"desc"},this.callServicesLine(1,"&offset=0&limit="+this.detallePorPaginaLine)},e.TravelCreateComponent.prototype.selectedLinea=function(e){null!=e&&($("#modalLineas").modal("hide"),this.lineaSelected=e,this.rutaSelected=null,this.rutaSelectedShow=null,this.vehicleSelected=null,this.vehicleSelectedShow=null,this.listChoferes=[],this.listChoferesSelected=[],this.listTarifas=[],this.listTarifasSelected=[],e.hasOwnProperty("name")&&(this.lineaSelectedShow=e.name))},e.TravelCreateComponent.prototype.getCantidadSelectedRuta=function(e){null==e||e==null||""==e||(this.detallePorPaginaRuta=e.detalles,this.totalPageRuta=e.pagina,null==this.listRutas||this.listRutas==null||0==this.listRutas.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesRuta(1,"&limit="+this.detallePorPaginaRuta))},e.TravelCreateComponent.prototype.getValueFirstRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("first_page")&&null!=this.pagingActualRuta.first_page&&this.pagingActualRuta.first_page!=null&&""!=this.pagingActualRuta.first_page&&this.callServicesRuta(e,this.pagingActualRuta.first_page)},e.TravelCreateComponent.prototype.getValuePreviousRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("previous_page")&&null!=this.pagingActualRuta.previous_page&&this.pagingActualRuta.previous_page!=null&&""!=this.pagingActualRuta.previous_page&&this.callServicesRuta(e,this.pagingActualRuta.previous_page)},e.TravelCreateComponent.prototype.getValueLastRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("last_page")&&null!=this.pagingActualRuta.last_page&&this.pagingActualRuta.last_page!=null&&""!=this.pagingActualRuta.last_page&&this.callServicesRuta(e,this.pagingActualRuta.last_page)},e.TravelCreateComponent.prototype.getValueNextRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("next_page")&&null!=this.pagingActualRuta.next_page&&this.pagingActualRuta.next_page!=null&&""!=this.pagingActualRuta.next_page&&this.callServicesRuta(e,this.pagingActualRuta.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsRuta=function(e){this.pageSelectedRuta=e},e.TravelCreateComponent.prototype.callServicesRuta=function(e,t){let n=_("message_dflt_4");this.pageSelectedRuta=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("route-search",i,this.jsonFilterRoute);r.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaRuta(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.TravelCreateComponent.prototype.procesarRespuestaRuta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRutas=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listRutas=[];else if(null==e.count||null==e.count||0==e.count)this.listRutas=[];else{this.pagingActualRuta={},this.pagingActualRuta.count=e.count;let t=Math.floor(this.pagingActualRuta.count/this.detallePorPaginaRuta),i=this.pagingActualRuta.count%this.detallePorPaginaRuta;if(this.totalPageRuta=0==i?t:t+1,e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?this.detallePorPaginaRuta.next_page=null:this.detallePorPaginaRuta.next_page=e.next_page:this.pagingActualRuta.next_page=null,this.pagingActualRuta.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualRuta.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualRuta.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRutas=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listRutas.push(n);this.pagingActualRuta.count=e.count}else this.listRutas=[]}},e.TravelCreateComponent.prototype.openModalRuta=function(){return null==this.lineaSelected?(this.mensaje="Debe seleccionar la l\xEDnea de transporte primero",void this.msg.warning()):void(this.mensajeServicio=null,this.mostrarCargando=!1,this.ruta_buscar=null,this.listRutas=[],$("#modalRuta").modal("show"))},e.TravelCreateComponent.prototype.buscarRuta=function(){this.jsonFilterRoute={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,null==this.ruta_buscar||null==this.ruta_buscar||""==this.ruta_buscar||"null"==this.ruta_buscar||(null==t&&(t={}),t.name="*"+this.ruta_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterRoute.entities=n}this.jsonFilterRoute.sort={"info.created_at":"desc"},this.callServicesRuta(1,"&offset=0&limit="+this.detallePorPaginaRuta)},e.TravelCreateComponent.prototype.selectedRuta=function(e){if(null!=e&&($("#modalRuta").modal("hide"),this.rutaSelected=e,e.hasOwnProperty("stops")&&null!=e.stops&&0!=e.stops.length)){this.rutaSelectedShow="";for(var t=0;t<e.stops.length;t++)null!=e.stops[t]&&(t==e.stops[t].length-1?this.rutaSelectedShow+=e.stops[t].code:this.rutaSelectedShow=this.rutaSelectedShow+e.stops[t].code+" - ")}},e.TravelCreateComponent.prototype.getCantidadSelectedVehicle=function(e){null==e||e==null||""==e||(this.detallePorPaginaVehicle=e.detalles,this.totalPageVehicle=e.pagina,null==this.listVehicles||this.listVehicles==null||0==this.listVehicles.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesVehicle(1,"&limit="+this.detallePorPaginaVehicle))},e.TravelCreateComponent.prototype.getValueFirstVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("first_page")&&null!=this.pagingActualVehicle.first_page&&this.pagingActualVehicle.first_page!=null&&""!=this.pagingActualVehicle.first_page&&this.callServicesVehicle(e,this.pagingActualVehicle.first_page)},e.TravelCreateComponent.prototype.getValuePreviousVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("previous_page")&&null!=this.pagingActualVehicle.previous_page&&this.pagingActualVehicle.previous_page!=null&&""!=this.pagingActualVehicle.previous_page&&this.callServicesVehicle(e,this.pagingActualVehicle.previous_page)},e.TravelCreateComponent.prototype.getValueLastVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("last_page")&&null!=this.pagingActualVehicle.last_page&&this.pagingActualVehicle.last_page!=null&&""!=this.pagingActualVehicle.last_page&&this.callServicesVehicle(e,this.pagingActualVehicle.last_page)},e.TravelCreateComponent.prototype.getValueNextVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("next_page")&&null!=this.pagingActualVehicle.next_page&&this.pagingActualVehicle.next_page!=null&&""!=this.pagingActualVehicle.next_page&&this.callServicesVehicle(e,this.pagingActualVehicle.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsVehicle=function(e){this.pageSelectedVehicle=e},e.TravelCreateComponent.prototype.callServicesVehicle=function(e,t){let n=_("message_dflt_4");this.pageSelectedVehicle=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("car-report",i,this.jsonFilterVehicle);r.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaVehicle(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.TravelCreateComponent.prototype.procesarRespuestaVehicle=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listVehicles=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listLines=[];else if(null==e.count||null==e.count||0==e.count)this.listVehicles=[];else{this.pagingActualVehicle={},this.pagingActualVehicle.count=e.count;let t=Math.floor(this.pagingActualVehicle.count/this.detallePorPaginaVehicle),i=this.pagingActualVehicle.count%this.detallePorPaginaVehicle;if(this.totalPageVehicle=0==i?t:t+1,this.pagingActualVehicle.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualVehicle.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualVehicle.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualVehicle.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listVehicles=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listVehicles.push(n);this.pagingActualVehicle.count=e.count}else this.listVehicles=[]}},e.TravelCreateComponent.prototype.openModalLineas=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],$("#modalLineas").modal("show")},e.TravelCreateComponent.prototype.openModalVehicle=function(){return null==this.lineaSelected?(this.mensaje="Debe seleccionar la l\xEDnea de transporte primero",void this.msg.warning()):void(this.mensajeServicio=null,this.mostrarCargando=!1,this.vehicle_buscar=null,this.listVehicles=[],$("#modalVehicles").modal("show"))},e.TravelCreateComponent.prototype.buscarVehicle=function(){this.jsonFilterVehicle={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,null==this.vehicle_buscar||null==this.vehicle_buscar||""==this.vehicle_buscar||"null"==this.vehicle_buscar||(null==t&&(t={}),t.license_plate="*"+this.vehicle_buscar+"*"),t.active=!0,null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterVehicle.entities=n}this.jsonFilterVehicle.sort={"info.created_at":"desc"},this.callServicesVehicle(1,"&offset=0&limit="+this.detallePorPaginaVehicle)},e.TravelCreateComponent.prototype.selectedVehicle=function(e){null!=e&&($("#modalVehicles").modal("hide"),this.vehicleSelected=e,e.hasOwnProperty("license_plate")&&(this.vehicleSelectedShow=e.license_plate))},e.TravelCreateComponent.prototype.searchTarifas=function(){return null==this.lineaSelected||null==this.vehicleSelected?(this.mensaje="Antes de colocar las tarifas debe seleccionar la linea de transporte y el veh\xEDculo",void this.msg.warning()):void(this.jsonFilterTarifa={},this.jsonFilterTarifa.line_id=this.lineaSelected.id,this.jsonFilterTarifa.vehicle_type_id=this.vehicleSelected.vehicle_type_id,null!=this.codigo_ciudad&&this.codigo_ciudad!=null&&""!=this.codigo_ciudad&&"null"!=this.codigo_ciudad&&(this.jsonFilterTarifa.destination_stop=this.codigo_ciudad.trim()),this.callServicesTarifa(1,"&limit="+this.detallePorPaginaTarifa))},e.TravelCreateComponent.prototype.getCantidadSelectedTarifa=function(e){if(null!=e&&null!=e&&""!=e){if(this.detallePorPaginaTarifa=e.detalles,this.totalPageTarifa=e.pagina,null==this.listTarifas||null==this.listTarifas||0==this.listTarifas.length)return this.mensaje=capitalizeOnly(_("message_dflt_4")),void this.msg.warning();this.callServicesTarifa(1,"&limit="+this.detallePorPaginaTarifa)}},e.TravelCreateComponent.prototype.getValueFirstTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("first_page")&&null!=this.pagingActualTarifa.first_page&&this.pagingActualTarifa.first_page!=null&&""!=this.pagingActualTarifa.first_page&&this.callServicesTarifa(e,this.pagingActualTarifa.first_page)},e.TravelCreateComponent.prototype.getValuePreviousTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("previous_page")&&null!=this.pagingActualTarifa.previous_page&&this.pagingActualTarifa.previous_page!=null&&""!=this.pagingActualTarifa.previous_page&&this.callServicesTarifa(e,this.pagingActualTarifa.previous_page)},e.TravelCreateComponent.prototype.getValueLastTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("last_page")&&null!=this.pagingActualTarifa.last_page&&this.pagingActualTarifa.last_page!=null&&""!=this.pagingActualTarifa.last_page&&this.callServicesTarifa(e,this.pagingActualTarifa.last_page)},e.TravelCreateComponent.prototype.getValueNextTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("next_page")&&null!=this.pagingActualTarifa.next_page&&this.pagingActualTarifa.next_page!=null&&""!=this.pagingActualTarifa.next_page&&this.callServicesTarifa(e,this.pagingActualTarifa.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsTarifa=function(e){this.pageSelectedTarifa=e},e.TravelCreateComponent.prototype.callServicesTarifa=function(e,t){let n=_("message_dflt_4");this.pageSelectedTarifa=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("fare-report",i,this.jsonFilterTarifa);r.subscribe(e=>{this.procesarRespuestaTarifa(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.TravelCreateComponent.prototype.procesarRespuestaTarifa=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listTarifas=[],this.mensajeServicio=t;else if(200==e.status_http){if(!e.hasOwnProperty("count"))return this.listTarifas=[],this.mensaje=_("warning55"),void this.msg.warning();if(null==e.count||null==e.count||0==e.count)return this.listTarifas=[],this.listTarifas=[],this.mensaje=_("warning55"),void this.msg.warning();else{this.pagingActualTarifa={},this.pagingActualTarifa.count=e.count;let t=Math.floor(this.pagingActualTarifa.count/this.detallePorPaginaTarifa),i=this.pagingActualTarifa.count%this.detallePorPaginaTarifa;if(this.totalPageVehicle=0==i?t:t+1,this.pagingActualTarifa.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualTarifa.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualTarifa.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualTarifa.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listTarifas=[];for(var r=0;r<e.results.length;r++)n=this.formattedTarifa(e.results[r]),null!=n&&this.listTarifas.push(n);this.pagingActualTarifa.count=e.count}else this.listTarifas=[]}}else return this.mensaje=this.service.processMessageError(e,t),void this.msg.error()},e.TravelCreateComponent.prototype.formattedTarifa=function(e){if(null==e||e==null||""==e)return null;if(e.hasOwnProperty("amount")&&null!=e.amount&&null!=e.amount&&""!=e.amount)try{e.formatted_amount=amountFormattingObject(100*e.amount),e.formatted_amount=e.formatted_amount.integerPart+","+e.formatted_amount.decimalPart,e.hasOwnProperty("currency")&&null!=e.currency&&""!=e.currency&&null!=e.currency&&(e.formatted_amount=e.formatted_amount+" "+e.currency)}catch(e){}return e},e.TravelCreateComponent.prototype.selectedTarifa=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listTarifas&&0!=this.listTarifas.length)for(var t=0;t<this.listTarifas.length;t++)if(null!=this.listTarifas[t]&&this.listTarifas[t].id==e.id)if(null==this.listTarifas[t].classSelected)this.listTarifasSelected.push(this.listTarifas[t]),this.listTarifas[t].classSelected="selected";else{this.listTarifas[t].classSelected=null;for(var n=0;n<this.listTarifasSelected.length;n++)if(null!=this.listTarifasSelected[n]&&this.listTarifasSelected[n].id==e.id){var r=this.listTarifasSelected.slice(n+1);this.listTarifasSelected=this.listTarifasSelected.slice(0,n),this.listTarifasSelected=this.listTarifasSelected.concat(r)}}},e.TravelCreateComponent.prototype.searchChoferes=function(){if(null==this.lineaSelected)return this.mensaje="Antes de seleccionar el chofer debe seleccionar la l\xEDnea de transporte",void this.msg.warning();this.jsonFilterChofer={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,null==this.rif_buscar||null==this.rif_buscar||""==this.rif_buscar||"null"==this.rif_buscar||(null==t&&(t={}),t.id_doc="*"+this.rif_buscar.trim()+"*"),null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||"null"==this.nombre_buscar||(null==t&&(t={}),t.name="*"+this.nombre_buscar.trim()+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterChofer.entities=n}this.jsonFilterChofer.sort={"info.created_at":"desc"},this.callServicesChofer(1,"&limit="+this.detallePorPaginaChofer)},e.TravelCreateComponent.prototype.getCantidadSelectedChofer=function(e){if(null!=e&&null!=e&&""!=e){if(this.detallePorPaginaChofer=e.detalles,this.totalPageChofer=e.pagina,null==this.listChoferes||null==this.listChoferes||0==this.listChoferes.length)return this.mensaje=capitalizeOnly(_("message_dflt_4")),void this.msg.warning();this.callServicesChofer(1,"&limit="+this.detallePorPaginaChofer)}},e.TravelCreateComponent.prototype.getValueFirstChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("first_page")&&null!=this.pagingActualChofer.first_page&&this.pagingActualChofer.first_page!=null&&""!=this.pagingActualChofer.first_page&&this.callServicesChofer(e,this.pagingActualChofer.first_page)},e.TravelCreateComponent.prototype.getValuePreviousChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("previous_page")&&null!=this.pagingActualChofer.previous_page&&this.pagingActualChofer.previous_page!=null&&""!=this.pagingActualChofer.previous_page&&this.callServicesChofer(e,this.pagingActualChofer.previous_page)},e.TravelCreateComponent.prototype.getValueLastChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("last_page")&&null!=this.pagingActualChofer.last_page&&this.pagingActualChofer.last_page!=null&&""!=this.pagingActualChofer.last_page&&this.callServicesChofer(e,this.pagingActualChofer.last_page)},e.TravelCreateComponent.prototype.getValueNextChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("next_page")&&null!=this.pagingActualChofer.next_page&&this.pagingActualChofer.next_page!=null&&""!=this.pagingActualChofer.next_page&&this.callServicesChofer(e,this.pagingActualChofer.next_page)},e.TravelCreateComponent.prototype.getValueChangeRecordsChofer=function(e){this.pageSelectedChofer=e},e.TravelCreateComponent.prototype.callServicesChofer=function(e,t){let n=_("message_dflt_4");this.pageSelectedChofer=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("driver-report",i,this.jsonFilterChofer);r.subscribe(e=>{this.procesarRespuestaChofer(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.TravelCreateComponent.prototype.procesarRespuestaChofer=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listChoferes=[],this.mensaje=t,this.msg.error();else{if(200!=e.status_http)return this.mensaje=this.service.processMessageError(e,t),void this.msg.error();if(!e.hasOwnProperty("count"))this.listChoferes=[];else if(null==e.count||null==e.count||0==e.count)this.listChoferes=[];else{this.pagingActualChofer={},this.pagingActualChofer.count=e.count;let t=Math.floor(this.pagingActualChofer.count/this.detallePorPaginaChofer),i=this.pagingActualChofer.count%this.detallePorPaginaChofer;if(this.totalPageChofer=0==i?t:t+1,this.pagingActualChofer.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualChofer.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualChofer.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualChofer.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listChoferes=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listChoferes.push(n);this.pagingActualChofer.count=e.count}else this.listChoferes=[]}}},e.TravelCreateComponent.prototype.selectedChoferes=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listChoferes&&0!=this.listChoferes.length)for(var t=0;t<this.listChoferes.length;t++)if(null!=this.listChoferes[t]&&this.listChoferes[t].id==e.id)if(null==this.listChoferes[t].classSelected)this.listChoferesSelected.push(this.listChoferes[t]),this.listChoferes[t].classSelected="selected";else{this.listChoferes[t].classSelected=null;for(var n=0;n<this.listChoferesSelected.length;n++)if(null!=this.listChoferesSelected[n]&&this.listChoferesSelected[n].id==e.id){var r=this.listChoferesSelected.slice(n+1);this.listChoferesSelected=this.listChoferesSelected.slice(0,n),this.listChoferesSelected=this.listChoferesSelected.concat(r)}}},e.TravelCreateComponent.prototype.openModalLineas=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],$("#modalLineas").modal("show")},e.TravelCreateComponent.prototype.openModalVehicle=function(){return null==this.lineaSelected?(this.mensaje="Debe seleccionar la l\xEDnea de transporte primero",void this.msg.warning()):void(this.mensajeServicio=null,this.mostrarCargando=!1,this.vehicle_buscar=null,this.listVehicles=[],$("#modalVehicles").modal("show"))},e.TravelCreateComponent.prototype.buscarVehicle=function(){this.jsonFilterVehicle={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.lineaSelected.id,null==this.vehicle_buscar||null==this.vehicle_buscar||""==this.vehicle_buscar||"null"==this.vehicle_buscar||(null==t&&(t={}),t.license_plate="*"+this.vehicle_buscar+"*"),t.active=!0,null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterVehicle.entities=n}this.jsonFilterVehicle.sort={"info.created_at":"desc"},this.callServicesVehicle(1,"&offset=0&limit="+this.detallePorPaginaVehicle)},e.TravelCreateComponent.prototype.selectedVehicle=function(e){null!=e&&($("#modalVehicles").modal("hide"),this.vehicleSelected=e,this.listTarifas=[],this.listTarifasSelected=[],e.hasOwnProperty("license_plate")&&(this.vehicleSelectedShow=e.license_plate),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity))},e.TravelCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/travel-report"])},e.TravelCreateComponent.prototype.clean=function(){this.lineaSelected=null,this.lineaSelectedShow=null,this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.pagingActualLine={},this.listTarifasSelected=[],this.vehicleSelected=null,this.vehicleSelectedShow=null,this.totalPageVehicle=1,this.pageSelectedVehicle=1,this.detallePorPaginaVehicle=10,this.pagingActualVehicle={},this.listVehicles=[],this.vehicle_buscar=null,this.rutaSelected=null,this.rutaSelectedShow=null,this.totalPageRuta=1,this.pageSelectedRuta=1,this.detallePorPaginaRuta=10,this.pagingActualRuta={},this.listRutas=[],this.ruta_buscar=null,this.codigo_ciudad=null,this.pagingActualTarifa={},this.totalPageTarifa=1,this.detallePorPaginaTarifa=10,this.pageSelectedTarifa=1,this.listTarifas=[],this.capacidad=0,this.rif_buscar=null,this.nombre_buscar=null,this.pagingActualChofer={},this.totalPageChofer=1,this.detallePorPaginaChofer=10,this.pageSelectedChofer=1,this.listChoferes=[],this.listChoferesSelected=[]},e.TravelCreateComponent.prototype.done=function(){var e={},t="";if(null==this.type||"null"==this.type||null==this.type||""==this.type)return this.mensaje="Debe ingresar el tipo de viaje",void this.msg.warning();if(t="?type="+this.type,null==this.lineaSelected)return this.mensaje="Debe seleccionar la linea de transporte que realizar\xE1 el viaje",void this.msg.warning();if(null==this.vehicleSelected)return this.mensaje="Debe seleccionar el veh\xEDculo que realizar\xE1 el viaje",void this.msg.warning();if(this.capacidad>this.vehicleSelected.capacity)return this.mensaje="La capacidad introducida no est\xE1 acorde a la capacidad del veh\xEDculo, debe ser igual o menor a "+this.vehicleSelected.capacity,void this.msg.warning();if(e.vehicle_id=this.vehicleSelected.id,t=t+"&realm="+this.service.getRealm()+"&vehicle_id="+this.vehicleSelected.id+"&vehicle_type_id="+this.vehicleSelected.vehicle_type_id+"&vehicle_owner_id="+this.vehicleSelected.owner_id,this.save){if(null==this.rutaSelected)return this.mensaje="Debe seleccionar ruta que se realizar\xE1",void this.msg.warning();t=t+"&itinerary_id="+this.rutaSelected.id}if(null==this.fecha||null==this.fecha||""==this.fecha)return this.mensaje="Debe ingresar la fecha del viaje",void this.msg.warning();var n=new Date;try{new Date(this.fecha)}catch(e){}if(null==this.time||null==this.time||""==this.time)return this.mensaje="Debe ingresar la hora del viaje",void this.msg.warning();if(null==this.capacidad||0==this.capacidad||"0"==this.capacidad)return this.mensaje="Debe ingresar la capacidad de asientos a vender",void this.msg.warning();e.seats_active=parseInt(this.capacidad),null==this.puerta||null==this.puerta||""==this.puerta||(e.boarding_gate=this.puerta.trim().toUpperCase()),null==this.capacidad_mayor||0==this.capacidad_mayor||"0"==this.capacidad_mayor||(e.passenger_limits={},e.passenger_limits.ELDERLY=parseInt(this.capacidad_mayor)),e.departure_date=this.fecha+"T"+this.time+":00.000Z",e.active=this.active_status,e.status=this.status_publicacion;var r=[];if(null==this.listChoferesSelected||0==this.listChoferesSelected.length)return this.mensaje="Debe seleccionar al menos un chofer que realizar\xE1 este viaje",void this.msg.warning();for(var s=0;s<this.listChoferesSelected.length;s++)null!=this.listChoferesSelected[s]&&r.push(this.listChoferesSelected[s].id);var o=[];if(null==this.listTarifasSelected||0==this.listTarifasSelected.length)return this.mensaje="Debe seleccionar las tarifas a cobrar",void this.msg.warning();for(var s=0;s<this.listTarifasSelected.length;s++)null!=this.listTarifasSelected[s]&&o.push(this.listTarifasSelected[s].id);e.drivers=r,e.fares=o;let d=_("message_dflt_71"),l=null;this.save?l=this.service.callServicesHttp("travel-post",this.lineaSelected.id+t,e):(d=_("message_dflt_72"),l=this.service.callServicesHttp("travel-put",this.business_id+t+"&itinerary_id="+this.itinerary_id+"&id="+this.id,e)),l.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,d),this.msg.error()})},e.TravelCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_71");this.save||(t=_("message_dflt_72")),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success52")):capitalizeOnly(_("success53")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TravelCreateLineComponent=ng.core.Component({selector:"travel-create-line",templateUrl:"views/travel-create-line.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,e.LoadingServiceComponent,function(e,t,n,i,r){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i,this.loading=r}]}),e.TravelCreateLineComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title65")),this.disponibilidad=null,this.fecha=null,this.hora=null,this.save=!0,this.mostrarCargando=!1,this.imagenCargando="assets/images/loading.gif",this.listTypes=[{value:"LONG_ROUTE",name:"Ruta Larga"},{value:"SHORT_ROUTE",name:"Ruta Corta"}],this.type=null,this.lineaSelected=null,this.lineaSelectedShow=null,this.listTarifasSelected=[],this.capacidad_mayor=0,this.vehicleSelected=null,this.vehicleSelectedShow=null,this.totalPageVehicle=1,this.pageSelectedVehicle=1,this.detallePorPaginaVehicle=10,this.pagingActualVehicle={},this.listVehicles=[],this.vehicle_buscar=null,this.rutaSelected=null,this.rutaSelectedShow=null,this.totalPageRuta=1,this.pageSelectedRuta=1,this.detallePorPaginaRuta=10,this.pagingActualRuta={},this.listRutas=[],this.ruta_buscar=null,this.codigo_ciudad=null,this.pagingActualTarifa={},this.totalPageTarifa=1,this.detallePorPaginaTarifa=10,this.pageSelectedTarifa=1,this.listTarifas=[],this.capacidad=0,this.pagingActualChofer={},this.totalPageChofer=1,this.detallePorPaginaChofer=10,this.pageSelectedChofer=1,this.listChoferes=[],this.listChoferesSelected=[],this.texto="Guardar",this.active_status=!0,this.status_publicacion="UNPUBLISHED";try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.TravelCreateLineComponent.prototype.checkRol=function(){var e="TRIP-LINE-CREATE";this.active.url.hasOwnProperty("_value")&&("travel-create-line"==this.active.url._value[0].path?(this.title=_("title65"),this.save=!0,e="TRIP-LINE-CREATE"):(this.title=_("title63"),this.save=!1,e="TRIP-LINE-UPDATE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TravelCreateLineComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.TravelCreateLineComponent.prototype.getCantidadSelectedRuta=function(e){null==e||e==null||""==e||(this.detallePorPaginaRuta=e.detalles,this.totalPageRuta=e.pagina,null==this.listRutas||this.listRutas==null||0==this.listRutas.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesRuta(1,"&limit="+this.detallePorPaginaRuta))},e.TravelCreateLineComponent.prototype.getValueFirstRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("first_page")&&null!=this.pagingActualRuta.first_page&&this.pagingActualRuta.first_page!=null&&""!=this.pagingActualRuta.first_page&&this.callServicesRuta(e,this.pagingActualRuta.first_page)},e.TravelCreateLineComponent.prototype.getValuePreviousRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("previous_page")&&null!=this.pagingActualRuta.previous_page&&this.pagingActualRuta.previous_page!=null&&""!=this.pagingActualRuta.previous_page&&this.callServicesRuta(e,this.pagingActualRuta.previous_page)},e.TravelCreateLineComponent.prototype.getValueLastRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("last_page")&&null!=this.pagingActualRuta.last_page&&this.pagingActualRuta.last_page!=null&&""!=this.pagingActualRuta.last_page&&this.callServicesRuta(e,this.pagingActualRuta.last_page)},e.TravelCreateLineComponent.prototype.getValueNextRuta=function(e){this.listRutas=[],this.pagingActualRuta.hasOwnProperty("next_page")&&null!=this.pagingActualRuta.next_page&&this.pagingActualRuta.next_page!=null&&""!=this.pagingActualRuta.next_page&&this.callServicesRuta(e,this.pagingActualRuta.next_page)},e.TravelCreateLineComponent.prototype.getValueChangeRecordsRuta=function(e){this.pageSelectedRuta=e},e.TravelCreateLineComponent.prototype.callServicesRuta=function(e,t){let n=_("message_dflt_4");this.pageSelectedRuta=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("route-line-report",i,this.jsonFilterRoute);r.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaRuta(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.TravelCreateLineComponent.prototype.procesarRespuestaRuta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRutas=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listRutas=[];else if(null==e.count||null==e.count||0==e.count)this.listRutas=[];else{this.pagingActualRuta={},this.pagingActualRuta.count=e.count;let t=Math.floor(this.pagingActualRuta.count/this.detallePorPaginaRuta),i=this.pagingActualRuta.count%this.detallePorPaginaRuta;if(this.totalPageRuta=0==i?t:t+1,e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?this.detallePorPaginaRuta.next_page=null:this.detallePorPaginaRuta.next_page=e.next_page:this.pagingActualRuta.next_page=null,this.pagingActualRuta.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualRuta.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualRuta.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRutas=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listRutas.push(n);this.pagingActualRuta.count=e.count}else this.listRutas=[]}},e.TravelCreateLineComponent.prototype.openModalRuta=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.ruta_buscar=null,this.listRutas=[],$("#modalRuta").modal("show")},e.TravelCreateLineComponent.prototype.buscarRuta=function(){this.jsonFilterRoute={},null==this.ruta_buscar||this.ruta_buscar==null||""==this.ruta_buscar||"null"==this.ruta_buscar||(this.jsonFilterRoute.name=this.ruta_buscar),this.jsonFilterRoute.active=!0,this.callServicesRuta(1,"&offset=0&limit="+this.detallePorPaginaRuta)},e.TravelCreateLineComponent.prototype.selectedRuta=function(e){if(null!=e&&($("#modalRuta").modal("hide"),this.rutaSelected=e,e.hasOwnProperty("stops")&&null!=e.stops&&0!=e.stops.length)){this.rutaSelectedShow="";for(var t=0;t<e.stops.length;t++)null!=e.stops[t]&&(t==e.stops[t].length-1?this.rutaSelectedShow+=e.stops[t].code:this.rutaSelectedShow=this.rutaSelectedShow+e.stops[t].code+" - ")}},e.TravelCreateLineComponent.prototype.getCantidadSelectedVehicle=function(e){null==e||e==null||""==e||(this.detallePorPaginaVehicle=e.detalles,this.totalPageVehicle=e.pagina,null==this.listVehicles||this.listVehicles==null||0==this.listVehicles.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesVehicle(1,"&limit="+this.detallePorPaginaVehicle))},e.TravelCreateLineComponent.prototype.getValueFirstVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("first_page")&&null!=this.pagingActualVehicle.first_page&&this.pagingActualVehicle.first_page!=null&&""!=this.pagingActualVehicle.first_page&&this.callServicesVehicle(e,this.pagingActualVehicle.first_page)},e.TravelCreateLineComponent.prototype.getValuePreviousVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("previous_page")&&null!=this.pagingActualVehicle.previous_page&&this.pagingActualVehicle.previous_page!=null&&""!=this.pagingActualVehicle.previous_page&&this.callServicesVehicle(e,this.pagingActualVehicle.previous_page)},e.TravelCreateLineComponent.prototype.getValueLastVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("last_page")&&null!=this.pagingActualVehicle.last_page&&this.pagingActualVehicle.last_page!=null&&""!=this.pagingActualVehicle.last_page&&this.callServicesVehicle(e,this.pagingActualVehicle.last_page)},e.TravelCreateLineComponent.prototype.getValueNextVehicle=function(e){this.listVehicles=[],this.pagingActualVehicle.hasOwnProperty("next_page")&&null!=this.pagingActualVehicle.next_page&&this.pagingActualVehicle.next_page!=null&&""!=this.pagingActualVehicle.next_page&&this.callServicesVehicle(e,this.pagingActualVehicle.next_page)},e.TravelCreateLineComponent.prototype.getValueChangeRecordsVehicle=function(e){this.pageSelectedVehicle=e},e.TravelCreateLineComponent.prototype.callServicesVehicle=function(e,t){let n=_("message_dflt_4");this.pageSelectedVehicle=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="&type=PAGINATE"+t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("car-report-line",i,this.jsonFilterVehicle);r.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaVehicle(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.TravelCreateLineComponent.prototype.procesarRespuestaVehicle=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listVehicles=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listLines=[];else if(null==e.count||null==e.count||0==e.count)this.listVehicles=[];else{this.pagingActualVehicle={},this.pagingActualVehicle.count=e.count;let t=Math.floor(this.pagingActualVehicle.count/this.detallePorPaginaVehicle),i=this.pagingActualVehicle.count%this.detallePorPaginaVehicle;if(this.totalPageVehicle=0==i?t:t+1,this.pagingActualVehicle.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualVehicle.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualVehicle.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualVehicle.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listVehicles=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listVehicles.push(n);this.pagingActualVehicle.count=e.count}else this.listVehicles=[]}},e.TravelCreateLineComponent.prototype.openModalVehicle=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.vehicle_buscar=null,this.listVehicles=[],$("#modalVehicles").modal("show")},e.TravelCreateLineComponent.prototype.buscarVehicle=function(){this.jsonFilterVehicle={},null==this.vehicle_buscar||this.vehicle_buscar==null||""==this.vehicle_buscar||"null"==this.vehicle_buscar||(this.jsonFilterVehicle.license_plate=this.vehicle_buscar.trim()),this.callServicesVehicle(1,"&offset=0&limit="+this.detallePorPaginaVehicle)},e.TravelCreateLineComponent.prototype.selectedVehicle=function(e){null!=e&&($("#modalVehicles").modal("hide"),this.vehicleSelected=e,this.listTarifas=[],this.listTarifasSelected=[],e.hasOwnProperty("license_plate")&&(this.vehicleSelectedShow=e.license_plate),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity))},e.TravelCreateLineComponent.prototype.searchTarifas=function(){return null==this.vehicleSelected?(this.mensaje="Antes de colocar las tarifas debe seleccionar el veh\xEDculo",void this.msg.warning()):void(this.jsonFilterTarifa={},this.jsonFilterTarifa.vehicle_type_id=this.vehicleSelected.vehicle_type_id,null!=this.codigo_ciudad&&this.codigo_ciudad!=null&&""!=this.codigo_ciudad&&"null"!=this.codigo_ciudad&&(this.jsonFilterTarifa.destination_stop=this.codigo_ciudad.trim()),this.callServicesTarifa(1,"&limit="+this.detallePorPaginaTarifa))},e.TravelCreateLineComponent.prototype.getCantidadSelectedTarifa=function(e){if(null!=e&&null!=e&&""!=e){if(this.detallePorPaginaTarifa=e.detalles,this.totalPageTarifa=e.pagina,null==this.listTarifas||null==this.listTarifas||0==this.listTarifas.length)return this.mensaje=capitalizeOnly(_("message_dflt_4")),void this.msg.warning();this.callServicesTarifa(1,"&limit="+this.detallePorPaginaTarifa)}},e.TravelCreateLineComponent.prototype.getValueFirstTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("first_page")&&null!=this.pagingActualTarifa.first_page&&this.pagingActualTarifa.first_page!=null&&""!=this.pagingActualTarifa.first_page&&this.callServicesTarifa(e,this.pagingActualTarifa.first_page)},e.TravelCreateLineComponent.prototype.getValuePreviousTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("previous_page")&&null!=this.pagingActualTarifa.previous_page&&this.pagingActualTarifa.previous_page!=null&&""!=this.pagingActualTarifa.previous_page&&this.callServicesTarifa(e,this.pagingActualTarifa.previous_page)},e.TravelCreateLineComponent.prototype.getValueLastTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("last_page")&&null!=this.pagingActualTarifa.last_page&&this.pagingActualTarifa.last_page!=null&&""!=this.pagingActualTarifa.last_page&&this.callServicesTarifa(e,this.pagingActualTarifa.last_page)},e.TravelCreateLineComponent.prototype.getValueNextTarifa=function(e){this.listTarifas=[],this.pagingActualTarifa.hasOwnProperty("next_page")&&null!=this.pagingActualTarifa.next_page&&this.pagingActualTarifa.next_page!=null&&""!=this.pagingActualTarifa.next_page&&this.callServicesTarifa(e,this.pagingActualTarifa.next_page)},e.TravelCreateLineComponent.prototype.getValueChangeRecordsTarifa=function(e){this.pageSelectedTarifa=e},e.TravelCreateLineComponent.prototype.callServicesTarifa=function(e,t){let n=_("message_dflt_4");this.pageSelectedTarifa=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("fare-report-line",i,this.jsonFilterTarifa);r.subscribe(e=>{this.procesarRespuestaTarifa(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.TravelCreateLineComponent.prototype.procesarRespuestaTarifa=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listTarifas=[],this.mensajeServicio=t;else{if(200!=e.status_http)return this.mensaje=this.service.processMessageError(e,t),void this.msg.error();if(!e.hasOwnProperty("count"))this.listTarifas=[];else if(null==e.count||null==e.count||0==e.count)this.listTarifas=[];else{this.pagingActualTarifa={},this.pagingActualTarifa.count=e.count;let t=Math.floor(this.pagingActualTarifa.count/this.detallePorPaginaTarifa),i=this.pagingActualTarifa.count%this.detallePorPaginaTarifa;if(this.totalPageVehicle=0==i?t:t+1,this.pagingActualTarifa.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualTarifa.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualTarifa.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualTarifa.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listTarifas=[];for(var r=0;r<e.results.length;r++)n=this.formattedTarifa(e.results[r]),null!=n&&this.listTarifas.push(n);this.pagingActualTarifa.count=e.count}else this.listTarifas=[]}}},e.TravelCreateLineComponent.prototype.formattedTarifa=function(e){if(null==e||e==null||""==e)return null;if(e.hasOwnProperty("amount")&&null!=e.amount&&null!=e.amount&&""!=e.amount)try{e.formatted_amount=amountFormattingObject(100*e.amount),e.formatted_amount=e.formatted_amount.integerPart+","+e.formatted_amount.decimalPart,e.hasOwnProperty("currency")&&null!=e.currency&&""!=e.currency&&null!=e.currency&&(e.formatted_amount=e.formatted_amount+" "+e.currency)}catch(e){}return e},e.TravelCreateLineComponent.prototype.selectedTarifa=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listTarifas&&0!=this.listTarifas.length)for(var t=0;t<this.listTarifas.length;t++)if(null!=this.listTarifas[t]&&this.listTarifas[t].id==e.id)if(null==this.listTarifas[t].classSelected)this.listTarifasSelected.push(this.listTarifas[t]),this.listTarifas[t].classSelected="selected";else{this.listTarifas[t].classSelected=null;for(var n=0;n<this.listTarifasSelected.length;n++)if(null!=this.listTarifasSelected[n]&&this.listTarifasSelected[n].id==e.id){var r=this.listTarifasSelected.slice(n+1);this.listTarifasSelected=this.listTarifasSelected.slice(0,n),this.listTarifasSelected=this.listTarifasSelected.concat(r)}}},e.TravelCreateLineComponent.prototype.searchChoferes=function(){this.jsonFilterChofer={};var e=[],t=null;if(null==t&&(t={}),t.business_id=this.service.getBusinessId(),null==this.rif_buscar||null==this.rif_buscar||""==this.rif_buscar||"null"==this.rif_buscar||(null==t&&(t={}),t.id_doc="*"+this.rif_buscar.trim()+"*"),null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||"null"==this.nombre_buscar||(null==t&&(t={}),t.name="*"+this.nombre_buscar.trim()+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterChofer.entities=n}this.jsonFilterChofer.sort={"info.created_at":"desc"},this.callServicesChofer(1,"&limit="+this.detallePorPaginaChofer)},e.TravelCreateLineComponent.prototype.getCantidadSelectedChofer=function(e){if(null!=e&&null!=e&&""!=e){if(this.detallePorPaginaChofer=e.detalles,this.totalPageChofer=e.pagina,null==this.listChoferes||null==this.listChoferes||0==this.listChoferes.length)return this.mensaje=capitalizeOnly(_("message_dflt_4")),void this.msg.warning();this.callServicesChofer(1,"&limit="+this.detallePorPaginaChofer)}},e.TravelCreateLineComponent.prototype.getValueFirstChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("first_page")&&null!=this.pagingActualChofer.first_page&&this.pagingActualChofer.first_page!=null&&""!=this.pagingActualChofer.first_page&&this.callServicesChofer(e,this.pagingActualChofer.first_page)},e.TravelCreateLineComponent.prototype.getValuePreviousChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("previous_page")&&null!=this.pagingActualChofer.previous_page&&this.pagingActualChofer.previous_page!=null&&""!=this.pagingActualChofer.previous_page&&this.callServicesChofer(e,this.pagingActualChofer.previous_page)},e.TravelCreateLineComponent.prototype.getValueLastChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("last_page")&&null!=this.pagingActualChofer.last_page&&this.pagingActualChofer.last_page!=null&&""!=this.pagingActualChofer.last_page&&this.callServicesChofer(e,this.pagingActualChofer.last_page)},e.TravelCreateLineComponent.prototype.getValueNextChofer=function(e){this.listChoferes=[],this.pagingActualChofer.hasOwnProperty("next_page")&&null!=this.pagingActualChofer.next_page&&this.pagingActualChofer.next_page!=null&&""!=this.pagingActualChofer.next_page&&this.callServicesChofer(e,this.pagingActualChofer.next_page)},e.TravelCreateLineComponent.prototype.getValueChangeRecordsChofer=function(e){this.pageSelectedChofer=e},e.TravelCreateLineComponent.prototype.callServicesChofer=function(e,t){let n=_("message_dflt_4");this.pageSelectedChofer=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("driver-report",i,this.jsonFilterChofer);r.subscribe(e=>{this.procesarRespuestaChofer(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.TravelCreateLineComponent.prototype.procesarRespuestaChofer=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listChoferes=[],this.mensaje=t,this.msg.error();else{if(200!=e.status_http)return this.mensaje=this.service.processMessageError(e,t),void this.msg.error();if(!e.hasOwnProperty("count"))this.listChoferes=[];else if(null==e.count||null==e.count||0==e.count)this.listChoferes=[];else{this.pagingActualChofer={},this.pagingActualChofer.count=e.count;let t=Math.floor(this.pagingActualChofer.count/this.detallePorPaginaChofer),i=this.pagingActualChofer.count%this.detallePorPaginaChofer;if(this.totalPageChofer=0==i?t:t+1,this.pagingActualChofer.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualChofer.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualChofer.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualChofer.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listChoferes=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listChoferes.push(n);this.pagingActualChofer.count=e.count}else this.listChoferes=[]}}},e.TravelCreateLineComponent.prototype.selectedChoferes=function(e){if(null!=e&&e!=null&&""!=e&&null!=this.listChoferes&&0!=this.listChoferes.length)for(var t=0;t<this.listChoferes.length;t++)if(null!=this.listChoferes[t]&&this.listChoferes[t].id==e.id)if(null==this.listChoferes[t].classSelected)this.listChoferesSelected.push(this.listChoferes[t]),this.listChoferes[t].classSelected="selected";else{this.listChoferes[t].classSelected=null;for(var n=0;n<this.listChoferesSelected.length;n++)if(null!=this.listChoferesSelected[n]&&this.listChoferesSelected[n].id==e.id){var r=this.listChoferesSelected.slice(n+1);this.listChoferesSelected=this.listChoferesSelected.slice(0,n),this.listChoferesSelected=this.listChoferesSelected.concat(r)}}},e.TravelCreateLineComponent.prototype.openModalVehicle=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.vehicle_buscar=null,this.listVehicles=[],$("#modalVehicles").modal("show")},e.TravelCreateLineComponent.prototype.getService=function(){},e.TravelCreateLineComponent.prototype.getValueMsg=function(){this.router.navigate(["/travel-report-line"])},e.TravelCreateLineComponent.prototype.clean=function(){this.lineaSelected=null,this.lineaSelectedShow=null,this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.pagingActualLine={},this.listTarifasSelected=[],this.vehicleSelected=null,this.vehicleSelectedShow=null,this.totalPageVehicle=1,this.pageSelectedVehicle=1,this.detallePorPaginaVehicle=10,this.pagingActualVehicle={},this.listVehicles=[],this.vehicle_buscar=null,this.rutaSelected=null,this.rutaSelectedShow=null,this.totalPageRuta=1,this.pageSelectedRuta=1,this.detallePorPaginaRuta=10,this.pagingActualRuta={},this.listRutas=[],this.ruta_buscar=null,this.codigo_ciudad=null,this.pagingActualTarifa={},this.totalPageTarifa=1,this.detallePorPaginaTarifa=10,this.pageSelectedTarifa=1,this.listTarifas=[],this.capacidad=0,this.rif_buscar=null,this.nombre_buscar=null,this.pagingActualChofer={},this.totalPageChofer=1,this.detallePorPaginaChofer=10,this.pageSelectedChofer=1,this.listChoferes=[],this.listChoferesSelected=[],this.capacidad_mayor=0},e.TravelCreateLineComponent.prototype.done=function(){var e={},t="";if(null==this.type||"null"==this.type||null==this.type||""==this.type)return this.mensaje="Debe ingresar el tipo de viaje",void this.msg.warning();if(t="&type="+this.type,null==this.vehicleSelected)return this.mensaje="Debe seleccionar el veh\xEDculo que realizar\xE1 el viaje",void this.msg.warning();if(this.capacidad>this.vehicleSelected.capacity)return this.mensaje="La capacidad introducida no est\xE1 acorde a la capacidad del veh\xEDculo, debe ser igual o menor a "+this.vehicleSelected.capacity,void this.msg.warning();if(e.vehicle_id=this.vehicleSelected.id,t=t+"&vehicle_id="+this.vehicleSelected.id+"&vehicle_type_id="+this.vehicleSelected.vehicle_type_id+"&vehicle_owner_id="+this.vehicleSelected.owner_id,null==this.rutaSelected)return this.mensaje="Debe seleccionar ruta que se realizar\xE1",void this.msg.warning();if(t=t+"&itinerary_id="+this.rutaSelected.id,null==this.fecha||null==this.fecha||""==this.fecha)return this.mensaje="Debe ingresar la fecha del viaje",void this.msg.warning();var n=new Date;try{new Date(this.fecha)}catch(e){}if(null==this.time||null==this.time||""==this.time)return this.mensaje="Debe ingresar la hora del viaje",void this.msg.warning();if(null==this.capacidad||0==this.capacidad||"0"==this.capacidad)return this.mensaje="Debe ingresar la capacidad de asientos a vender",void this.msg.warning();e.seats_active=parseInt(this.capacidad),null==this.puerta||null==this.puerta||""==this.puerta||(e.boarding_gate=this.puerta.trim().toUpperCase()),null==this.capacidad_mayor||0==this.capacidad_mayor||"0"==this.capacidad_mayor||(e.passenger_limits={},e.passenger_limits.ELDERLY=parseInt(this.capacidad_mayor)),e.departure_date=this.fecha+"T"+this.time+":00.000Z",e.active=this.active_status,e.status=this.status_publicacion;var r=[];if(null==this.listChoferesSelected||0==this.listChoferesSelected.length)return this.mensaje="Debe seleccionar al menos un chofer que realizar\xE1 este viaje",void this.msg.warning();for(var s=0;s<this.listChoferesSelected.length;s++)null!=this.listChoferesSelected[s]&&r.push(this.listChoferesSelected[s].id);var o=[];if(null==this.listTarifasSelected||0==this.listTarifasSelected.length)return this.mensaje="Debe seleccionar las tarifas a cobrar",void this.msg.warning();for(var s=0;s<this.listTarifasSelected.length;s++)null!=this.listTarifasSelected[s]&&o.push(this.listTarifasSelected[s].id);e.drivers=r,e.fares=o;let d=_("message_dflt_71"),l=null;this.save?l=this.service.callServicesHttp("travel-post-line",t,e):(d=_("message_dflt_72"),l=this.service.callServicesHttp("travel-put","&id="+this.id,e)),l.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,d),this.msg.error()})},e.TravelCreateLineComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_71");this.save||(t=_("message_dflt_72")),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success52")):capitalizeOnly(_("success53")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelCreateLineComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TripPassengerComponent=ng.core.Component({selector:"travel-passengers",templateUrl:"views/travel-passengers-v8.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.TripPassengerComponent.prototype.ngOnInit=function(){this.imagenCargando="assets/images/loading.gif",this.pagingActualTrip={},this.totalPageTrip=1,this.detallePorPaginaTrip=5,this.pageSelectedTrip=1,this.listTrips=[],this.mensajeServicio=null,this.linea=null,this.fecha_salida=null,this.trip=null,this.adultos=0,this.ninnos=0,this.infantes=0,this.mayores=0,this.total_dolares=0,this.total_bolivares=0,this.status=null,this.listStatus=[{value:null,name:"Todos"},{value:"PAID",name:"Pagada"},{value:"PENDING_VALIDATION",name:"Pendiente por validaci\xF3n"},{value:"PENDING_PAYMENT",name:"Pendiente por pago"},{value:"CANCELED",name:"Cancelada"}];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=100,this.pageSelected=1,this.listRegister=[],this.jsonFilter={},this.checkRol()},e.TripPassengerComponent.prototype.checkRol=function(){var e="TRIP-PASSENGERS-ALL";this.vista_seleccionada=null;var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r])if("PASSENGERS-TRIP-LINE"==n[r].name){if(this.vista_seleccionada="PASSENGERS-TRIP-LINE",n[r].hasOwnProperty("actions")&&null!=n[r].actions&&0!=n[r].actions.length)for(var s=0;s<n[r].actions.length;r++)n[r].actions[s].hasOwnProperty("name")&&"OVERBOUND-PASSENGERS"==n[r].actions[s].name&&(this.mostrarTrasbordo=!0);t=!0;break}else if(n[r].name==e){this.vista_seleccionada=e,t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TripPassengerComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("trip_id")&&(this.trip_id=this.active.queryParams._value.trip_id,this.active.queryParams._value.hasOwnProperty("itinerary_id")&&(this.itinerary_id=this.active.queryParams._value.itinerary_id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.search())))},e.TripPassengerComponent.prototype.selectedList=function(e){if(null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)null!=this.listRegister[t]&&(this.listRegister[t].check=e)},e.TripPassengerComponent.prototype.search=function(){this.jsonFilter={},this.total_bolivares=0,this.total_dolares=0,null==this.pasajero||this.pasajero==null||""==this.pasajero||"null"==this.pasajero||(this.jsonFilter.passenger=this.pasajero.trim()),null==this.destino||this.destino==null||""==this.destino||"null"==this.destino||(this.jsonFilter.destination_stop=this.destino.trim()),null==this.status||this.status==null||""==this.status||"null"==this.status||(this.jsonFilter.reservation_status=[this.status]),this.callServices(1,"&limit="+this.detallePorPagina)},e.TripPassengerComponent.prototype.clean=function(){this.pasajero=null,this.destino=null,this.status=null},e.TripPassengerComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.TripPassengerComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.TripPassengerComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.TripPassengerComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.TripPassengerComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.TripPassengerComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.TripPassengerComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t),this.listRegister=[];let i=null,r="";"PASSENGERS-TRIP-LINE"==this.vista_seleccionada?(i="&type=PAGINATE"+t+"&trip_id="+this.trip_id+"&itinerary_id="+this.itinerary_id+"&business_id="+this.business_id,r="travel-passenger"):(i=this.business_id+"?realm="+this.service.getRealm()+"&type=PAGINATE"+t+"&trip_id="+this.trip_id+"&itinerary_id="+this.itinerary_id,r="travel-passenger-operation");let s=this.service.callServicesHttp(r,i,this.jsonFilter);s.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.TripPassengerComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);if(null!=this.total_dolares)try{var s=parseFloat((100*this.total_dolares/112).toFixed(2));this.total_dolares_formatted=amountFormattingObject(100*this.total_dolares),this.total_dolares_formatted=this.total_dolares_formatted.integerPart+","+this.total_dolares_formatted.decimalPart+" $",this.porcentaje_total_us=amountFormattingObject(12*s),this.porcentaje_total_us=this.porcentaje_total_us.integerPart+","+this.porcentaje_total_us.decimalPart+" $"}catch(e){}if(null!=this.total_bolivares)try{var s=parseFloat((100*this.total_bolivares/112).toFixed(2));this.total_bolivares_formatted=amountFormattingObject(100*this.total_bolivares),this.total_bolivares_formatted=this.total_bolivares_formatted.integerPart+","+this.total_bolivares_formatted.decimalPart+" Bs",this.porcentaje_total=amountFormattingObject(12*s),this.porcentaje_total=this.porcentaje_total.integerPart+","+this.porcentaje_total.decimalPart+" Bs"}catch(e){}this.pagingActual.count=e.count}else this.listRegister=[]}},e.TripPassengerComponent.prototype.trasbordarPasajeros=function(){var e=[];if(null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)null!=this.listRegister[t]&&this.listRegister[t].hasOwnProperty("check")&&!0==this.listRegister[t].check&&this.listRegister[t].hasOwnProperty("id")&&e.push(this.listRegister[t].id);return 0==e.length?(this.mensaje="Debe seleccionar al menos un pasajero a trasbordar",void this.msg.warning()):void(this.fecha=null,this.destino=null,this.linea_buscar=null,$("#modalTripsAvailable").modal("show"))},e.TripPassengerComponent.prototype.cleanModal=function(){this.fecha=null,this.destino=null,this.linea_buscar=null},e.TripPassengerComponent.prototype.searchTrip=function(){this.jsonFilterTrip={},this.jsonFilterTrip.status=["PUBLISHED"],null==this.linea_buscar||this.linea_buscar==null||""==this.linea_buscar||"null"==this.linea_buscar||(this.jsonFilterTrip.line=this.linea_buscar.trim()),null==this.fecha||this.fecha==null||""==this.fecha||(this.jsonFilterTrip.departure_date={},this.jsonFilterTrip.departure_date.lte=this.fecha+"T23:59:59.000Z",this.jsonFilterTrip.departure_date.gte=this.fecha+"T00:00:00.000Z",this.jsonFilterTrip.departure_date.time_zone=getTimeZone()),null==this.destino||this.destino==null||""==this.destino||"null"==this.destino||(this.jsonFilterTrip.destination_stop=this.destino.trim()),this.callServicesTrip(1,"&limit="+this.detallePorPaginaTrip)},e.TripPassengerComponent.prototype.getCantidadSelectedTrip=function(e){null==e||e==null||""==e||(this.detallePorPaginaTrip=e.detalles,this.totalPageTrip=e.pagina,null==this.listTrips||this.listTrips==null||0==this.listTrips.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesTrip(1,"&limit="+this.detallePorPaginaTrip))},e.TripPassengerComponent.prototype.getValueFirstTrip=function(e){this.listTrips=[],this.pagingActualTrip.hasOwnProperty("first_page")&&null!=this.pagingActualTrip.first_page&&this.pagingActualTrip.first_page!=null&&""!=this.pagingActualTrip.first_page&&this.callServicesTrip(e,this.pagingActualTrip.first_page)},e.TripPassengerComponent.prototype.getValuePreviousTrip=function(e){this.listTrips=[],this.pagingActualTrip.hasOwnProperty("previous_page")&&null!=this.pagingActualTrip.previous_page&&this.pagingActualTrip.previous_page!=null&&""!=this.pagingActualTrip.previous_page&&this.callServicesTrip(e,this.pagingActualTrip.previous_page)},e.TripPassengerComponent.prototype.getValueLastTrip=function(e){this.listTrips=[],this.pagingActualTrip.hasOwnProperty("last_page")&&null!=this.pagingActualTrip.last_page&&this.pagingActualTrip.last_page!=null&&""!=this.pagingActualTrip.last_page&&this.callServicesTrip(e,this.pagingActualTrip.last_page)},e.TripPassengerComponent.prototype.getValueNextTrip=function(e){this.listTrips=[],this.pagingActualTrip.hasOwnProperty("next_page")&&null!=this.pagingActualTrip.next_page&&this.pagingActualTrip.next_page!=null&&""!=this.pagingActualTrip.next_page&&this.callServicesTrip(e,this.pagingActualTrip.next_page)},e.TripPassengerComponent.prototype.getValueChangeRecordsTrip=function(e){this.pageSelectedTrip=e},e.TripPassengerComponent.prototype.callServicesTrip=function(e,t){this.pageSelectedTrip=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="&type=PAGINATE"+t;this.mostrarCargando=!0;let r=capitalizeOnly(_("message_dflt_4")),s=this.service.callServicesHttp("travel-report-available",n,this.jsonFilterTrip);s.subscribe(e=>{this.mostrarCargando=!1;if(null==e||e==null||""==e)this.listTrips=[],this.mensajeServicio=r;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,r);else if(!e.hasOwnProperty("count"))this.listTrips=[];else if(null==e.count||null==e.count||0==e.count)this.listTrips=[];else{this.pagingActualTrip={},this.pagingActualTrip.count=e.count;let i=Math.floor(this.pagingActualTrip.count/this.detallePorPaginaTrip),r=this.pagingActualTrip.count%this.detallePorPaginaTrip;if(this.totalPageTrip=0==r?i:i+1,this.pagingActualTrip.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualTrip.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualTrip.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualTrip.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var t={};this.listTrips=[];for(var n=0;n<e.results.length;n++)t=this.formattedDataTrip(e.results[n]),null!=t&&this.listTrips.push(t);this.pagingActualTrip.count=e.count}else this.listTrips=[]}},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,r)})},e.TripPassengerComponent.prototype.formattedDataTrip=function(e){if(null==e||null==e||""==e)return null;if(e.hasOwnProperty("departure_date")&&null!=e.departure_date&&null!=e.departure_date&&""!=e.departure_date&&(e.formatted_departure_date=e.departure_date.replace("T"," ")),e.hasOwnProperty("fares")&&null!=e.fares&&0!=e.fares.length){e.destino="";for(var t=0;t<e.fares.length;t++)null!=e.fares[t]&&e.fares[t].hasOwnProperty("destination_stop_name")&&null!=e.fares[t].destination_stop_name&&null!=e.fares[t].destination_stop_name&&""!=e.fares[t].destination_stop_name&&(e.destino=e.destino+" "+e.fares[t].destination_stop_name)}return e},e.TripPassengerComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(null==this.linea&&e.hasOwnProperty("line_name")&&(this.linea=e.line_name),null==this.trip&&e.hasOwnProperty("trip_sequence")&&(this.trip=e.trip_sequence),null==this.fecha_salida)try{e.hasOwnProperty("trip_departure_date")&&(this.fecha_salida=formattingDate(e.trip_departure_date))}catch(e){}if(e.hasOwnProperty("amount_to_pay_by_currency")&&null!=e.amount_to_pay_by_currency&&null!=e.amount_to_pay_by_currency&&""!=e.amount_to_pay_by_currency){if(e.amount_to_pay_by_currency.hasOwnProperty("USD")&&null!=e.amount_to_pay_by_currency.USD&&null!=e.amount_to_pay_by_currency.USD&&""!=e.amount_to_pay_by_currency.USD)try{this.total_dolares+=e.amount_to_pay_by_currency.USD,e.formatted_dolars=amountFormattingObject(100*e.amount_to_pay_by_currency.USD),e.formatted_dolars=e.formatted_dolars.integerPart+","+e.formatted_dolars.decimalPart+" $"}catch(e){}if(e.amount_to_pay_by_currency.hasOwnProperty("VES")&&null!=e.amount_to_pay_by_currency.VES&&null!=e.amount_to_pay_by_currency.VES&&""!=e.amount_to_pay_by_currency.VES)try{this.total_bolivares+=e.amount_to_pay_by_currency.VES,e.formatted_bs=amountFormattingObject(100*parseFloat(e.amount_to_pay_by_currency.VES.toFixed(2))),e.formatted_bs=e.formatted_bs.integerPart+","+e.formatted_bs.decimalPart+" Bs"}catch(e){}}if(e.hasOwnProperty("currency_exchange_rates")&&null!=e.currency_exchange_rates&&0!=e.currency_exchange_rates.length)for(var t=0;t<e.currency_exchange_rates.length;t++)if(null!=e.currency_exchange_rates[t]&&e.currency_exchange_rates[t].hasOwnProperty("currency")&&"USD"==e.currency_exchange_rates[t].currency&&e.currency_exchange_rates[t].hasOwnProperty("rate")){try{e.tasa=amountFormattingObject(100*e.currency_exchange_rates[t].rate),e.tasa=e.tasa.integerPart+","+e.tasa.decimalPart+" Bs"}catch(e){}break}return e.hasOwnProperty("transfer_line_id")&&null!=e.transfer_line_id&&null!=e.transfer_line_id&&""!=e.transfer_line_id&&(e.transfer_line_id==this.service.getBusinessId()?(e.formatted_transferido="TRASBORDADO",e.hasOwnProperty("origin_line_id")&&(e.formatted_transferido=e.formatted_transferido+" DESDE "+e.origin_line_id)):(e.formatted_transferido="TRASBORDADO",e.hasOwnProperty("transfer_line_name")&&(e.formatted_transferido=e.formatted_transferido+" HACIA "+e.transfer_line_name))),e.hasOwnProperty("type")&&null!=e.type&&null!=e.type&&""!=e.type&&("ADULT"==e.type?++this.adultos:"ELDERLY"==e.type?++this.mayores:"INFANT"==e.type?++this.infantes:"CHILD"==e.type&&++this.ninnos,e.formatted_type=_(e.type).toUpperCase()),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase()),e.hasOwnProperty("reservation_status")&&null!=e.reservation_status&&null!=e.reservation_status&&""!=e.reservation_status&&(e.formatted_reservation_status=_(e.reservation_status).toUpperCase()),e},e.TripPassengerComponent.prototype.selectedTravel=function(e){this.viajeSeleccionado=e,$("#modalTripsAvailable").modal("hide");for(var t=[],n=0;n<this.listRegister.length;n++)null!=this.listRegister[n]&&!0==this.listRegister[n].check&&t.push(this.listRegister[n].id);return null==t||0==t.length?(this.mensaje="Debe tener seleccionado al menos un pasajero",void this.msg.warning()):void(this.listaPasar=t,$("#modalConfirm").modal("show"))},e.TripPassengerComponent.prototype.trasbordar=function(){$("#modalConfirm").modal("hide");var e={origin_itinerary_id:this.itinerary_id,origin_trip_id:this.trip_id,destination_line_id:this.viajeSeleccionado.business_id,destination_itinerary_id:this.viajeSeleccionado.itinerary_id,destination_trip_id:this.viajeSeleccionado.id,passengers:this.listaPasar};let t=_("message_dflt_83"),n=this.service.callServicesHttp("travel-line-trasbordo",null,e);n.subscribe(e=>null==e||null==e||""==e?(this.mensaje=t,void this.msg.warning()):void(200==e.status_http?(this.search(),this.mensaje="Trasbordo realizado con \xE9xito",this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())),e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}})(window.app||(window.app={}));(function(e){e.TravelReportComponent=ng.core.Component({selector:"travel-report",templateUrl:"views/travel-report-v3.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.TravelReportComponent.prototype.ngOnInit=function(){this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.type=null,this.listTypes=[{value:null,name:"Todos"},{value:"LONG_ROUTE",name:"Ruta Larga"},{value:"SHORT_ROUTE",name:"Ruta Corta"}],this.listStatus=[{value:null,name:"Todos"},{value:"PUBLISHED",name:"Publicado"},{value:"UNPUBLISHED",name:"No publicado"},{value:"CLOSE",name:"Cerrado"}],this.status=null,this.parada=null,this.placa=null,this.chofer=null,this.horario=null,this.linea=null,this.fecha=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.TravelReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("TRIP"!=t[r].name)"TRIP"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TravelReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.TravelReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"TRIP-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.TravelReportComponent.prototype.keyPressNumber=function(e){return keypressNumbersInteger(e)},e.TravelReportComponent.prototype.search=function(){if(this.jsonFilter={},null!=this.nro&&null!=this.nro&&""!=this.nro&&"null"!=this.nro){if(!utils_keyNumber(this.nro.trim()))return this.mensaje="El n\xFAmero de viaje introducido tiene formato incorrecto",void this.msg.warning();this.jsonFilter.sequence={},this.jsonFilter.sequence.lte=parseInt(this.nro.trim()),this.jsonFilter.sequence.gte=parseInt(this.nro.trim())}null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(this.jsonFilter.line=this.linea.trim()),null==this.fecha||null==this.fecha||""==this.fecha||(this.jsonFilter.departure_date={},this.jsonFilter.departure_date.lte=this.fecha+"T23:59:59.000Z",this.jsonFilter.departure_date.gte=this.fecha+"T00:00:00.000Z",this.jsonFilter.departure_date.time_zone=getTimeZone()),null==this.parada||null==this.parada||""==this.parada||"null"==this.parada||(this.jsonFilter.destination_stop=this.parada.trim()),null==this.placa||null==this.placa||""==this.placa||"null"==this.placa||(this.jsonFilter.vehicle=this.placa.trim()),null==this.chofer||null==this.chofer||""==this.chofer||"null"==this.chofer||(this.jsonFilter.driver=this.chofer.trim()),null==this.type||null==this.type||""==this.type||"null"==this.type||(this.jsonFilter.type=[this.type]),null==this.status||null==this.status||""==this.status||"null"==this.status||("PUBLISHED"==this.status?(this.jsonFilter.active=!0,this.jsonFilter.status=["PUBLISHED"],this.jsonFilter.online_sales=!0):"INACTIVE"==this.status?this.jsonFilter.active=!1:"UNPUBLISHED"==this.status?this.jsonFilter.status=["UNPUBLISHED"]:"CLOSE"==this.status&&(this.jsonFilter.online_sales=!1)),this.callServices(1,"&limit="+this.detallePorPagina)},e.TravelReportComponent.prototype.clean=function(){this.status=null,this.parada=null,this.placa=null,this.chofer=null,this.horario=null,this.linea=null,this.fecha=null,this.type=null,this.nro=null},e.TravelReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.TravelReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.TravelReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.TravelReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.TravelReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.TravelReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.TravelReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="&type=PAGINATE"+t,r=this.service.callServicesHttp("travel-report",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.TravelReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.TravelReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.TravelReportComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(e.hasOwnProperty("fares")&&null!=e.fares&&null!=e.fares&&0!=e.fares.length)for(var t=0;t<e.fares.length;t++)if(null!=e.fares[t]&&e.fares[t].hasOwnProperty("amount"))try{e.fares[t].formatted_amount=amountFormattingObject(100*e.fares[t].amount),e.fares[t].formatted_amount=e.fares[t].formatted_amount.integerPart+","+e.fares[t].formatted_amount.decimalPart,e.fares[t].hasOwnProperty("currency")&&null!=e.fares[t].currency&&null!=e.fares[t].currency&&""!=e.fares[t].currency&&(e.fares[t].formatted_amount=e.fares[t].formatted_amount+" "+_(e.fares[t].currency))}catch(e){console.log(e)}if(e.hasOwnProperty("departure_date"))try{e.formatted_departure_date=formattingDate(e.departure_date)}catch(e){}if(e.hasOwnProperty("type")&&null!=e.type&&null!=e.type&&""!=e.type&&(e.formatted_type=_(e.type).toUpperCase()),e.hasOwnProperty("seats_active")&&e.hasOwnProperty("seats_available"))try{e.ocup=e.seats_active-e.seats_available}catch(e){}return e.actions=[],null!=this.checkAction("TRIP-DELETE")&&e.actions.push(this.checkAction("TRIP-DELETE")),null!=this.checkAction("TRIP-UPDATE")&&e.actions.push(this.checkAction("TRIP-UPDATE")),null!=this.checkAction("TRIP-PASSENGERS-ALL")&&e.actions.push(this.checkAction("TRIP-PASSENGERS-ALL")),null!=this.checkAction("FAST-ENTRY")&&e.actions.push(this.checkAction("FAST-ENTRY")),e.hasOwnProperty("active")&&(e.active?"PUBLISHED"==e.status?(e.formatted_status="PUBLICADO",e.hasOwnProperty("online_sales")?!e.online_sales&&(e.formatted_status="CERRADO"):e.formatted_status="CERRADO"):(null!=this.checkAction("TRIP-PUBLISH")&&e.actions.push(this.checkAction("TRIP-PUBLISH")),e.formatted_status="NO PUBLICADO"):e.formatted_status="SUSPENDIDO"),e},e.TravelReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.TravelReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,this.fecha_reactivacion=null,this.hora_reactivacion=null,t.hasOwnProperty("name"))switch(t.name){case"TRIP-DELETE":$("#modalDeleteTravel").modal("show");break;case"TRIP-PUBLISH":$("#modelPusblishTravel").modal("show");break;case"TRIP-PASSENGERS-ALL":this.router.navigate(["/travel-passengers"],{queryParams:{itinerary_id:e.itinerary_id,trip_id:e.id,business_id:e.business_id}});break;case"FAST-ENTRY":this.router.navigate(["/fast-entry"],{queryParams:{itinerary_id:e.itinerary_id,trip_id:e.id,business_id:e.business_id}});break;case"TRAVEL-INACTIVE":$("#modalInactivateTravel").modal("show");break;case"TRAVEL-COMPLETE":$("#modalCompletedTravel").modal("show");break;case"TRAVEL-CANCEL":$("#modalCancelTravel").modal("show");break;case"TRAVEL-VIEW":this.router.navigate(["/travel-view"],{queryParams:{id:e.id}});break;case"TRIP-UPDATE":this.router.navigate(["/travel-update"],{queryParams:{itinerary_id:e.itinerary_id,trip_id:e.id,business_id:e.business_id}});break;default:}},e.TravelReportComponent.prototype.deleteData=function(){if($("#modalDeleteTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?realm="+this.service.getRealm()+"&itinerary_id="+this.dataSelected.itinerary_id+"&id="+this.dataSelected.id;let t=_("message_dflt_17"),n=this.service.callServicesHttp("travel-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.TravelReportComponent.prototype.publishData=function(){if($("#modelPusblishTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?id="+this.dataSelected.id+"&itinerary_id="+this.dataSelected.itinerary_id+"&vehicle_id="+this.dataSelected.vehicle_id+"&vehicle_type_id="+this.dataSelected.vehicle_type_id+"&vehicle_owner_id="+this.dataSelected.vehicle_owner_id,t={};try{if(this.dataSelected.hasOwnProperty("departure_date")&&(t.departure_date=this.dataSelected.departure_date+"Z"),this.dataSelected.hasOwnProperty("vehicle_id")&&(t.vehicle_id=this.dataSelected.vehicle_id),this.dataSelected.hasOwnProperty("seats_active")&&(t.seats_active=this.dataSelected.seats_active),this.dataSelected.hasOwnProperty("active")&&(t.active=this.dataSelected.active),this.dataSelected.hasOwnProperty("type")&&(t.type=this.dataSelected.type),this.dataSelected.hasOwnProperty("boarding_gate")&&(t.boarding_gate=this.dataSelected.boarding_gate),this.dataSelected.hasOwnProperty("drivers")&&null!=this.dataSelected.drivers&&0!=this.dataSelected.drivers.length){t.drivers=[];for(var n=0;n<this.dataSelected.drivers.length;n++)null!=this.dataSelected.drivers[n]&&t.drivers.push(this.dataSelected.drivers[n].id)}if(this.dataSelected.hasOwnProperty("fares")&&null!=this.dataSelected.fares&&0!=this.dataSelected.fares.length){t.fares=[];for(var n=0;n<this.dataSelected.fares.length;n++)null!=this.dataSelected.fares[n]&&t.fares.push(this.dataSelected.fares[n].id)}t.status="PUBLISHED"}catch(e){}let i=_("message_dflt_72"),r=this.service.callServicesHttp("travel-put",e,t);r.subscribe(e=>{this.procesarRespuestaPublish(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})}},e.TravelReportComponent.prototype.procesarRespuestaPublish=function(e){let t=_("message_dflt_72");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id&&this.listRegister[n].line_id==e.line_id&&this.listRegister[n].itinerary_id==e.itinerary_id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success54"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.inactiveData=function(){if($("#modalInactivateTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("travel-inactive",e,null);this.procesarRespuestaDesactivar(t)}},e.TravelReportComponent.prototype.cancelData=function(){if($("#modalCancelTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("travel-cancel",e,null);this.procesarRespuestaCancelar(t)}},e.TravelReportComponent.prototype.completeData=function(){if($("#modalCompletedTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=this.service.callServicesHttp("travel-complete",e,null);this.procesarRespuestaCompletar(t)}},e.TravelReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_17");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success1")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_19");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success12"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_18");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success11"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.procesarRespuestaCancelar=function(e){let t=_("message_dflt_20");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success15"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.procesarRespuestaCompletar=function(e){let t=_("message_dflt_21");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success14"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.TravelReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TravelReportLineComponent=ng.core.Component({selector:"travel-report-line",templateUrl:"views/travel-report-line-v5.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.TravelReportLineComponent.prototype.ngOnInit=function(){this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"PUBLISHED",name:"Publicado"},{value:"UNPUBLISHED",name:"No publicado"},{value:"CLOSE",name:"Cerrado"}],this.status=null,this.parada=null,this.placa=null,this.chofer=null,this.horario=null,this.linea=null,this.fecha=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.TravelReportLineComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("TRIP-LINE"!=t[r].name)"TRIP-LINE"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.TravelReportLineComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.TravelReportLineComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"TRIP-LINE-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.TravelReportLineComponent.prototype.search=function(){this.jsonFilter={};null==this.init||this.init==null||""==this.init||null==this.end||this.end==null||""==this.end||(this.jsonFilter.departure_date={},this.jsonFilter.departure_date.lte=this.end+"T23:59:59.000Z",this.jsonFilter.departure_date.gte=this.init+"T00:00:00.000Z",this.jsonFilter.departure_date.time_zone=getTimeZone()),null==this.parada||this.parada==null||""==this.parada||"null"==this.parada||(this.jsonFilter.destination_stop=this.parada),null==this.placa||this.placa==null||""==this.placa||"null"==this.placa||(this.jsonFilter.vehicle=this.placa),null==this.chofer||this.chofer==null||""==this.chofer||"null"==this.chofer||(this.jsonFilter.driver=this.chofer),null==this.status||this.status==null||""==this.status||"null"==this.status||("PUBLISHED"==this.status?(this.jsonFilter.active=!0,this.jsonFilter.online_sales=!0,this.jsonFilter.status=["PUBLISHED"]):"INACTIVE"==this.status?this.jsonFilter.active=!1:"UNPUBLISHED"==this.status?this.jsonFilter.status=["UNPUBLISHED"]:"CLOSE"==this.status&&(this.jsonFilter.online_sales=!1)),this.callServices(1,"&limit="+this.detallePorPagina)},e.TravelReportLineComponent.prototype.clean=function(){this.init=null,this.end=null,this.parada=null,this.placa=null,this.chofer=null,this.status=null},e.TravelReportLineComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.TravelReportLineComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.TravelReportLineComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.TravelReportLineComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.TravelReportLineComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.TravelReportLineComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.TravelReportLineComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t),this.listRegister=[];let i="&type=PAGINATE"+t,r=this.service.callServicesHttp("travel-report-line",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.TravelReportLineComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.TravelReportLineComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.TravelReportLineComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(this.listItems=[],e.hasOwnProperty("fares")&&null!=e.fares&&null!=e.fares&&0!=e.fares.length)for(var t=0;t<e.fares.length;t++)if(null!=e.fares[t]&&e.fares[t].hasOwnProperty("amount"))try{e.fares[t].formatted_amount=amountFormattingObject(100*e.fares[t].amount),e.fares[t].formatted_amount=e.fares[t].formatted_amount.integerPart+","+e.fares[t].formatted_amount.decimalPart,e.fares[t].hasOwnProperty("currency")&&null!=e.fares[t].currency&&null!=e.fares[t].currency&&""!=e.fares[t].currency&&(e.fares[t].formatted_amount=e.fares[t].formatted_amount+" "+_(e.fares[t].currency))}catch(e){console.log(e)}if(e.hasOwnProperty("type")&&null!=e.type&&null!=e.type&&""!=e.type&&(e.formatted_type=_(e.type).toUpperCase()),e.hasOwnProperty("departure_date"))try{e.formatted_departure_date=formattingDate(e.departure_date)}catch(e){}if(e.hasOwnProperty("seats_active")&&e.hasOwnProperty("seats_available"))try{e.ocup=e.seats_active-e.seats_available}catch(e){}return e.actions=[],null!=this.checkAction("TRIP-DELETE")&&e.actions.push(this.checkAction("TRIP-DELETE")),null!=this.checkAction("PASSENGERS-TRIP-LINE")&&e.actions.push(this.checkAction("PASSENGERS-TRIP-LINE")),e.hasOwnProperty("active")&&(e.active?"PUBLISHED"==e.status?(e.formatted_status="PUBLICADO",e.hasOwnProperty("online_sales")?e.online_sales?null!=this.checkAction("TRIP-CLOSE")&&e.actions.push(this.checkAction("TRIP-CLOSE")):e.formatted_status="CERRADO":e.formatted_status="CERRADO",null!=this.checkAction("FAST-ENTRY-LINE")&&e.actions.push(this.checkAction("FAST-ENTRY-LINE"))):e.formatted_status="NO PUBLICADO":e.formatted_status="SUSPENDIDO"),e},e.TravelReportLineComponent.prototype.deselectedData=function(){this.dataSelected=null},e.TravelReportLineComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,this.fecha_reactivacion=null,this.hora_reactivacion=null,t.hasOwnProperty("name"))switch(t.name){case"TRIP-DELETE":$("#modalDeleteTravel").modal("show");break;case"TRIP-CLOSE":$("#modalCloseTravel").modal("show");break;case"TRAVEL-VIEW":this.router.navigate(["/travel-view"],{queryParams:{id:e.id}});break;case"FAST-ENTRY-LINE":this.router.navigate(["/fast-entry-line"],{queryParams:{trip_id:e.id,itinerary_id:e.itinerary_id}});break;case"TRAVEL-UPDATE":this.router.navigate(["/travel-update"],{queryParams:{id:e.id}});break;case"PASSENGERS-TRIP-LINE":this.router.navigate(["/travel-passengers"],{queryParams:{itinerary_id:e.itinerary_id,trip_id:e.id,business_id:e.business_id}});break;default:}},e.TravelReportLineComponent.prototype.closeData=function(){if($("#modalCloseTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&itinerary_id="+this.dataSelected.itinerary_id+"&check=false";let t="Error al cerrar viaje",n=this.service.callServicesHttp("travel-close-line",e,null);n.subscribe(e=>{if(null==e||null==e||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){try{for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id){this.listRegister[n]=this.formattedData(e);break}}catch(e){}this.mensaje="Viaje cerrado con exito",this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.TravelReportLineComponent.prototype.deleteData=function(){if($("#modalDeleteTravel").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&itinerary_id="+this.dataSelected.itinerary_id;let t=_("message_dflt_17"),n=this.service.callServicesHttp("travel-delete-line",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.TravelReportLineComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_17");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success1")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.TravelReportLineComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.TravelViewComponent=ng.core.Component({selector:"travel-view",templateUrl:"views/travel-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,n){this.msg=e,this.mensaje="",this.router=t,this.active=n}]}),e.TravelViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title11")),this.id=null,this.ruta=null,this.linea=null,this.conductor=null,this.auto=null,this.fecha_salida=null,this.fecha_vencimiento=null,this.max=null,this.ocupados=null,this.disponibles=null,this.status=null,this.pasajeros=[],this.getData()},e.TravelViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.TravelViewComponent.prototype.getService=function(){},e.TravelViewComponent.prototype.formattedData=function(){},e.TravelViewComponent.prototype.print=function(){window.print()},e.TravelViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarCreateComponent=ng.core.Component({selector:"car-create",templateUrl:"views/car-create-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CarCreateComponent.prototype.ngOnInit=function(){this.texto="Crear",this.claseResponsive="col-lg-4 col-md-4 col-sm-12 col-12",this.title=capitalizeOnly(_("title2")),this.listType=[{value:null,name:"Ninguno"},{value:"MINIBUS",name:"Bus"},{value:"HIPER",name:"Buscama"},{value:"MINI",name:"Autom\xF3vil"}],this.pagingActual={},this.detallePorPagina=10,this.totalPage=1,this.pageSelected=1,this.pagingActualType={},this.detallePorPaginaType=10,this.totalPageType=1,this.pageSelectedType=1,this.rif_buscar=null,this.nombre_buscar=null,this.listRegister=[],this.listRegisterType=[],this.linea=null,this.profileSelected=null,this.lineSelected=null,this.placa=null,this.carroceria=null,this.capacidad=null,this.marca=null,this.color=null,this.anno=null,this.type=null,this.nombre_buscar_type=null,this.typeSelected=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.active_status=!0,this.checkRol()},e.CarCreateComponent.prototype.keyPressNumber=function(e){return keypressNumbersInteger(e)},e.CarCreateComponent.prototype.checkRol=function(){var e="CREATE-VEHICLE";this.active.url.hasOwnProperty("_value")&&("car-create"==this.active.url._value[0].path?(this.title=_("title2"),this.save=!0,e="CREATE-VEHICLE"):(this.title=_("title4"),this.save=!1,e="UPDATE-VEHICLE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarCreateComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("car-create"==this.active.url._value[0].path?(this.title=capitalizeOnly(_("title2")),this.texto="Crear",this.save=!0):(this.title=capitalizeOnly(_("title4")),this.texto="Actualizar",this.claseResponsive="col-lg-12 col-md-12 col-sm-12 col-12",this.save=!1,this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("owner_id")&&(this.owner_id=this.active.queryParams._value.owner_id),this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id),this.active.queryParams._value.hasOwnProperty("vehicle_type_id")&&(this.vehicle_type_id=this.active.queryParams._value.vehicle_type_id),this.getService())))},e.CarCreateComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||"null"==this.nombre_buscar||(null==t&&(t={}),t.name="*"+this.nombre_buscar.trim()+"*"),null==this.rif_buscar||null==this.rif_buscar||""==this.rif_buscar||"null"==this.rif_buscar||(null==t&&(t={}),t.id_doc="*"+this.rif_buscar.trim()+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.CarCreateComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CarCreateComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CarCreateComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CarCreateComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CarCreateComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CarCreateComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CarCreateComponent.prototype.searchVehicleType=function(){this.jsonFilterType={};var e=[],t=null;if(null==this.nombre_buscar_type||null==this.nombre_buscar_type||""==this.nombre_buscar_type||"null"==this.nombre_buscar_type||(null==t&&(t={}),t.name="*"+this.nombre_buscar_type+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterType.entities=n}this.jsonFilterType.sort={"info.created_at":"desc"},this.callServicesType(1,"&limit="+this.detallePorPaginaType)},e.CarCreateComponent.prototype.getCantidadSelectedType=function(e){null==e||e==null||""==e||(this.detallePorPaginaType=e.detalles,this.totalPageType=e.pagina,null==this.listRegisterType||this.listRegisterType==null||0==this.listRegisterType.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesType(1,"&limit="+this.detallePorPaginaType))},e.CarCreateComponent.prototype.getValueFirstType=function(e){this.listRegisterType=[],this.pagingActualType.hasOwnProperty("first_page")&&null!=this.pagingActualType.first_page&&this.pagingActualType.first_page!=null&&""!=this.pagingActualType.first_page&&this.callServicesType(e,this.pagingActualType.first_page)},e.CarCreateComponent.prototype.getValuePreviousType=function(e){this.listRegisterType=[],this.pagingActualType.hasOwnProperty("previous_page")&&null!=this.pagingActualType.previous_page&&this.pagingActualType.previous_page!=null&&""!=this.pagingActualType.previous_page&&this.callServicesType(e,this.pagingActualType.previous_page)},e.CarCreateComponent.prototype.getValueLastType=function(e){this.listRegisterType=[],this.pagingActualType.hasOwnProperty("last_page")&&null!=this.pagingActualType.last_page&&this.pagingActualType.last_page!=null&&""!=this.pagingActualType.last_page&&this.callServicesType(e,this.pagingActualType.last_page)},e.CarCreateComponent.prototype.getValueNextType=function(e){this.listRegisterType=[],this.pagingActualType.hasOwnProperty("next_page")&&null!=this.pagingActualType.next_page&&this.pagingActualType.next_page!=null&&""!=this.pagingActualType.next_page&&this.callServicesType(e,this.pagingActualType.next_page)},e.CarCreateComponent.prototype.getValueChangeRecordsType=function(e){this.pageSelectedType=e},e.CarCreateComponent.prototype.callServicesType=function(e,t){let n=_("message_dflt_4");this.pageSelectedType=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("car-type-report",i,this.jsonFilterType);r.subscribe(e=>{this.procesarRespuestaType(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.CarCreateComponent.prototype.procesarRespuestaType=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegisterType=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegisterType=[];else if(null==e.count||null==e.count||0==e.count)this.listRegisterType=[];else{this.pagingActualType={},this.pagingActualType.count=e.count;let t=Math.floor(this.pagingActualType.count/this.detallePorPaginaType),i=this.pagingActualType.count%this.detallePorPaginaType;if(this.totalPageType=0==i?t:t+1,this.pagingActualType.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualType.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualType.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualType.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegisterType=[];for(var r=0;r<e.results.length;r++)n=this.formattedDataType(e.results[r]),null!=n&&this.listRegisterType.push(n);this.pagingActual.count=e.count}else this.listRegisterType=[]}},e.CarCreateComponent.prototype.formattedDataType=function(e){return null==e||null==e||""==e?null:e},e.CarCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("car-get",this.business_id+"?id="+this.id+"&owner_id="+this.owner_id+"&vehicle_type_id="+this.vehicle_type_id,null),t=_("message_dflt_36");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.CarCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_36");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarCreateComponent.prototype.formattedDataGET=function(e){e.hasOwnProperty("license_plate")&&null!=e.license_plate&&e.license_plate!=null&&""!=e.license_plate&&(this.placa=e.license_plate),e.hasOwnProperty("bodywork")&&null!=e.bodywork&&e.bodywork!=null&&""!=e.bodywork&&(this.carroceria=e.bodywork),e.hasOwnProperty("brand")&&null!=e.brand&&e.brand!=null&&""!=e.brand&&(this.marca=e.brand),e.hasOwnProperty("year")&&null!=e.year&&e.year!=null&&""!=e.year&&(this.anno=e.year),e.hasOwnProperty("color")&&null!=e.color&&e.color!=null&&""!=e.color&&(this.color=e.color),e.hasOwnProperty("vehicle_type_name")&&null!=e.vehicle_type_name&&e.vehicle_type_name!=null&&""!=e.vehicle_type_name&&(this.typeSelected={},this.typeSelected.name=e.vehicle_type_name,e.hasOwnProperty("capacity")&&(this.typeSelected.capacity=e.capacity)),e.hasOwnProperty("owner_name")&&null!=e.owner_name&&e.owner_name!=null&&""!=e.owner_name&&(this.profileSelected={},this.profileSelected.name=e.owner_name,e.hasOwnProperty("owner_id_doc")&&null!=e.owner_id_doc&&e.owner_id_doc!=null&&""!=e.owner_id_doc&&(this.profileSelected.id_doc=e.owner_id_doc),e.hasOwnProperty("owner_email")&&null!=e.owner_email&&e.owner_email!=null&&""!=e.owner_email&&(this.profileSelected.email=e.owner_email),e.hasOwnProperty("owner_phone")&&null!=e.owner_phone&&e.owner_phone!=null&&""!=e.owner_phone&&(this.profileSelected.phone=e.owner_phone),e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.profileSelected.line_name=e.line_name)),e.hasOwnProperty("info")&&null!=e.info&&e.info!=null&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&e.info.created_by_email!=null&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&e.info.created_at!=null&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&e.info.updated_by_email!=null&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&e.info.updated_at!=null&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.CarCreateComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("propietario-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.CarCreateComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CarCreateComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.CarCreateComponent.prototype.selectedPropietario=function(e){if(this.profileSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)null!=this.listRegister[t]&&(this.listRegister[t].id==e.id?null==this.listRegister[t].classSelected?(this.profileSelected=this.listRegister[t],this.listRegister[t].classSelected="selected"):this.listRegister[t].classSelected=null:this.listRegister[t].classSelected=null)},e.CarCreateComponent.prototype.selectedType=function(e){if(this.typeSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegisterType&&0!=this.listRegisterType.length)for(var t=0;t<this.listRegisterType.length;t++)null!=this.listRegisterType[t]&&(this.listRegisterType[t].id==e.id?null==this.listRegisterType[t].listRegisterType?(this.typeSelected=this.listRegisterType[t],this.listRegisterType[t].classSelected="selected"):this.listRegisterType[t].classSelected=null:this.listRegisterType[t].classSelected=null)},e.CarCreateComponent.prototype.quitarPropietario=function(){if(this.profileSelected=null,null!=this.listRegister&&0!=this.listRegister.length)for(var e=0;e<this.listRegister.length;e++)null!=this.listRegister[e]&&(this.listRegister[e].classSelected=null)},e.CarCreateComponent.prototype.quitarType=function(){if(this.typeSelected=null,null!=this.listRegisterType&&0!=this.listRegisterType.length)for(var e=0;e<this.listRegisterType.length;e++)null!=this.listRegisterType[e]&&(this.listRegisterType[e].classSelected=null)},e.CarCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/car-report"])},e.CarCreateComponent.prototype.clean=function(){this.save&&(this.typeSelected=null,this.profileSelected=null),this.pagingActual={},this.detallePorPagina=10,this.totalPage=1,this.pageSelected=1,this.rif_buscar=null,this.nombre_buscar=null,this.listRegister=[],this.linea=null,this.placa=null,this.carroceria=null,this.capacidad=null,this.marca=null,this.color=null,this.anno=null,this.type=null,this.nombre_buscar_type=null,this.pagingActualType={},this.detallePorPaginaType=10,this.totalPageType=1,this.pageSelectedType=1,this.listRegisterType=[]},e.CarCreateComponent.prototype.done=function(){var e={};if(null==this.profileSelected)return this.mensaje="Debe seleccionar el propietario del veh\xEDculo",void this.msg.warning();if(null==this.typeSelected)return this.mensaje="Debe seleccionar el tipo de veh\xEDculo",void this.msg.warning();if(null==this.placa||null==this.placa||""==this.placa)return this.mensaje=capitalizeOnly(_("warning8")),void this.msg.warning();if(e.license_plate=this.placa.trim().toUpperCase(),null==this.carroceria||null==this.carroceria||""==this.carroceria)return this.mensaje=capitalizeOnly(_("warning33")),void this.msg.warning();if(e.bodywork=this.carroceria.trim().toUpperCase(),null==this.marca||null==this.marca||""==this.marca)return this.mensaje=capitalizeOnly(_("warning6")),void this.msg.warning();if(e.brand=this.marca.trim().toUpperCase(),null==this.color||null==this.color||""==this.color)return this.mensaje=capitalizeOnly(_("warning34")),void this.msg.warning();if(e.color=this.color.trim().toUpperCase(),null==this.anno||null==this.anno||""==this.anno)return this.mensaje=capitalizeOnly(_("warning7")),void this.msg.warning();if(!utils_keyNumber((this.anno+"").trim()))return this.mensaje=_("warning53"),void this.msg.warning();e.year=parseInt(this.anno),e.active=this.active_status;let t=null,n=_("message_dflt_37");this.save?t=this.service.callServicesHttp("car-post",this.profileSelected.business_id+"?owner_id="+this.profileSelected.id+"&vehicle_type_id="+this.typeSelected.id,e):(n=_("message_dflt_38"),t=this.service.callServicesHttp("car-put",this.business_id+"?id="+this.id+"&owner_id="+this.owner_id+"&vehicle_type_id="+this.vehicle_type_id,e)),t.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.CarCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_37");t=this.save?_("message_dflt_37"):_("message_dflt_38"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success27")):capitalizeOnly(_("success28")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarReportComponent=ng.core.Component({selector:"car-report",templateUrl:"views/car-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CarReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.line=null,this.status=null,this.propietario=null,this.marca=null,this.model=null,this.placa=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.CarReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("VEHICLE"!=t[r].name)"VEHICLE"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.CarReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-VEHICLE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.CarReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.line||null==this.line||""==this.line||"null"==this.line||(null==t&&(t={}),t.line_name="*"+this.line.trim()+"*"),null==this.rif||null==this.rif||""==this.rif||"null"==this.rif||(null==t&&(t={}),t.owner_id_doc="*"+this.rif.trim()+"*"),null==this.propietario||null==this.propietario||""==this.propietario||"null"==this.propietario||(null==t&&(t={}),t.owner_name="*"+this.propietario.trim()+"*"),null==this.marca||null==this.marca||""==this.marca||"null"==this.marca||(null==t&&(t={}),t.brand="*"+this.marca.trim()+"*"),null==this.placa||null==this.placa||""==this.placa||(null==t&&(t={}),t.license_plate="*"+this.placa.trim()+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.CarReportComponent.prototype.clean=function(){this.line=null,this.propietario=null,this.marca=null,this.model=null,this.placa=null,this.status=null,this.rif=null},e.CarReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CarReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CarReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CarReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CarReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CarReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CarReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("car-report",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.CarReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CarReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.CarReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("VEHICLE-DELETE")&&e.actions.push(this.checkAction("VEHICLE-DELETE")),null!=this.checkAction("UPDATE-VEHICLE")&&e.actions.push(this.checkAction("UPDATE-VEHICLE")),null!=this.checkAction("VIEW-VEHICLE")&&e.actions.push(this.checkAction("VIEW-VEHICLE")),e)},e.CarReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.CarReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"VEHICLE-DELETE":$("#modalDeleteCar").modal("show");break;case"UPDATE-VEHICLE":this.router.navigate(["/car-update"],{queryParams:{id:e.id,business_id:e.business_id,vehicle_type_id:e.vehicle_type_id,owner_id:e.owner_id}});break;case"VIEW-VEHICLE":this.router.navigate(["/car-view"],{queryParams:{id:e.id,business_id:e.business_id,vehicle_type_id:e.vehicle_type_id,owner_id:e.owner_id}});break;default:}},e.CarReportComponent.prototype.deleteData=function(){if($("#modalDeleteCar").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning5")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?id="+this.dataSelected.id+"&owner_id="+this.dataSelected.owner_id+"&vehicle_type_id="+this.dataSelected.vehicle_type_id;let t=_("message_dflt_33"),n=this.service.callServicesHttp("car-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.CarReportComponent.prototype.activeData=function(){if($("#modalActivateCar").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning5")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("placa")&&null!=this.dataSelected.placa&&null!=this.dataSelected.placa&&""!=this.dataSelected.placa){var e="&placa="+this.dataSelected.id;let t=this.service.callServicesHttp("car-active",e,null);this.procesarRespuestaActivar(t)}},e.CarReportComponent.prototype.inactiveData=function(){if($("#modalInactivateCar").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning5")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("placa")&&null!=this.dataSelected.placa&&null!=this.dataSelected.placa&&""!=this.dataSelected.placa){var e="&placa="+this.dataSelected.id;let t=this.service.callServicesHttp("car-inactive",e,null);this.procesarRespuestaDesactivar(t)}},e.CarReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_33");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success24")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_34");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("placa")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].placa==e.placa){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success25"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.CarReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_35");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("placa")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].placa==e.placa){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success26"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.CarReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarTypeCreateComponent=ng.core.Component({selector:"car-type-create",templateUrl:"views/car-type-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CarTypeCreateComponent.prototype.ngOnInit=function(){this.title=_("title55"),this.nombre=null,this.capacidad=null,this.listCaracteristicas=[];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.CarTypeCreateComponent.prototype.checkRol=function(){var e="CREATE-CAR-TYPES";this.active.url.hasOwnProperty("_value")&&("car-type-create"==this.active.url._value[0].path?(this.title=_("title55"),this.save=!0,e="CREATE-CAR-TYPES"):(this.title=_("title56"),this.save=!1,e="UPDATE-CAR-TYPE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarTypeCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.CarTypeCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("car-type-get","&id="+this.id,null),t=_("message_dflt_60");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.CarTypeCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_60");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarTypeCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&(this.nombre=e.name),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity),e.hasOwnProperty("features")&&(this.listCaracteristicas=[],null!=e.features&&0!=e.features.length))for(var t={},n=0;n<e.features.length;n++)null!=e.features[n]&&(t={},t.value=e.features[n],this.listCaracteristicas.push(t))},e.CarTypeCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/car-type-report"])},e.CarTypeCreateComponent.prototype.addFeature=function(){this.listCaracteristicas.push({value:""})},e.CarTypeCreateComponent.prototype.deleteFeature=function(e){var t=this.listCaracteristicas.slice(e+1);this.listCaracteristicas=this.listCaracteristicas.slice(0,e),this.listCaracteristicas=this.listCaracteristicas.concat(t)},e.CarTypeCreateComponent.prototype.clean=function(){this.nombre=null,this.capacidad=null,this.listCaracteristicas=[]},e.CarTypeCreateComponent.prototype.done=function(){var e={};if(null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje=_("warning38"),void this.msg.warning();if(e.name=this.nombre.trim().toUpperCase(),null==this.capacidad||null==this.capacidad||""==this.capacidad)return this.mensaje=_("warning39"),void this.msg.warning();if(e.capacity=this.capacidad,null==this.listCaracteristicas||0==this.listCaracteristicas.length)return this.mensaje=_("warning40"),void this.msg.warning();for(var t=[],n=0;n<this.listCaracteristicas.length;n++)null!=this.listCaracteristicas[n]&&(null==this.listCaracteristicas[n].value||null==this.listCaracteristicas[n].value||""==this.listCaracteristicas[n].value||t.push(this.listCaracteristicas[n].value.trim().toUpperCase()));if(null==t||0==t.length)return this.mensaje=_("warning40"),void this.msg.warning();e.features=t;let r=_("message_dflt_57"),s=null;this.save?s=this.service.callServicesHttp("car-type-post",null,e):(r=_("message_dflt_58"),s=this.service.callServicesHttp("car-type-put","&id="+this.id,e)),s.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,r),this.msg.error()})},e.CarTypeCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_57");this.save||(t=_("message_dflt_58")),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success41")):capitalizeOnly(_("success42")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarTypeCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarTypeReportComponent=ng.core.Component({selector:"car-type-report",templateUrl:"views/car-type-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CarTypeReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.nombre=null,this.checkRol()},e.CarTypeReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("CAR-TYPES"!=t[r].name)"CAR-TYPES"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarTypeReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.CarTypeReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-CAR-TYPES"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.CarTypeReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||"Todos"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.CarTypeReportComponent.prototype.clean=function(){this.nombre=null},e.CarTypeReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CarTypeReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CarTypeReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CarTypeReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CarTypeReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CarTypeReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CarTypeReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("car-type-report",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.CarTypeReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CarTypeReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.CarTypeReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("CAR-TYPE-DELETE")&&e.actions.push(this.checkAction("CAR-TYPE-DELETE")),null!=this.checkAction("UPDATE-CAR-TYPE")&&e.actions.push(this.checkAction("UPDATE-CAR-TYPE")),null!=this.checkAction("VIEW-CAR-TYPE")&&e.actions.push(this.checkAction("VIEW-CAR-TYPE")),e)},e.CarTypeReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.CarTypeReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"CAR-TYPE-DELETE":$("#modalDeleteCarType").modal("show");break;case"UPDATE-CAR-TYPE":this.router.navigate(["/car-type-update"],{queryParams:{id:e.id}});break;case"VIEW-CAR-TYPE":this.router.navigate(["/car-type-view"],{queryParams:{id:e.id}});break;default:}},e.CarTypeReportComponent.prototype.deleteData=function(){if($("#modalDeleteCarType").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning41")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=_("message_dflt_59"),n=this.service.callServicesHttp("car-type-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.CarTypeReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_59");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success43")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarTypeReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarTypeViewComponent=ng.core.Component({selector:"car-type-view",templateUrl:"views/car-type-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CarTypeViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title57")),this.nombre=null,this.capacidad=null,this.listCaracteristicas=[];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.CarTypeViewComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"VIEW-CAR-TYPE"==t[n].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarTypeViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.CarTypeViewComponent.prototype.getService=function(){let e=this.service.callServicesHttp("car-type-get","&id="+this.id,null),t=_("message_dflt_60");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.CarTypeViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_60");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarTypeViewComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&(this.nombre=e.name),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity),e.hasOwnProperty("features")&&(this.listCaracteristicas=[],null!=e.features&&0!=e.features.length))for(var t={},n=0;n<e.features.length;n++)null!=e.features[n]&&(t={},t.value=e.features[n],this.listCaracteristicas.push(t));e.hasOwnProperty("info")&&null!=e.info&&null!=e.info&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&null!=e.info.created_by_email&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&null!=e.info.created_at&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&null!=e.info.updated_by_email&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&null!=e.info.updated_at&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.CarTypeViewComponent.prototype.print=function(){window.print()},e.CarTypeViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarViewComponent=ng.core.Component({selector:"car-view",templateUrl:"views/car-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CarViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title3")),this.placa=null,this.carroceria=null,this.linea=null,this.propietario=null,this.marca=null,this.color=null,this.anno=null,this.type=null,this.capacidad=null,this.status=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.CarViewComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"VIEW-VEHICLE"==t[n].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CarViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("owner_id")&&(this.owner_id=this.active.queryParams._value.owner_id),this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id),this.active.queryParams._value.hasOwnProperty("vehicle_type_id")&&(this.vehicle_type_id=this.active.queryParams._value.vehicle_type_id),this.getService())},e.CarViewComponent.prototype.getService=function(){let e=this.service.callServicesHttp("car-get",this.business_id+"?id="+this.id+"&owner_id="+this.owner_id+"&vehicle_type_id="+this.vehicle_type_id,null),t=_("message_dflt_36");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.CarViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_36");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CarViewComponent.prototype.formattedData=function(e){e.hasOwnProperty("license_plate")&&null!=e.license_plate&&e.license_plate!=null&&""!=e.license_plate&&(this.placa=e.license_plate),e.hasOwnProperty("bodywork")&&null!=e.bodywork&&e.bodywork!=null&&""!=e.bodywork&&(this.carroceria=e.bodywork),e.hasOwnProperty("brand")&&null!=e.brand&&e.brand!=null&&""!=e.brand&&(this.marca=e.brand),e.hasOwnProperty("year")&&null!=e.year&&e.year!=null&&""!=e.year&&(this.anno=e.year),e.hasOwnProperty("color")&&null!=e.color&&e.color!=null&&""!=e.color&&(this.color=e.color),e.hasOwnProperty("vehicle_type_name")&&null!=e.vehicle_type_name&&e.vehicle_type_name!=null&&""!=e.vehicle_type_name&&(this.tipo=e.vehicle_type_name),e.hasOwnProperty("capacity")&&(this.capacidad=e.capacity),e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.linea=e.line_name),e.hasOwnProperty("owner_name")&&null!=e.owner_name&&e.owner_name!=null&&""!=e.owner_name&&(this.propietario=e.owner_name+" ("+e.owner_id_doc+")"),e.hasOwnProperty("info")&&null!=e.info&&e.info!=null&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&e.info.created_by_email!=null&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&e.info.created_at!=null&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&e.info.updated_by_email!=null&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&e.info.updated_at!=null&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.CarViewComponent.prototype.print=function(){window.print()},e.CarViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CheckPassengerComponent=ng.core.Component({selector:"check-passenger",templateUrl:"views/check-passenger.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CheckPassengerComponent.prototype.ngOnInit=function(){this.title=_("title66"),this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.doc=null,this.reservacion=null;var e=new Date,t=e.getDate();10>t&&(t="0"+e.getDate());var n=e.getMonth()+1;10>n&&(n="0"+n),this.fecha=e.getFullYear()+"-"+n+"-"+t;try{var i=document.getElementsByClassName("modal-backdrop")[0];if(null!=i){var r=i.parentNode;r.removeChild(i)}}catch(e){}try{var i=document.getElementById("sidenav-overlay");if(null!=i){var r=i.parentNode;r.removeChild(i)}}catch(e){}this.checkRol()},e.CheckPassengerComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"CHECK-PASSENGER"==t[n].name){e=!0;break}e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CheckPassengerComponent.prototype.search=function(){if(this.jsonFilter={},null==this.fecha||null==this.fecha||""==this.fecha)return this.mensaje="Debe ingresar la fecha de salida",void this.msg.warning();if(this.jsonFilter.trip_departure_date={},this.jsonFilter.trip_departure_date.lte=this.fecha+"T23:59:59.000Z",this.jsonFilter.trip_departure_date.gte=this.fecha+"T00:00:00.000Z",this.jsonFilter.trip_departure_date.time_zone=getTimeZone(),(null==this.reservacion||null==this.reservacion||""==this.reservacion||0==this.reservacion)&&(null==this.doc||null==this.doc||""==this.doc))return this.mensaje="Debe ingresar el n\xFAmero de reservaci\xF3n o n\xFAmero de documento del pasajero",void this.msg.warning();if(null!=this.reservacion&&null!=this.reservacion&&""!=this.reservacion&&0!=this.reservacion){var e=null;try{e=parseInt(this.reservacion.trim())}catch(t){e=null}if(null==e)return this.mensaje="El formato de la reserva tiene un formato incorrecto",void this.msg.warning();this.jsonFilter.reservation_sequence={},this.jsonFilter.reservation_sequence.lte=e,this.jsonFilter.reservation_sequence.gte=e}null==this.doc||null==this.doc||""==this.doc||(this.jsonFilter.passenger=this.doc.trim()),this.callServices(1,"&limit="+this.detallePorPagina)},e.CheckPassengerComponent.prototype.clean=function(){var e=new Date,t=e.getDate();10>t&&(t="0"+e.getDate());var n=e.getMonth()+1;10>n&&(n="0"+n),this.fecha=e.getFullYear()+"-"+n+"-"+t,this.doc=null,this.reservacion=null},e.CheckPassengerComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CheckPassengerComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CheckPassengerComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CheckPassengerComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CheckPassengerComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CheckPassengerComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CheckPassengerComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="&type=PAGINATE"+t,r=this.service.callServicesHttp("passenger-report",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.CheckPassengerComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CheckPassengerComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("type")&&null!=e.type&&null!=e.type&&""!=e.type&&(e.formatted_type=_(e.type).toUpperCase()),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase()),e)},e.CheckPassengerComponent.prototype.changeStatus=function(e,t){if(null==e||null==e||""==e)return this.mensaje=capitalizeOnly(_("warning50")),void this.msg.warning();else{var n="&itinerary_id="+e.itinerary_id+"&trip_id="+e.trip_id+"&id="+e.id+"&business_id="+e.business_id+"&status="+t+"&vehicle_type_id="+e.vehicle_type_id;let r=_("message_dflt_76"),s=this.service.callServicesHttp("passenger-change-status",n,null);s.subscribe(e=>{if(null==e||null==e||""==e)this.mensaje=r,this.msg.error();else if(200==e.status_http)try{if(null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].id==e.id){this.listRegister[t]=this.formattedData(e);break}this.mensaje=_("success56"),this.msg.info()}catch(e){}else this.mensaje=this.service.processMessageError(e,r),this.msg.error()},e=>{this.mensaje=this.service.processError(e,r),this.msg.error()})}}})(window.app||(window.app={}));(function(e){e.CheckTripComponent=ng.core.Component({selector:"check-trip",templateUrl:"views/check-trip.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CheckTripComponent.prototype.ngOnInit=function(){this.title=_("title69"),this.fecha=null;var e=new Date,t=e.getDate();10>t&&(t="0"+e.getDate());var n=e.getMonth()+1;10>n&&(n="0"+n),this.fecha=e.getFullYear()+"-"+n+"-"+t;try{var i=document.getElementsByClassName("modal-backdrop")[0];if(null!=i){var r=i.parentNode;r.removeChild(i)}}catch(e){}try{var i=document.getElementById("sidenav-overlay");if(null!=i){var r=i.parentNode;r.removeChild(i)}}catch(e){}this.checkRol()},e.CheckTripComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r]&&"CHECK-TRIP"==t[r].name&&(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length))for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CheckTripComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:"CHECK-OPERATION"==e.name?(this.mostrarCheckOperacion=!0,null):"CHECK-INTT"==e.name?(this.mostrarCheckIntt=!0,null):e},e.CheckTripComponent.prototype.clean=function(){this.fecha=null,this.nro=null},e.CheckTripComponent.prototype.buscar=function(){if(this.jsonFilter={},null==this.fecha||null==this.fecha||""==this.fecha)return this.mensaje="Debe ingresar la fecha del viaje",void this.msg.warning();if(this.jsonFilter.departure_date={},this.jsonFilter.departure_date.lte=this.fecha+"T23:59:59.000Z",this.jsonFilter.departure_date.gte=this.fecha+"T00:00:00.000Z",this.jsonFilter.departure_date.time_zone=getTimeZone(),null==this.nro||null==this.nro||""==this.nro||0==this.nro)return this.mensaje="Debe ingresar el nro del viaje",void this.msg.warning();var e=null;try{e=parseInt(this.nro.trim())}catch(t){e=null}return null==e?(this.mensaje="El formato del n\xFAmero del viaje tiene un formato incorrecto",void this.msg.warning()):void(this.jsonFilter.sequence={},this.jsonFilter.sequence.lte=e,this.jsonFilter.sequence.gte=e,this.callServices())},e.CheckTripComponent.prototype.callServices=function(){let e=_("message_dflt_81");this.sequence=null,this.fecha_salida=null,this.hora_salida=null,this.boarding_gate=null,this.drivers=[],this.ocupados=null,this.line_code=null,this.line_name=null;let t=this.service.callServicesHttp("travel-report","&type=PAGINATE&limit=1",this.jsonFilter);t.subscribe(t=>{if(null==t||null==t||""==t)return this.mensaje=e,void this.msg.warning();if(t.hasOwnProperty("results")){if(null==t.results||0==t.results.length)return this.mensaje="No hay viajes con ese identificador y/o fecha",void this.msg.warning();try{var n=t.results[0];if(this.dataSelected=n,n.hasOwnProperty("line_code")&&(null!=n.line_code&&null!=n.line_code&&""!=n.line_code&&(this.line_code=n.line_code),null!=n.line_name&&null!=n.line_name&&""!=n.line_name&&(this.line_name=n.line_name)),n.hasOwnProperty("boarding_gate")&&null!=n.boarding_gate&&null!=n.boarding_gate&&""!=n.boarding_gate&&(this.boarding_gate=n.boarding_gate),n.hasOwnProperty("sequence")&&null!=n.sequence&&null!=n.sequence&&""!=n.sequence&&(this.sequence=n.sequence),n.hasOwnProperty("intt_check")&&(n.intt_check?this.check_intt="SI":this.check_intt="NO"),n.hasOwnProperty("operation_check")&&(n.operation_check?this.operation_check="SI":this.operation_check="NO"),n.hasOwnProperty("seats_active")&&(this.ocupados=n.seats_active,this.total_puesto=n.seats_active,n.hasOwnProperty("seats_available")&&(this.ocupados=n.seats_active-n.seats_available)),n.hasOwnProperty("drivers")&&(this.drivers=n.drivers),n.hasOwnProperty("vehicle_license_plate")&&null!=n.vehicle_license_plate&&null!=n.vehicle_license_plate&&""!=n.vehicle_license_plate&&(this.vehicle_license_plate=n.vehicle_license_plate),n.hasOwnProperty("departure_date")&&null!=n.departure_date&&null!=n.departure_date&&""!=n.departure_date){this.fecha_salida=replaceAll(n.departure_date,"T"," ");try{this.fecha_salida=this.fecha_salida.split(" "),this.hora_salida=this.fecha_salida[1],this.fecha_salida=this.fecha_salida[0]}catch(e){}}}catch(e){}}else return this.mensaje="No hay viajes con ese identificador y/o fecha",void this.msg.warning()},t=>{this.mensaje=this.service.processError(t,e),this.msg.error()})},e.CheckTripComponent.prototype.openModalINTT=function(){$("#modalCheckViajeINTT").modal("show")},e.CheckTripComponent.prototype.openModalOperaciones=function(){$("#modalCheckViajeOperaciones").modal("show")},e.CheckTripComponent.prototype.checkData=function(e){if("INTT"==e?$("#modalCheckViajeINTT").modal("hide"):$("#modalCheckViajeOperaciones").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning12")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var t="&line_id="+this.dataSelected.business_id+"&itinerary_id="+this.dataSelected.itinerary_id+"&id="+this.dataSelected.id+"&check=true";let n=_("message_dflt_82"),i=null;"INTT"==e?($("#modalCheckViajeINTT").modal("hide"),i=this.service.callServicesHttp("travel-check-intt",t,null)):($("#modalCheckViajeOperaciones").modal("hide"),i=this.service.callServicesHttp("travel-check-operation",t,null)),i.subscribe(e=>{null==e||null==e||""==e?(this.mensaje=n,this.msg.error()):200==e.status_http?(e.hasOwnProperty("intt_check")&&(!0==e.intt_check?this.check_intt="SI":this.check_intt="NO"),e.hasOwnProperty("operation_check")&&(!0==e.operation_check?this.operation_check="SI":this.operation_check="NO"),this.mensaje=_("success60"),this.msg.info()):(this.mensaje=this.service.processMessageError(e,n),this.msg.error())},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}}})(window.app||(window.app={}));(function(e){e.CurrencyExchangeCreateComponent=ng.core.Component({selector:"currency-exchange-create",templateUrl:"views/currency-exchange-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CurrencyExchangeCreateComponent.prototype.ngOnInit=function(){this.title=_("title67"),this.monto=null,this.listMonedas=[{value:"USD",name:"Dolar"},{value:"PTR",name:"Petro"},{value:"EUR",name:"Euro"}],this.moneda="USD",$("#monto").mask("#.##0,00",{reverse:!0}),this.checkRol()},e.CurrencyExchangeCreateComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"CURRENCY-EXCHANGE-CREATE"==t[n].name){e=!0;break}e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CurrencyExchangeCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/currency-exchange-report"])},e.CurrencyExchangeCreateComponent.prototype.clean=function(){this.monto=null,this.moneda="USD"},e.CurrencyExchangeCreateComponent.prototype.done=function(){var e="",t=0;if(null==this.monto||null==this.monto||""==this.monto)return this.mensaje=_("warning51"),void this.msg.warning();try{var n=$("#monto").val();n=n.replace(/\./g,"").replace(/,/g,""),n=(replaceAll(n," ","")+"").trim(),t=(parseFloat(n)/100).toFixed(2)}catch(e){t=0}if(""==t||0==t)return this.mensaje=_("warning51"),void this.msg.warning();if(t=parseFloat(t),e="&rate="+t,null==this.moneda||null==this.moneda||""==this.moneda||"null"==this.moneda)return this.mensaje=_("warning52"),void this.msg.warning();e=e+"&currency="+this.moneda;let i=_("message_dflt_77"),r=this.service.callServicesHttp("currency-exchange-post",e,null);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.CurrencyExchangeCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_77");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=capitalizeOnly(_("success57")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CurrencyExchangeCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CurrencyExchangeReportComponent=ng.core.Component({selector:"currency-exchange-report",templateUrl:"views/currency-exchange-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.CurrencyExchangeReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.nombre=null,this.checkRol()},e.CurrencyExchangeReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("CURRENCY-EXCHANGE"!=t[r].name)"CURRENCY-EXCHANGE"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.CurrencyExchangeReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.CurrencyExchangeReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CURRENCY-EXCHANGE-REPORT"==e.name?null:"CURRENCY-EXCHANGE-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.CurrencyExchangeReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||"Todos"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.CurrencyExchangeReportComponent.prototype.clean=function(){this.nombre=null},e.CurrencyExchangeReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.CurrencyExchangeReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.CurrencyExchangeReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.CurrencyExchangeReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.CurrencyExchangeReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.CurrencyExchangeReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.CurrencyExchangeReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="&type=PAGINATE"+t,r=this.service.callServicesHttp("currency-exchange-report",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.CurrencyExchangeReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.CurrencyExchangeReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.CurrencyExchangeReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("created_at")&&null!=e.created_at&&null!=e.created_at&&""!=e.created_at&&(e.formatted_at=formattingDate(e.created_at)),e.hasOwnProperty("rate")&&null!=e.rate&&null!=e.rate&&""!=e.rate&&(e.monto=amountFormattingObject(100*e.rate),e.monto=e.monto.integerPart+","+e.monto.decimalPart+" Bs"),e)},e.CurrencyExchangeReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.CurrencyExchangeReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"CAR-TYPE-DELETE":$("#modalDeleteCarType").modal("show");break;case"UPDATE-CAR-TYPE":this.router.navigate(["/car-type-update"],{queryParams:{id:e.id}});break;case"VIEW-CAR-TYPE":this.router.navigate(["/car-type-view"],{queryParams:{id:e.id}});break;default:}},e.CurrencyExchangeReportComponent.prototype.deleteData=function(){if($("#modalDeleteCarType").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning41")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=_("message_dflt_59"),n=this.service.callServicesHttp("car-type-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.CurrencyExchangeReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_59");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success43")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.CurrencyExchangeReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.DriverCreateComponent=ng.core.Component({selector:"driver-create",templateUrl:"views/driver-create-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.DriverCreateComponent.prototype.ngOnInit=function(){this.title=_("title60"),this.pagingActualLine={},this.detallePorPaginaLine=10,this.totalPageLine=1,this.pageSelectedLine=1,this.listRegisterLine=[],this.listDocs=["V","E","G","J"],this.id_doc="V",this.doc=null,this.nombre=null,this.apellido=null,this.telefono=[],this.email=[],this.etiqueta=null,this.isRif=!0,this.isCi=!1,this.save=!0,this.texto="Guardar",this.active_status=!0,this.classView1="col-lg-4 col-md-4 col-sm-6 col-12",this.classView2="col-lg-8 col-md-8 col-sm-6 col-12",this.checkRol()},e.DriverCreateComponent.prototype.keyPress=function(e){return keypressNumbersInteger(e)},e.DriverCreateComponent.prototype.checkRol=function(){var e="DRIVER-CREATE";this.active.url.hasOwnProperty("_value")&&("driver-create"==this.active.url._value[0].path?(this.title=_("title60"),this.save=!0,e="DRIVER-CREATE"):(this.title=_("title61"),this.save=!1,e="DRIVER-UPDATE",this.classView2="col-lg-12 col-md-12 col-sm-12 col-12",this.texto="Actualizar"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.DriverCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))},e.DriverCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("driver-get",this.business_id+"?id="+this.id,null),t=_("message_dflt_70");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.DriverCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_70");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.DriverCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name)try{e.name=e.name.split(","),1==e.name.length?this.nombre=e.name[0].trim():2==e.name.length&&(this.nombre=e.name[0].trim(),this.apellido=e.name[1].trim())}catch(e){}e.hasOwnProperty("phone")&&null!=e.phone&&e.phone!=null&&""!=e.phone&&(this.telefono=e.phone),e.hasOwnProperty("email")&&null!=e.email&&e.email!=null&&""!=e.email&&(this.email=e.email),e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.lineSelected={},this.lineSelected.name=e.line_name,this.lineSelected.id=this.id),e.hasOwnProperty("active")&&(this.active_status=e.active);try{e.hasOwnProperty("id_doc")&&null!=e.id_doc&&e.id_doc!=null&&""!=e.id_doc&&(this.id_doc=e.id_doc.charAt(0),this.doc=e.id_doc.substring(1,e.id_doc.length))}catch(e){}},e.DriverCreateComponent.prototype.searchLine=function(){this.jsonFilter={};var e=[],t=null;if(t={},t.active=!0,null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.name="*"+this.linea+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServicesLine(1,"&offset=0&limit="+this.detallePorPaginaLine)},e.DriverCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPaginaLine=e.detalles,this.totalPageLine=e.pagina,null==this.listRegisterLine||this.listRegisterLine==null||0==this.listRegisterLine.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.DriverCreateComponent.prototype.getValueFirstLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.DriverCreateComponent.prototype.getValuePreviousLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.DriverCreateComponent.prototype.getValueLastLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.DriverCreateComponent.prototype.getValueNextLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.DriverCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.DriverCreateComponent.prototype.callServicesLine=function(e,t){this.pageSelectedLine=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("line-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuestaLine(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.DriverCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegisterLine=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegisterLine=[];else if(null==e.count||null==e.count||0==e.count)this.listRegisterLine=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegisterLine=[];for(var r=0;r<e.results.length;r++)n=this.formattedDataLine(e.results[r]),null!=n&&this.listRegisterLine.push(n);this.pagingActualLine.count=e.count}else this.listRegisterLine=[]}},e.DriverCreateComponent.prototype.formattedDataLine=function(e){return null==e||null==e||""==e?null:e},e.DriverCreateComponent.prototype.quitarLinea=function(){if(this.lineSelected=null,null!=data&&null!=data&&""!=data&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var e=0;e<this.listRegisterLine.length;e++)null!=this.listRegisterLine[e]&&(this.listRegisterLine[e].classSelected=null)},e.DriverCreateComponent.prototype.selectLine=function(e){if(this.lineSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var t=0;t<this.listRegisterLine.length;t++)null!=this.listRegisterLine[t]&&(this.listRegisterLine[t].code==e.code?null==this.listRegisterLine[t].classSelected?(this.lineSelected=this.listRegisterLine[t],this.listRegisterLine[t].classSelected="selected"):this.listRegisterLine[t].classSelected=null:this.listRegisterLine[t].classSelected=null)},e.DriverCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/driver-report"])},e.DriverCreateComponent.prototype.clean=function(){this.listRegisterLine=[],this.nombre=null,this.apellido=null,this.telefono=null,this.email=null,this.save&&(this.lineSelected=null,this.doc=null,this.id_doc="V")},e.DriverCreateComponent.prototype.done=function(){var e={};if(null==this.lineSelected)return this.mensaje="Debe seleccionar la linea a la que pertenece el conductor",void this.msg.warning();if(null==this.id_doc||null==this.id_doc||""==this.id_doc||"null"==this.id_doc)return this.mensaje="Debe seleccionar el tipo de documento",void this.msg.warning();if(e.id_doc=this.id_doc,null==this.doc||null==this.doc||""==this.doc)return this.mensaje="Debe ingresar el n\xFAmero de RIF/CI del conductor",void this.msg.warning();this.doc=this.doc.trim();var t=0;if(9>this.doc.length){t=9-this.doc.length;for(var n="",r=0;r<t;r++)n+="0";this.doc=n+this.doc}if(e.id_doc+=this.doc,null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje="Debe ingresar el nombre del conductor",void this.msg.warning();if(e.name=this.nombre.trim().toUpperCase(),null==this.apellido||null==this.apellido||""==this.apellido)return this.mensaje="Debe ingresar el apellido del conductor",void this.msg.warning();if(e.name=e.name+" , "+this.apellido.trim().toUpperCase(),null!=this.telefono&&""!=this.telefono&&null!=this.telefono&&""!=this.telefono.trim()){var n=this.telefono;e.phone=n+"";var s=n.substring(0,3);if("414"!=s&&"416"!=s&&"424"!=s&&"426"!=s&&"412"!=s)return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe comenzar por 414 | 416 | 426 | 424 |412",void this.msg.warning();if(!utils_keyNumber(n))return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe ser s\xF3lo n\xFAmeros",void this.msg.warning();e.phone=e.phone.trim()}if(null!=this.email&&""!=this.email&&null!=this.email&&""!=this.email.trim()){if(!validarEmail(this.email.trim()))return this.mensaje="El correo electr\xF3nico ingresado tiene formato incorrecto",void this.msg.warning();e.email=this.email.trim().toLowerCase()}e.active=this.active_status;let o=null,d=_("message_dflt_65");this.save?o=this.service.callServicesHttp("driver-post",this.lineSelected.id,e):(d=_("message_dflt_66"),o=this.service.callServicesHttp("driver-put",this.business_id+"?id="+this.id,e)),o.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,d),this.msg.error()})},e.DriverCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_65");t=this.save?_("message_dflt_65"):_("message_dflt_66"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success47")):capitalizeOnly(_("success48")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.DriverCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.DriverReportComponent=ng.core.Component({selector:"driver-report",templateUrl:"views/driver-report-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.DriverReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.status=null,this.nombre=null,this.doc=null,this.email=null,this.linea=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.DriverReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("DRIVERS"!=t[r].name)"DRIVERS"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.DriverReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:"DRIVER-REPORT"==e.name?null:e},e.DriverReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"DRIVER-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.DriverReportComponent.prototype.clean=function(){this.nombre=null,this.doc=null,this.marca=null,this.rif=null,this.email=null,this.linea=null,this.status=null},e.DriverReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre.trim()+"*"),null==this.doc||null==this.doc||""==this.doc||"null"==this.doc||(null==t&&(t={}),t.id_doc="*"+this.doc.trim()+"*"),null==this.email||null==this.email||""==this.email||"null"==this.email||(null==t&&(t={}),t.email="*"+this.email.trim()+"*"),null==this.linea||null==this.linea||""==this.linea||(null==t&&(t={}),t.line_name="*"+this.linea.trim()+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.DriverReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.DriverReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.DriverReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.DriverReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.DriverReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.DriverReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.DriverReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("driver-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.DriverReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.DriverReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.DriverReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("DRIVER-DELETE")&&e.actions.push(this.checkAction("DRIVER-DELETE")),null!=this.checkAction("DRIVER-UPDATE")&&e.actions.push(this.checkAction("DRIVER-UPDATE")),null!=this.checkAction("DRIVER-VIEW")&&e.actions.push(this.checkAction("DRIVER-VIEW")),e.hasOwnProperty("active")&&(e.active?(e.formatted_status="ACTIVO",null!=this.checkAction("DRIVER-INACTIVE")&&e.actions.push(this.checkAction("DRIVER-INACTIVE"))):(e.formatted_status="INACTIVO",null!=this.checkAction("DRIVER-ACTIVE")&&e.actions.push(this.checkAction("DRIVER-ACTIVE")))),e)},e.DriverReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.DriverReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"DRIVER-DELETE":$("#modalDeleteDriver").modal("show");break;case"DRIVER-UPDATE":this.router.navigate(["/driver-update"],{queryParams:{id:e.id,business_id:e.business_id}});break;case"DRIVER-ACTIVE":$("#modalActivateDriver").modal("show");break;case"DRIVER-INACTIVE":$("#modalInactivateDriver").modal("show");break;default:}},e.DriverReportComponent.prototype.deleteData=function(){if($("#modalDeleteDriver").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning48")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?id="+this.dataSelected.id;let t=_("message_dflt_67"),n=this.service.callServicesHttp("driver-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.DriverReportComponent.prototype.activeData=function(){if($("#modalActivateDriver").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning48")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?id="+this.dataSelected.id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!0}catch(e){}let n=_("message_dflt_68"),i=this.service.callServicesHttp("driver-put",e,t);i.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.DriverReportComponent.prototype.inactiveData=function(){if($("#modalInactivateDriver").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning48")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?id="+this.dataSelected.id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!1}catch(e){}let n=_("message_dflt_69"),i=this.service.callServicesHttp("driver-put",e,t);i.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.DriverReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_67");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success49")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.DriverReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_68");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id&&this.listRegister[n].business_id==e.business_id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success50"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.DriverReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_69");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id&&this.listRegister[n].business_id==e.business_id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success51"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.DriverReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.FareCreateComponent=ng.core.Component({selector:"fare-create",templateUrl:"views/fare-create-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,e.LoadingServiceComponent,function(e,t,n,i,r){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i,this.loading=r}]}),e.FareCreateComponent.prototype.devolverEvent=function(e){null==e||e==null||""==e||8!=e.keyCode||(null==this.monto?this.monto="0,00":""==this.monto?this.monto="0,00":3==this.monto.length&&(this.monto="0,"+this.monto.charAt(0)+this.monto.charAt(2)))},e.FareCreateComponent.prototype.keyDown=function(e){if(null!=e&&e!=null&&""!=e&&(37==e.keyCode||38==e.keyCode))return!1},e.FareCreateComponent.prototype.getEventMonto=function(e){if(null!=e&&e!=null&&""!=e){if(!this.regex.test(e.key))return!1;if(null!=this.monto&&4==this.monto.length){if("0,00"==this.monto)return 0!=e.key&&"0"!=e.key&&(this.monto="0,0"+e.key,!1);if("0,0"==this.monto.substring(0,3))return this.monto="0,"+this.monto.charAt(this.monto.length-1)+e.key,!1;if("0"==this.monto.charAt(0)||0==this.monto.charAt(0))return this.monto=this.monto.charAt(2)+","+this.monto.charAt(3)+e.key,!1}}},e.FareCreateComponent.prototype.moveCursorToEnd=function(){var e=document.getElementById("monto");if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if("undefined"!=typeof e.createTextRange){e.focus();var t=e.createTextRange();t.collapse(!1),t.select()}},e.FareCreateComponent.prototype.changeAmount=function(){null==this.monto||this.monto==null||""==this.monto||(1==this.monto.length?this.monto="0,0"+this.monto:2==this.monto.length&&(this.monto="0,"+this.monto))},e.FareCreateComponent.prototype.inputEvent=function(e){if(null!=e&&e!=null&&""!=e)if(null!=e.data&&null!=e.data&&""!=e.data){if(!this.regex.test(e.data))return!1;if(null!=this.monto&&4==this.monto.length){if("0,00"==this.monto)return 0==e.data||"0"==e.data?(document.getElementById("monto").value="0,00",!1):(document.getElementById("monto").value="0,0"+e.data,!1);if("0,0"==this.monto.substring(0,3))return document.getElementById("monto").value="0,"+this.monto.charAt(this.monto.length-1)+e.data,!1;if("0"==this.monto.charAt(0)||0==this.monto.charAt(0))return document.getElementById("monto").value=this.monto.charAt(2)+","+this.monto.charAt(3)+e.data,!1}}else"deleteContentBackward"==e.inputType&&(null==this.monto?document.getElementById("monto").value="0,00":""==this.monto?document.getElementById("monto").value="0,00":3==this.monto.length&&(document.getElementById("monto").value="0,"+this.monto.charAt(0)+this.monto.charAt(2)))},e.FareCreateComponent.prototype.keyupsearch=function(e,t){try{13==e.keyCode&&("LINEA"==t?this.buscarLinea():"TIPO"==t&&this.buscarType())}catch(e){}},e.FareCreateComponent.prototype.ngOnInit=function(){this.regex=/^\d+$/,this.title=capitalizeOnly(_("title58")),$("#monto").mask("#.##0,00",{reverse:!0}),this.save=!0,this.lineaSelected=null,this.lineaSelectedShow=null,this.tipoSelectedShow=null,this.tipoSelected=null,this.nombre=null,this.monto=null,this.paradaSelectedSalidaShow=null,this.paradaSelectedSalida=null,this.paradaSelectedLlegadaShow=null,this.paradaSelectedLlegada=null,this.pagingActualLine={},this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.listLines=[],this.pagingActualType={},this.totalPageType=1,this.pageSelectedType=1,this.detallePorPaginaType=10,this.listTypes=[],this.pagingActualParada={},this.totalPageParada=1,this.pageSelectedParada=1,this.detallePorPaginaParada=10,this.listParadas=[],this.parada_buscar=null,this.type_buscar=null,this.texto="Guardar",this.mostrarCargando=!1,this.imagenCargando="assets/images/loading.gif",this.listCurrency=[{value:"USD",name:"$",decimals:2,display:"D\xD3LAR ESTADOUNIDENSE"}],this.currency="USD",this.monto_base=null,this.monto="0,00",this.checkRol()},e.FareCreateComponent.prototype.checkRol=function(){var e="FARE-CREATE";this.active.url.hasOwnProperty("_value")&&("fare-create"==this.active.url._value[0].path?(this.title=_("title58"),this.save=!0,e="FARE-CREATE"):(this.title=_("title59"),this.save=!1,e="FARE-UPDATE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.FareCreateComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.active.queryParams._value.hasOwnProperty("vehicle_type_id")&&(this.vehicle_type_id=this.active.queryParams._value.vehicle_type_id,this.getService())))},e.FareCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("fare-get",this.business_id+"?realm="+this.service.getRealm()+"&id="+this.id+"&vehicle_type_id="+this.vehicle_type_id,null),t=_("message_dflt_64");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.FareCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_64");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.FareCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("line_name")&&(this.line_name=e.line_name),e.hasOwnProperty("vehicle_type_id")&&(this.tipoSelected={},this.tipoSelected.id=e.vehicle_type_id,e.hasOwnProperty("vehicle_type_name")&&(this.tipoSelected.name=e.vehicle_type_name,this.tipoSelectedShow=e.vehicle_type_name)),e.hasOwnProperty("start_stop_code")&&(this.paradaSelectedSalida={},this.paradaSelectedSalida.code=e.start_stop_code,e.hasOwnProperty("start_stop_name")&&(this.paradaSelectedSalida.name=e.start_stop_name,this.paradaSelectedSalidaShow=e.start_stop_code+" - "+e.start_stop_name)),e.hasOwnProperty("destination_stop_code")&&(this.paradaSelectedLlegada={},this.paradaSelectedLlegada.code=e.destination_stop_code,e.hasOwnProperty("destination_stop_name")&&(this.paradaSelectedLlegada.name=e.destination_stop_code,this.paradaSelectedLlegadaShow=e.destination_stop_code+" - "+e.destination_stop_name)),e.hasOwnProperty("name")&&(this.nombre=e.name),e.hasOwnProperty("amount")){this.monto_base=e.amount,this.monto_base=amountFormattingObject(100*this.monto_base),this.monto_base=this.monto_base.integerPart+","+this.monto_base.decimalPart;try{this.monto=(112*e.amount/100).toFixed(),this.monto=amountFormattingObject(100*this.monto),this.monto=this.monto.integerPart+","+this.monto.decimalPart}catch(e){}}e.hasOwnProperty("currency")&&(this.currency=e.currency)},e.FareCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/fare-report"])},e.FareCreateComponent.prototype.clean=function(){this.save&&(this.lineaSelected=null,this.lineaSelectedShow=null,this.tipoSelectedShow=null,this.tipoSelected=null,this.paradaSelectedSalidaShow=null,this.paradaSelectedSalida=null,this.paradaSelectedLlegadaShow=null,this.paradaSelectedLlegada=null),this.nombre=null,this.monto=null,this.currency=null,this.pagingActualLine={},this.totalPageLine=1,this.pageSelectedLine=1,this.detallePorPaginaLine=10,this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],this.pagingActualType={},this.totalPageType=1,this.pageSelectedType=1,this.detallePorPaginaType=10,this.listTypes=[]},e.FareCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPageLine=e.pagina,null==this.listLines||this.listLines==null||0==this.listLines.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.FareCreateComponent.prototype.getValueFirstLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.FareCreateComponent.prototype.getValuePreviousLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.FareCreateComponent.prototype.getValueLastLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.FareCreateComponent.prototype.getValueNextLine=function(e){this.listLines=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.FareCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.FareCreateComponent.prototype.callServicesLine=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("line-report",i,this.jsonFilterLine);r.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaLine(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.FareCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listLines=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listLines=[];else if(null==e.count||null==e.count||0==e.count)this.listLines=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listLines=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listLines.push(n);this.pagingActualLine.count=e.count}else this.listLines=[]}},e.FareCreateComponent.prototype.getCantidadSelectedType=function(e){null==e||e==null||""==e||(this.detallePorPaginaType=e.detalles,this.totalPageType=e.pagina,null==this.listTypes||this.listTypes==null||0==this.listTypes.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesType(1,"&limit="+this.detallePorPaginaType))},e.FareCreateComponent.prototype.getValueFirstType=function(e){this.listTypes=[],this.pagingActualType.hasOwnProperty("first_page")&&null!=this.pagingActualType.first_page&&this.pagingActualType.first_page!=null&&""!=this.pagingActualType.first_page&&this.callServicesType(e,this.pagingActualType.first_page)},e.FareCreateComponent.prototype.getValuePreviousType=function(e){this.listTypes=[],this.pagingActualType.hasOwnProperty("previous_page")&&null!=this.pagingActualType.previous_page&&this.pagingActualType.previous_page!=null&&""!=this.pagingActualType.previous_page&&this.callServicesType(e,this.pagingActualType.previous_page)},e.FareCreateComponent.prototype.getValueLastType=function(e){this.listTypes=[],this.pagingActualType.hasOwnProperty("last_page")&&null!=this.pagingActualType.last_page&&this.pagingActualType.last_page!=null&&""!=this.pagingActualType.last_page&&this.callServicesType(e,this.pagingActualType.last_page)},e.FareCreateComponent.prototype.getValueNextType=function(e){this.listTypes=[],this.pagingActualType.hasOwnProperty("next_page")&&null!=this.pagingActualType.next_page&&this.pagingActualType.next_page!=null&&""!=this.pagingActualType.next_page&&this.callServicesType(e,this.pagingActualType.next_page)},e.FareCreateComponent.prototype.getValueChangeRecordsType=function(e){this.pageSelectedType=e},e.FareCreateComponent.prototype.callServicesType=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("car-type-report",i,this.jsonFilterType);r.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaType(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.FareCreateComponent.prototype.procesarRespuestaType=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listTypes=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listTypes=[];else if(null==e.count||null==e.count||0==e.count)this.listTypes=[];else{this.pagingActualType={},this.pagingActualType.count=e.count;let t=Math.floor(this.pagingActualType.count/this.detallePorPaginaType),i=this.pagingActualType.count%this.detallePorPaginaType;if(this.totalPageType=0==i?t:t+1,this.pagingActualType.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualType.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualType.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualType.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listTypes=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listTypes.push(n);this.pagingActualType.count=e.count}else this.listTypes=[]}},e.FareCreateComponent.prototype.getCantidadSelectedParada=function(e){null==e||e==null||""==e||(this.detallePorPaginaParada=e.detalles,this.totalPageParada=e.pagina,null==this.listParadas||this.listParadas==null||0==this.listParadas.length?this.mensajeServicio=capitalizeOnly(_("message_dflt_4")):this.callServicesParada(1,"&limit="+this.detallePorPaginaParada))},e.FareCreateComponent.prototype.getValueFirstParada=function(e){this.listParadas=[],this.pagingActualParada.hasOwnProperty("first_page")&&null!=this.pagingActualParada.first_page&&this.pagingActualParada.first_page!=null&&""!=this.pagingActualParada.first_page&&this.callServicesParada(e,this.pagingActualParada.first_page)},e.FareCreateComponent.prototype.getValuePreviousParada=function(e){this.listParadas=[],this.pagingActualParada.hasOwnProperty("previous_page")&&null!=this.pagingActualParada.previous_page&&this.pagingActualParada.previous_page!=null&&""!=this.pagingActualParada.previous_page&&this.callServicesParada(e,this.pagingActualParada.previous_page)},e.FareCreateComponent.prototype.getValueLastParada=function(e){this.listParadas=[],this.pagingActualParada.hasOwnProperty("last_page")&&null!=this.pagingActualParada.last_page&&this.pagingActualParada.last_page!=null&&""!=this.pagingActualParada.last_page&&this.callServicesParada(e,this.pagingActualParada.last_page)},e.FareCreateComponent.prototype.getValueNextParada=function(e){this.listParadas=[],this.pagingActualParada.hasOwnProperty("next_page")&&null!=this.pagingActualParada.next_page&&this.pagingActualParada.next_page!=null&&""!=this.pagingActualParada.next_page&&this.callServicesParada(e,this.pagingActualParada.next_page)},e.FareCreateComponent.prototype.getValueChangeRecordsParada=function(e){this.pageSelectedParada=e},e.FareCreateComponent.prototype.callServicesParada=function(e,t){let n=_("message_dflt_4");this.pageSelectedParada=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="&type=PAGINATE"+t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("parada-report",i,this.jsonFilterParada);r.subscribe(e=>{this.mostrarCargando=!1,this.procesarRespuestaParada(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.FareCreateComponent.prototype.procesarRespuestaParada=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listParadas=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listParadas=[];else if(null==e.count||null==e.count||0==e.count)this.listParadas=[];else{this.pagingActualParada={},this.pagingActualParada.count=e.count;let t=Math.floor(this.pagingActualParada.count/this.detallePorPaginaParada),i=this.pagingActualParada.count%this.detallePorPaginaParada;if(this.totalPageParada=0==i?t:t+1,this.pagingActualParada.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualParada.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualParada.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualParada.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listParadas=[];for(var r=0;r<e.results.length;r++)n=e.results[r],null!=n&&this.listParadas.push(n);this.pagingActualParada.count=e.count}else this.listParadas=[]}},e.FareCreateComponent.prototype.openModalLineas=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.linea_buscar=null,this.listLines=[],$("#modalLineas").modal("show")},e.FareCreateComponent.prototype.openModalTypes=function(){this.mensajeServicio=null,this.mostrarCargando=!1,this.type_buscar=null,this.listTypes=[],$("#modalType").modal("show")},e.FareCreateComponent.prototype.openModalParadas=function(e){this.mensajeServicio=null,this.mostrarCargando=!1,this.parada_buscar=null,this.listParadas=[],this.punto=e,$("#modalParada").modal("show")},e.FareCreateComponent.prototype.buscarLinea=function(){this.jsonFilterLine={};var e=[],t=null;if(null==this.linea_buscar||null==this.linea_buscar||""==this.linea_buscar||"null"==this.linea_buscar||(null==t&&(t={}),t.name="*"+this.linea_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterLine.entities=n}this.jsonFilterLine.sort={"info.created_at":"desc"},this.callServicesLine(1,"&offset=0&limit="+this.detallePorPaginaLine)},e.FareCreateComponent.prototype.buscarType=function(){this.jsonFilterType={};var e=[],t=null;if(null==this.type_buscar||null==this.type_buscar||""==this.type_buscar||"null"==this.type_buscar||(null==t&&(t={}),t.name="*"+this.type_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterType.entities=n}this.jsonFilterType.sort={"info.created_at":"desc"},this.callServicesType(1,"&offset=0&limit="+this.detallePorPaginaType)},e.FareCreateComponent.prototype.selectedLinea=function(e){null!=e&&($("#modalLineas").modal("hide"),this.lineaSelected=e,e.hasOwnProperty("name")&&(this.lineaSelectedShow=e.name))},e.FareCreateComponent.prototype.selectedType=function(e){null!=e&&($("#modalType").modal("hide"),this.tipoSelected=e,e.hasOwnProperty("name")&&(this.tipoSelectedShow=e.name))},e.FareCreateComponent.prototype.selectedParada=function(e){$("#modalParada").modal("hide"),"SALIDA"==this.punto?(this.paradaSelectedSalida=e,e.hasOwnProperty("name")&&(this.paradaSelectedSalidaShow=e.code+" - "+e.name)):(this.paradaSelectedLlegada=e,e.hasOwnProperty("name")&&(this.paradaSelectedLlegadaShow=e.code+" - "+e.name))},e.FareCreateComponent.prototype.buscarParada=function(){this.jsonFilterParada={};var e=[],t=null;if(null==this.parada_buscar||null==this.parada_buscar||""==this.parada_buscar||"null"==this.parada_buscar||(null==t&&(t={}),t.name="*"+this.parada_buscar+"*"),null==t&&(t={}),t.active=!0,null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilterParada.entities=n}this.jsonFilterParada.sort={"info.created_at":"desc"},this.callServicesParada(1,"&limit="+this.detallePorPaginaParada)},e.FareCreateComponent.prototype.done=function(){var e={};e.rates={},e.rates.INFANT=0,e.rates.CHILD=112,e.rates.ADULT=112,e.rates.ELDERLY=56,e.rates.SOCIAL_HELP=0,e.rates.COURTESY=12;var t=null;if(this.save){if(null==this.lineaSelected||null==this.lineaSelected||""==this.lineaSelected)return this.mensaje=capitalizeOnly(_("warning3")),void this.msg.warning();if(t="&line_id="+this.lineaSelected.id,null==this.tipoSelected||null==this.tipoSelected||""==this.tipoSelected)return this.mensaje=capitalizeOnly(_("warning41")),void this.msg.warning();if(t=t+"&vehicle_type_id="+this.tipoSelected.id,null==this.paradaSelectedSalida||null==this.paradaSelectedSalida||""==this.paradaSelectedSalida)return this.mensaje=capitalizeOnly(_("warning43")),void this.msg.warning();if(t=t+"&start_stop_code="+this.paradaSelectedSalida.code,null==this.paradaSelectedLlegada||null==this.paradaSelectedLlegada||""==this.paradaSelectedLlegada)return this.mensaje=capitalizeOnly(_("warning44")),void this.msg.warning();t=t+"&destination_stop_code="+this.paradaSelectedLlegada.code}if(null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje=capitalizeOnly(_("warning45")),void this.msg.warning();if(e.name=this.nombre.trim().toUpperCase(),null==this.monto||null==this.monto||""==this.monto||0==this.monto)return this.mensaje=capitalizeOnly(_("warning46")),void this.msg.warning();var n=null,i=0;try{n=$("#monto_base").val(),n=n.replace(/\./g,"").replace(/,/g,""),n=(replaceAll(n," ","")+"").trim(),i=(parseFloat(n)/100).toFixed(2)}catch(e){i=0}if(""==i||0==i)return this.mensaje="Debe ingresar el monto de la tarfifa",void this.msg.warning();if(i=parseFloat(i),e.amount=i,null==this.currency||null==this.currency||""==this.currency||"null"==this.currency)return this.mensaje="Debe ingresar la moneda de la tarifa",void this.msg.warning();e.currency=this.currency;let r=_("message_dflt_61"),s=null;this.save?s=this.service.callServicesHttp("fare-post",t,e):(r=_("message_dflt_62"),s=this.service.callServicesHttp("fare-put","&id="+this.id+"&line_id="+this.business_id+"&vehicle_type_id="+this.vehicle_type_id,e)),s.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,r),this.msg.error()})},e.FareCreateComponent.prototype.changeTarifa=function(){var e=0;try{a=$("#monto").val(),a=a.replace(/\./g,"").replace(/,/g,""),a=(replaceAll(a," ","")+"").trim(),e=(parseFloat(a)/100).toFixed(2)}catch(t){e=0}var t=0;try{t=trunc(100*e/112,2)}catch(e){t=0}try{this.monto_base=amountFormattingObject(100*t),this.monto_base=this.monto_base.integerPart+","+this.monto_base.decimalPart}catch(e){}},e.FareCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_61");this.save||(t=_("message_dflt_62")),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success44")):capitalizeOnly(_("success45")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.FareCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.FareReportComponent=ng.core.Component({selector:"fare-report",templateUrl:"views/fare-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.FareReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.nombre=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.FareReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("FARE"!=t[r].name)"FARE"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.FareReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.FareReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"FARE-REPORT"==e.name?null:"FARE-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.FareReportComponent.prototype.search=function(){this.jsonFilter={},null==this.nombre||this.nombre==null||""==this.nombre||"null"==this.nombre||(this.jsonFilter.name=this.nombre.trim()),null==this.linea||this.linea==null||""==this.linea||"null"==this.linea||(this.jsonFilter.line=this.linea.trim()),null==this.tipo||this.tipo==null||""==this.tipo||"null"==this.tipo||(this.jsonFilter.vehicle_type=this.tipo.trim()),null==this.salida||this.salida==null||""==this.salida||"null"==this.salida||(this.jsonFilter.start_stop=this.salida.trim()),null==this.llegada||this.llegada==null||""==this.llegada||"null"==this.llegada||(this.jsonFilter.destination_stop=this.llegada.trim()),this.callServices(1,"&limit="+this.detallePorPagina)},e.FareReportComponent.prototype.clean=function(){this.nombre=null,this.linea=null,this.tipo=null,this.salida=null,this.llegada=null},e.FareReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.FareReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.FareReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.FareReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.FareReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.FareReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.FareReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("fare-report",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.FareReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.FareReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.FareReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("currency")&&null!=e.currency&&null!=e.currency&&""!=e.currency&&(e.formatted_currency=_(e.currency)),e.actions=[],null!=this.checkAction("FARE-DELETE")&&e.actions.push(this.checkAction("FARE-DELETE")),null!=this.checkAction("FARE-UPDATE")&&e.actions.push(this.checkAction("FARE-UPDATE")),e)},e.FareReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.FareReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"FARE-DELETE":$("#modalDeleteFare").modal("show");break;case"FARE-UPDATE":this.router.navigate(["/fare-update"],{queryParams:{id:e.id,business_id:e.business_id,vehicle_type_id:e.vehicle_type_id}});break;default:}},e.FareReportComponent.prototype.deleteData=function(){if($("#modalDeleteFare").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning47")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id+"&line_id="+this.dataSelected.business_id+"&vehicle_type_id="+this.dataSelected.vehicle_type_id;let t=_("message_dflt_63"),n=this.service.callServicesHttp("fare-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.FareReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_63");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success46")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.FareReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.FastEntryLine=ng.core.Component({selector:"fast-entry-line",templateUrl:"views/fast-entry-line.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.FastEntryLine.prototype.ngOnInit=function(){this.listPassenger=[],this.listTarifas=[],this.listDocs=["V","E","J","G"],this.listTypes=[{value:"ADULT",name:"Adulto"},{value:"ELDERLY",name:"Adulto Mayor"},{value:"CHILD",name:"Ni\xF1o"},{value:"INFANT",name:"Infante"}],this.title=_("title68");try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.FastEntryLine.prototype.keyPressNumber=function(e){return keypressNumbersInteger(e)},e.FastEntryLine.prototype.checkRol=function(){this.texto_vista="FAST-ENTRY-LINE",this.active.url.hasOwnProperty("_value")&&("fast-entry-line"==this.active.url._value[0].path?this.texto_vista="FAST-ENTRY-LINE":this.texto_vista="FAST-ENTRY");var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&t[n].name==this.texto_vista){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.FastEntryLine.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&(this.active.queryParams._value.hasOwnProperty("trip_id")&&(this.id=this.active.queryParams._value.trip_id),this.active.queryParams._value.hasOwnProperty("business_id")&&(this.line_id=this.active.queryParams._value.business_id),this.active.queryParams._value.hasOwnProperty("itinerary_id")&&(this.itinerary_id=this.active.queryParams._value.itinerary_id,this.getService()))},e.FastEntryLine.prototype.getService=function(){let e=null;e="FAST-ENTRY"==this.texto_vista?this.service.callServicesHttp("travel-get",this.line_id+"?realm="+this.service.getRealm()+"&itinerary_id="+this.itinerary_id+"&id="+this.id,null):this.service.callServicesHttp("travel-get-line","&itinerary_id="+this.itinerary_id+"&id="+this.id,null);let t=_("message_dflt_79");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.FastEntryLine.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_79");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(e.hasOwnProperty("line_code")&&null!=e.line_code&&e.line_code!=null&&""!=e.line_code&&(this.linea=e.line_code,e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.linea=this.linea+" "+e.line_name)),e.hasOwnProperty("sequence")&&null!=e.sequence&&e.sequence!=null&&""!=e.sequence&&(this.viaje=e.sequence),e.hasOwnProperty("fares")&&null!=e.fares&&e.fares!=null&&""!=e.fares&&0!=e.fares.length&&(this.listTarifas=e.fares),e.hasOwnProperty("departure_date")&&null!=e.departure_date&&e.departure_date!=null&&""!=e.departure_date&&(this.fecha=e.departure_date.replace("T"," "))):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.FastEntryLine.prototype.addPassenger=function(){var e={id_doc:"V",doc:"",name:"",type:"ADULT"};if(null!=this.listTarifas&&0!=this.listTarifas.length)try{e.destino=this.listTarifas[0].id}catch(e){}this.listPassenger.push(e)},e.FastEntryLine.prototype.deletePassenger=function(e){var t=this.listPassenger.slice(e+1);this.listPassenger=this.listPassenger.slice(0,e),this.listPassenger=this.listPassenger.concat(t)},e.FastEntryLine.prototype.clean=function(){this.listPassenger=[]},e.FastEntryLine.prototype.getValueMsg=function(){var e=null;e="FAST-ENTRY"==this.texto_vista?["/travel-report"]:["/travel-report-line"],this.router.navigate(e)},e.FastEntryLine.prototype.done=function(){if(null==this.listPassenger||0==this.listPassenger.length)return this.mensaje=_("warning54"),void this.msg.warning();for(var e=[],t={},n=0;n<this.listPassenger.length;n++)if(null!=this.listPassenger[n]){if(t={},this.listPassenger[n].hasOwnProperty("type")){if(null==this.listPassenger[n].type||null==this.listPassenger[n].type||""==this.listPassenger[n].type)return this.mensaje="Debe ingresar el tipo de pasaje de la l\xEDnea nro. "+(n+1),void this.msg.warning();t.type=this.listPassenger[n].type}else return this.mensaje="Debe ingresar el tipo de pasaje de la l\xEDnea nro. "+(n+1),void this.msg.warning();if("INFANT"!=this.listPassenger[n].type)if(this.listPassenger[n].hasOwnProperty("id_doc")){if(null==this.listPassenger[n].id_doc||null==this.listPassenger[n].id_doc||""==this.listPassenger[n].id_doc)return this.mensaje="Debe ingresar el tipo de documento de la l\xEDnea nro. "+(n+1),void this.msg.warning();if(t.id_doc=this.listPassenger[n].id_doc,this.listPassenger[n].hasOwnProperty("doc")){if(null==this.listPassenger[n].doc||null==this.listPassenger[n].doc||""==this.listPassenger[n].doc)return this.mensaje="Debe ingresar el n\xFAmero de documento de la l\xEDnea nro. "+(n+1),void this.msg.warning();if(!utils_keyNumber(this.listPassenger[n].doc.trim()))return this.mensaje="El n\xFAmero de documento de la l\xEDnea nro. "+(n+1)+" tiene formato incorrecto debe ser s\xF3lo n\xFAmeros",void this.msg.warning();if(this.listPassenger[n].doc=this.listPassenger[n].doc.trim(),9>this.listPassenger[n].doc.length){for(var r=9-this.listPassenger[n].doc.length,s="",o=0;o<r;o++)s+="0";this.listPassenger[n].doc=s+this.listPassenger[n].doc}t.id_doc+=this.listPassenger[n].doc.trim()}else return this.mensaje="Debe ingresar el n\xFAmero de documento de la l\xEDnea nro. "+(n+1),void this.msg.warning()}else return this.mensaje="Debe ingresar el tipo de documento de la l\xEDnea nro. "+(n+1),void this.msg.warning();if(this.listPassenger[n].hasOwnProperty("name")){if(null==this.listPassenger[n].name||null==this.listPassenger[n].name||""==this.listPassenger[n].name)return this.mensaje="Debe ingresar el nombre del pasajero de la l\xEDnea "+(n+1),void this.msg.warning();t.name=this.listPassenger[n].name.trim().toUpperCase()}else return this.mensaje="Debe ingresar el nombre del pasajero de la l\xEDnea "+(n+1),void this.msg.warning();if(this.listPassenger[n].hasOwnProperty("destino")){if(null==this.listPassenger[n].destino||null==this.listPassenger[n].destino||""==this.listPassenger[n].destino)return this.mensaje="Debe ingresar el destino del pasajero de la l\xEDnea "+(n+1),void this.msg.warning();t.fare_id=this.listPassenger[n].destino}else return this.mensaje="Debe ingresar el destino del pasajero de la l\xEDnea "+(n+1),void this.msg.warning();t.active=!0,e.push(t)}let d=null;d="FAST-ENTRY"==this.texto_vista?this.service.callServicesHttp("fast-entry",this.line_id+"?itinerary_id="+this.itinerary_id+"&trip_id="+this.id,e):this.service.callServicesHttp("fast-entry-line","&itinerary_id="+this.itinerary_id+"&trip_id="+this.id,e);let l=_("message_dflt_78");d.subscribe(e=>null==e||null==e||""==e?(this.mensaje=l,void this.msg.warning()):void(200==e.status_http?(this.mensaje=_("success58"),this.msg.info()):(this.mensaje=this.service.processMessageError(e,l),this.msg.error())),e=>{this.mensaje=this.service.processError(e,l),this.msg.error()})},e.FastEntryLine.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.GeneralReportSalesComponent=ng.core.Component({selector:"general-report-sales",templateUrl:"views/general-report-sales.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.GeneralReportSalesComponent.prototype.ngOnInit=function(){try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=100,this.pageSelected=1,this.listRegister=[];var n=new Date,i="00",r="00";i=10>n.getHours()?"0"+n.getHours():n.getHours(),r=10>n.getMinutes()?"0"+n.getMinutes():n.getMinutes();var s=n.getDate();10>s&&(s="0"+n.getDate());var o=n.getMonth()+1;10>o&&(o="0"+o),this.fecha=s+"-"+o+"-"+n.getFullYear(),this.hora=i+":"+r,this.getData()},e.GeneralReportSalesComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"COLLECTION-RATIO"==t[n].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.GeneralReportSalesComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id)},e.GeneralReportSalesComponent.prototype.search=function(){return(this.jsonFilter={},null==this.init||null==this.init||""==this.init)?(this.mensaje="Debe ingresar la fecha a buscar",void this.msg.warning()):void(this.jsonFilter.departure_date=this.init,this.jsonFilter.status=["PAID"],this.jsonFilter.payment_status=["AUTHORIZED"],this.callServices())},e.GeneralReportSalesComponent.prototype.callServices=function(){let e=_("message_dflt_1"),t=this.service.callServicesHttp("sales-all-line",null,this.jsonFilter);t.subscribe(e=>{this.procesarRespuesta(e)},t=>{this.mensaje=this.service.processError(t,e),this.msg.error()})},e.GeneralReportSalesComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_1"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&null!=e.line_name&&(this.line_name=e.line_name),e.hasOwnProperty("line_code")&&null!=e.line_code&&null!=e.line_code&&null!=e.line_code&&(this.line_code=e.line_code),e.hasOwnProperty("usd_sum")&&null!=e.usd_sum&&null!=e.usd_sum&&""!=e.usd_sum)try{var n=parseFloat((100*e.usd_sum/112).toFixed(2));this.monto_total_us=amountFormattingObject(100*e.usd_sum),this.monto_total_us=this.monto_total_us.integerPart+","+this.monto_total_us.decimalPart+" $",this.porcentaje_total_us=amountFormattingObject(12*n),this.porcentaje_total_us=this.porcentaje_total_us.integerPart+","+this.porcentaje_total_us.decimalPart+" $"}catch(e){}if(e.hasOwnProperty("ves_sum")&&null!=e.ves_sum&&null!=e.ves_sum&&""!=e.ves_sum){var n=parseFloat((100*e.ves_sum/112).toFixed(2));this.monto_total=amountFormattingObject(100*parseFloat(e.ves_sum.toFixed(2))),this.monto_total=this.monto_total.integerPart+","+this.monto_total.decimalPart+" Bs",this.porcentaje_total=amountFormattingObject(12*n),this.porcentaje_total=this.porcentaje_total.integerPart+","+this.porcentaje_total.decimalPart+" Bs"}if(e.hasOwnProperty("trips")){var r={};this.listRegister=[];for(var s=0;s<e.trips.length;s++)r=null,r=this.formattedData(e.trips[s]),null!=r&&this.listRegister.push(r)}else this.listRegister=[]}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.GeneralReportSalesComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.GeneralReportSalesComponent.prototype.formattedData=function(e){if(null==e||e==null||""==e)return null;if(e.hasOwnProperty("usd_sum")){var t=0,n=0,i=0;t=parseFloat((100*e.usd_sum/112).toFixed(2));try{e.formatted_usd_sum=amountFormattingObject(100*e.usd_sum),e.formatted_usd_sum=e.formatted_usd_sum.integerPart+","+e.formatted_usd_sum.decimalPart+" $"}catch(e){}try{n=parseFloat((.12*t).toFixed(2)),e.formatted_usd_porcentaje=amountFormattingObject(12*t),e.formatted_usd_porcentaje=e.formatted_usd_porcentaje.integerPart+","+e.formatted_usd_porcentaje.decimalPart+" $"}catch(e){}try{i=parseFloat((.06*t).toFixed(2)),e.formatted_usd_porcentaje_6=amountFormattingObject(6*t),e.formatted_usd_porcentaje_6=e.formatted_usd_porcentaje_6.integerPart+","+e.formatted_usd_porcentaje_6.decimalPart+" $"}catch(e){}}if(e.hasOwnProperty("ves_sum")&&null!=e.ves_sum&&null!=e.ves_sum&&""!=e.ves_sum&&0!=e.ves_sum){var t=0,n=0,i=0;t=parseFloat((100*e.ves_sum/112).toFixed(2));try{e.formatted_sum=amountFormattingObject(100*e.ves_sum),e.formatted_sum=e.formatted_sum.integerPart+","+e.formatted_sum.decimalPart+" Bs"}catch(e){}try{n=parseFloat((.12*t).toFixed(2)),e.formatted_porcentaje=amountFormattingObject(100*n),e.formatted_porcentaje=e.formatted_porcentaje.integerPart+","+e.formatted_porcentaje.decimalPart+" Bs"}catch(e){console.log("ew",e)}try{i=parseFloat((.06*t).toFixed(2)),e.formatted_porcentaje_6=amountFormattingObject(100*i),e.formatted_porcentaje_6=e.formatted_porcentaje_6.integerPart+","+e.formatted_porcentaje_6.decimalPart+" Bs"}catch(e){console.log("ew",e)}}return e},e.GeneralReportSalesComponent.prototype.redirect=function(e){this.router.navigate(["/travel-passengers"],{queryParams:{trip_id:e.trip_id,itinerary_id:e.itinerary_id,business_id:this.service.getBusinessId()}})},e.GeneralReportSalesComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.GuideOperComponent=ng.core.Component({selector:"guide-oper",templateUrl:"views/guide-oper.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.GuideOperComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title70")),this.classInitTab="nav-item active tab tab-selected",this.classCambioTab="nav-item tab",this.classConsultaTab="nav-item tab",this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.line=null,this.status=null,this.propietario=null,this.marca=null,this.model=null,this.placa=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.GuideOperComponent.prototype.seleccionarMan=function(){var e=$("#manualSel").val();switch(this.listItems=[],this.codigo_reserva=null,e){case"operador":this.classInitTab="nav-item active tab tab-selected",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"cambio":this.classInitTab="nav-item tab",this.classCambioTab="nav-item active tab tab-selected",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"linea":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item active tab tab-selected",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"propietario":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item active tab tab-selected",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"Tvehiculos":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item active tab tab-selected",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"Automoviles":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item active tab tab-selected",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"Conductores":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item active tab tab-selected",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"Paradas":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item active tab tab-selected",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"Rutas":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item active tab tab-selected",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"Tarifas":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item active tab tab-selected",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"Viajes":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item active tab tab-selected",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item tab";break;case"Chequear":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab=this.classChequearTab="nav-item active tab tab-selected",this.classReservacionesTab="nav-item tab";break;case"Reservaciones":this.classInitTab="nav-item tab",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classPropietarioTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",this.classReservacionesTab="nav-item active tab tab-selected";break;R;default:return this.classInitTab="nav-item active tab tab-selected",this.classCambioTab="nav-item tab",this.classLineaTab="nav-item tab",this.classTVehiculoTab="nav-item tab",this.classAutomovilTab="nav-item tab",this.classConductoresTab="nav-item tab",this.classParadasTab="nav-item tab",this.classRutasTab="nav-item tab",this.classViajesTab="nav-item tab",this.classChequearTab="nav-item tab",void(this.classReservacionesTab="nav-item tab");}},e.GuideOperComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("GUIDE-OPER"!=t[r].name)"GUIDE-OPER"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.GuideOperComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.GuideRecComponent=ng.core.Component({selector:"guide-rec",templateUrl:"views/guide-rec.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.GuideRecComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title70")),this.classInitTab="nav-item active tab tab-selected",this.classCambioTab="nav-item tab",this.classConsultaTab="nav-item tab",this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.line=null,this.status=null,this.propietario=null,this.marca=null,this.model=null,this.placa=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.GuideRecComponent.prototype.seleccionarMan=function(){var e=$("#manualSel").val();switch(this.listItems=[],this.codigo_reserva=null,e){case"recaudacion":this.classInitTab="nav-item active tab tab-selected",this.classVentasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classVentasLTab="nav-item tab";case"ventas":this.classInitTab="nav-item tab",this.classVentasTab="nav-item active tab tab-selected",this.classTarifasTab="nav-item tab",this.classVentasLTab="nav-item tab";break;case"tarifas":this.classInitTab="nav-item tab",this.classVentasTab="nav-item tab",this.classTarifasTab="nav-item active tab tab-selected",this.classVentasLTab="nav-item tab";break;case"lineas":this.classInitTab="nav-item tab",this.classVentasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classVentasLTab="nav-item active tab tab-selected";break;case"viajes":this.classInitTab="nav-item tab",this.classVentasTab="nav-item tab",this.classTarifasTab="nav-item tab",this.classVentasLTab="nav-item active tab tab-selected";}},e.GuideRecComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("GUIDE-REC"!=t[r].name)"GUIDE-REC"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.GuideRecComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.GuideSuperComponent=ng.core.Component({selector:"guide-super",templateUrl:"views/guide-super.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.GuideSuperComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title70")),this.classInitTab="nav-item active tab tab-selected",this.classCambioTab="nav-item tab",this.classConsultaTab="nav-item tab",this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.line=null,this.status=null,this.propietario=null,this.marca=null,this.model=null,this.placa=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.GuideSuperComponent.prototype.seleccionarMan=function(){var e=$("#manualSel").val();this.listItems=[],this.codigo_reserva=null;"supervisor"===e?(this.classInitTab="nav-item active tab tab-selected",this.classReservacionesTab="nav-item tab",this.classVentasTab="nav-item tab",this.classViajesTab="nav-item tab"):"reservaciones"===e?(this.classInitTab="nav-item tab",this.classReservacionesTab="nav-item active tab tab-selected",this.classVentasTab="nav-item tab",this.classViajesTab="nav-item tab"):"ventas"===e?(this.classInitTab="nav-item tab",this.classReservacionesTab="nav-item tab",this.classVentasTab="nav-item active tab tab-selected",this.classViajesTab="nav-item tab"):"viajes"===e?(this.classInitTab="nav-item tab",this.classReservacionesTab="nav-item tab",this.classVentasTab="nav-item tab",this.classViajesTab="nav-item active tab tab-selected"):void 0},e.GuideSuperComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("GUIDE-SUPER"!=t[r].name)"GUIDE-SUPER"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.GuideSuperComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineCreateComponent=ng.core.Component({selector:"line-create",templateUrl:"views/line-create-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.LineCreateComponent.prototype.ngOnInit=function(){this.classCreate="col-lg-8 col-md-8 col-sm-6 col-12",this.listDocs=["V","E","J","G"],this.listBankAccounts=[],this.listPagoMovil=[],this.listBancos=returnBancos(),this.title=capitalizeOnly(_("title9")),this.profileSelected=null,this.texto="Crear",this.expedicion=null,this.vencimiento=null,this.nombre=null,this.modalidad=null,this.codigo=null,this.active_status=!0,this.save=!0,this.rif_buscar=null,this.nombre_buscar=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.checkRol()},e.LineCreateComponent.prototype.keyPressOnlyNumbers=function(e){return keypressNumbersInteger(e)},e.LineCreateComponent.prototype.checkRol=function(){var e="CREATE-LINE";this.active.url.hasOwnProperty("_value")&&("line-create"==this.active.url._value[0].path?(this.title=_("title9"),this.save=!0,e="CREATE-LINE"):(this.title=_("title10"),this.save=!1,this.classCreate="col-lg-12 col-md-12 col-sm-12 col-12",e="UPDATE-LINE"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.LineCreateComponent.prototype.getData=function(){"line-create"==this.active.url._value[0].path?(this.title=_("title9"),this.save=!0,this.texto="Guardar"):this.active.url.hasOwnProperty("_value")&&(this.title=_("title10"),this.save=!1,this.texto="Actualizar",this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService()))},e.LineCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("line-get","&id="+this.id,null),t=_("message_dflt_3");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.LineCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_3");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineCreateComponent.prototype.formattedDataGET=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.nombre=e.name),e.hasOwnProperty("bank_accounts")&&null!=e.bank_accounts&&0!=e.bank_accounts.length){var t={};this.listBankAccounts=[];for(var n=0;n<e.bank_accounts.length;n++)if(null!=e.bank_accounts[n]){if(t={},e.bank_accounts[n].hasOwnProperty("bank")&&(t.banco=e.bank_accounts[n].bank),e.bank_accounts[n].hasOwnProperty("number")&&(t.cuenta=e.bank_accounts[n].number),e.bank_accounts[n].hasOwnProperty("id_doc"))try{t.id_doc_type=e.bank_accounts[n].id_doc.charAt(0),t.documento=e.bank_accounts[n].id_doc.substring(1,e.bank_accounts[n].id_doc.length)}catch(e){}this.listBankAccounts.push(t)}}if(e.hasOwnProperty("mobile_payment")&&null!=e.mobile_payment&&0!=e.mobile_payment.length){var t={};this.listPagoMovil=[];for(var n=0;n<e.mobile_payment.length;n++)if(null!=e.mobile_payment[n]){if(t={},e.mobile_payment[n].hasOwnProperty("bank")&&(t.banco=e.mobile_payment[n].bank),e.mobile_payment[n].hasOwnProperty("phone")&&(t.telefono=e.mobile_payment[n].phone),e.mobile_payment[n].hasOwnProperty("id_doc"))try{t.id_doc_type=e.mobile_payment[n].id_doc.charAt(0),t.documento=e.mobile_payment[n].id_doc.substring(1,e.mobile_payment[n].id_doc.length)}catch(e){}this.listPagoMovil.push(t)}}e.hasOwnProperty("start_date")&&null!=e.start_date&&null!=e.start_date&&""!=e.start_date&&(this.expedicion=formattingDate2(e.start_date)),e.hasOwnProperty("expiration_date")&&null!=e.expiration_date&&null!=e.expiration_date&&""!=e.expiration_date&&(this.vencimiento=formattingDate2(e.expiration_date)),e.hasOwnProperty("code")&&null!=e.code&&null!=e.code&&""!=e.code&&(this.codigo=e.code),e.hasOwnProperty("mode")&&null!=e.mode&&null!=e.mode&&""!=e.mode&&(this.modalidad=e.mode),e.hasOwnProperty("active")&&(this.active_status=e.active),e.hasOwnProperty("address")&&null!=e.address&&null!=e.address&&""!=e.address&&(this.direccion=e.address)},e.LineCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/line-report"])},e.LineCreateComponent.prototype.clean=function(){this.expedicion=null,this.vencimiento=null,this.nombre=null,this.modalidad=null,this.codigo=null,this.direccion=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.profileSelected=null,this.listRegister=[],this.listBankAccounts=[],this.listPagoMovil=[],this.profileSelected=null},e.LineCreateComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre_buscar||null==this.nombre_buscar||""==this.nombre_buscar||(t={},t={business_name:"*"+this.nombre_buscar.trim()+"*"}),null==this.rif_buscar||null==this.rif_buscar||""==this.rif_buscar||(null==t&&(t={}),t.id_doc="*"+this.rif_buscar+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter={entities:n}}this.jsonFilter.sort={created_at:"DESC"},this.callServices(1,"&limit="+this.detallePorPagina)},e.LineCreateComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.LineCreateComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.LineCreateComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.LineCreateComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.LineCreateComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.LineCreateComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.LineCreateComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("profile-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.LineCreateComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.LineCreateComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.LineCreateComponent.prototype.addBankAccount=function(){this.listBankAccounts.push({value:""})},e.LineCreateComponent.prototype.deleteCuentaBancaria=function(e){var t=this.listBankAccounts.slice(e+1);this.listBankAccounts=this.listBankAccounts.slice(0,e),this.listBankAccounts=this.listBankAccounts.concat(t)},e.LineCreateComponent.prototype.addPagoMovil=function(){this.listPagoMovil.push({value:""})},e.LineCreateComponent.prototype.deletePagoMovil=function(e){var t=this.listPagoMovil.slice(e+1);this.listPagoMovil=this.listPagoMovil.slice(0,e),this.listPagoMovil=this.listPagoMovil.concat(t)},e.LineCreateComponent.prototype.selectedPropietario=function(e){if(this.profileSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)null!=this.listRegister[t]&&(this.listRegister[t].id==e.id?null==this.listRegister[t].classSelected?(this.profileSelected=this.listRegister[t],this.listRegister[t].classSelected="selected"):this.listRegister[t].classSelected=null:this.listRegister[t].classSelected=null)},e.LineCreateComponent.prototype.done=function(){var e={};if(this.save&&(null==this.profileSelected||null==this.profileSelected||""==this.profileSelected))return this.mensaje="Debe seleccionar el representante de la l\xEDnea",void this.msg.warning();if(null==this.expedicion||null==this.expedicion||""==this.expedicion)return this.mensaje="La fecha de expedici\xF3n no puede estar vac\xEDa",void this.msg.warning();if(e.start_date=this.expedicion+"T00:01:01.000Z",null==this.vencimiento||null==this.vencimiento||""==this.vencimiento)return this.mensaje="La fecha de vencimiento no puede estar vac\xEDa",void this.msg.warning();if(e.expiration_date=this.vencimiento+"T23:59:59.000Z",null==this.codigo||null==this.codigo||""==this.codigo)return this.mensaje="Debe ingresar el c\xF3digo de la l\xEDnea",void this.msg.warning();if(e.code=this.codigo.toUpperCase().trim(),null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje="Debe ingresar el nombre de la l\xEDnea",void this.msg.warning();if(e.name=this.nombre.toUpperCase().trim(),null==this.modalidad||null==this.modalidad||""==this.modalidad)return this.mensaje="Debe ingresar el modalidad del transporte",void this.msg.warning();if(e.mode=this.modalidad.toUpperCase().trim(),null==this.direccion||null==this.direccion||""==this.direccion)return this.mensaje="Debe ingresar la direcci\xF3n de la sede de la linea de transporte",void this.msg.warning();if(e.address=this.direccion.toUpperCase().trim(),null!=this.listBankAccounts&&0!=this.listBankAccounts.length){e.bank_accounts=[];for(var t={},n=0;n<this.listBankAccounts.length;n++)if(null!=this.listBankAccounts[n]&&(t={},this.listBankAccounts[n].hasOwnProperty("banco"))){if(null==this.listBankAccounts[n].banco||null==this.listBankAccounts[n].banco||""==this.listBankAccounts[n].banco)return this.mensaje="Debe seleccionar el banco de la l\xEDnea "+(n+1),void this.msg.warning();if(t.bank=this.listBankAccounts[n].banco,null==this.listBankAccounts[n].cuenta||null==this.listBankAccounts[n].cuenta||""==this.listBankAccounts[n].cuenta)return this.mensaje="Debe ingresar el n\xFAmero de cuenta de la l\xEDnea "+(n+1),void this.msg.warning();if(!utils_keyNumber(this.listBankAccounts[n].cuenta.trim()))return this.mensaje="El formato del n\xFAmero de cuenta ingresado en la l\xEDnea "+(n+1)+" es incorrecto, deben ser s\xF3lo n\xFAmeros",void this.msg.warning();if(t.number=this.listBankAccounts[n].cuenta,null==this.listBankAccounts[n].id_doc_type||null==this.listBankAccounts[n].id_doc_type||""==this.listBankAccounts[n].id_doc_type)return this.mensaje="Debe ingresar el tipo de documento de la l\xEDnea "+(n+1),void this.msg.warning();if(t.id_doc=this.listBankAccounts[n].id_doc_type,null==this.listBankAccounts[n].documento||null==this.listBankAccounts[n].documento||""==this.listBankAccounts[n].documento)return this.mensaje="Debe ingresar el n\xFAmero de documento de la l\xEDnea "+(n+1),void this.msg.warning();var r=0;if(!utils_keyNumber(this.listBankAccounts[n].documento.trim()))return this.mensaje="El formato del n\xFAmero de documento ingresado en la l\xEDnea "+(n+1)+" es incorrecto, deben ser s\xF3lo n\xFAmeros",void this.msg.warning();if(9>this.listBankAccounts[n].documento.length){r=9-this.listBankAccounts[n].documento.length;for(var s="",o=0;o<r;o++)s+="0";this.listBankAccounts[n].documento=s+this.listBankAccounts[n].documento}t.id_doc+=this.listBankAccounts[n].documento,t.active=!0,e.bank_accounts.push(t)}}if(null!=this.listPagoMovil&&0!=this.listPagoMovil.length){e.mobile_payment=[];for(var t={},n=0;n<this.listPagoMovil.length;n++)if(null!=this.listPagoMovil[n]&&(t={},this.listPagoMovil[n].hasOwnProperty("banco"))){if(null==this.listPagoMovil[n].banco||null==this.listPagoMovil[n].banco||""==this.listPagoMovil[n].banco)return this.mensaje="Debe seleccionar el banco de la l\xEDnea "+(n+1),void this.msg.warning();if(t.bank=this.listPagoMovil[n].banco,null==this.listPagoMovil[n].telefono||null==this.listPagoMovil[n].telefono||""==this.listPagoMovil[n].telefono)return this.mensaje="Debe ingresar el tel\xE9fono de la l\xEDnea "+(n+1),void this.msg.warning();var d=this.listPagoMovil[n].telefono.substring(0,3);if("414"!=d&&"416"!=d&&"424"!=d&&"426"!=d&&"412"!=d)return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe comenzar por 414 | 416 | 426 | 424 |412",void this.msg.warning();if(!utils_keyNumber(this.listPagoMovil[n].telefono.trim()))return this.mensaje="El formato del tel\xE9fono ingresado en la l\xEDnea "+(n+1)+" es incorrecto, deben ser s\xF3lo n\xFAmeros",void this.msg.warning();if(t.phone=this.listPagoMovil[n].telefono,null==this.listPagoMovil[n].id_doc_type||null==this.listPagoMovil[n].id_doc_type||""==this.listPagoMovil[n].id_doc_type)return this.mensaje="Debe ingresar el tipo de documento de la l\xEDnea "+(n+1),void this.msg.warning();if(t.id_doc=this.listPagoMovil[n].id_doc_type,null==this.listPagoMovil[n].documento||null==this.listPagoMovil[n].documento||""==this.listPagoMovil[n].documento)return this.mensaje="Debe ingresar el n\xFAmero de documento de la l\xEDnea "+(n+1),void this.msg.warning();var r=0;if(!utils_keyNumber(this.listPagoMovil[n].documento.trim()))return this.mensaje="El formato del n\xFAmero de documento ingresado en la l\xEDnea "+(n+1)+" es incorrecto, deben ser s\xF3lo n\xFAmeros",void this.msg.warning();if(9>this.listPagoMovil[n].documento.length){r=9-this.listPagoMovil[n].documento.length;for(var s="",o=0;o<r;o++)s+="0";this.listPagoMovil[n].documento=s+this.listPagoMovil[n].documento}t.id_doc+=this.listPagoMovil[n].documento,t.active=!0,e.mobile_payment.push(t)}}e.active=this.active_status;let l=null;l=this.save?this.service.callServicesHttp("line-post","&id="+this.profileSelected.id,e):this.service.callServicesHttp("line-put","&id="+this.id,e);let p=_("message_dflt_1");p=this.save?_("message_dflt_1"):_("message_dflt_2"),l.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,p),this.msg.error()})},e.LineCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_1");t=this.save?_("message_dflt_1"):_("message_dflt_2"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success16")):capitalizeOnly(_("success17")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineReportComponent=ng.core.Component({selector:"line-report",templateUrl:"views/line-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,e.LoadingServiceComponent,function(e,t,n,i,r){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i,this.loading=r}]}),e.LineReportComponent.prototype.ngOnInit=function(){this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.nombre=null,this.codigo=null,this.modalidad=null,this.direccion=null,this.status=null,this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activa"},{value:"INACTIVE",name:"Inactiva"}];try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.LineReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("LINES"!=t[r].name)"LINES"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.LineReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.LineReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-LINE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.LineReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre+"*"),null==this.codigo||null==this.codigo||""==this.codigo||"null"==this.codigo||(null==t&&(t={}),t.code="*"+this.codigo+"*"),null==this.modalidad||null==this.modalidad||""==this.modalidad||"null"==this.modalidad||(null==t&&(t={}),t.mode="*"+this.modalidad+"*"),null==this.direccion||null==this.direccion||""==this.direccion||"null"==this.direccion||(null==t&&(t={}),t.address="*"+this.direccion+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.LineReportComponent.prototype.clean=function(){this.nombre=null,this.codigo=null,this.modalidad=null,this.direccion=null,this.status=null},e.LineReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.LineReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.LineReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.LineReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.LineReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.LineReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.LineReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("line-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.LineReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.LineReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.LineReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("start_date")&&null!=e.start_date&&null!=e.start_date&&""!=e.start_date&&(e.expedicion=formattingDate1(e.start_date)),e.hasOwnProperty("expiration_date")&&null!=e.expiration_date&&null!=e.expiration_date&&""!=e.expiration_date&&(e.vencimiento=formattingDate1(e.expiration_date)),e.actions=[],null!=this.checkAction("LINE-DELETE")&&e.actions.push(this.checkAction("LINE-DELETE")),null!=this.checkAction("VIEW-LINE")&&e.actions.push(this.checkAction("VIEW-LINE")),null!=this.checkAction("UPDATE-LINE")&&e.actions.push(this.checkAction("UPDATE-LINE")),null!=this.checkAction("LINE-VIEW-OWNER")&&e.actions.push(this.checkAction("LINE-VIEW-OWNER")),null!=this.checkAction("LINE-VIEW-CARS")&&e.actions.push(this.checkAction("LINE-VIEW-CARS")),e.hasOwnProperty("active")&&(e.active?(e.formatted_status="ACTIVA",null!=this.checkAction("LINE-INACTIVE")&&e.actions.push(this.checkAction("LINE-INACTIVE"))):(e.formatted_status="INACTIVA",null!=this.checkAction("LINE-ACTIVE")&&e.actions.push(this.checkAction("LINE-ACTIVE")))),e)},e.LineReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.LineReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"LINE-DELETE":$("#modalDeleteLine").modal("show");break;case"LINE-ACTIVE":$("#modalActivateLine").modal("show");break;case"LINE-INACTIVE":$("#modalInactivateLine").modal("show");break;case"VIEW-LINE":this.router.navigate(["/line-view"],{queryParams:{id:e.id}});break;case"UPDATE-LINE":this.router.navigate(["/line-update"],{queryParams:{id:e.id}});break;case"LINE-VIEW-PROPIETARIO":this.router.navigate(["/line-view-propietario"],{queryParams:{id:e.code}});break;case"LINE-VIEW-CAR":this.router.navigate(["/line-view-car"],{queryParams:{id:e.code}});break;default:}},e.LineReportComponent.prototype.deleteData=function(){if($("#modalDeleteLine").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning3")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=_("message_dflt_9"),n=this.service.callServicesHttp("line-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.LineReportComponent.prototype.activeData=function(){if($("#modalActivateLine").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning3")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("vencimiento")&&delete t.vencimiento,t.hasOwnProperty("expedicion")&&delete t.expedicion,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!0}catch(e){}let n=_("message_dflt_45"),i=this.service.callServicesHttp("line-put",e,t);i.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.LineReportComponent.prototype.inactiveData=function(){if($("#modalInactivateLine").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning3")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("vencimiento")&&delete t.vencimiento,t.hasOwnProperty("expedicion")&&delete t.expedicion,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!1}catch(e){}let n=_("message_dflt_46"),i=this.service.callServicesHttp("line-put",e,t);i.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.LineReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_9");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success5")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_45");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success34"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.LineReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_46");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].code==e.code){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success35"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.LineReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineViewComponent=ng.core.Component({selector:"line-view",templateUrl:"views/line-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.LineViewComponent.prototype.ngOnInit=function(){this.title=_("title11"),this.nombre=null,this.codigo=null,this.modalidad=null,this.unidades=null,this.expedicion=null,this.vencimiento=null,this.direccion=null,this.listBankAccounts=[],this.list,this.rutas=[],this.title2=_("title12"),this.checkRol()},e.LineViewComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"VIEW-LINE"==t[n].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.LineViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.LineViewComponent.prototype.getService=function(){let e=this.service.callServicesHttp("line-get","&id="+this.id,null),t=_("message_dflt_3");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.LineViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_3");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineViewComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.nombre=e.name),e.hasOwnProperty("bank_accounts")&&null!=e.bank_accounts&&0!=e.bank_accounts.length){var t={};this.listBankAccounts=[];for(var n=0;n<e.bank_accounts.length;n++)null!=e.bank_accounts[n]&&(t={},e.bank_accounts[n].hasOwnProperty("bank")&&(t.bank=e.bank_accounts[n].bank),e.bank_accounts[n].hasOwnProperty("number")&&(t.number=e.bank_accounts[n].number),e.bank_accounts[n].hasOwnProperty("id_doc")&&(t.id_doc=e.bank_accounts[n].id_doc),this.listBankAccounts.push(t))}if(e.hasOwnProperty("mobile_payment")&&null!=e.mobile_payment&&0!=e.mobile_payment.length){var t={};this.listPagoMovil=[];for(var n=0;n<e.mobile_payment.length;n++)null!=e.mobile_payment[n]&&(t={},e.mobile_payment[n].hasOwnProperty("bank")&&(t.bank=e.mobile_payment[n].bank),e.mobile_payment[n].hasOwnProperty("phone")&&(t.phone=e.mobile_payment[n].phone),e.mobile_payment[n].hasOwnProperty("id_doc")&&(t.id_doc=e.mobile_payment[n].id_doc),this.listPagoMovil.push(t))}e.hasOwnProperty("start_date")&&null!=e.start_date&&null!=e.start_date&&""!=e.start_date&&(this.expedicion=formattingDate2(e.start_date)),e.hasOwnProperty("expiration_date")&&null!=e.expiration_date&&null!=e.expiration_date&&""!=e.expiration_date&&(this.vencimiento=formattingDate2(e.expiration_date)),e.hasOwnProperty("code")&&null!=e.code&&null!=e.code&&""!=e.code&&(this.codigo=e.code),e.hasOwnProperty("mode")&&null!=e.mode&&null!=e.mode&&""!=e.mode&&(this.modalidad=e.mode),e.hasOwnProperty("active")&&(this.active_status=e.active),e.hasOwnProperty("address")&&null!=e.address&&null!=e.address&&""!=e.address&&(this.direccion=e.address),e.hasOwnProperty("info")&&null!=e.info&&null!=e.info&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&null!=e.info.created_by_email&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&null!=e.info.created_at&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&null!=e.info.updated_by_email&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&null!=e.info.updated_at&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at)))},e.LineViewComponent.prototype.print=function(){window.print()},e.LineViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineViewCarComponent=ng.core.Component({selector:"line-view-car",templateUrl:"views/line-view-car.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.LineViewCarComponent.prototype.ngOnInit=function(){this.title=_("title13"),this.nombre=null,this.codigo=null,this.cars=[],this.cars_activos=0,this.cars_inactivos=0,this.checkRol()},e.LineViewCarComponent.prototype.checkRol=function(){this.getData()},e.LineViewCarComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.codigo=this.active.queryParams._value.id,this.getService())},e.LineViewCarComponent.prototype.getService=function(){var e="&code="+this.codigo;let t=this.service.callServicesHttp("line-get-cars",e,null);this.procesarRespuestaGET(t)},e.LineViewCarComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_6");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineViewCarComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.nombre=e.name),e.hasOwnProperty("code")&&null!=e.code&&null!=e.code&&""!=e.code&&(this.codigo=e.code),this.cars=[],e.hasOwnProperty("results")&&null!=e.results&&0!=e.results.length)for(var t=0;t<e.results.length;t++)null!=e.results[t]&&(e.results[t].hasOwnProperty("status")&&null!=e.results[t].status&&null!=e.results[t].status&&""!=e.results[t].status&&(e.results[t].formatted_status=_(e.results[t].status).toUpperCase(),"ACTIVE"==e.results[t].status?++this.cars_activos:++this.cars_inactivos),this.cars.push(e.results[t]))},e.LineViewCarComponent.prototype.print=function(){window.print()},e.LineViewCarComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LineViewPropietarioComponent=ng.core.Component({selector:"line-view-propietario",templateUrl:"views/line-view-propietario.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.LineViewPropietarioComponent.prototype.ngOnInit=function(){this.title=_("title12"),this.nombre=null,this.codigo=null,this.propietarios=[],this.propietarios_activos=0,this.propietarios_suspendidos=0,this.checkRol()},e.LineViewPropietarioComponent.prototype.checkRol=function(){this.getData()},e.LineViewPropietarioComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.codigo=this.active.queryParams._value.id,this.getService())},e.LineViewPropietarioComponent.prototype.getService=function(){var e="&code="+this.codigo;let t=this.service.callServicesHttp("line-get-propietarios",e,null);this.procesarRespuestaGET(t)},e.LineViewPropietarioComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_5");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.LineViewPropietarioComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&(this.nombre=e.name),e.hasOwnProperty("code")&&null!=e.code&&null!=e.code&&""!=e.code&&(this.codigo=e.code),this.propietarios=[],e.hasOwnProperty("results")&&null!=e.results&&0!=e.results.length)for(var t=0;t<e.results.length;t++)null!=e.results[t]&&(e.results[t].hasOwnProperty("status")&&null!=e.results[t].status&&null!=e.results[t].status&&""!=e.results[t].status&&(e.results[t].formatted_status=_(e.results[t].status).toUpperCase(),"ACTIVE"==e.results[t].status?++this.propietarios_activos:++this.propietarios_suspendidos),this.propietarios.push(e.results[t]))},e.LineViewPropietarioComponent.prototype.print=function(){window.print()},e.LineViewPropietarioComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.LoadingAppComponent=ng.core.Component({selector:"loading-app",templateUrl:"views/loading.html"}).Class({constructor:[ng.router.ActivatedRoute,ng.router.Router,e.AppCallService,function(e,t,n){this.active=this.active,this.router=t,this.ser=n}]}),e.LoadingAppComponent.prototype.ngOnInit=function(){this.imagen_src="assets/images/loading.gif",this.menu=null,this.dataShow=_("message_dflt_55");null==this.ser.getAccessToken()?(this.dataShow=_("message_dflt_54"),setTimeout(function(){window.location.href=redirectUri()},2e3)):this.getInit()},e.LoadingAppComponent.prototype.getInit=function(){let e=_("message_dflt_55");if(null==this.ser.getRole())return this.dataShow=_("message_dflt_56"),void setTimeout(function(){window.location.href=redirectUri()},2e3);let t=this.ser.callServicesHttp("init-auth","?role_owner_id="+this.ser.getBusinessId(),null);t.subscribe(t=>{if(null!=t&&t!=null&&""!=t)if(200==t.status_http){delete t.status_http;let n=null;t.hasOwnProperty("profile")?null==t.profile||null==t.profile||""==t.profile?(this.dataShow=e,setTimeout(function(){window.location.href=redirectUri()},2e3)):(n=t.profile,t.hasOwnProperty("country")&&null!=t.country&&null!=t.country&&""!=t.country&&(n.country=t.country,this.ser.setInit(n)),t.hasOwnProperty("role")?null==t.role||null==t.role||""==t.role?(this.dataShow=_("message_dflt_3"),setTimeout(function(){window.location.href=redirectUri()},2e3)):(this.ser.setRole(t.role),this.redirectInit()):(this.dataShow=_("message_dflt_3"),setTimeout(function(){window.location.href=redirectUri()},2e3))):(this.dataShow=e,setTimeout(function(){window.location.href=redirectUri()},2e3))}else this.dataShow=this.ser.processMessageError(t,e),setTimeout(function(){window.location.href=redirectUri()},2e3)},t=>{this.dataShow=this.ser.processError(t,e),setTimeout(function(){window.location.href=redirectUri()},2e3)})},e.LoadingAppComponent.prototype.redirectInit=function(){this.router.navigate(["/section"])}})(window.app||(window.app={}));(function(e){e.MenuComponent=ng.core.Component({selector:"menu-component",templateUrl:"views/menu.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.ser=i}]}),e.MenuComponent.prototype.ngOnInit=function(){this.formatedName=null,this.listMenu=null,this.formattedMenu()},e.MenuComponent.prototype.formattedMenu=function(e){null!=e&&(e=e.toLowerCase()),this.title="TERMINAL LA BANDERA",this.listMenu=this.getMenu("BANDERA"),null==this.listMenu&&this.router.navigate(["/not-user"])},e.MenuComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.icon="assets/images/pending_actions.svg",e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name&&("STOPS"==e.name?e.image="assets/images/room_morado_oscuro.svg":"CAR-TYPES"==e.name?e.image="assets/images/estacionamiento.svg":"LINES"==e.name?e.image="assets/images/group_morado.svg":"VEHICLE-OWNER"==e.name?e.image="assets/images/chofer_morado.svg":"VEHICLE"==e.name?e.image="assets/images/emoji_transportation_morado.svg":"FARE"==e.name?e.image="assets/images/precios.svg":"ITINERARY"==e.name?e.image="assets/images/timeline_morado.svg":"TRIP"==e.name?e.image="assets/images/destino.svg":"DRIVERS"==e.name?e.image="assets/images/conductor.svg":"RESERVATION-LINE"==e.name?e.image="assets/images/campana.svg":"TRIP-LINE"==e.name?e.image="assets/images/destino.svg":"CHECK-PASSENGER"==e.name?e.image="assets/images/check.svg":"CURRENCY-EXCHANGE"==e.name?e.image="assets/images/exchange.svg":"SALES-REPORT"==e.name?e.image="assets/images/ventas.svg":"SALES-LINE"==e.name?e.image="assets/images/ventas.svg":"CHECK-TRIP"==e.name?e.image="assets/images/check.svg":"RESERVATIONS"==e.name?e.image="assets/images/campana.svg":("GUIDE-OPER"==e.name||"GUIDE-SUPER"==e.name||"GUIDE-REC"==e.name)&&(e.image="assets/images/question.svg"),e.formatted_name=_(e.name)),e)},e.MenuComponent.prototype.getMenu=function(e){var t=[],n=[];if(null!=this.ser.getRole()){if(!this.ser.getRole().hasOwnProperty("views"))return null;if(null!=this.ser.getRole().views&&null!=this.ser.getRole().views&&""!=this.ser.getRole().views){for(var r=orderList(this.ser.getRole().views),s=0;s<r.length;s++)null!=r[s]&&(r[s].name==e?r[s].hasOwnProperty("actions")&&null!=r[s].actions&&0!=r[s].actions.length&&t.push(this.formattedData(r[s])):r[s].tag==e&&n.push(this.formattedData(r[s])));return t=t.concat(n),t}}else return null},e.MenuComponent.prototype.getRedirect=function(e){if(e.hasOwnProperty("name")&&e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url){var t=null;try{t=e.url.split("?")}catch(e){t=null}if(null!=t){var n=null;if("/section"==t[0]){if(1<t.length)try{var r=[];r=t[1].split("&"),array3=[];for(var s=0;s<r.length;s++)if(array3=[],array3=r[s].split("="),1<array3.length&&"name"==array3[0]){n=array3[1];break}}catch(e){}null!=n&&(this.formattedMenu(n),this.router.navigate(["/section"],{queryParams:{name:n}}))}else null!=e.url&&(e.url=e.url.toLowerCase()),this.router.navigate([e.url])}}}})(window.app||(window.app={}));(function(e){e.NewSalesComponent=ng.core.Component({selector:"new-sales",templateUrl:"views/new-sales-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.NewSalesComponent.prototype.ngOnInit=function(){try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.listPassenger=[{id_doc:"V",doc:"",name:"",type:"ADULT"}],this.mostrarViaje=!0,this.listAdultos=[],this.listInfantes=[],this.listMayores=[],this.title=capitalizeOnly(_("title19")),this.typeViaje="IDA",this.viajeSeleccionado=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=5,this.pageSelected=1,this.destinoSelected=null,this.jsonFilterViaje={},this.paginActualViaje={},this.totalPageViaje=1,this.detallePorPaginaViaje=10,this.pageSelectedViaje=1,this.listDestinos=[],this.listViajes=[],this.mostrarCargando=!1,this.listDocs=["V","E","J","G"],this.listTypes=[{value:"ADULT",name:"Adulto"},{value:"ELDERLY",name:"Adulto Mayor"},{value:"CHILD",name:"Ni\xF1o"},{value:"INFANT",name:"Infante"},{value:"SOCIAL_HELP",name:"Ayuda Social"},{value:"COURTESY",name:"Cortesia"}],this.imagenCargando="assets/images/loading.gif",this.listTipos=[{value:"CASH",name:"Efectivo"},{value:"POS",name:"Punto de venta"},{value:"MOBILE",name:"Pago M\xF3vil"},{value:"TRANSFERENCE",name:"Transferencia"}],this.listMonedas=[{value:"USD",name:"$"},{value:"VES",name:"Bs"}],this.monto="0,00",this.faltante_dolares=0,this.faltante_dolares_formatted="0,00",this.faltantes_bs=0,this.faltantes_bs_formatted="0,00",$("#monto1").mask("#.##0,00",{reverse:!0}),this.mensajeServicio=null,this.monedaSelected={value:"Bs",name:"Bol\xEDvar",class:"bg-bs"},this.listMonedas=[{value:"Bs",name:"Bol\xEDvar",class:"bg-bs"},{value:"USD",name:"Divisas",class:"bg-usd"}];var n=new Date;hora=10>n.getHours()?"0"+n.getHours():n.getHours(),minutos=10>n.getMinutes()?"0"+n.getMinutes():n.getMinutes();var i=n.getDate();10>i&&(i="0"+n.getDate());var r=n.getMonth()+1;10>r&&(r="0"+r),this.dateFormatting=n.getFullYear()+"-"+r+"-"+i,this.fecha_ida=this.dateFormatting,this.fecha_vuelta=this.dateFormatting,this.checkRol()},e.NewSalesComponent.prototype.keyPressNumber=function(e){return keypressNumbersInteger(e)},e.NewSalesComponent.prototype.addPassenger=function(){this.listPassenger.push({id_doc:"V",doc:"",name:"",type:"ADULT"})},e.NewSalesComponent.prototype.deletePassenger=function(e){var t=this.listPassenger.slice(e+1);this.listPassenger=this.listPassenger.slice(0,e),this.listPassenger=this.listPassenger.concat(t)},e.NewSalesComponent.prototype.clean=function(){this.listPassenger=[],this.listViajes=[],this.viajeSeleccionado=null,this.destinoSelected=null,this.destinoSelectedMostrar=null},e.NewSalesComponent.prototype.keyupsearch=function(e){try{13==e.keyCode&&this.buscarDestinos()}catch(e){}},e.NewSalesComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"NEW-SALES"==t[n].name){e=!0;break}e?this.getTasaCambio():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.NewSalesComponent.prototype.openModalDestinos=function(){this.destino_buscar=null,$("#modalSearchViajes").modal("show")},e.NewSalesComponent.prototype.buscarDestinos=function(){this.jsonFilter="",null==this.destino_buscar||this.destino_buscar==null||""==this.destino_buscar||"null"==this.destino_buscar||(this.jsonFilter=this.destino_buscar.trim().toUpperCase()),this.callServices(1,"&limit="+this.detallePorPagina)},e.NewSalesComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listDestinos||this.listDestinos==null||0==this.listDestinos.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.NewSalesComponent.prototype.getValueFirst=function(e){this.listDestinos=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.NewSalesComponent.prototype.getValuePrevious=function(e){this.listDestinos=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.NewSalesComponent.prototype.getValueLast=function(e){this.listDestinos=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.NewSalesComponent.prototype.getValueNext=function(e){this.listDestinos=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.NewSalesComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.NewSalesComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i=t;this.mostrarCargando=!0;let r=this.service.callServicesHttp("parada-report-open",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mostrarCargando=!1,this.mensajeServicio=this.service.processError(e,n)})},e.NewSalesComponent.prototype.procesarRespuesta=function(e){this.mostrarCargando=!1;let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listDestinos=[],this.mensajeServicio=t;else if(200!=e.status_http)this.mensajeServicio=this.service.processMessageError(e,t);else if(!e.hasOwnProperty("count"))this.listDestinos=[];else if(null==e.count||null==e.count||0==e.count)this.listDestinos=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listDestinos=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listDestinos.push(n);this.pagingActual.count=e.count}else this.listDestinos=[]}},e.NewSalesComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.NewSalesComponent.prototype.selectedDestino=function(e){null==e||e==null||""==e||(this.destinoSelected=e.code,this.destinoSelectedMostrar=e.code+" - "+e.name,$("#modalSearchViajes").modal("hide"))},e.NewSalesComponent.prototype.buscar=function(){return this.listAdultos=[],this.listInfantes=[],this.listMayores=[],this.viajeSeleccionado=null,this.viajeObjetoSelected=null,null==this.destinoSelected?(this.mensaje="Debe seleccionar el destino",void this.msg.warning()):0==this.total_pasajeros?(this.mensaje="Debe ingresar al menos un pasajero",void this.msg.warning()):null==this.fecha_ida||null==this.fecha_ida||""==this.fecha_ida?(this.mensaje="Debe ingresar la fecha de ida",void this.msg.warning()):void(this.jsonFilterViaje={},null!=this.fecha_ida&&null!=this.fecha_ida&&""!=this.fecha_ida&&(this.jsonFilterViaje.departure_date={},this.jsonFilterViaje.departure_date.lte=this.fecha_ida+"T23:59:59.000Z",this.jsonFilterViaje.departure_date.gte=this.fecha_ida+"T00:00:00.000Z",this.jsonFilterViaje.departure_date.time_zone=getTimeZone()),null!=this.destinoSelected&&null!=this.destinoSelected&&""!=this.destinoSelected&&"null"!=this.destinoSelected&&(this.jsonFilterViaje.destination_stop=this.destinoSelected),this.jsonFilterViaje.active=!0,this.jsonFilterViaje.online_sales=!0,this.jsonFilterViaje.status=["PUBLISHED"],this.callServicesViaje(1,"&limit="+this.detallePorPaginaViaje))},e.NewSalesComponent.prototype.getCantidadSelectedViajes=function(e){null==e||e==null||""==e||(this.detallePorPaginaViaje=e.detalles,this.totalPageViaje=e.pagina,null==this.listViajes||this.listViajes==null||0==this.listViajes.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesViaje(1,"&limit="+this.detallePorPaginaViaje))},e.NewSalesComponent.prototype.getValueFirstViajes=function(e){this.listViajes=[],this.paginActualViaje.hasOwnProperty("first_page")&&null!=this.paginActualViaje.first_page&&this.paginActualViaje.first_page!=null&&""!=this.paginActualViaje.first_page&&this.callServicesViaje(e,this.paginActualViaje.first_page)},e.NewSalesComponent.prototype.getValuePreviousViajes=function(e){this.listViajes=[],this.paginActualViaje.hasOwnProperty("previous_page")&&null!=this.paginActualViaje.previous_page&&this.paginActualViaje.previous_page!=null&&""!=this.paginActualViaje.previous_page&&this.callServicesViaje(e,this.paginActualViaje.previous_page)},e.NewSalesComponent.prototype.getValueLastViajes=function(e){this.listViajes=[],this.paginActualViaje.hasOwnProperty("last_page")&&null!=this.paginActualViaje.last_page&&this.paginActualViaje.last_page!=null&&""!=this.paginActualViaje.last_page&&this.callServicesViaje(e,this.paginActualViaje.last_page)},e.NewSalesComponent.prototype.getValueNextViajes=function(e){this.listViajes=[],this.paginActualViaje.hasOwnProperty("next_page")&&null!=this.paginActualViaje.next_page&&this.paginActualViaje.next_page!=null&&""!=this.paginActualViaje.next_page&&this.callServicesViaje(e,this.paginActualViaje.next_page)},e.NewSalesComponent.prototype.getValueChangeRecordsViajes=function(e){this.pageSelectedViaje=e},e.NewSalesComponent.prototype.callServicesViaje=function(e,t){let n=_("message_dflt_4");this.pageSelectedViaje=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t),this.listViajes=[];let i="&type=PAGINATE"+t,r=this.service.callServicesHttp("travel-report-line",i,this.jsonFilterViaje);r.subscribe(e=>{this.procesarRespuestaViaje(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.NewSalesComponent.prototype.procesarRespuestaViaje=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listViajes=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count")){return this.mensaje="No hay viajes para la fecha seleccionada",void this.msg.warning()}else if(null==e.count||null==e.count||0==e.count)return this.listViajes=[],this.mensaje="No hay viajes para la fecha seleccionada",void this.msg.warning();else{this.paginActualViaje={},this.paginActualViaje.count=e.count;let t=Math.floor(this.paginActualViaje.count/this.detallePorPaginaViaje),i=this.paginActualViaje.count%this.detallePorPaginaViaje;if(this.totalPageViaje=0==i?t:t+1,this.paginActualViaje.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.paginActualViaje.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.paginActualViaje.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.paginActualViaje.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listViajes=[];for(var r=0;r<e.results.length;r++)n=this.formattedDataViajes(e.results[r]),null!=n&&this.listViajes.push(n);this.paginActualViaje.count=e.count}else this.listViajes=[]}},e.NewSalesComponent.prototype.getTasaCambio=function(){let e=this.service.callServicesHttp("get-exchanged",null,null),t=_("message_dflt_85");e.subscribe(e=>{if(null==e||e==null||""==e)this.mensaje=t,this.msg.warning();else if(!e.hasOwnProperty("body"))this.mensaje=this.service.processMessageError(e,t);else if(null!=e.body&&0!=e.body.length)for(var n=0;n<e.body.length;n++)if(null!=e.body[n]&&e.body[n].hasOwnProperty("currency")&&"USD"==e.body[n].currency&&e.body[n].hasOwnProperty("rate")&&null!=e.body[n].rate&&null!=e.body[n].rate&&""!=e.body[n].rate){this.tasaCambio=e.body[n].rate;break}},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.NewSalesComponent.prototype.formattedDataViajes=function(e){if(null==e||null==e||""==e)return null;if(e.hasOwnProperty("departure_date")&&null!=e.departure_date&&null!=e.departure_date&&""!=e.departure_date&&(e.formatted_departure_date=formattingDate(e.departure_date)),e.hasOwnProperty("fares")&&null!=e.fares&&0!=e.fares.length)for(var t=0;t<e.fares.length;t++)if(null!=e.fares[t]&&e.fares[t].hasOwnProperty("destination_stop_code")&&e.fares[t].destination_stop_code==this.destinoSelected&&e.fares[t].hasOwnProperty("amount"))try{e.fares[t].rate_public=.12;var n=e.fares[t].amount*e.fares[t].rate_public;e.tarifa_id=e.fares[t].id,e.tarifa_monto_original=e.fares[t].amount;var r=e.fares[t].amount;r=(e.fares[t].amount+n).toFixed(2),e.tarifa=amountFormattingObject(100*r),e.tarifa=e.tarifa.integerPart+","+e.tarifa.decimalPart,e.fares[t].hasOwnProperty("currency")&&null!=e.fares[t].currency&&null!=e.fares[t].currency&&""!=e.fares[t].currency&&(e.tarifa=e.tarifa+" "+_(e.fares[t].currency),e.tarifa_currency=e.fares[t].currency),null!=this.tasaCambio&&(e.bs_cambio=(r*this.tasaCambio).toFixed(2),e.bs_cambio=amountFormattingObject(100*e.bs_cambio),e.bs_cambio=e.bs_cambio.integerPart+","+e.bs_cambio.decimalPart,e.bs_cambio+=" Bs");break}catch(e){}return e},e.NewSalesComponent.prototype.back=function(){window.history.back()},e.NewSalesComponent.prototype.done=function(){if(null==this.destinoSelected||null==this.destinoSelected||""==this.destinoSelected)return this.mensaje=_("warning57"),void this.msg.warning();if(null==this.viajeSeleccionado||null==this.viajeSeleccionado||""==this.viajeSeleccionado)return this.mensaje=_("warning56"),void this.msg.warning();if(null==this.listPassenger||0==this.listPassenger.length)return this.mensaje=_("warning54"),void this.msg.warning();var e=null;if(null!=this.listViajes&&0!=this.listViajes.length)for(var t=0;t<this.listViajes.length;t++)if(null!=this.listViajes[t]&&this.listViajes[t].id==this.viajeSeleccionado){e=this.listViajes[t];break}if(null==e)return this.mensaje=_("warning56"),void this.msg.warning();var n=null;if(e.hasOwnProperty("fares")&&null!=e.fares&&0!=e.length)for(var t;t<e.fares.length;t++)null!=e.fares[t]&&e.fares[t].destination_stop_code==this.destinoSelected&&(n=e.fares[t].id);if(null==n)return this.mensaje=_("warning58"),void this.msg.warning();for(var r=[],s={},t=0;t<this.listPassenger.length;t++)if(null!=this.listPassenger[t]){if(s={},this.listPassenger[t].hasOwnProperty("type")){if(null==this.listPassenger[t].type||null==this.listPassenger[t].type||""==this.listPassenger[t].type)return this.mensaje="Debe ingresar el tipo de pasaje de la l\xEDnea nro. "+(t+1),void this.msg.warning();s.type=this.listPassenger[t].type}else return this.mensaje="Debe ingresar el tipo de pasaje de la l\xEDnea nro. "+(t+1),void this.msg.warning();if("INFANT"!=this.listPassenger[t].type)if(this.listPassenger[t].hasOwnProperty("id_doc")){if(null==this.listPassenger[t].id_doc||null==this.listPassenger[t].id_doc||""==this.listPassenger[t].id_doc)return this.mensaje="Debe ingresar el tipo de documento de la l\xEDnea nro. "+(t+1),void this.msg.warning();if(s.id_doc=this.listPassenger[t].id_doc,this.listPassenger[t].hasOwnProperty("doc")){if(null==this.listPassenger[t].doc||null==this.listPassenger[t].doc||""==this.listPassenger[t].doc)return this.mensaje="Debe ingresar el n\xFAmero de documento de la l\xEDnea nro. "+(t+1),void this.msg.warning();if(!utils_keyNumber(this.listPassenger[t].doc.trim()))return this.mensaje="El n\xFAmero de documento de la l\xEDnea nro. "+(t+1)+" tiene formato incorrecto debe ser s\xF3lo n\xFAmeros",void this.msg.warning();if(this.listPassenger[t].doc=this.listPassenger[t].doc.trim(),9>this.listPassenger[t].doc.length){for(var o=9-this.listPassenger[t].doc.length,d="",l=0;l<o;l++)d+="0";this.listPassenger[t].doc=d+this.listPassenger[t].doc}s.id_doc+=this.listPassenger[t].doc.trim()}else return this.mensaje="Debe ingresar el n\xFAmero de documento de la l\xEDnea nro. "+(t+1),void this.msg.warning()}else return this.mensaje="Debe ingresar el tipo de documento de la l\xEDnea nro. "+(t+1),void this.msg.warning();if(this.listPassenger[t].hasOwnProperty("name")){if(null==this.listPassenger[t].name||null==this.listPassenger[t].name||""==this.listPassenger[t].name)return this.mensaje="Debe ingresar el nombre del pasajero de la l\xEDnea "+(t+1),void this.msg.warning();s.name=this.listPassenger[t].name.trim().toUpperCase()}else return this.mensaje="Debe ingresar el nombre del pasajero de la l\xEDnea "+(t+1),void this.msg.warning();s.fare_id=n,s.active=!0,r.push(s)}let p=this.service.callServicesHttp("reservation-post","&itinerary_id="+e.itinerary_id+"&trip_id="+e.id,r),u=_("message_dflt_86");p.subscribe(e=>null==e||null==e||""==e?(this.mensaje=u,void this.msg.warning()):void(200==e.status_http?this.router.navigate(["/add-payment-taquilla"],{queryParams:{id:e.id,itinerary_id:e.itinerary_id,trip_id:e.trip_id}}):(this.mensaje=this.service.processMessageError(e,u),this.msg.error())),e=>{this.mensaje=this.service.processError(e,u),this.msg.error()})}})(window.app||(window.app={}));(function(e){e.NotUserComponent=ng.core.Component({selector:"not-user",templateUrl:"views/not-user.html"}).Class({constructor:[ng.router.ActivatedRoute,ng.router.Router,function(e,t){this.active=this.active,this.router=t}]}),e.NotUserComponent.prototype.ngOnInit=function(){try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}},e.NotUserComponent.prototype.redirect=function(){this.router.navigate(["/loading"])},e.NotUserComponent.prototype.goInit=function(){window.location.href=redirectUri()}})(window.app||(window.app={}));(function(e){e.ParadaCreateComponent=ng.core.Component({selector:"parada-create",templateUrl:"views/parada-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.ParadaCreateComponent.prototype.ngOnInit=function(){this.title=_("title1"),this.nombre=null,this.code=null,this.checkRol()},e.ParadaCreateComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"STOP-CREATE"==t[n].name){e=!0;break}e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ParadaCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/parada-report"])},e.ParadaCreateComponent.prototype.clean=function(){this.nombre=null,this.code=null},e.ParadaCreateComponent.prototype.done=function(){var e={},t="";if(null==this.code||null==this.code||""==this.code)return this.mensaje=_("warning32"),void this.msg.warning();if(3!=this.code.trim().length)return this.mensaje=_("warning32"),void this.msg.warning();if(t="&code="+this.code.trim().toUpperCase(),null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje=_("warning31"),void this.msg.warning();e.name=this.nombre.trim().toUpperCase(),e.active=!0;let n=_("message_dflt_29"),i=this.service.callServicesHttp("parada-post",t,e);i.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.ParadaCreateComponent.prototype.procesarRespuesta=function(e){let t=_("message_dflt_29");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=capitalizeOnly(_("success23")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ParadaCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ParadaReportComponent=ng.core.Component({selector:"parada-report",templateUrl:"views/parada-report-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.ParadaReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activa"},{value:"INACTIVE",name:"Inactiva"}],this.status=null,this.nombre=null,this.codigo=null,this.checkRol()},e.ParadaReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("STOPS"!=t[r].name)"STOPS"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ParadaReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.ParadaReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"STOP-CREATE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.ParadaReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.codigo||null==this.codigo||""==this.codigo||"null"==this.codigo||(t={},t={code:"*"+this.codigo+"".trim()+"*"}),null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||"Todos"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||"Todos"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&limit="+this.detallePorPagina)},e.ParadaReportComponent.prototype.clean=function(){this.nombre=null,this.codigo=null,this.status=null},e.ParadaReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ParadaReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ParadaReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ParadaReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ParadaReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ParadaReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ParadaReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("parada-report",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.ParadaReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ParadaReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.ParadaReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("STOP-DELETE")&&e.actions.push(this.checkAction("STOP-DELETE")),e.hasOwnProperty("active")?e.active?(e.formatted_status="Activa",null!=this.checkAction("STOP-INACTIVE")&&e.actions.push(this.checkAction("STOP-INACTIVE"))):(e.formatted_status="Inactiva",null!=this.checkAction("STOP-ACTIVE")&&e.actions.push(this.checkAction("STOP-ACTIVE"))):(e.formatted_status="Inactiva",null!=this.checkAction("STOP-ACTIVE")&&e.actions.push(this.checkAction("STOP-ACTIVE"))),e)},e.ParadaReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.ParadaReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"STOP-ACTIVE":$("#modalActivateParada").modal("show");break;case"STOP-INACTIVE":$("#modalInactivateParada").modal("show");break;case"STOP-DELETE":$("#modalDeleteParada").modal("show");break;default:}},e.ParadaReportComponent.prototype.deleteData=function(){if($("#modalDeleteParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code;let t=_("message_dflt_30"),n=this.service.callServicesHttp("parada-delete",e);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.ParadaReportComponent.prototype.activeData=function(){if($("#modalActivateParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code,t={name:this.dataSelected.name,active:!0};let n=_("message_dflt_31"),i=this.service.callServicesHttp("parada-put",e,t);i.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.ParadaReportComponent.prototype.inactiveData=function(){if($("#modalInactivateParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code,t={name:this.dataSelected.name,active:!1};let n=this.service.callServicesHttp("parada-put",e,t),i=_("message_dflt_32");n.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})}},e.ParadaReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_30");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success20")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.ParadaReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_31");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].code==e.code){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success21"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.ParadaReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_32");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].code==e.code){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success22"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.ParadaReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.CarViewComponent=ng.core.Component({selector:"car-view",templateUrl:"views/car-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,n){this.msg=e,this.mensaje="",this.router=t,this.active=n}]}),e.CarViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title3")),this.id=null,this.placa=null,this.conductor=null,this.modelo=null,this.marca=null,this.getData()},e.CarViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.CarViewComponent.prototype.getService=function(){},e.CarViewComponent.prototype.formattedData=function(){},e.CarViewComponent.prototype.print=function(){window.print()},e.CarViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PassengerCreateComponent=ng.core.Component({selector:"passenger-create",templateUrl:"views/passenger-create.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,n){this.msg=e,this.mensaje="",this.router=t,this.active=n}]}),e.PassengerCreateComponent.prototype.ngOnInit=function(){this.title="Nuevo pasajero",this.id=null,this.name=null,this.id_doc="V",this.doc=null,this.telefono=[],this.email=[],this.direccion=null,this.listDocs=["V","E","G","J"],this.etiqueta=null,this.isRif=!0,this.isCi=!1,$("#phone").inputmask("(9999) 999-9999"),this.save=!0,this.getData()},e.PassengerCreateComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("passenger-create"==this.active.url._value[0].path?(this.title="Nuevo Pasajero",this.save=!0):(this.title="Actualizar datos del pasajeros",this.save=!1,this.getService()))},e.PassengerCreateComponent.prototype.getService=function(){},e.PassengerCreateComponent.prototype.getValueMsg=function(){},e.PassengerCreateComponent.prototype.clean=function(){this.name=null,this.id_doc=null,this.doc=null,this.telefono=[],this.email=[],this.direccion=null,this.isRif=!0,this.isCi=!1,this.id_doc="V",this.phone=null},e.PassengerCreateComponent.prototype.selectTypeDoc=function(){this.isRif=!this.isRif,this.isCi=!this.isCi},e.PassengerCreateComponent.prototype.done=function(){if(null==this.name||null==this.name||""==this.name)return this.mensaje=capitalizeOnly(_("message_dflt_1")),void this.msg.warning();if(null==this.id_doc||null==this.id_doc||""==this.id_doc)return this.mensaje=capitalizeOnly(_("message_dflt_2")),void this.msg.warning();if(null==this.doc||null==this.doc||""==this.doc)return this.mensaje=capitalizeOnly(_("message_dflt_3")),void this.msg.warning();null!=this.phone&&""!=this.phone&&this.phone!=null&&""!=this.phone.trim(),null!=this.email&&""!=this.email&&this.email!=null&&""!=this.email.trim(),null!=this.direccion&&this.direccion!=null&&""!=this.direccion&&""!=this.direccion.trim()},e.PassengerCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PassengerReportComponent=ng.core.Component({selector:"passenger-report",templateUrl:"views/passenger-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,n){this.msg=e,this.mensaje="",this.router=t,this.active=n}]}),e.PassengerReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.nombre=null,this.doc=null,this.email=null,this.direccion=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}},e.PassengerReportComponent.prototype.search=function(){},e.PassengerReportComponent.prototype.clean=function(){this.nombre=null,this.doc=null,this.email=null},e.PassengerReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.PassengerReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.PassengerReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.PassengerReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.PassengerReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.PassengerReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.PassengerReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,r=capitalizeOnly(_("message_dflt_4")),s="results",o=this.service.callServicesHttp("passenger-report",n,this.jsonFilter);o.subscribe(e=>{if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=r,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,r),this.msg.error();else if(delete e.status_http,!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let i=Math.floor(this.pagingActual.count/this.detallePorPagina),r=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==r?i:i+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty(s)){var t={};this.listRegister=[];for(var n=0;n<e[s].length;n++)t=this.formattedData(e[s][n]),null!=t&&this.listRegister.push(t);this.pagingActual.count=e.count}else this.listRegister=[]}},e=>{this.listRegister=[],this.mensaje=this.service.processError(e,r),this.msg.error()})},e.PassengerReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:e},e.PassengerReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.PassengerReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"PASSENGER-VIEW":this.router.navigate(["/passenger-view"],{queryParams:{id:e.id}});break;case"PASSENGER-UPDATE":this.router.navigate(["/passenger-update"],{queryParams:{id:e.id}});break;case"PASSENGER-DELETE":$("#deletePassenger").modal();break;default:}},e.PassengerReportComponent.prototype.deleteData=function(){if($("#deletePassenger").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning2")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e="&id="+this.dataSelected.id;let t=capitalizeOnly(_("message_dflt_8")),n=this.service.callServicesHttp("passenger-delete",e,null);n.subscribe(e=>{null==e||null==e||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(delete e.status_http,this.ngOnInit(),this.mensaje=capitalizeOnly(_("success4")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.PassengerReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PassengerViewComponent=ng.core.Component({selector:"passenger-view",templateUrl:"views/passenger-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,function(e,t,n){this.msg=e,this.mensaje="",this.router=t,this.active=n}]}),e.PassengerViewComponent.prototype.ngOnInit=function(){this.id=null,this.name=null,this.documento=null,this.phone=null,this.email=null,this.direccion=null,this.getData()},e.PassengerViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.PassengerViewComponent.prototype.getService=function(){},e.PassengerViewComponent.prototype.formattedData=function(){},e.PassengerViewComponent.prototype.print=function(){window.print()},e.PassengerViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PaymentAddComponent=ng.core.Component({selector:"payment-add",templateUrl:"views/payment-add-v3.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.PaymentAddComponent.prototype.ngOnInit=function(){this.listAsientos="",this.listPagos=[{type:""}],this.listItems=[],this.listItemsAsientos=[],this.typePayment=null,this.listPagoMovil=[],this.listTransferencias=[],this.listTipos=[{value:"CASH",name:"Efectivo"},{value:"POS",name:"Punto de venta"},{value:"MOBILE",name:"Pago M\xF3vil"},{value:"TRANSFERENCE",name:"Transferencia"}],this.listMonedas=[{value:"USD",name:"$"},{value:"VES",name:"Bs"}],this.currency="USD";try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.monto="0,00",this.faltante_dolares=0,this.faltante_dolares_formatted="0,00",this.faltantes_bs=0,this.faltantes_bs_formatted="0,00",$("#monto1").mask("#.##0,00",{reverse:!0}),this.checkRol()},e.PaymentAddComponent.prototype.getValueMsg=function(){"add-payment"==this.ruta||"PAID"==this.status_question&&$("#modalOtherReservation").modal("show")},e.PaymentAddComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"ADD-PAYMENT"==t[n].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.PaymentAddComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("add-payment"==this.active.url._value[0].path?this.ruta="add-payment":this.ruta="add-payment-taquilla"),this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&(this.active.queryParams._value.hasOwnProperty("id")&&(this.reservation_id=this.active.queryParams._value.id),this.active.queryParams._value.hasOwnProperty("itinerary_id")&&(this.itinerary_id=this.active.queryParams._value.itinerary_id),this.active.queryParams._value.hasOwnProperty("trip_id")&&(this.trip_id=this.active.queryParams._value.trip_id),this.getReservation(),this.getReservationLine())},e.PaymentAddComponent.prototype.getReservation=function(){let e=this.service.callServicesHttp("reservation-get-line","&id="+this.reservation_id+"&itinerary_id="+this.itinerary_id+"&trip_id="+this.trip_id,null),t=_("message_dflt_56");e.subscribe(e=>{null==e||e==null||""==e?(this.mensaje=t,this.msg.warning()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.PaymentAddComponent.prototype.formattedData=function(e){if(this.parada=null,this.listItems=[],this.listItemsAsientos=[],null!=e&&null!=e&&""!=e){if(e.hasOwnProperty("trip_departure_date")&&null!=e.trip_departure_date&&null!=e.trip_departure_date&&""!=e.trip_departure_date){this.fecha_salida=formattingDate(e.trip_departure_date);try{this.fecha_salida=this.fecha_salida.split(" "),this.hora=this.fecha_salida[1],this.fecha_salida=this.fecha_salida[0]}catch(e){}}if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&""!=e.line_name&&(this.line_name=e.line_name),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(this.status=_(e.status).toUpperCase(),this.status_question=e.status),e.hasOwnProperty("itinerary_id")&&null!=e.itinerary_id&&null!=e.itinerary_id&&""!=e.itinerary_id&&(this.itinerary_id=e.itinerary_id),e.hasOwnProperty("sequence")&&null!=e.sequence&&null!=e.sequence&&""!=e.sequence&&(this.sequence=e.sequence),e.hasOwnProperty("vehicle_type_name")&&null!=e.vehicle_type_name&&null!=e.vehicle_type_name&&""!=e.vehicle_type_name&&(this.vehicle_type_name=e.vehicle_type_name),e.hasOwnProperty("number_of_passengers")&&null!=e.number_of_passengers&&null!=e.number_of_passengers&&""!=e.number_of_passengers&&(this.number_of_passengers=e.number_of_passengers),this.listAsientos="",e.hasOwnProperty("seats")&&null!=e.seats&&0!=e.seats.length)for(var t=0;t<e.seats.length;t++)t==e.seats.length-1?this.listAsientos+=e.seats[t]:this.listAsientos=this.listAsientos+e.seats[t]+" - ";if(e.hasOwnProperty("total")&&null!=e.total&&null!=e.total&&""!=e.total){try{this.total=e.total,this.faltante_dolares=e.total,this.total_formatted=amountFormattingObject(100*e.total),this.total_formatted=this.total_formatted.integerPart+","+this.total_formatted.decimalPart,null!=this.moneda&&(this.total_formatted=this.total_formatted+" "+this.moneda)}catch(e){}if(e.hasOwnProperty("rates")&&null!=e.rates&&null!=e.rates&&""!=e.rates&&e.rates.hasOwnProperty("USD")&&null!=e.rates.USD&&null!=e.rates.USD&&""!=e.rates.USD)try{this.tasa_bs=e.rates.USD,this.total_bs=(this.total*e.rates.USD).toFixed(2),this.faltante_bs=this.total*e.rates.USD,this.total_formatted_bs=amountFormattingObject(100*this.total_bs),this.total_formatted_bs=this.total_formatted_bs.integerPart+","+this.total_formatted_bs.decimalPart+" Bs",this.formatted_tasa_cambio=amountFormattingObject(100*e.rates.USD),this.formatted_tasa_cambio=this.formatted_tasa_cambio.integerPart+","+this.formatted_tasa_cambio.decimalPart+" Bs"}catch(e){}}if(this.listPayments=[],e.hasOwnProperty("payments")&&null!=e.payments&&0!=e.payments.length)for(var n={},t=0;t<e.payments.length;t++)if(null!=e.payments[t]&&(n={},n=e.payments[t],"DELETED"!=n.status)){if(n.hasOwnProperty("collector_bank")&&null!=n.collector_bank&&null!=n.collector_bank&&""!=n.collector_bank&&(n.banco=returnBankSelected(n.collector_bank)),n.hasOwnProperty("payment_method")&&null!=n.payment_method&&null!=n.payment_method&&""!=n.payment_method&&(n.metodo=_(n.payment_method).toUpperCase()),n.hasOwnProperty("amount")&&null!=n.amount&&null!=n.amount&&""!=n.amount){if(n.hasOwnProperty("currency")){var r=0;if("VES"==n.currency){this.faltante_bs-=n.amount,r=0;try{r=parseFloat((n.amount/this.tasa_bs).toFixed(2))}catch(e){r=0}this.faltante_dolares-=r}else if("USD"==n.currency){this.faltante_dolares-=n.amount,r=0;try{r=parseFloat((n.amount*this.tasa_bs).toFixed(2))}catch(e){r=0}this.faltante_bs-=r}}n.formatted_amount=amountFormattingObject(100*n.amount),n.formatted_amount=n.formatted_amount.integerPart+","+n.formatted_amount.decimalPart,n.hasOwnProperty("currency")&&null!=n.currency&&null!=n.currency&&""!=n.currency&&(n.formatted_amount=n.formatted_amount+" "+_(n.currency))}this.listPayments.push(n)}if(e.hasOwnProperty("passengers")&&null!=e.passengers&&0!=e.passengers.length)for(var n={},t=0;t<e.passengers.length;t++)if(null!=e.passengers[t]){if(n={},(null==this.parada||""==this.parada)&&e.passengers[t].hasOwnProperty("destination_stop_code")&&null!=e.passengers[t].destination_stop_code&&null!=e.passengers[t].destination_stop_code&&""!=e.passengers[t].destination_stop_code&&(this.parada=e.passengers[t].destination_stop_code,e.passengers[t].hasOwnProperty("destination_stop_name")&&null!=e.passengers[t].destination_stop_name&&null!=e.passengers[t].destination_stop_name&&""!=e.passengers[t].destination_stop_name&&(this.parada=this.parada+" - "+e.passengers[t].destination_stop_name)),e.passengers[t].hasOwnProperty("name")&&null!=e.passengers[t].name&&null!=e.passengers[t].name&&""!=e.passengers[t].name&&(n.name=e.passengers[t].name),e.passengers[t].hasOwnProperty("type")&&null!=e.passengers[t].type&&null!=e.passengers[t].type&&""!=e.passengers[t].type&&(n.formatted_type=_(e.passengers[t].type).toUpperCase()),e.passengers[t].hasOwnProperty("id_doc")&&null!=e.passengers[t].id_doc&&null!=e.passengers[t].id_doc&&""!=e.passengers[t].id_doc&&(n.id_doc=e.passengers[t].id_doc),e.passengers[t].hasOwnProperty("amount_to_pay")&&null!=e.passengers[t].amount_to_pay&&null!=e.passengers[t].amount_to_pay&&""!=e.passengers[t].amount_to_pay)try{n.monto=amountFormattingObject(100*e.passengers[t].amount_to_pay),n.monto=n.monto.integerPart+","+n.monto.decimalPart,e.passengers[t].hasOwnProperty("fare_currency")&&(this.moneda=_(e.passengers[t].fare_currency),n.monto=n.monto+" "+_(e.passengers[t].fare_currency)),this.currency=e.passengers[t].fare_currency}catch(e){}"INFANT"!=e.passengers[t].type&&this.listItemsAsientos.push(n),this.listItems.push(n)}}},e.PaymentAddComponent.prototype.openModalPayment=function(){this.telefono_pago_movil=null,this.typePayment="CASH",this.monto=null,this.banco=null,this.currency="USD",this.listPagos=[],$("#modalMediosPago").modal("show")},e.PaymentAddComponent.prototype.cleanData=function(){this.telefono_pago_movil=null,this.typePayment="CASH",this.monto=null,this.banco=null,this.referencia_pago_movil=null},e.PaymentAddComponent.prototype.changeMoneda=function(e,t){try{this.faltante_dolares_formatted=null,this.faltante_bs_formatted=null;"VES"==e.currency?(this.listPagos[t].monto=amountFormattingObject(100*this.faltante_bs),this.listPagos[t].monto=this.listPagos[t].monto.integerPart+","+this.listPagos[t].monto.decimalPart):(this.listPagos[t].monto=amountFormattingObject(100*this.faltante_dolares),this.listPagos[t].monto=this.listPagos[t].monto.integerPart+","+this.listPagos[t].monto.decimalPart)}catch(e){}},e.PaymentAddComponent.prototype.getReservationLine=function(){let e=this.service.callServicesHttp("line-get-reservation",null,null),t=_("message_dflt_3");e.subscribe(e=>{this.formattedLinePayments(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.PaymentAddComponent.prototype.formattedLinePayments=function(e){if(null!=e&&e!=null&&""!=e){if(e.hasOwnProperty("mobile_payment")&&null!=e.mobile_payment&&0!=e.mobile_payment.length){this.listPagoMovil=e.mobile_payment;for(var t=0;t<this.listPagoMovil.length;t++)null!=this.listPagoMovil[t]&&this.listPagoMovil[t].hasOwnProperty("bank")&&null!=this.listPagoMovil[t].bank&&null!=this.listPagoMovil[t].bank&&""!=this.listPagoMovil[t].bank&&(this.listPagoMovil[t].name=returnBankSelected(this.listPagoMovil[t].bank))}if(e.hasOwnProperty("bank_accounts")&&null!=e.bank_accounts&&0!=e.bank_accounts.length){this.listTransferencias=e.bank_accounts;for(var t=0;t<this.listTransferencias.length;t++)null!=this.listTransferencias[t]&&this.listTransferencias[t].hasOwnProperty("bank")&&null!=this.listTransferencias[t].bank&&null!=this.listTransferencias[t].bank&&""!=this.listTransferencias[t].bank&&(this.listTransferencias[t].name=returnBankSelected(this.listTransferencias[t].bank))}}},e.PaymentAddComponent.prototype.addPayment=function(){if($("#modalMediosPago").modal("hide"),null==this.listPagos||0==this.listPagos.length)return this.mensaje="Debe adicionar al menos un pago a la reservaci\xF3n",void this.msg.warning();var e={},t={},n=null,r=0,s=new Date,o=s.getDate();10>o&&(o="0"+s.getDate());var d=s.getMonth()+1;10>d&&(d="0"+d);for(var l=s.getFullYear()+"-"+d+"-"+o,p=0;p<this.listPagos.length;p++)if(null!=this.listPagos[p]&&(t={},this.listPagos[p].hasOwnProperty("type"))){if(null==this.listPagos[p].type||null==this.listPagos[p].type||""==this.listPagos[p].type)return this.mensaje="Debe seleccionar el tipo de pago de la linea "+(p+1),void this.msg.warning();if(null==this.listPagos[p].currency||null==this.listPagos[p].currency||""==this.listPagos[p].currency)return this.mensaje="Debe seleccionar la moneda de la l\xEDnea "+(p+1),void this.msg.warning();if(t.currency=this.listPagos[p].currency,null==this.listPagos[p].currency||null==this.listPagos[p].currency||""==this.listPagos[p].currency)return this.mensaje="Debe seleccionar la moneda",void this.msg.warning();if(t.currency=this.listPagos[p].currency,null==this.listPagos[p].monto||null==this.listPagos[p].monto||""==this.listPagos[p].monto)return this.mensaje="Debe seleccionar el monto de la l\xEDnea "+(p+1),void this.msg.warning();try{n=$("#monto1"+p).val(),n=n.replace(/\./g,"").replace(/,/g,""),n=(replaceAll(n," ","")+"").trim(),r=(parseFloat(n)/100).toFixed(2)}catch(e){r=0}if(""==r||0==r)return this.mensaje="Debe ingresar el monto de la l\xEDnea "+(p+1),void this.msg.warning();if(r=parseFloat(r),t.amount=r,"CASH"==this.listPagos[p].type)e.hasOwnProperty("cash_payments")||(e.cash_payments=[]),e.cash_payments.push(t);else if("POS"==this.listPagos[p].type)e.hasOwnProperty("pos_payments")||(e.pos_payments=[]),e.pos_payments.push(t);else if("MOBILE"==this.listPagos[p].type){var u=null,c=null;if(null==this.listPagos[p].banco||null==this.listPagos[p].banco||""==this.listPagos[p].banco)return this.mensaje="Debe ingresar el banco receptor de la linea "+(p+1),void this.msg.warning();if(null!=this.listPagoMovil&&0!=this.listPagoMovil.length)for(var g=0;g<this.listPagoMovil.length;g++)if(null!=this.listPagoMovil[g]&&this.listPagoMovil[g].bank==this.listPagos[p].banco){u=this.listPagoMovil[g].id_doc,c=this.listPagoMovil[g].phone;break}if(null==this.listPagos[p].telefono_pago_movil||null==this.listPagos[p].telefono_pago_movil||""==this.listPagos[p].telefono_pago_movil)return this.mensaje="Debe ingresar el tel\xE9fono de la transacci\xF3n de la l\xEDnea "+(p+1),void this.msg.warning();var f=this.listPagos[p].telefono_pago_movil.substring(0,3);if("414"!=f&&"416"!=f&&"424"!=f&&"426"!=f&&"412"!=f)return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe comenzar por 414 | 416 | 426 | 424 |412",void this.msg.warning();if(null==this.listPagos[p].referencia_pago_movil||null==this.listPagos[p].referencia_pago_movil||""==this.listPagos[p].referencia_pago_movil)return this.mensaje="Debe ingresar la referencia de la transacci\xF3n  de la l\xEDnea "+(p+1),void this.msg.warning();t.date_of_payment=l,t.collector_bank=this.listPagos[p].banco,t.collector_id_doc=u,t.collector_phone=c,t.payer_phone=this.listPagos[p].telefono_pago_movil,t.payer_reference=this.listPagos[p].referencia_pago_movil,t.payer_bank=this.listPagos[p].banco,e.hasOwnProperty("mobile_payments")||(e.mobile_payments=[]),e.mobile_payments.push(t)}else if("TRANSFERENCE"==this.listPagos[p].type){var u=null,m=null;if(null==this.listPagos[p].banco||null==this.listPagos[p].banco||""==this.listPagos[p].banco)return this.mensaje="Debe ingresar el banco receptor de la linea "+(p+1),void this.msg.warning();if(null!=this.listTransferencias&&0!=this.listTransferencias.length)for(var g=0;g<this.listTransferencias.length;g++)if(null!=this.listTransferencias[g]&&this.listTransferencias[g].bank==this.listPagos[g].banco){u=this.listTransferencias[g].id_doc,m=this.listTransferencias[g].number;break}if(null==this.listPagos[p].referencia_pago_movil||null==this.listPagos[p].referencia_pago_movil||""==this.listPagos[p].referencia_pago_movil)return this.mensaje="Debe ingresar la referencia de la transacci\xF3n  de la l\xEDnea "+(p+1),void this.msg.warning();t.date_of_payment=l,t.collector_bank=this.listPagos[p].banco,t.collector_id_doc=u,t.collector_bank_account_number=m,t.payer_reference=this.listPagos[p].referencia_pago_movil,t.payer_bank=this.listPagos[p].banco,e.hasOwnProperty("transfer_payments")||(e.transfer_payments=[]),e.transfer_payments.push(t)}}if(null!=this.listItemsAsientos&&0!=this.listItemsAsientos.length){e.seats=[];for(var p=0;p<this.listItemsAsientos.length;p++)if(null!=this.listItemsAsientos[p]&&this.listItemsAsientos[p].hasOwnProperty("asiento")){if(null==this.listItemsAsientos[p].asiento||null==this.listItemsAsientos[p].asiento||""==this.listItemsAsientos[p].asiento)return this.mensaje="Debe ingresar el n\xFAmero de asiento "+(p+1),void this.msg.warning();e.seats.push(this.listItemsAsientos[p].asiento.trim())}}return null==e.seats||null==e.seats||0==e.seats.length?(this.mensaje="Debe ingresar un n\xFAmero de asiento",void this.msg.warning()):void this.addPaymentService(e)},e.PaymentAddComponent.prototype.addPaymentService=function(e){let t=this.service.callServicesHttp("add-payment-reservation","&id="+this.reservation_id+"&itinerary_id="+this.itinerary_id+"&trip_id="+this.trip_id,e),n=_("message_dflt_74");t.subscribe(e=>{null==e||e==null||""==e?(this.mensaje=n,this.msg.warning()):200==e.status_http?(this.formattedData(e),this.mensaje="Pago adicionado con \xE9xito",this.msg.info()):(this.mensaje=this.service.processMessageError(e,n),this.msg.error())},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.PaymentAddComponent.prototype.openModalDelete=function(e){this.dataSelected=e,this.motivo_borrado=null,$("#modalDeletePayment").modal("show")},e.PaymentAddComponent.prototype.deletePaymentSave=function(){if($("#modalDeletePayment").modal("hide"),null==this.motivo_borrado||null==this.motivo_borrado||""==this.motivo_borrado)return this.mensaje="Debe ingresar el motivo por la cual esta borrando el pago",void this.msg.warning();var e=[{payment_id:this.dataSelected.id,reason:this.motivo_borrado.trim().toUpperCase()}];let t=_("message_dflt_84"),n=this.service.callServicesHttp("delete-payment-reservation","&id="+this.reservation_id+"&itinerary_id="+this.itinerary_id+"&trip_id="+this.trip_id,e);n.subscribe(e=>{null==e||null==e||""==e?(this.mensaje=t,this.msg.warning()):200==e.status_http?(this.formattedData(e),this.mensaje=_("success61"),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.PaymentAddComponent.prototype.deletePago=function(e){var t=this.listPagos.slice(e+1);this.listPagos=this.listPagos.slice(0,e),this.listPagos=this.listPagos.concat(t)},e.PaymentAddComponent.prototype.addPago=function(){this.listPagos.push({type:"",monto:"0,00"})},e.PaymentAddComponent.prototype.focusMonto=function(){$(".moneda1").mask("#.##0,00",{reverse:!0})},e.PaymentAddComponent.prototype.redirectReservation=function(){this.router.navigate(["/new-sales-line"])},e.PaymentAddComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PropietarioCreateComponent=ng.core.Component({selector:"propietario-create",templateUrl:"views/propietario-create-v2.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.PropietarioCreateComponent.prototype.ngOnInit=function(){this.title=_("title7"),this.pagingActualLine={},this.detallePorPaginaLine=10,this.totalPageLine=1,this.pageSelectedLine=1,this.listRegisterLine=[],this.listDocs=["V","E","G","J"],this.id_doc="V",this.doc=null,this.nombre=null,this.apellido=null,this.telefono=[],this.email=[],this.etiqueta=null,this.isRif=!0,this.isCi=!1,this.save=!0,this.texto="Guardar",this.active_status=!0,this.clase="col-lg-8 col-md-8 col-sm-6 col-12",this.business_name=null,this.checkRol()},e.PropietarioCreateComponent.prototype.keyPress=function(e){return keypressNumbersInteger(e)},e.PropietarioCreateComponent.prototype.checkRol=function(){var e="CREATE-VEHICLE-OWNER";this.active.url.hasOwnProperty("_value")&&("propietario-create"==this.active.url._value[0].path?(this.title=_("title7"),this.save=!0,e="CREATE-VEHICLE-OWNER"):(this.title=_("title8"),this.save=!1,this.clase="col-lg-12 col-md-12 col-sm-12 col-12",e="UPDATE-VEHICLE-OWNER"));var t=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var n=orderList(this.service.getRole().views),r=0;r<n.length;r++)if(null!=n[r]&&n[r].name==e){t=!0;break}t?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.PropietarioCreateComponent.prototype.getData=function(){this.active.url.hasOwnProperty("_value")&&("propietario-create"==this.active.url._value[0].path?(this.title=_("title7"),this.save=!0,this.texto="Guardar"):(this.title=_("title8"),this.save=!1,this.texto="Actualizar",this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.active.queryParams._value.hasOwnProperty("business_id")&&(this.business_id=this.active.queryParams._value.business_id,this.getService()))))},e.PropietarioCreateComponent.prototype.getService=function(){let e=this.service.callServicesHttp("propietario-get",this.business_id+"?realm="+this.service.getRealm()+"&id="+this.id,null),t=_("message_dflt_42");e.subscribe(e=>{this.procesarRespuestaGET(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.PropietarioCreateComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_42");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedDataGET(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.PropietarioCreateComponent.prototype.formattedDataGET=function(e){var t=null;try{var t=e.id_doc.charAt(0)}catch(e){}if(e.hasOwnProperty("name")&&null!=e.name&&null!=e.name&&""!=e.name)if("V"==t||"E"==t)try{e.name=e.name.split(","),1==e.name.length?this.nombre=e.name[0].trim():2==e.name.length&&(this.nombre=e.name[0].trim(),this.apellido=e.name[1].trim())}catch(e){}else this.business_name=e.name;e.hasOwnProperty("phone")&&null!=e.phone&&e.phone!=null&&""!=e.phone&&(this.telefono=e.phone),e.hasOwnProperty("email")&&null!=e.email&&e.email!=null&&""!=e.email&&(this.email=e.email),e.hasOwnProperty("line_name")&&null!=e.line_name&&e.line_name!=null&&""!=e.line_name&&(this.lineSelected={},this.lineSelected.name=e.line_name,this.lineSelected.id=this.line_id),e.hasOwnProperty("active")&&(this.active_status=e.active);try{e.hasOwnProperty("id_doc")&&null!=e.id_doc&&e.id_doc!=null&&""!=e.id_doc&&(this.id_doc=e.id_doc.charAt(0),this.doc=e.id_doc.substring(1,e.id_doc.length))}catch(e){}},e.PropietarioCreateComponent.prototype.searchLine=function(){this.jsonFilter={};var e=[],t=null;if(t={},t.active=!0,null==this.linea||null==this.linea||""==this.linea||"null"==this.linea||(null==t&&(t={}),t.name="*"+this.linea+"*"),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServicesLine(1,"&offset=0&limit="+this.detallePorPaginaLine)},e.PropietarioCreateComponent.prototype.getCantidadSelectedLine=function(e){null==e||e==null||""==e||(this.detallePorPaginaLine=e.detalles,this.totalPageLine=e.pagina,null==this.listRegisterLine||this.listRegisterLine==null||0==this.listRegisterLine.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServicesLine(1,"&limit="+this.detallePorPaginaLine))},e.PropietarioCreateComponent.prototype.getValueFirstLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("first_page")&&null!=this.pagingActualLine.first_page&&this.pagingActualLine.first_page!=null&&""!=this.pagingActualLine.first_page&&this.callServicesLine(e,this.pagingActualLine.first_page)},e.PropietarioCreateComponent.prototype.getValuePreviousLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("previous_page")&&null!=this.pagingActualLine.previous_page&&this.pagingActualLine.previous_page!=null&&""!=this.pagingActualLine.previous_page&&this.callServicesLine(e,this.pagingActualLine.previous_page)},e.PropietarioCreateComponent.prototype.getValueLastLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("last_page")&&null!=this.pagingActualLine.last_page&&this.pagingActualLine.last_page!=null&&""!=this.pagingActualLine.last_page&&this.callServicesLine(e,this.pagingActualLine.last_page)},e.PropietarioCreateComponent.prototype.getValueNextLine=function(e){this.listRegisterLine=[],this.pagingActualLine.hasOwnProperty("next_page")&&null!=this.pagingActualLine.next_page&&this.pagingActualLine.next_page!=null&&""!=this.pagingActualLine.next_page&&this.callServicesLine(e,this.pagingActualLine.next_page)},e.PropietarioCreateComponent.prototype.getValueChangeRecordsLine=function(e){this.pageSelectedLine=e},e.PropietarioCreateComponent.prototype.callServicesLine=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("line-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuestaLine(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.PropietarioCreateComponent.prototype.procesarRespuestaLine=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegisterLine=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegisterLine=[];else if(null==e.count||null==e.count||0==e.count)this.listRegisterLine=[];else{this.pagingActualLine={},this.pagingActualLine.count=e.count;let t=Math.floor(this.pagingActualLine.count/this.detallePorPaginaLine),i=this.pagingActualLine.count%this.detallePorPaginaLine;if(this.totalPageLine=0==i?t:t+1,this.pagingActualLine.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActualLine.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActualLine.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActualLine.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegisterLine=[];for(var r=0;r<e.results.length;r++)n=this.formattedDataLine(e.results[r]),null!=n&&this.listRegisterLine.push(n);this.pagingActualLine.count=e.count}else this.listRegisterLine=[]}},e.PropietarioCreateComponent.prototype.formattedDataLine=function(e){return null==e||null==e||""==e?null:e},e.PropietarioCreateComponent.prototype.quitarLinea=function(){if(this.lineSelected=null,null!=data&&null!=data&&""!=data&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var e=0;e<this.listRegisterLine.length;e++)null!=this.listRegisterLine[e]&&(this.listRegisterLine[e].classSelected=null)},e.PropietarioCreateComponent.prototype.selectLine=function(e){if(this.lineSelected=null,null!=e&&null!=e&&""!=e&&null!=this.listRegisterLine&&0!=this.listRegisterLine.length)for(var t=0;t<this.listRegisterLine.length;t++)null!=this.listRegisterLine[t]&&(this.listRegisterLine[t].code==e.code?null==this.listRegisterLine[t].classSelected?(this.lineSelected=this.listRegisterLine[t],this.listRegisterLine[t].classSelected="selected"):this.listRegisterLine[t].classSelected=null:this.listRegisterLine[t].classSelected=null)},e.PropietarioCreateComponent.prototype.getValueMsg=function(){this.router.navigate(["/propietario-report"])},e.PropietarioCreateComponent.prototype.clean=function(){this.listRegisterLine=[],this.nombre=null,this.apellido=null,this.telefono=null,this.business_name=null,this.email=null,this.save&&(this.doc=null,this.id_doc="V",this.lineSelected=null)},e.PropietarioCreateComponent.prototype.done=function(){var e={};if(null==this.lineSelected)return this.mensaje="Debe seleccionar la linea a la que pertenece el propietario",void this.msg.warning();if(null==this.id_doc||null==this.id_doc||""==this.id_doc||"null"==this.id_doc)return this.mensaje="Debe seleccionar el tipo de documento",void this.msg.warning();if(e.id_doc=this.id_doc,null==this.doc||null==this.doc||""==this.doc)return this.mensaje="Debe ingresar el n\xFAmero de RIF/CI del propietario",void this.msg.warning();this.doc=this.doc.trim();var t=0;if(9>this.doc.length){t=9-this.doc.length;for(var n="",r=0;r<t;r++)n+="0";this.doc=n+this.doc}if(e.id_doc+=this.doc,"V"==this.id_doc||"E"==this.id_doc){if(null==this.nombre||null==this.nombre||""==this.nombre)return this.mensaje="Debe ingresar el nombre del propietario",void this.msg.warning();if(e.name=this.nombre.trim().toUpperCase(),null==this.apellido||null==this.apellido||""==this.apellido)return this.mensaje="Debe ingresar el apellido del propietario",void this.msg.warning();e.name=e.name+" , "+this.apellido.trim().toUpperCase()}else if("J"==this.id_doc||"G"==this.id_doc){if(null==this.business_name||null==this.business_name||""==this.business_name)return this.mensaje="Debe ingresar la raz\xF3n social",void this.msg.warning();e.name=this.business_name.trim().toUpperCase()}if(null!=this.telefono&&""!=this.telefono&&null!=this.telefono&&""!=this.telefono.trim()){var n=this.telefono;e.phone=n+"";var s=n.substring(0,3);if("414"!=s&&"416"!=s&&"424"!=s&&"426"!=s&&"412"!=s)return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe comenzar por 414 | 416 | 426 | 424 |412",void this.msg.warning();if(!utils_keyNumber(n))return this.mensaje="El formato del tel\xE9fono ingresado es incorrecto debe ser s\xF3lo n\xFAmeros",void this.msg.warning();e.phone=e.phone.trim()}if(null!=this.email&&""!=this.email&&null!=this.email&&""!=this.email.trim()){if(!validarEmail(this.email.trim()))return this.mensaje="El correo electr\xF3nico ingresado tiene formato incorrecto",void this.msg.warning();e.email=this.email.trim().toLowerCase()}e.active=this.active_status;let o=null,d=_("message_dflt_43");this.save?o=this.service.callServicesHttp("propietario-post",this.lineSelected.id,e):(d=_("message_dflt_44"),o=this.service.callServicesHttp("propietario-put",this.business_id+"?id="+this.id,e)),o.subscribe(e=>{this.procesarRespuestaDone(e)},e=>{this.mensaje=this.service.processError(e,d),this.msg.error()})},e.PropietarioCreateComponent.prototype.procesarRespuestaDone=function(e){let t=_("message_dflt_43");t=this.save?_("message_dflt_43"):_("message_dflt_44"),null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.mensaje=this.save?capitalizeOnly(_("success32")):capitalizeOnly(_("success33")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.PropietarioCreateComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PropietarioReportComponent=ng.core.Component({selector:"propietario-report",templateUrl:"views/propietario-report.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.PropietarioReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listStatus=[{value:null,name:"Todos"},{value:"ACTIVE",name:"Activo"},{value:"INACTIVE",name:"Inactivo"}],this.status=null,this.nombre=null,this.doc=null,this.email=null,this.linea=null,this.checkRol()},e.PropietarioReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("VEHICLE-OWNER"!=t[r].name)"VEHICLE-OWNER"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.PropietarioReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.PropietarioReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-VEHICLE-OWNER"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.PropietarioReportComponent.prototype.clean=function(){this.nombre=null,this.doc=null,this.marca=null,this.rif=null,this.email=null,this.linea=null,this.status=null},e.PropietarioReportComponent.prototype.search=function(){this.jsonFilter={};var e=[],t=null;if(null==this.nombre||null==this.nombre||""==this.nombre||"null"==this.nombre||(null==t&&(t={}),t.name="*"+this.nombre.trim()+"*"),null==this.doc||null==this.doc||""==this.doc||"null"==this.doc||(null==t&&(t={}),t.id_doc="*"+this.doc.trim()+"*"),null==this.email||null==this.email||""==this.email||"null"==this.email||(null==t&&(t={}),t.email="*"+this.email.trim()+"*"),null==this.linea||null==this.linea||""==this.linea||(null==t&&(t={}),t.line_name="*"+this.linea.trim()+"*"),null==this.status||null==this.status||""==this.status||"null"==this.status||(null==t&&(t={}),t.active="ACTIVE"==this.status),null!=t){e={entity:t,level:"AND"};let n=[e];this.jsonFilter.entities=n}this.jsonFilter.sort={"info.created_at":"desc"},this.callServices(1,"&offset=0&limit="+this.detallePorPagina)},e.PropietarioReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.PropietarioReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.PropietarioReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.PropietarioReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.PropietarioReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.PropietarioReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.PropietarioReportComponent.prototype.callServices=function(e,t){this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let n="?type=PAGINATE"+t,i=capitalizeOnly(_("message_dflt_4")),r=this.service.callServicesHttp("propietario-report",n,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})},e.PropietarioReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.PropietarioReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.PropietarioReportComponent.prototype.formattedData=function(e){return null==e||null==e||""==e?null:(e.actions=[],null!=this.checkAction("VEHICLE-OWNER-DELETE")&&e.actions.push(this.checkAction("VEHICLE-OWNER-DELETE")),null!=this.checkAction("UPDATE-VEHICLE-OWNER")&&e.actions.push(this.checkAction("UPDATE-VEHICLE-OWNER")),null!=this.checkAction("VIEW-VEHICLE-OWNER")&&e.actions.push(this.checkAction("VIEW-VEHICLE-OWNER")),e.hasOwnProperty("active")&&(e.active?(e.formatted_status="ACTIVO",null!=this.checkAction("VEHICLE-OWNER-INACTIVE")&&e.actions.push(this.checkAction("VEHICLE-OWNER-INACTIVE"))):(e.formatted_status="INACTIVO",null!=this.checkAction("VEHICLE-OWNER-ACTIVE")&&e.actions.push(this.checkAction("VEHICLE-OWNER-ACTIVE")))),e)},e.PropietarioReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.PropietarioReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"VEHICLE-OWNER-DELETE":$("#modalDeletePropietario").modal("show");break;case"VIEW-VEHICLE-OWNER":this.router.navigate(["/propietario-view"],{queryParams:{id:e.id}});break;case"UPDATE-VEHICLE-OWNER":this.router.navigate(["/propietario-update"],{queryParams:{id:e.id,line_id:e.line_id,business_id:e.business_id}});break;case"VEHICLE-OWNER-ACTIVE":$("#modalActivatePropietario").modal("show");break;case"VEHICLE-OWNER-INACTIVE":$("#modalInactivatePropietario").modal("show");break;default:}},e.PropietarioReportComponent.prototype.deleteData=function(){if($("#modalDeletePropietario").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning42")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?id="+this.dataSelected.id;let t=_("message_dflt_39"),n=this.service.callServicesHttp("propietario-delete",e,null);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.PropietarioReportComponent.prototype.activeData=function(){if($("#modalActivatePropietario").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning42")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?id="+this.dataSelected.id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!0}catch(e){}let n=_("message_dflt_40"),i=this.service.callServicesHttp("propietario-put",e,t);i.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.PropietarioReportComponent.prototype.inactiveData=function(){if($("#modalInactivatePropietario").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning42")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("id")&&null!=this.dataSelected.id&&null!=this.dataSelected.id&&""!=this.dataSelected.id){var e=this.dataSelected.business_id+"?id="+this.dataSelected.id,t={};try{t=JSON.stringify(this.dataSelected),t=JSON.parse(t),t.hasOwnProperty("info")&&delete t.info,t.hasOwnProperty("formatted_status")&&delete t.formatted_status,t.hasOwnProperty("actions")&&delete t.actions,t.active=!1}catch(e){}let n=_("message_dflt_41"),i=this.service.callServicesHttp("propietario-put",e,t);i.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.PropietarioReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_39");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success29")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.PropietarioReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_40");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id&&this.listRegister[n].line_id==e.line_id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success30"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.PropietarioReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_41");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("id")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].id==e.id&&this.listRegister[n].line_id==e.line_id){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success31"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.PropietarioReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.PropietarioViewComponent=ng.core.Component({selector:"propietario-view",templateUrl:"views/propietario-view.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.PropietarioViewComponent.prototype.ngOnInit=function(){this.title=capitalizeOnly(_("title5")),this.title2=capitalizeOnly(_("title6")),this.id=null,this.nombre=null,this.id_doc=null,this.email=null,this.phone=null,this.linea=null,this.cars_count=0,this.cars=[],this.status=null,this.checkRol()},e.PropietarioViewComponent.prototype.checkRol=function(){this.getData()},e.PropietarioViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&this.active.queryParams._value.hasOwnProperty("id")&&(this.id=this.active.queryParams._value.id,this.getService())},e.PropietarioViewComponent.prototype.getService=function(){var e="&id="+this.id;let t=this.service.callServicesHttp("propietario-get",e,null);this.procesarRespuestaGET(t)},e.PropietarioViewComponent.prototype.procesarRespuestaGET=function(e){let t=_("message_dflt_42");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?this.formattedData(e):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.PropietarioViewComponent.prototype.formattedData=function(e){if(e.hasOwnProperty("business_name")&&null!=e.business_name&&null!=e.business_name&&""!=e.business_name&&(this.nombre=e.business_name),e.hasOwnProperty("id_doc")&&null!=e.id_doc&&null!=e.id_doc&&""!=e.id_doc&&(this.id_doc=e.id_doc),e.hasOwnProperty("phone_deflt")&&null!=e.phone_deflt&&null!=e.phone_deflt&&""!=e.phone_deflt&&(this.phone=e.phone_deflt),e.hasOwnProperty("email")&&null!=e.email_deflt&&null!=e.email_deflt&&""!=e.email_deflt&&(this.email=e.email_deflt),e.hasOwnProperty("line")&&null!=e.line&&null!=e.line&&""!=e.line&&(this.linea=e.line),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(this.status=_(e.status).toUpperCase()),e.hasOwnProperty("info")&&null!=e.info&&null!=e.info&&""!=e.info&&(e.info.hasOwnProperty("created_by_email")&&null!=e.info.created_by_email&&null!=e.info.created_by_email&&""!=e.info.created_by_email&&(this.creado_por=e.info.created_by_email),e.info.hasOwnProperty("created_at")&&null!=e.info.created_at&&null!=e.info.created_at&&""!=e.info.created_at&&(this.creado_el=formattingDate(e.info.created_at)),e.info.hasOwnProperty("updated_by_email")&&null!=e.info.updated_by_email&&null!=e.info.updated_by_email&&""!=e.info.updated_by_email&&(this.actualizado_por=e.info.updated_by_email),e.info.hasOwnProperty("updated_at")&&null!=e.info.updated_at&&null!=e.info.updated_at&&""!=e.info.updated_at&&(this.actualizado_el=formattingDate(e.info.updated_at))),e.hasOwnProperty("cars")&&null!=e.cars&&null!=e.cars&&""!=e.cars&&0!=e.cars.length){this.cars=[];for(var t=0;t<e.cars.length;t++)null!=e.cars[t]&&(e.cars[t].hasOwnProperty("status")&&null!=e.cars[t].status&&null!=e.cars[t].status&&""!=e.cars[t].status&&(e.cars[t].formatted_status=_(e.cars[t].status).toUpperCase()),this.cars.push(e.cars[t]))}},e.PropietarioViewComponent.prototype.print=function(){window.print()},e.PropietarioViewComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.SalesReportComponent=ng.core.Component({selector:"sales-report",templateUrl:"views/report-sales.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.SalesReportComponent.prototype.ngOnInit=function(){this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=100,this.pageSelected=1,this.listRegister=[],this.listMetodoPago=[{value:null,name:"Todos"},{value:"POS",name:"Punto de venta"},{value:"CASH",name:"Efectivo"},{value:"MOBILE",name:"Pago M\xF3vil"},{value:"TRANSFERENCE",name:"Transferencia"}],this.status=null,this.nombre=null,this.codigo=null,this.checkRol()},e.SalesReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("SALES-REPORT"!=t[r].name)"SALES-REPORT"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.SalesReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.SalesReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.SalesReportComponent.prototype.search=function(){return(this.jsonFilter={},null==this.init||null==this.init||""==this.init||null==this.end||null==this.end||""==this.end)?(this.mensaje="Debe ingresar el periodo a buscar",void this.msg.warning()):void(this.jsonFilter.lte=this.end+"T23:59:59.000Z",this.jsonFilter.gte=this.init+"T00:00:00.000Z",this.jsonFilter.status=["PAID"],this.callServices(1,"&limit="+this.detallePorPagina))},e.SalesReportComponent.prototype.clean=function(){this.init=null,this.end=null,this.linea=null,this.destino=null,this.metodo=null},e.SalesReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.SalesReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.SalesReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.SalesReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.SalesReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.SalesReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.SalesReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="?type=PAGINATE"+t,r=this.service.callServicesHttp("sales-report-acumulate",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.SalesReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("global_sum")&&null!=e.global_sum&&null!=e.global_sum&&""!=e.global_sum)try{this.monto_total=amountFormattingObject(100*e.global_sum.toFixed()),this.monto_total=this.monto_total.integerPart+","+this.monto_total.decimalPart+" Bs",this.porcentaje_total=amountFormattingObject(12*e.global_sum.toFixed()),this.porcentaje_total=this.porcentaje_total.integerPart+","+this.porcentaje_total.decimalPart+" Bs"}catch(e){}if(e.hasOwnProperty("lines")){var n={};this.listRegister=[];for(var r=0;r<e.lines.length;r++)n=this.formattedData(e.lines[r]),null!=n&&this.listRegister.push(n)}else this.listRegister=[]}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.SalesReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.SalesReportComponent.prototype.formattedData=function(e){if(null==e||e==null||""==e)return null;if(e.hasOwnProperty("payment_methods")&&null!=e.payment_methods&&0!=e.payment_methods.length)for(var t=0;t<e.payment_methods.length;t++)if(null!=e.payment_methods[t]){if(null!=e.payment_methods[t].sum&&null!=e.payment_methods[t].sum&&""!=e.payment_methods[t].sum)try{e.payment_methods[t].formatted_amount=amountFormattingObject(100*e.payment_methods[t].sum.toFixed()),e.payment_methods[t].formatted_amount=e.payment_methods[t].formatted_amount.integerPart+","+e.payment_methods[t].formatted_amount.decimalPart,e.payment_methods[t].formatted_amount+=" Bs"}catch(e){}e.payment_methods[t].hasOwnProperty("payment_method")&&null!=e.payment_methods[t].payment_method&&null!=e.payment_methods[t].payment_method&&""!=e.payment_methods[t].payment_method&&0!=e.payment_methods[t].payment_method.length&&(e.payment_methods[t].formatted_payment=_(e.payment_methods[t].payment_method).toUpperCase())}if(e.hasOwnProperty("sum")&&null!=e.sum&&null!=e.sum&&""!=e.sum&&0!=e.sum){try{e.formatted_sum=amountFormattingObject(100*e.sum.toFixed()),e.formatted_sum=e.formatted_sum.integerPart+","+e.formatted_sum.decimalPart+" Bs"}catch(e){}try{e.formatted_porcentaje=amountFormattingObject(12*e.sum.toFixed()),e.formatted_porcentaje=e.formatted_porcentaje.integerPart+","+e.formatted_porcentaje.decimalPart+" Bs"}catch(e){console.log("ew",e)}}return e},e.SalesReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.SalesReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"STOP-ACTIVE":$("#modalActivateParada").modal("show");break;case"STOP-INACTIVE":$("#modalInactivateParada").modal("show");break;case"STOP-DELETE":$("#modalDeleteParada").modal("show");break;default:}},e.SalesReportComponent.prototype.deleteData=function(){if($("#modalDeleteParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code;let t=_("message_dflt_30"),n=this.service.callServicesHttp("parada-delete",e);n.subscribe(e=>{this.procesarRespuestaDelete(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})}},e.SalesReportComponent.prototype.activeData=function(){if($("#modalActivateParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code,t={name:this.dataSelected.name,active:!0};let n=_("message_dflt_31"),i=this.service.callServicesHttp("parada-put",e,t);i.subscribe(e=>{this.procesarRespuestaActivar(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.SalesReportComponent.prototype.inactiveData=function(){if($("#modalInactivateParada").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=capitalizeOnly(_("warning30")),void this.msg.warning();if(this.dataSelected.hasOwnProperty("code")&&null!=this.dataSelected.code&&null!=this.dataSelected.code&&""!=this.dataSelected.code){var e="&code="+this.dataSelected.code,t={name:this.dataSelected.name,active:!1};let n=this.service.callServicesHttp("parada-put",e,t),i=_("message_dflt_32");n.subscribe(e=>{this.procesarRespuestaDesactivar(e)},e=>{this.mensaje=this.service.processError(e,i),this.msg.error()})}},e.SalesReportComponent.prototype.procesarRespuestaDelete=function(e){let t=_("message_dflt_30");null==e||e==null||""==e?(this.mensaje=t,this.msg.error()):200==e.status_http?(this.ngOnInit(),this.mensaje=capitalizeOnly(_("success20")),this.msg.info()):(this.mensaje=this.service.processMessageError(e,t),this.msg.error())},e.SalesReportComponent.prototype.procesarRespuestaActivar=function(e){let t=_("message_dflt_31");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].code==e.code){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success21"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.SalesReportComponent.prototype.procesarRespuestaDesactivar=function(e){let t=_("message_dflt_32");if(null==e||e==null||""==e)this.mensaje=t,this.msg.error();else if(200==e.status_http){if(e.hasOwnProperty("code")&&null!=this.listRegister&&0!=this.listRegister.length)for(var n=0;n<this.listRegister.length;n++)if(null!=this.listRegister[n]&&this.listRegister[n].code==e.code){this.listRegister[n]=this.formattedData(e);break}this.mensaje=_("success22"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,t),this.msg.error()},e.SalesReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.SalesLineReportComponent=ng.core.Component({selector:"sales-report-line",templateUrl:"views/report-sales-line-v1.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.SalesLineReportComponent.prototype.ngOnInit=function(){this.rol_seleccionado=null,this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=1e3,this.pageSelected=1,this.listRegister=[],this.listMetodoPago=[{value:null,name:"Todos"},{value:"POS",name:"Punto de venta"},{value:"CASH",name:"Efectivo"},{value:"MOBILE",name:"Pago M\xF3vil"},{value:"TRANSFERENCE",name:"Transferencia"}],this.status=null,this.nombre=null,this.codigo=null,this.checkRol()},e.SalesLineReportComponent.prototype.keyPressNumber=function(e){return keypressNumbersInteger(e)},e.SalesLineReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"SALES-LINE"==t[n].name){e=!0;break}e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.SalesLineReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.SalesLineReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.SalesLineReportComponent.prototype.search=function(){if(this.jsonFilter={},null==this.init||null==this.init||""==this.init)return this.mensaje="Debe ingresar el periodo del viaje a buscar",void this.msg.warning();if(this.jsonFilter.trip_departure_date={},this.jsonFilter.trip_departure_date.lte=this.end+"T23:59:59.000Z",this.jsonFilter.trip_departure_date.gte=this.init+"T00:00:00.000Z",this.jsonFilter.trip_departure_date.time_zone=getTimeZone(),(null==this.destino||null==this.destino||""==this.destino||(this.jsonFilter.destination_stop=this.destino.trim()),null==this.pasajero||null==this.pasajero||""==this.pasajero||(this.jsonFilter.passenger=this.pasajero.trim()),this.jsonFilter.reservation_status=["PAID"],null!=this.viaje&&null!=this.viaje&&""!=this.viaje)){if(!utils_keyNumber(this.viaje.trim()))return this.mensaje="El n\xFAmero de viaje tiene un formato incorrecto s\xF3lo se aceptan n\xFAmeros",void this.msg.warning();try{this.jsonFilter.trip_sequence={},this.jsonFilter.trip_sequence.lte=parseInt(this.viaje.trim()),this.jsonFilter.trip_sequence.gte=parseInt(this.viaje.trim())}catch(e){}}this.callServices(1,"&limit="+this.detallePorPagina)},e.SalesLineReportComponent.prototype.clean=function(){this.init=null,this.end=null,this.linea=null,this.destino=null,this.metodo=null,this.viaje=null,this.pasajero=null},e.SalesLineReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.SalesLineReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.SalesLineReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.SalesLineReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.SalesLineReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.SalesLineReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.SalesLineReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="&type=PAGINATE"+t,r=this.service.callServicesHttp("passenger-report-line",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.SalesLineReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.SalesLineReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.SalesLineReportComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(e.hasOwnProperty("trip_departure_date")&&null!=e.trip_departure_date&&null!=e.trip_departure_date&&""!=e.trip_departure_date)try{e.formatted_trip_departure_date=e.trip_departure_date.replace("T"," ")}catch(e){}if(e.hasOwnProperty("type")&&null!=e.type&&null!=e.type&&""!=e.type&&(e.formatted_type=_(e.type).toUpperCase()),e.hasOwnProperty("currency_exchange_rates")&&null!=e.currency_exchange_rates&&0!=e.currency_exchange_rates.length)for(var t=0;t<e.currency_exchange_rates.length;t++)if(null!=e.currency_exchange_rates[t]&&e.currency_exchange_rates[t].hasOwnProperty("currency")&&"USD"==e.currency_exchange_rates[t].currency&&e.currency_exchange_rates[t].hasOwnProperty("rate")){try{e.tasa=amountFormattingObject(100*e.currency_exchange_rates[t].rate),e.tasa=e.tasa.integerPart+","+e.tasa.decimalPart+" Bs"}catch(e){}break}if(e.hasOwnProperty("amount_to_pay_by_currency")&&null!=e.amount_to_pay_by_currency&&null!=e.amount_to_pay_by_currency&&""!=e.amount_to_pay_by_currency){if(e.amount_to_pay_by_currency.hasOwnProperty("USD")&&null!=e.amount_to_pay_by_currency.USD&&null!=e.amount_to_pay_by_currency.USD&&""!=e.amount_to_pay_by_currency.USD)try{e.formatted_dolars=amountFormattingObject(100*e.amount_to_pay_by_currency.USD),e.formatted_dolars=e.formatted_dolars.integerPart+","+e.formatted_dolars.decimalPart+" $"}catch(e){}if(e.amount_to_pay_by_currency.hasOwnProperty("VES")&&null!=e.amount_to_pay_by_currency.VES&&null!=e.amount_to_pay_by_currency.VES&&""!=e.amount_to_pay_by_currency.VES)try{e.formatted_bs=amountFormattingObject(100*parseFloat(e.amount_to_pay_by_currency.VES.toFixed(2))),e.formatted_bs=e.formatted_bs.integerPart+","+e.formatted_bs.decimalPart+" Bs"}catch(e){}}return e},e.SalesLineReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.SalesLineReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ReservationReportComponent=ng.core.Component({selector:"reservation-report",templateUrl:"views/reservation-report-v5.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.ReservationReportComponent.prototype.ngOnInit=function(){this.title="Reservaciones",this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listCanales=[{value:null,name:"Todos"},{value:"WEB",name:"Web"},{value:"TAQUILLA",name:"Taquilla"}],this.listStatus=[{value:null,name:"Todos"},{value:"PAID",name:"Pagada"},{value:"PENDING_VALIDATION",name:"Pendiente por validaci\xF3n"},{value:"PENDING_PAYMENT",name:"Pendiente por pago"},{value:"CANCELED",name:"Cancelada"}],this.status=null,this.canal=null,this.nombre=null,this.codigo=null;try{var e=document.getElementsByClassName("modal-backdrop")[0];if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}try{var e=document.getElementById("sidenav-overlay");if(null!=e){var t=e.parentNode;t.removeChild(e)}}catch(e){}this.checkRol()},e.ReservationReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("RESERVATION-LINE"!=t[r].name)"RESERVATION-LINE"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ReservationReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.ReservationReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"NEW-SALES"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.ReservationReportComponent.prototype.search=function(){this.jsonFilter={},null==this.status||this.status==null||""==this.status||"null"==this.status||(this.jsonFilter.status=[this.status]),null==this.init||this.init==null||""==this.init||null==this.end||this.end==null||""==this.end||(this.jsonFilter.trip_departure_date={},this.jsonFilter.trip_departure_date.lte=this.end+"T23:59:59.000Z",this.jsonFilter.trip_departure_date.gte=this.init+"T00:00:00.000Z",this.jsonFilter.trip_departure_date.time_zone=getTimeZone()),null==this.nro||this.nro==null||""==this.nro||"null"==this.nro||(this.jsonFilter.sequence={},this.jsonFilter.sequence.lte=parseInt(this.nro),this.jsonFilter.sequence.gte=parseInt(this.nro)),null==this.cliente||this.cliente==null||""==this.cliente||(this.jsonFilter.passenger=this.cliente.trim()),this.callServices(1,"&limit="+this.detallePorPagina)},e.ReservationReportComponent.prototype.clean=function(){this.init=null,this.end=null,this.canal=null,this.status=null,this.cliente=null,this.nro=null},e.ReservationReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ReservationReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ReservationReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ReservationReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ReservationReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ReservationReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ReservationReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="&type=PAGINATE"+t,r=this.service.callServicesHttp("reservation-report-line",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.ReservationReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ReservationReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.ReservationReportComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(e.hasOwnProperty("passengers")&&null!=e.passengers&&0!=e.passengers.length){e.asientos=[];for(var t={},n=0;n<e.passengers.length;n++)null!=e.passengers[n]&&(t={},t=e.passengers[n],"INFANT"!=t.type&&e.asientos.push(t),e.passengers[n].hasOwnProperty("fare_currency")&&(e.moneda=_(e.passengers[n].fare_currency)),(null==e.parada||null==e.parada)&&e.passengers[n].hasOwnProperty("destination_stop_code")&&(e.parada=e.passengers[n].destination_stop_code,e.passengers[n].hasOwnProperty("destination_stop_name")&&(e.parada=e.parada+" - "+e.passengers[n].destination_stop_name)))}if(e.hasOwnProperty("total")&&null!=e.total&&null!=e.total&&""!=e.total){if(e.hasOwnProperty("rates")&&null!=e.rates&&null!=e.rates&&""!=e.rates&&e.rates.hasOwnProperty("USD")&&null!=e.rates.USD&&null!=e.rates.USD&&""!=e.rates.USD)try{e.total_bs=(e.total*e.rates.USD).toFixed(2),e.total_formatted_bs=amountFormattingObject(100*e.total_bs),e.total_formatted_bs=e.total_formatted_bs.integerPart+","+e.total_formatted_bs.decimalPart+" Bs",e.formatted_tasa_cambio=amountFormattingObject(100*e.rates.USD),e.formatted_tasa_cambio=e.formatted_tasa_cambio.integerPart+","+e.formatted_tasa_cambio.decimalPart+" Bs"}catch(e){}try{e.total=e.total,e.total_formatted=amountFormattingObject(100*e.total),e.total_formatted=e.total_formatted.integerPart+","+e.total_formatted.decimalPart,null!=e.moneda&&(e.total_formatted=e.total_formatted+" "+e.moneda)}catch(e){}}if(e.hasOwnProperty("trip_departure_date")&&null!=e.trip_departure_date&&null!=e.trip_departure_date&&""!=e.trip_departure_date){e.date=formattingDate(e.trip_departure_date);try{e.date=e.date.split(" "),e.schedule=e.date[1],e.date=e.date[0]}catch(e){}}if(e.hasOwnProperty("payments")){if(e.metodo=null,null!=e.payments&&0!=e.payments.length)try{e.metodo=e.payments[0]}catch(t){e.metodo=null}null!=e.metodo&&(e.metodo.hasOwnProperty("payment_method")&&null!=e.metodo.payment_method&&null!=e.metodo.payment_method&&""!=e.metodo.payment_method&&(e.formatted_method=_(e.metodo.payment_method).toUpperCase()),e.metodo.hasOwnProperty("collector_bank")&&null!=e.metodo.collector_bank&&null!=e.metodo.collector_bank&&""!=e.metodo.collector_bank&&(e.banco=returnBankSelected(e.metodo.collector_bank)),e.metodo.hasOwnProperty("payer_reference")&&null!=e.metodo.payer_reference&&null!=e.metodo.payer_reference&&""!=e.metodo.payer_reference&&(e.referencia=e.metodo.payer_reference))}return e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase()),e.actions=[],null!=this.checkAction("RESERVATION-LINE-VIEW")&&e.actions.push(this.checkAction("RESERVATION-LINE-VIEW")),"PENDING_VALIDATION"==e.status?(null!=this.checkAction("AUTHORIZED-PAYMENT")&&e.actions.push(this.checkAction("AUTHORIZED-PAYMENT")),null!=this.checkAction("CANCEL-RESERVATION")&&e.actions.push(this.checkAction("CANCEL-RESERVATION")),null!=this.checkAction("ADD-PAYMENT")&&e.actions.push(this.checkAction("ADD-PAYMENT"))):"PENDING_PAYMENT"==e.status&&(null!=this.checkAction("ADD-PAYMENT")&&e.actions.push(this.checkAction("ADD-PAYMENT")),null!=this.checkAction("DELETE-RESERVATION")&&e.actions.push(this.checkAction("DELETE-RESERVATION"))),e},e.ReservationReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.ReservationReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"RESERVATION-LINE-VIEW":this.router.navigate(["/reservation-view-line"],{queryParams:{id:e.id,itinerary_id:e.itinerary_id,trip_id:e.trip_id}});break;case"CANCEL-RESERVATION":$("#modalCancelarReservation").modal("show");break;case"AUTHORIZED-PAYMENT":$("#modalValidarReserva").modal("show");break;case"DELETE-RESERVATION":$("#modalEliminarReserva").modal("show");break;case"ADD-PAYMENT":this.router.navigate(["/add-payment"],{queryParams:{id:e.id,itinerary_id:e.itinerary_id,trip_id:e.trip_id}});break;default:}},e.ReservationReportComponent.prototype.reservar=function(){$("#modalValidarReserva").modal("hide");var e=[],t=[];try{if(null!=this.dataSelected){if(this.dataSelected.hasOwnProperty("passengers")&&null!=this.dataSelected.passengers&&0!=this.dataSelected.passengers.length)for(var n=0;n<this.dataSelected.passengers.length;n++)null!=this.dataSelected.passengers[n]&&this.dataSelected.passengers[n].hasOwnProperty("asiento")&&null!=this.dataSelected.passengers[n].asiento&&null!=this.dataSelected.passengers[n].asiento&&""!=this.dataSelected.passengers[n].asiento&&e.push(this.dataSelected.passengers[n].asiento);if(this.dataSelected.hasOwnProperty("payments")&&null!=this.dataSelected.payments&&0!=this.dataSelected.payments.length)for(var r={},n=0;n<this.dataSelected.payments.length;n++)null!=this.dataSelected.payments[n]&&(r={},this.dataSelected.payments[n].hasOwnProperty("payer_reference")&&null!=this.dataSelected.payments[n].payer_reference&&null!=this.dataSelected.payments[n].payer_reference&&""!=this.dataSelected.payments[n].payer_reference&&(r.collector_reference=this.dataSelected.payments[n].payer_reference,r.payment_id=this.dataSelected.payments[n].id,t.push(r)));let i=this.service.callServicesHttp("reservation-validate","&id="+this.dataSelected.id+"&itinerary_id="+this.dataSelected.itinerary_id+"&trip_id="+this.dataSelected.trip_id,{seats:e,payments:t}),s=_("message_dflt_73");i.subscribe(e=>{if(200==e.status_http){for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].id==e.id){this.listRegister[t]=this.formattedData(e);break}this.mensaje="Reserva validada con \xE9xito",this.msg.info()}else this.mensaje=this.service.processMessageError(e,s),this.msg.error()},e=>{this.mensaje=this.service.processError(e,s),this.msg.error()})}}catch(e){}},e.ReservationReportComponent.prototype.deleteData=function(){if($("#modalEliminarReserva").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=_("warning49"),void this.msg.warning();else{var e="&itinerary_id="+this.dataSelected.itinerary_id+"&trip_id="+this.dataSelected.trip_id+"&id="+this.dataSelected.id;let t=this.service.callServicesHttp("reservation-delete",e,null),n=_("message_dflt_75");t.subscribe(e=>{null==e||null==e||""==e?(this.mensaje=n,this.msg.warning()):200==e.status_http?(this.ngOnInit(),this.mensaje=_("success55"),this.msg.info()):(this.mensaje=this.service.processMessageError(e,n),this.msg.error())},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.ReservationReportComponent.prototype.cancelData=function(){if($("#modalCancelarReservation").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=_("warning49"),void this.msg.warning();else{var e="&itinerary_id="+this.dataSelected.itinerary_id+"&trip_id="+this.dataSelected.trip_id+"&id="+this.dataSelected.id;let t=this.service.callServicesHttp("reservation-cancel",e,null),n=_("message_dflt_80");t.subscribe(e=>{if(null==e||null==e||""==e)this.mensaje=n,this.msg.warning();else if(200==e.status_http){if(null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].id==e.id){this.listRegister[t]=this.formattedData(e);break}this.mensaje=_("success59"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,n),this.msg.error()},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.ReservationReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ReservationAllReportComponent=ng.core.Component({selector:"reservation-report-all",templateUrl:"views/reservation-report-all.html"}).Class({constructor:[e.MsgComponent,ng.router.Router,ng.router.ActivatedRoute,e.AppCallService,function(e,t,n,i){this.msg=e,this.mensaje="",this.router=t,this.active=n,this.service=i}]}),e.ReservationAllReportComponent.prototype.ngOnInit=function(){this.title="Reservaciones",this.dataSelected=null,this.pagingActual={},this.totalPage=1,this.detallePorPagina=10,this.pageSelected=1,this.listRegister=[],this.listCanales=[{value:null,name:"Todos"},{value:"WEB",name:"Web"},{value:"TAQUILLA",name:"Taquilla"}],this.listStatus=[{value:null,name:"Todos"},{value:"PAID",name:"Pagada"},{value:"PENDING_VALIDATION",name:"Pendiente por validaci\xF3n"},{value:"PENDING_PAYMENT",name:"Pendiente por pago"},{value:"CANCELED",name:"Cancelada"}],this.status=null,this.canal=null,this.nombre=null,this.codigo=null,this.checkRol()},e.ReservationAllReportComponent.prototype.checkRol=function(){this.actions=[],this.vistas=[];var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=null,r=0;r<t.length;r++)if(null!=t[r])if("RESERVATIONS"!=t[r].name)"RESERVATIONS"==t[r].tag&&(n=null,n=this.formattedView(t[r]),null!=n&&this.actions.push(n));else if(e=!0,t[r].hasOwnProperty("actions")&&null!=t[r].actions&&null!=t[r].actions&&""!=t[r].actions&&0!=t[r].actions.length)for(var s=0;s<t[r].actions.length;s++)null!=t[r].actions[s]&&(n=null,n=this.formattedActions(t[r].actions[s]),null!=n&&this.actions.push(n));e||this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ReservationAllReportComponent.prototype.formattedActions=function(e){return null==e||null==e||""==e?null:e},e.ReservationAllReportComponent.prototype.formattedView=function(e){return null==e||null==e||""==e?null:"CREATE-RESERVATION-LINE"==e.name?(this.mostrarCrear=!0,null):(e.hasOwnProperty("functionality")&&null!=e.functionality&&null!=e.functionality&&""!=e.functionality&&(e.functionality_detail=e.functionality),e.hasOwnProperty("url")&&null!=e.url&&null!=e.url&&""!=e.url&&(e.router=e.url,e.type="PATH"),e)},e.ReservationAllReportComponent.prototype.search=function(){this.jsonFilter={},null==this.status||this.status==null||""==this.status||"null"==this.status||(this.jsonFilter.status=[this.status]),null==this.init||this.init==null||""==this.init||null==this.end||this.end==null||""==this.end||(this.jsonFilter.trip_departure_date={},this.jsonFilter.trip_departure_date.lte=this.end+"T23:59:59.000Z",this.jsonFilter.trip_departure_date.gte=this.init+"T00:00:00.000Z",this.jsonFilter.trip_departure_date.time_zone=getTimeZone()),null==this.nro||this.nro==null||""==this.nro||"null"==this.nro||(this.jsonFilter.sequence={},this.jsonFilter.sequence.lte=parseInt(this.nro),this.jsonFilter.sequence.gte=parseInt(this.nro)),null==this.cliente||this.cliente==null||""==this.cliente||(this.jsonFilter.passenger=this.cliente.trim()),null==this.linea||this.linea==null||""==this.linea||(this.jsonFilter.line=this.linea.trim()),null==this.viaje||this.viaje==null||""==this.viaje||(this.jsonFilter.trip_sequence={},this.jsonFilter.trip_sequence.lte=parseInt(this.viaje.trim()),this.jsonFilter.trip_sequence.gte=parseInt(this.viaje.trim())),this.callServices(1,"&limit="+this.detallePorPagina)},e.ReservationAllReportComponent.prototype.clean=function(){this.init=null,this.end=null,this.canal=null,this.status=null,this.cliente=null,this.nro=null,this.linea=null,this.viaje=null},e.ReservationAllReportComponent.prototype.getCantidadSelected=function(e){null==e||e==null||""==e||(this.detallePorPagina=e.detalles,this.totalPage=e.pagina,null==this.listRegister||this.listRegister==null||0==this.listRegister.length?this.mensaje=capitalizeOnly(_("message_dflt_4")):this.callServices(1,"&limit="+this.detallePorPagina))},e.ReservationAllReportComponent.prototype.getValueFirst=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("first_page")&&null!=this.pagingActual.first_page&&this.pagingActual.first_page!=null&&""!=this.pagingActual.first_page&&this.callServices(e,this.pagingActual.first_page)},e.ReservationAllReportComponent.prototype.getValuePrevious=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("previous_page")&&null!=this.pagingActual.previous_page&&this.pagingActual.previous_page!=null&&""!=this.pagingActual.previous_page&&this.callServices(e,this.pagingActual.previous_page)},e.ReservationAllReportComponent.prototype.getValueLast=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("last_page")&&null!=this.pagingActual.last_page&&this.pagingActual.last_page!=null&&""!=this.pagingActual.last_page&&this.callServices(e,this.pagingActual.last_page)},e.ReservationAllReportComponent.prototype.getValueNext=function(e){this.listRegister=[],this.pagingActual.hasOwnProperty("next_page")&&null!=this.pagingActual.next_page&&this.pagingActual.next_page!=null&&""!=this.pagingActual.next_page&&this.callServices(e,this.pagingActual.next_page)},e.ReservationAllReportComponent.prototype.getValueChangeRecords=function(e){this.pageSelected=e},e.ReservationAllReportComponent.prototype.callServices=function(e,t){let n=_("message_dflt_4");this.pageSelected=e,null!=t&&0!=t.length&&"&"!=t.charAt(0)&&(t="&"+t);let i="&type=PAGINATE"+t,r=this.service.callServicesHttp("reservation-report",i,this.jsonFilter);r.subscribe(e=>{this.procesarRespuesta(e)},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})},e.ReservationAllReportComponent.prototype.procesarRespuesta=function(e){let t=capitalizeOnly(_("message_dflt_4"));if(null==e||e==null||""==e)this.listRegister=[],this.mensaje=t,this.msg.error();else if(200!=e.status_http)this.mensaje=this.service.processMessageError(e,t),this.msg.error();else if(!e.hasOwnProperty("count"))this.listRegister=[];else if(null==e.count||null==e.count||0==e.count)this.listRegister=[];else{this.pagingActual={},this.pagingActual.count=e.count;let t=Math.floor(this.pagingActual.count/this.detallePorPagina),i=this.pagingActual.count%this.detallePorPagina;if(this.totalPage=0==i?t:t+1,this.pagingActual.next_page=e.hasOwnProperty("next_page")?null==e.next_page||null==e.next_page||""==e.next_page?null:e.next_page:null,this.pagingActual.previous_page=e.hasOwnProperty("previous_page")?null==e.previous_page||null==e.previous_page||""==e.previous_page?null:e.previous_page:null,this.pagingActual.first_page=e.hasOwnProperty("first_page")?null==e.first_page||null==e.first_page||""==e.first_page?null:e.first_page:null,this.pagingActual.last_page=e.hasOwnProperty("last_page")?null==e.last_page||null==e.last_page||""==e.last_page?null:e.last_page:null,e.hasOwnProperty("results")){var n={};this.listRegister=[];for(var r=0;r<e.results.length;r++)n=this.formattedData(e.results[r]),null!=n&&this.listRegister.push(n);this.pagingActual.count=e.count}else this.listRegister=[]}},e.ReservationAllReportComponent.prototype.checkAction=function(e){if(null==this.actions||this.actions==null||0==this.actions.length)return null;for(var t=0;t<this.actions.length;t++)if(null!=this.actions[t]&&this.actions[t].name==e){return this.actions[t]}return null},e.ReservationAllReportComponent.prototype.formattedData=function(e){if(null==e||null==e||""==e)return null;if(e.hasOwnProperty("passengers")&&null!=e.passengers&&0!=e.passengers.length)for(var t=0;t<e.passengers.length;t++)null!=e.passengers[t]&&(e.passengers[t].hasOwnProperty("fare_currency")&&(e.moneda=_(e.passengers[t].fare_currency)),e.passengers[t].hasOwnProperty("destination_stop_code")&&(e.parada=e.passengers[t].destination_stop_code));if(e.hasOwnProperty("total")&&null!=e.total&&null!=e.total&&""!=e.total){if(e.hasOwnProperty("rates")&&null!=e.rates&&null!=e.rates&&""!=e.rates&&e.rates.hasOwnProperty("USD")&&null!=e.rates.USD&&null!=e.rates.USD&&""!=e.rates.USD)try{e.total_bs=(e.total*e.rates.USD).toFixed(2),e.total_formatted_bs=amountFormattingObject(100*e.total_bs),e.total_formatted_bs=e.total_formatted_bs.integerPart+","+e.total_formatted_bs.decimalPart+" Bs",e.formatted_tasa_cambio=amountFormattingObject(100*e.rates.USD),e.formatted_tasa_cambio=e.formatted_tasa_cambio.integerPart+","+e.formatted_tasa_cambio.decimalPart+" Bs"}catch(e){}try{e.total=e.total,e.total_formatted=amountFormattingObject(100*e.total),e.total_formatted=e.total_formatted.integerPart+","+e.total_formatted.decimalPart,null!=e.moneda&&(e.total_formatted=e.total_formatted+" "+e.moneda)}catch(e){}}if(e.hasOwnProperty("trip_departure_date")&&null!=e.trip_departure_date&&null!=e.trip_departure_date&&""!=e.trip_departure_date){e.date=formattingDate(e.trip_departure_date);try{e.date=e.date.split(" "),e.schedule=e.date[1],e.date=e.date[0]}catch(e){}}if(e.hasOwnProperty("payments")){if(e.metodo=null,null!=e.payments&&0!=e.payments.length)try{e.metodo=e.payments[0]}catch(t){e.metodo=null}null!=e.metodo&&(e.metodo.hasOwnProperty("payment_method")&&null!=e.metodo.payment_method&&null!=e.metodo.payment_method&&""!=e.metodo.payment_method&&(e.formatted_method=_(e.metodo.payment_method).toUpperCase()),e.metodo.hasOwnProperty("collector_bank")&&null!=e.metodo.collector_bank&&null!=e.metodo.collector_bank&&""!=e.metodo.collector_bank&&(e.banco=returnBankSelected(e.metodo.collector_bank)),e.metodo.hasOwnProperty("payer_reference")&&null!=e.metodo.payer_reference&&null!=e.metodo.payer_reference&&""!=e.metodo.payer_reference&&(e.referencia=e.metodo.payer_reference))}return e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(e.formatted_status=_(e.status).toUpperCase()),e.actions=[],null!=this.checkAction("RESERVATION-LINE-VIEW")&&e.actions.push(this.checkAction("RESERVATION-LINE-VIEW")),"PENDING_VALIDATION"==e.status?(null!=this.checkAction("AUTHORIZED-PAYMENT")&&e.actions.push(this.checkAction("AUTHORIZED-PAYMENT")),null!=this.checkAction("CANCEL-RESERVATION")&&e.actions.push(this.checkAction("CANCEL-RESERVATION")),null!=this.checkAction("ADD-PAYMENT")&&e.actions.push(this.checkAction("ADD-PAYMENT"))):"PENDING_PAYMENT"==e.status&&(null!=this.checkAction("ADD-PAYMENT")&&e.actions.push(this.checkAction("ADD-PAYMENT")),null!=this.checkAction("DELETE-RESERVATION")&&e.actions.push(this.checkAction("DELETE-RESERVATION"))),e},e.ReservationAllReportComponent.prototype.deselectedData=function(){this.dataSelected=null},e.ReservationAllReportComponent.prototype.selectedAction=function(e,t){if(this.dataSelected=e,t.hasOwnProperty("name"))switch(t.name){case"RESERVATION-LINE-VIEW":this.router.navigate(["/reservation-view-line"],{queryParams:{id:e.id,itinerary_id:e.itinerary_id,trip_id:e.trip_id}});break;case"CANCEL-RESERVATION":$("#modalCancelarReservation").modal("show");break;case"AUTHORIZED-PAYMENT":$("#modalValidarReserva").modal("show");break;case"DELETE-RESERVATION":$("#modalEliminarReserva").modal("show");break;case"ADD-PAYMENT":this.router.navigate(["/add-payment"],{queryParams:{id:e.id,itinerary_id:e.itinerary_id,trip_id:e.trip_id}});break;default:}},e.ReservationAllReportComponent.prototype.reservar=function(){$("#modalValidarReserva").modal("hide");var e=[],t=[];try{if(null!=this.dataSelected){if(this.dataSelected.hasOwnProperty("passengers")&&null!=this.dataSelected.passengers&&0!=this.dataSelected.passengers.length)for(var n=0;n<this.dataSelected.passengers.length;n++)null!=this.dataSelected.passengers[n]&&this.dataSelected.passengers[n].hasOwnProperty("asiento")&&null!=this.dataSelected.passengers[n].asiento&&null!=this.dataSelected.passengers[n].asiento&&""!=this.dataSelected.passengers[n].asiento&&e.push(this.dataSelected.passengers[n].asiento);if(this.dataSelected.hasOwnProperty("payments")&&null!=this.dataSelected.payments&&0!=this.dataSelected.payments.length)for(var r={},n=0;n<this.dataSelected.payments.length;n++)null!=this.dataSelected.payments[n]&&(r={},this.dataSelected.payments[n].hasOwnProperty("payer_reference")&&null!=this.dataSelected.payments[n].payer_reference&&null!=this.dataSelected.payments[n].payer_reference&&""!=this.dataSelected.payments[n].payer_reference&&(r.collector_reference=this.dataSelected.payments[n].payer_reference,r.payment_id=this.dataSelected.payments[n].id,t.push(r)));let i=this.service.callServicesHttp("reservation-validate","&id="+this.dataSelected.id+"&itinerary_id="+this.dataSelected.itinerary_id+"&trip_id="+this.dataSelected.trip_id,{seats:e,payments:t}),s=_("message_dflt_73");i.subscribe(e=>{if(200==e.status_http){for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].id==e.id){this.listRegister[t]=this.formattedData(e);break}this.mensaje="Reserva validada con \xE9xito",this.msg.info()}else this.mensaje=this.service.processMessageError(e,s),this.msg.error()},e=>{this.mensaje=this.service.processError(e,s),this.msg.error()})}}catch(e){}},e.ReservationAllReportComponent.prototype.deleteData=function(){if($("#modalEliminarReserva").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=_("warning49"),void this.msg.warning();else{var e="&itinerary_id="+this.dataSelected.itinerary_id+"&trip_id="+this.dataSelected.trip_id+"&id="+this.dataSelected.id;let t=this.service.callServicesHttp("reservation-delete",e,null),n=_("message_dflt_75");t.subscribe(e=>{null==e||null==e||""==e?(this.mensaje=n,this.msg.warning()):200==e.status_http?(this.ngOnInit(),this.mensaje=_("success55"),this.msg.info()):(this.mensaje=this.service.processMessageError(e,n),this.msg.error())},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.ReservationAllReportComponent.prototype.cancelData=function(){if($("#modalCancelarReservation").modal("hide"),null==this.dataSelected||null==this.dataSelected||""==this.dataSelected)return this.mensaje=_("warning49"),void this.msg.warning();else{var e="&itinerary_id="+this.dataSelected.itinerary_id+"&trip_id="+this.dataSelected.trip_id+"&id="+this.dataSelected.id;let t=this.service.callServicesHttp("reservation-cancel",e,null),n=_("message_dflt_80");t.subscribe(e=>{if(null==e||null==e||""==e)this.mensaje=n,this.msg.warning();else if(200==e.status_http){if(null!=this.listRegister&&0!=this.listRegister.length)for(var t=0;t<this.listRegister.length;t++)if(null!=this.listRegister[t]&&this.listRegister[t].id==e.id){this.listRegister[t]=this.formattedData(e);break}this.mensaje=_("success59"),this.msg.info()}else this.mensaje=this.service.processMessageError(e,n),this.msg.error()},e=>{this.mensaje=this.service.processError(e,n),this.msg.error()})}},e.ReservationAllReportComponent.prototype.back=function(){window.history.back()}})(window.app||(window.app={}));(function(e){e.ReservationViewComponent=ng.core.Component({selector:"reservation-view",templateUrl:"views/reservation-view.html"}).Class({constructor:[ng.router.ActivatedRoute,ng.router.Router,e.AppCallService,e.MsgComponent,function(e,t,n,i){this.active=e,this.router=t,this.service=n,this.msg=i}]}),e.ReservationViewComponent.prototype.ngOnInit=function(){this.title=_("title64"),this.listItems=[],this.checkRol()},e.ReservationViewComponent.prototype.checkRol=function(){var e=!1;if(!(null!=this.service.getRole()))this.router.navigate(["/not-user"]);else if(!this.service.getRole().hasOwnProperty("views"))this.router.navigate(["/not-user"]);else if(null!=this.service.getRole().views&&null!=this.service.getRole().views&&""!=this.service.getRole().views){for(var t=orderList(this.service.getRole().views),n=0;n<t.length;n++)if(null!=t[n]&&"RESERVATION-LINE-VIEW"==t[n].name){e=!0;break}e?this.getData():this.router.navigate(["/not-user"])}else this.router.navigate(["/not-user"])},e.ReservationViewComponent.prototype.getData=function(){this.active.hasOwnProperty("queryParams")&&null!=this.active.queryParams&&this.active.queryParams.hasOwnProperty("_value")&&null!=this.active.queryParams._value&&(this.active.queryParams._value.hasOwnProperty("id")&&(this.reservation_id=this.active.queryParams._value.id),this.active.queryParams._value.hasOwnProperty("itinerary_id")&&(this.itinerary_id=this.active.queryParams._value.itinerary_id),this.active.queryParams._value.hasOwnProperty("trip_id")&&(this.trip_id=this.active.queryParams._value.trip_id),this.getReservation())},e.ReservationViewComponent.prototype.getReservation=function(){let e=this.service.callServicesHttp("reservation-get-line","&id="+this.reservation_id+"&itinerary_id="+this.itinerary_id+"&trip_id="+this.trip_id,null),t=_("message_dflt_56");e.subscribe(e=>{this.formattedData(e)},e=>{this.mensaje=this.service.processError(e,t),this.msg.error()})},e.ReservationViewComponent.prototype.formattedData=function(e){if(this.parada=null,null!=e&&null!=e&&""!=e){if(e.hasOwnProperty("trip_id")&&null!=e.trip_id&&null!=e.trip_id&&""!=e.trip_id&&(this.trip_id=e.trip_id),e.hasOwnProperty("trip_departure_date")&&null!=e.trip_departure_date&&null!=e.trip_departure_date&&""!=e.trip_departure_date){this.fecha_salida=formattingDate(e.trip_departure_date);try{this.fecha_salida=this.fecha_salida.split(" "),this.hora=this.fecha_salida[1],this.fecha_salida=this.fecha_salida[0]}catch(e){}}if(e.hasOwnProperty("line_name")&&null!=e.line_name&&null!=e.line_name&&""!=e.line_name&&(this.line_name=e.line_name),e.hasOwnProperty("status")&&null!=e.status&&null!=e.status&&""!=e.status&&(this.status=_(e.status).toUpperCase()),e.hasOwnProperty("itinerary_id")&&null!=e.itinerary_id&&null!=e.itinerary_id&&""!=e.itinerary_id&&(this.itinerary_id=e.itinerary_id),e.hasOwnProperty("sequence")&&null!=e.sequence&&null!=e.sequence&&""!=e.sequence&&(this.sequence=e.sequence),e.hasOwnProperty("vehicle_type_name")&&null!=e.vehicle_type_name&&null!=e.vehicle_type_name&&""!=e.vehicle_type_name&&(this.vehicle_type_name=e.vehicle_type_name),e.hasOwnProperty("number_of_passengers")&&null!=e.number_of_passengers&&null!=e.number_of_passengers&&""!=e.number_of_passengers&&(this.number_of_passengers=e.number_of_passengers),this.listPayments=[],e.hasOwnProperty("payments")&&null!=e.payments&&0!=e.payments.length)for(var t={},n=0;n<e.payments.length;n++)null!=e.payments[n]&&(t={},t=e.payments[n],t.hasOwnProperty("collector_bank")&&null!=t.collector_bank&&null!=t.collector_bank&&""!=t.collector_bank&&(t.banco=returnBankSelected(t.collector_bank)),t.hasOwnProperty("payment_method")&&null!=t.payment_method&&null!=t.payment_method&&""!=t.payment_method&&(t.metodo=_(t.payment_method).toUpperCase()),t.hasOwnProperty("amount")&&null!=t.amount&&null!=t.amount&&""!=t.amount&&(t.formatted_amount=amountFormattingObject(100*t.amount),t.formatted_amount=t.formatted_amount.integerPart+","+t.formatted_amount.decimalPart,t.hasOwnProperty("currency")&&null!=t.currency&&null!=t.currency&&""!=t.currency&&(t.formatted_amount=t.formatted_amount+" "+_(t.currency))),"DELETED"!=t.status&&this.listPayments.push(t));if(e.hasOwnProperty("passengers")&&null!=e.passengers&&0!=e.passengers.length)for(var t={},n=0;n<e.passengers.length;n++)if(null!=e.passengers[n]){if(t={},(null==this.parada||""==this.parada)&&e.passengers[n].hasOwnProperty("destination_stop_code")&&null!=e.passengers[n].destination_stop_code&&null!=e.passengers[n].destination_stop_code&&""!=e.passengers[n].destination_stop_code&&(this.parada=e.passengers[n].destination_stop_code,e.passengers[n].hasOwnProperty("destination_stop_name")&&null!=e.passengers[n].destination_stop_name&&null!=e.passengers[n].destination_stop_name&&""!=e.passengers[n].destination_stop_name&&(this.parada=this.parada+" - "+e.passengers[n].destination_stop_name)),e.passengers[n].hasOwnProperty("name")&&null!=e.passengers[n].name&&null!=e.passengers[n].name&&""!=e.passengers[n].name&&(t.name=e.passengers[n].name),e.passengers[n].hasOwnProperty("type")&&null!=e.passengers[n].type&&null!=e.passengers[n].type&&""!=e.passengers[n].type&&(t.formatted_type=_(e.passengers[n].type).toUpperCase()),e.passengers[n].hasOwnProperty("id_doc")&&null!=e.passengers[n].id_doc&&null!=e.passengers[n].id_doc&&""!=e.passengers[n].id_doc&&(t.id_doc=e.passengers[n].id_doc),e.passengers[n].hasOwnProperty("fare_amount")&&null!=e.passengers[n].fare_amount&&null!=e.passengers[n].fare_amount&&""!=e.passengers[n].fare_amount)try{t.monto=amountFormattingObject(100*e.passengers[n].fare_amount),t.monto=t.monto.integerPart+","+t.monto.decimalPart,e.passengers[n].hasOwnProperty("fare_currency")&&(this.moneda=_(e.passengers[n].fare_currency),t.monto=t.monto+" "+_(e.passengers[n].fare_currency)),this.currency=e.passengers[n].fare_currency}catch(e){}this.listItems.push(t)}if(e.hasOwnProperty("total")&&null!=e.total&&null!=e.total&&""!=e.total){try{this.total=e.total,this.total_formatted=amountFormattingObject(100*e.total),this.total_formatted=this.total_formatted.integerPart+","+this.total_formatted.decimalPart,null!=this.moneda&&(this.total_formatted=this.total_formatted+" "+this.moneda)}catch(e){}if(e.hasOwnProperty("usd_exchange_rate")&&null!=e.usd_exchange_rate&&null!=e.usd_exchange_rate&&""!=e.usd_exchange_rate&&0!=e.usd_exchange_rate)try{this.total_bs=this.total*e.usd_exchange_rate,this.total_formatted_bs=amountFormattingObject(100*this.total_bs),this.total_formatted_bs=this.total_formatted_bs.integerPart+","+this.total_formatted_bs.decimalPart+" Bs",this.formatted_tasa_cambio=amountFormattingObject(100*e.usd_exchange_rate),this.formatted_tasa_cambio=this.formatted_tasa_cambio.integerPart+","+this.formatted_tasa_cambio.decimalPart+" Bs"}catch(e){}}}},e.ReservationViewComponent.prototype.back=function(){window.history.back()},e.ReservationViewComponent.prototype.print=function(){window.print()}})(window.app||(window.app={}));(function(e){e.AppComponent=ng.core.Component({selector:"boleteria-app",templateUrl:"app.component.html"}).Class({constructor:[function(){}]})})(window.app||(window.app={}));(function(e){e.routing=ng.router.RouterModule.forRoot([{path:"",redirectTo:"loading",pathMatch:"full"},{path:"menu",component:e.MenuComponent},{path:"loading",component:e.LoadingAppComponent},{path:"propietario-create",component:e.PropietarioCreateComponent},{path:"propietario-update",component:e.PropietarioCreateComponent},{path:"propietario-view",component:e.PropietarioViewComponent},{path:"propietario-report",component:e.PropietarioReportComponent},{path:"check-passenger",component:e.CheckPassengerComponent},{path:"reservation-report-line",component:e.ReservationReportComponent},{path:"reservation-report",component:e.ReservationAllReportComponent},{path:"reservation-view-line",component:e.ReservationViewComponent},{path:"parada-create",component:e.ParadaCreateComponent},{path:"parada-report",component:e.ParadaReportComponent},{path:"car-type-create",component:e.CarTypeCreateComponent},{path:"car-type-update",component:e.CarTypeCreateComponent},{path:"car-type-view",component:e.CarTypeViewComponent},{path:"car-type-report",component:e.CarTypeReportComponent},{path:"passenger-report",component:e.PassengerReportComponent},{path:"passenger-create",component:e.PassengerCreateComponent},{path:"passenger-update",component:e.PassengerCreateComponent},{path:"passenger-view",component:e.PassengerViewComponent},{path:"fare-create",component:e.FareCreateComponent},{path:"fare-update",component:e.FareCreateComponent},{path:"fare-report",component:e.FareReportComponent},{path:"driver-report",component:e.DriverReportComponent},{path:"driver-create",component:e.DriverCreateComponent},{path:"driver-update",component:e.DriverCreateComponent},{path:"check-trip",component:e.CheckTripComponent},{path:"currency-exchange-report",component:e.CurrencyExchangeReportComponent},{path:"currency-exchange-create",component:e.CurrencyExchangeCreateComponent},{path:"line-report",component:e.LineReportComponent},{path:"line-view",component:e.LineViewComponent},{path:"line-create",component:e.LineCreateComponent},{path:"line-update",component:e.LineCreateComponent},{path:"line-view-propietario",component:e.LineViewPropietarioComponent},{path:"line-view-car",component:e.LineViewCarComponent},{path:"car-report",component:e.CarReportComponent},{path:"car-create",component:e.CarCreateComponent},{path:"car-update",component:e.CarCreateComponent},{path:"car-view",component:e.CarViewComponent},{path:"route-report",component:e.RouteReportComponent},{path:"route-create",component:e.RouteCreateComponent},{path:"route-update",component:e.RouteCreateComponent},{path:"route-view",component:e.RouteViewComponent},{path:"schedule-report",component:e.ScheduleReportComponent},{path:"schedule-create",component:e.ScheduleCreateComponent},{path:"schedule-update",component:e.ScheduleCreateComponent},{path:"travel-report",component:e.TravelReportComponent},{path:"travel-report-line",component:e.TravelReportLineComponent},{path:"travel-create",component:e.TravelCreateComponent},{path:"travel-create-line",component:e.TravelCreateLineComponent},{path:"travel-update",component:e.TravelCreateComponent},{path:"travel-view",component:e.TravelViewComponent},{path:"travel-passengers",component:e.TripPassengerComponent},{path:"add-payment",component:e.PaymentAddComponent},{path:"add-payment-taquilla",component:e.PaymentAddComponent},{path:"sales-report",component:e.SalesReportComponent},{path:"new-sales-line",component:e.NewSalesComponent},{path:"general-report-sales",component:e.GeneralReportSalesComponent},{path:"sales-report-line",component:e.SalesLineReportComponent},{path:"guide-oper",component:e.GuideOperComponent},{path:"guide-super",component:e.GuideSuperComponent},{path:"guide-rec",component:e.GuideRecComponent},{path:"settings",component:e.SettingsComponent},{path:"not-user",component:e.NotUserComponent},{path:"fast-entry-line",component:e.FastEntryLine},{path:"fast-entry",component:e.FastEntryLine},{path:"**",component:e.MenuComponent}],{useHash:!0})})(window.app||(window.app={}));(function(e){e.AppModule=ng.core.NgModule({imports:[ng.platformBrowser.BrowserModule,ng.forms.FormsModule,ng.router.RouterModule,ng.http.HttpModule,e.routing],declarations:[e.MsgComponent,e.CustomTableComponent,e.LoadingServiceComponent,e.NavBarComponent,e.LoadingAppComponent,e.MenuComponent,e.NotUserComponent,e.NewSalesComponent,e.SalesLineReportComponent,e.CurrencyExchangeReportComponent,e.CurrencyExchangeCreateComponent,e.CheckPassengerComponent,e.TravelCreateLineComponent,e.TravelReportLineComponent,e.PaymentAddComponent,e.ScheduleReportComponent,e.ScheduleCreateComponent,e.ParadaReportComponent,e.ParadaCreateComponent,e.CarTypeReportComponent,e.CarTypeCreateComponent,e.CarTypeViewComponent,e.PropietarioCreateComponent,e.PropietarioViewComponent,e.PropietarioReportComponent,e.PassengerReportComponent,e.PassengerCreateComponent,e.PassengerViewComponent,e.FareReportComponent,e.FareCreateComponent,e.LineReportComponent,e.LineViewComponent,e.LineCreateComponent,e.LineViewPropietarioComponent,e.ReservationViewComponent,e.LineViewCarComponent,e.DriverReportComponent,e.DriverCreateComponent,e.CarReportComponent,e.CarCreateComponent,e.CarViewComponent,e.RouteReportComponent,e.RouteCreateComponent,e.RouteViewComponent,e.TravelReportComponent,e.TravelCreateComponent,e.TravelViewComponent,e.SettingsComponent,e.ReservationReportComponent,e.SalesReportComponent,e.TripPassengerComponent,e.SalesReportComponent,e.FastEntryLine,e.CheckTripComponent,e.ReservationAllReportComponent,e.GeneralReportSalesComponent,e.AppComponent,e.GuideOperComponent,e.GuideSuperComponent,e.GuideRecComponent],providers:[e.MsgComponent,e.AppCallService,e.LoadingServiceComponent],bootstrap:[e.AppComponent]}).Class({constructor:function(){}})})(window.app||(window.app={}));(function(e){document.addEventListener("DOMContentLoaded",function(){ng.core.enableProdMode(),ng.platformBrowserDynamic.platformBrowserDynamic().bootstrapModule(e.AppModule)})})(window.app||(window.app={}));